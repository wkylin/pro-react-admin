---
title: InteractiveBook
---

import { Meta, Canvas, Story, ArgTypes, Controls } from '@storybook/addon-docs/blocks'
import * as InteractiveBookStories from './InteractiveBook.stories'

<Meta of={InteractiveBookStories} />

# InteractiveBook

3D 交互式书籍组件，支持翻页动画、键盘导航和自定义内容。

## 组件特性

- 🎨 3D 翻页动画效果
- ⌨️ 完整的键盘导航支持（箭头键、Escape、Home、End）
- 📖 双面内容显示（正面内容 + 背面内容）
- � 页角海浪卷起翻页提示
- 🖱️ 拖拽翻页 & 点击翻页
- �🎯 空状态处理
- 🔄 页面变化回调
- 📱 响应式设计

## 组件预览

<Canvas>
  <Story of={InteractiveBookStories.Default} />
</Canvas>

## 页角翻页提示

鼠标悬停在页面的右下角或左下角时，页角会出现海浪卷起的动画效果，提示用户可以点击翻页。

<Canvas>
  <Story of={InteractiveBookStories.CornerCurlHint} />
</Canvas>

## 少量页面

当翻到最后一页（结束页）时，拖动手势自动禁用，鼠标恢复为普通箭头光标。

<Canvas>
  <Story of={InteractiveBookStories.FewPages} />
</Canvas>

## Props（可调参数）

<ArgTypes />

<Controls />

## 基本使用

### 简单使用

```tsx
import InteractiveBook from '@stateless/InteractiveBook'

const pages = [
  {
    pageNumber: 1,
    title: '第一章：简介',
    content: <div>这是第一页的内容</div>,
    backContent: <div>这是第一页的背面内容</div>,
  },
  // ... 更多页面
]

function Example() {
  return (
    <InteractiveBook
      coverImage="https://example.com/cover.jpg"
      bookTitle="我的书籍"
      bookAuthor="作者名"
      pages={pages}
      width={350}
      height={500}
    />
  )
}
```

### 带回调的使用

```tsx
import InteractiveBook from '@stateless/InteractiveBook'

function Example() {
  const handlePageChange = (pageIndex: number) => {
    console.log('当前页面索引:', pageIndex)
  }

  return (
    <InteractiveBook
      coverImage="https://example.com/cover.jpg"
      bookTitle="我的书籍"
      bookAuthor="作者名"
      pages={pages}
      onPageChange={handlePageChange}
      enableKeyboard={true}
    />
  )
}
```

## 页面数据结构

```tsx
interface BookPage {
  title?: string
  content: React.ReactNode
  backContent?: React.ReactNode
  pageNumber: number
}
```

## 键盘导航

组件支持以下键盘操作：

- `←` / `→`：前后翻页
- `Escape`：关闭书籍
- `Home`：回到封面
- `End`：跳到最后一页

## 交互方式

组件支持多种翻页交互方式：

| 交互方式 | 说明 |
|---------|------|
| 拖拽翻页 | 在页面上按住并左右拖拽，超过阈值后松手翻页 |
| 页角点击 | 鼠标悬停在页面右下角/左下角，出现卷起效果后点击翻页 |
| 导航栏按钮 | 底部导航栏的前后翻页按钮 |
| 键盘快捷键 | 方向键、Home、End、Escape |
| 封面点击/拖拽 | 点击或向左拖拽封面打开书籍 |

> **注意**：最后一页（结束页）禁用拖拽，鼠标光标恢复为普通箭头。

## 高级用法

### 自定义样式

组件使用 CSS Modules，可以通过以下方式定制样式：

```less
// 自定义样式文件
.my-book {
  .container {
    // 自定义容器样式
  }

  .emptyState {
    // 自定义空状态样式
  }
}
```

### 响应式设计

组件支持响应式尺寸设置：

```tsx
<InteractiveBook
  width="100%"
  height="auto"
  // 其他属性...
/>
```

## 注意事项

- 确保 `pages` 数组中的每个页面都有唯一的 `pageNumber`
- 封面图片建议使用合适的尺寸以获得最佳显示效果
- 组件内部使用 Framer Motion 进行动画，性能已优化
- 空页面数组会显示友好的空状态提示
