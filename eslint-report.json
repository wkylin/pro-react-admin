[{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\actions\\decrement\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\actions\\increment\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\actions\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\app-hooks\\proTabsContext\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used.","line":37,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":17},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `redirectTo`, but the source dependencies were [activeKey, panes]. Inferred different dependency than source.\n\n  39 |\n  40 |   const removeTab = useCallback(\n> 41 |     (targetKey, callbackFun = () => {}) => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 42 |       const delIndex = panes.findIndex((item) => item.key === targetKey)\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 43 |       const filterPanes = panes.filter((pane) => pane.key !== targetKey)\n     …\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 53 |       callbackFun()\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |     },\n     | ^^^^^^ Could not preserve existing manual memoization\n  55 |\n  56 |     [activeKey, panes]\n  57 |   )","line":41,"column":5,"nodeType":null,"endLine":54,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'redirectTo'. Either include it or remove the dependency array.","line":56,"column":5,"nodeType":"ArrayExpression","endLine":56,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [activeKey, panes, redirectTo]","fix":{"range":[1538,1556],"text":"[activeKey, panes, redirectTo]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useMemo, useCallback } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\r\nimport Home from '@src/pages/home'\r\n\r\nconst defaultValue = {\r\n  activeKey: '',\r\n  setActiveKey: () => {},\r\n  panes: [],\r\n  setPanes: () => {},\r\n  removeTab: () => {},\r\n}\r\n\r\nconst initialPanes = [\r\n  {\r\n    title: '首页',\r\n    i18nKey: 'home',\r\n    key: '/',\r\n    content: <Home />,\r\n    closable: false,\r\n    path: '/',\r\n  },\r\n]\r\n\r\nconst ProTabContext = createContext(defaultValue)\r\nconst useProTabContext = () => {\r\n  const context = useContext(ProTabContext)\r\n  if (context == undefined) {\r\n    throw new Error('useValue must be used within a ValueProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nconst ProTabProvider = ({ children }) => {\r\n  const [activeKey, setActiveKey] = useState('')\r\n  const [panes, setPanes] = useState(initialPanes)\r\n  const navigate = useNavigate()\r\n  const { redirectTo } = useSafeNavigate()\r\n\r\n  const removeTab = useCallback(\r\n    (targetKey, callbackFun = () => {}) => {\r\n      const delIndex = panes.findIndex((item) => item.key === targetKey)\r\n      const filterPanes = panes.filter((pane) => pane.key !== targetKey)\r\n      // 删除非当前/当前tab\r\n      if (targetKey !== activeKey) {\r\n        setPanes(filterPanes)\r\n      } else {\r\n        const nextPath = filterPanes[delIndex - 1].key\r\n        redirectTo(nextPath)\r\n        setActiveKey(nextPath)\r\n        setPanes(filterPanes)\r\n      }\r\n      callbackFun()\r\n    },\r\n\r\n    [activeKey, panes]\r\n  )\r\n\r\n  const providerValue = useMemo(\r\n    () => ({\r\n      activeKey,\r\n      setActiveKey,\r\n      panes,\r\n      setPanes,\r\n      removeTab,\r\n    }),\r\n    [activeKey, setActiveKey, panes, setPanes, removeTab]\r\n  )\r\n\r\n  return <ProTabContext.Provider value={providerValue}>{children}</ProTabContext.Provider>\r\n}\r\n\r\nexport { ProTabProvider, useProTabContext }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\app-hooks\\useMenuSearch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\app-hooks\\usePermission.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\app-hooks\\useSafeNavigate\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\GlobalBreakpointListener.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":29,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react'\nimport { Grid } from 'antd'\nimport { useStore } from '@/store'\n\nconst { useBreakpoint } = Grid\n\nconst GlobalBreakpointListener = () => {\n  const setScreens = useStore((s) => s.setScreens)\n  const setIsMobile = useStore((s) => s.setIsMobile)\n  const screens = useBreakpoint()\n\n  useEffect(() => {\n    // screens is an object like { xs: true, sm: true, md: false, ... }\n    if (typeof setScreens === 'function') setScreens(screens)\n    if (typeof setIsMobile === 'function') setIsMobile(!screens.md)\n\n    // add/remove global class on <html> to allow CSS class-based responsive rules\n    try {\n      const root = document.documentElement\n      if (root) {\n        if (!screens.md) {\n          root.classList.add('is-mobile')\n          root.classList.remove('is-desktop')\n        } else {\n          root.classList.add('is-desktop')\n          root.classList.remove('is-mobile')\n        }\n      }\n    } catch (err) {\n      // ignore in non-browser environments\n    }\n  }, [screens, setScreens, setIsMobile])\n\n  return null\n}\n\nexport default GlobalBreakpointListener\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\GlobalSearch\\index.tsx","messages":[{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `dragRef`, but the source dependencies were [isFullscreen, bounds, onStart]. Inferred different dependency than source.\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\GlobalSearch\\index.tsx:740:5\n  738 |\n  739 |   const modalRender = React.useCallback(\n> 740 |     (modal: React.ReactNode) => (\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 741 |       <DraggableModalRender\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 742 |         modal={modal}\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 743 |         isFullscreen={isFullscreen}\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 744 |         bounds={bounds}\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 745 |         dragRef={dragRef}\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 746 |         onStart={onStart}\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 747 |       />\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 748 |     ),\n      | ^^^^^^ Could not preserve existing manual memoization\n  749 |     [isFullscreen, bounds, onStart]\n  750 |   )\n  751 |","line":740,"column":5,"nodeType":null,"endLine":748,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has a missing dependency: 'dragRef'. Either include it or remove the dependency array.","line":749,"column":5,"nodeType":"ArrayExpression","endLine":749,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [isFullscreen, bounds, dragRef, onStart]","fix":{"range":[21726,21757],"text":"[isFullscreen, bounds, dragRef, onStart]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, KeyboardEvent } from 'react'\nimport { Modal, Input, Avatar, InputRef, theme } from 'antd'\nimport Draggable, { DraggableData, DraggableEvent } from 'react-draggable'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { useMenuSearch, MenuSearchResult } from '@src/app-hooks/useMenuSearch'\nimport {\n  SearchOutlined,\n  FullscreenOutlined,\n  FullscreenExitOutlined,\n  CloseOutlined,\n  EnterOutlined,\n  ArrowUpOutlined,\n  ArrowDownOutlined,\n} from '@ant-design/icons'\nimport { useProThemeContext } from '@src/theme/hooks'\n\ninterface GlobalSearchProps {\n  open: boolean\n  onClose: () => void\n  onNavigate?: (path: string) => void\n}\n\nconst RECENT_KEY = 'global_search_recent_v1'\n\ntype StoredRecent = {\n  key: string\n  label?: string\n  path?: string\n  i18nKey?: string\n  pinyin?: string\n}\n\nconst isDev = () => {\n  try {\n    return typeof process !== 'undefined' && process.env?.NODE_ENV !== 'production'\n  } catch {\n    return false\n  }\n}\n\nconst devWarn = (message: string, error?: unknown) => {\n  if (!isDev()) return\n  console.warn(message, error)\n}\n\nconst readRecentFromStorage = (): StoredRecent[] => {\n  try {\n    const raw = localStorage.getItem(RECENT_KEY)\n    if (!raw) return []\n    const parsed = JSON.parse(raw)\n    if (Array.isArray(parsed) && parsed.length > 0 && typeof parsed[0] === 'string') {\n      return parsed.map((k: string) => ({ key: k }))\n    }\n    if (Array.isArray(parsed)) return parsed as StoredRecent[]\n    return []\n  } catch (e) {\n    devWarn('[GlobalSearch] Failed to parse recent items from localStorage', e)\n    return []\n  }\n}\n\nconst persistRecentToStorage = (next: StoredRecent[]) => {\n  try {\n    localStorage.setItem(RECENT_KEY, JSON.stringify(next))\n  } catch (e) {\n    devWarn('[GlobalSearch] Failed to persist recent items to localStorage', e)\n  }\n}\n\nconst buildRecentEntries = (recentStored: StoredRecent[], allItems: MenuSearchResult[]): MenuSearchResult[] => {\n  return recentStored.map((s) => {\n    const found = allItems.find((a) => a.item.key === s.key)\n    if (found) return found\n    const fallbackItem: MenuSearchResult['item'] = {\n      key: s.key,\n      label: s.label || s.key,\n      path: s.path || s.key,\n      ...(s.i18nKey ? { i18nKey: s.i18nKey } : {}),\n      ...(s.pinyin ? { pinyin: s.pinyin } : {}),\n    }\n\n    return { item: fallbackItem }\n  })\n}\n\nconst renderEntryContent = (entry: MenuSearchResult, isDark: boolean) => {\n  const item = entry.item\n  const matches = entry.matches ?? []\n  const labelMatch = matches.find((m) => m.key === 'label')\n  const i18nMatch = matches.find((m) => m.key === 'i18nKey' || m.key === 'i18n')\n  const pinyinMatch = matches.find((m) => m.key === 'pinyin')\n\n  const labelEl = labelMatch ? highlightWithIndices(item.label, labelMatch.indices, isDark) : <>{item.label}</>\n\n  let subEl: React.ReactNode = null\n  if (!labelMatch) {\n    if (i18nMatch) {\n      subEl = (\n        <div\n          style={{\n            color: isDark ? '#888' : '#999',\n            fontSize: 12,\n            marginTop: 4,\n          }}\n        >\n          {highlightWithIndices(i18nMatch.value || String(item.i18nKey || ''), i18nMatch.indices, isDark)}\n        </div>\n      )\n    } else if (pinyinMatch) {\n      subEl = (\n        <div\n          style={{\n            color: isDark ? '#888' : '#999',\n            fontSize: 12,\n            marginTop: 4,\n          }}\n        >\n          {highlightWithIndices(pinyinMatch.value || item.pinyin || '', pinyinMatch.indices, isDark)}\n        </div>\n      )\n    }\n  } else if (i18nMatch) {\n    subEl = (\n      <div style={{ color: isDark ? '#888' : '#999', fontSize: 12, marginTop: 4 }}>\n        {highlightWithIndices(i18nMatch.value || String(item.i18nKey || ''), i18nMatch.indices, isDark)}\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\n      <div style={{ color: isDark ? '#eee' : '#333', fontWeight: 500 }}>{labelEl}</div>\n      {subEl}\n    </div>\n  )\n}\n\ntype DraggableModalRenderProps = {\n  modal: React.ReactNode\n  isFullscreen: boolean\n  bounds: { left: number; top: number; right: number; bottom: number }\n  dragRef: React.RefObject<HTMLDivElement | null>\n  onStart: (event: DraggableEvent, data: DraggableData) => void\n}\n\nconst DraggableModalRender: React.FC<DraggableModalRenderProps> = ({\n  modal,\n  isFullscreen,\n  bounds,\n  dragRef,\n  onStart,\n}) => (\n  <Draggable disabled={isFullscreen} bounds={bounds} handle=\".draggable-handle\" nodeRef={dragRef} onStart={onStart}>\n    <div ref={dragRef} style={{ pointerEvents: 'auto' }}>\n      <style>\n        {`\n          .fix-ant-modal .wui-ant-modal-container {\n            padding: 0 !important;\n            overflow: hidden;\n          }\n\n          .global-search-input {\n            /* className is applied to the affix wrapper in AntD, not the native input */\n          }\n\n          .global-search-input .ant-input,\n          .global-search-input input {\n            text-overflow: ellipsis;\n            overflow: hidden;\n            white-space: nowrap;\n          }\n\n          .global-search-input .ant-input:focus,\n          .global-search-input input:focus {\n            text-overflow: ellipsis;\n            overflow: hidden;\n            white-space: nowrap;\n          }\n\n          .global-search-input .ant-input::placeholder,\n          .global-search-input input::placeholder {\n            text-overflow: ellipsis;\n            overflow: hidden;\n            white-space: nowrap;\n          }\n        `}\n      </style>\n      {modal}\n    </div>\n  </Draggable>\n)\n\ntype SearchRowProps = {\n  entry: MenuSearchResult\n  idx: number\n  isActive: boolean\n  isDark: boolean\n  token: ReturnType<typeof theme.useToken>['token']\n  setActiveIndex: (idx: number) => void\n  onSelect: (entry: MenuSearchResult) => void\n}\n\nconst SearchRow: React.FC<SearchRowProps> = ({ entry, idx, isActive, isDark, token, setActiveIndex, onSelect }) => {\n  const item = entry.item\n\n  const activeBg = isDark ? '#111b26' : '#e6f7ff'\n  const rowBackground = isActive ? activeBg : 'transparent'\n\n  let avatarBg = isDark ? '#333' : '#f0f0f0'\n  if (isActive) avatarBg = token.colorPrimary\n\n  let avatarColor = isDark ? '#aaa' : '#666'\n  if (isActive) avatarColor = '#fff'\n\n  return (\n    <button\n      key={item.key}\n      type=\"button\"\n      onMouseEnter={() => setActiveIndex(idx)}\n      onFocus={() => setActiveIndex(idx)}\n      onClick={() => onSelect(entry)}\n      style={{\n        display: 'flex',\n        width: '100%',\n        textAlign: 'left',\n        alignItems: 'center',\n        padding: '12px 16px',\n        marginBottom: 4,\n        borderRadius: 8,\n        background: rowBackground,\n        cursor: 'pointer',\n        transition: 'background 0.2s',\n        border: 'none',\n        outline: 'none',\n      }}\n    >\n      {item.icon && (\n        <Avatar\n          shape=\"square\"\n          size={28}\n          icon={item.icon}\n          style={{\n            marginRight: 16,\n            backgroundColor: avatarBg,\n            color: avatarColor,\n          }}\n        />\n      )}\n      <div style={{ flex: 1 }}>{renderEntryContent(entry, isDark)}</div>\n      <span\n        style={{\n          color: isDark ? '#555' : '#ccc',\n          marginLeft: 12,\n          fontSize: 12,\n        }}\n      >\n        {item.key}\n      </span>\n      {isActive && <EnterOutlined style={{ color: isDark ? '#666' : '#999', marginLeft: 12 }} />}\n    </button>\n  )\n}\n\nconst useDebouncedTrimmedValue = (value: string, delayMs: number) => {\n  const [debounced, setDebounced] = useState(() => value.trim())\n\n  useEffect(() => {\n    const t = setTimeout(() => setDebounced(value.trim()), delayMs)\n    return () => clearTimeout(t)\n  }, [value, delayMs])\n\n  return debounced\n}\n\nconst useResetOnOpen = (\n  open: boolean,\n  setInputValue: (v: string) => void,\n  setActiveIndex: (n: number) => void,\n  inputRef: React.RefObject<InputRef | null>\n) => {\n  useEffect(() => {\n    if (!open) return\n    setInputValue('')\n    setActiveIndex(-1)\n    requestAnimationFrame(() => setTimeout(() => inputRef.current?.focus?.(), 50))\n  }, [open, setInputValue, setActiveIndex, inputRef])\n}\n\nconst useClampActiveIndex = (\n  keyword: string,\n  resultsLength: number,\n  recentLength: number,\n  setActiveIndex: React.Dispatch<React.SetStateAction<number>>\n) => {\n  useEffect(() => {\n    const len = keyword ? resultsLength : recentLength\n    if (len <= 0) {\n      setActiveIndex(-1)\n      return\n    }\n    setActiveIndex((idx) => (idx < 0 ? 0 : Math.min(idx, len - 1)))\n  }, [keyword, resultsLength, recentLength, setActiveIndex])\n}\n\nconst useScrollActiveIntoView = (activeIndex: number, listRef: React.RefObject<HTMLDivElement | null>) => {\n  useEffect(() => {\n    if (activeIndex < 0) return\n    const container = listRef.current\n    if (!container) return\n    const activeElement = container.children.item(activeIndex) as HTMLElement | null\n    activeElement?.scrollIntoView({ block: 'nearest' })\n  }, [activeIndex, listRef])\n}\n\nconst useRecentMenuEntries = (allItems: MenuSearchResult[]) => {\n  const [recentStored, setRecentStored] = useState<StoredRecent[]>(() => readRecentFromStorage())\n  const recentEntries = React.useMemo(() => buildRecentEntries(recentStored, allItems), [recentStored, allItems])\n\n  const pushRecentItem = React.useCallback((item: MenuSearchResult) => {\n    try {\n      const s: StoredRecent = {\n        key: item.item.key,\n        label: item.item.label || '',\n        path: item.item.path || item.item.key,\n        i18nKey: item.item.i18nKey || '',\n        pinyin: item.item.pinyin || '',\n      }\n\n      setRecentStored((prev) => {\n        const next = [s, ...prev.filter((r) => r.key !== s.key)].slice(0, 10)\n        persistRecentToStorage(next)\n        return next\n      })\n    } catch (e) {\n      devWarn('[GlobalSearch] Failed to update recent items', e)\n    }\n  }, [])\n\n  return { recentEntries, pushRecentItem }\n}\n\nconst useDraggableBounds = () => {\n  const [bounds, setBounds] = useState({ left: 0, top: 0, bottom: 0, right: 0 })\n  const dragRef = useRef<HTMLDivElement>(null)\n\n  const onStart = React.useCallback((_: DraggableEvent, uiData: DraggableData) => {\n    const { clientWidth, clientHeight } = window.document.documentElement\n    const targetRect = dragRef.current?.getBoundingClientRect()\n    if (!targetRect) return\n\n    setBounds({\n      left: -targetRect.left + uiData.x,\n      right: clientWidth - (targetRect.right - uiData.x),\n      top: -targetRect.top + uiData.y,\n      bottom: clientHeight - (targetRect.bottom - uiData.y),\n    })\n  }, [])\n\n  return { bounds, dragRef, onStart }\n}\n\nconst useSearchKeyDown = (\n  keyword: string,\n  results: MenuSearchResult[],\n  recentEntries: MenuSearchResult[],\n  activeIndex: number,\n  setActiveIndex: React.Dispatch<React.SetStateAction<number>>,\n  onSelect: (entry: MenuSearchResult) => void,\n  onClose: () => void\n) => {\n  return React.useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      const list = keyword ? results : recentEntries\n\n      switch (e.key) {\n        case 'ArrowDown': {\n          if (list.length === 0) return\n          setActiveIndex((prev) => (prev < 0 ? 0 : Math.min(prev + 1, list.length - 1)))\n          e.preventDefault()\n          break\n        }\n        case 'ArrowUp': {\n          if (list.length === 0) return\n          setActiveIndex((prev) => (prev <= 0 ? 0 : Math.max(prev - 1, 0)))\n          e.preventDefault()\n          break\n        }\n        case 'Enter': {\n          const activeEntry = list[activeIndex]\n          if (activeIndex >= 0 && activeEntry) onSelect(activeEntry)\n          break\n        }\n        case 'Escape': {\n          onClose()\n          break\n        }\n        default:\n          break\n      }\n    },\n    [keyword, results, recentEntries, activeIndex, setActiveIndex, onSelect, onClose]\n  )\n}\n\ntype SearchPalette = {\n  modalBg: string\n  headerBorder: string\n  titleColor: string\n  iconBtnColor: string\n  inputPrefixColor: string\n  inputBg: string\n  inputBorder: string\n  inputText: string | undefined\n  listEmptyText: string\n  keyText: string\n  enterIcon: string\n  footerBg: string\n  footerText: string\n  footerBorder: string\n  escBorder: string\n  maskBg: string\n}\n\nconst getSearchPalette = (isDark: boolean): SearchPalette => ({\n  modalBg: isDark ? '#1f1f1f' : '#fff',\n  headerBorder: isDark ? '#303030' : '#f0f0f0',\n  titleColor: isDark ? '#eee' : '#333',\n  iconBtnColor: isDark ? '#aaa' : '#666',\n  inputPrefixColor: isDark ? '#666' : '#bbb',\n  inputBg: isDark ? '#141414' : '#fff',\n  inputBorder: isDark ? '#424242' : '#d9d9d9',\n  inputText: isDark ? '#eee' : undefined,\n  listEmptyText: isDark ? '#666' : '#999',\n  keyText: isDark ? '#555' : '#ccc',\n  enterIcon: isDark ? '#666' : '#999',\n  footerBg: isDark ? '#1f1f1f' : '#fafafa',\n  footerText: isDark ? '#666' : '#999',\n  footerBorder: isDark ? '#303030' : '#f0f0f0',\n  escBorder: isDark ? '#444' : '#ddd',\n  maskBg: 'rgba(0,0,0,0.45)',\n})\n\ntype GlobalSearchViewProps = {\n  open: boolean\n  onClose: () => void\n  inputValue: string\n  setInputValue: (v: string) => void\n  onKeyDown: (e: KeyboardEvent<HTMLInputElement>) => void\n  inputRef: React.RefObject<InputRef | null>\n  listRef: React.RefObject<HTMLDivElement | null>\n  listToRender: MenuSearchResult[]\n  activeIndex: number\n  setActiveIndex: React.Dispatch<React.SetStateAction<number>>\n  onSelectEntry: (entry: MenuSearchResult) => void\n  isFullscreen: boolean\n  toggleFullscreen: () => void\n  isDark: boolean\n  palette: SearchPalette\n  token: ReturnType<typeof theme.useToken>['token']\n  modalRender: (node: React.ReactNode) => React.ReactNode\n}\n\nconst GlobalSearchView: React.FC<GlobalSearchViewProps> = ({\n  open,\n  onClose,\n  inputValue,\n  setInputValue,\n  onKeyDown,\n  inputRef,\n  listRef,\n  listToRender,\n  activeIndex,\n  setActiveIndex,\n  onSelectEntry,\n  isFullscreen,\n  toggleFullscreen,\n  isDark,\n  palette,\n  token,\n  modalRender,\n}) => {\n  const modalWidth = isFullscreen ? '100%' : 600\n  const modalStyle = isFullscreen\n    ? { top: 0, margin: 0, maxWidth: '100vw', padding: 0, height: '100vh' }\n    : { top: 80, paddingBottom: 0 }\n\n  return (\n    <Modal\n      open={open}\n      onCancel={onClose}\n      footer={null}\n      width={modalWidth}\n      title={null}\n      closable={false}\n      destroyOnHidden\n      className=\"fix-ant-modal\"\n      modalRender={modalRender}\n      styles={{\n        body: {\n          padding: 0,\n          height: isFullscreen ? '100vh' : 'auto',\n          display: 'flex',\n          flexDirection: 'column',\n          overflow: 'hidden',\n          backgroundColor: palette.modalBg,\n        },\n        mask: { background: palette.maskBg },\n      }}\n      style={modalStyle}\n    >\n      <div\n        className=\"draggable-handle\"\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: '16px 24px',\n          borderBottom: `1px solid ${palette.headerBorder}`,\n          flexShrink: 0,\n          cursor: isFullscreen ? 'default' : 'move',\n        }}\n      >\n        <div style={{ fontSize: 16, fontWeight: 600, color: palette.titleColor }}>菜单搜索</div>\n        <div style={{ display: 'flex', gap: 16, alignItems: 'center' }}>\n          <button\n            type=\"button\"\n            onClick={toggleFullscreen}\n            style={{\n              cursor: 'pointer',\n              color: palette.iconBtnColor,\n              fontSize: 16,\n              transition: 'color 0.2s',\n              background: 'transparent',\n              border: 'none',\n              padding: 0,\n            }}\n            title={isFullscreen ? '退出全屏' : '全屏'}\n          >\n            {isFullscreen ? <FullscreenExitOutlined /> : <FullscreenOutlined />}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            style={{\n              cursor: 'pointer',\n              color: palette.iconBtnColor,\n              fontSize: 16,\n              transition: 'color 0.2s',\n              background: 'transparent',\n              border: 'none',\n              padding: 0,\n            }}\n            title=\"关闭\"\n          >\n            <CloseOutlined />\n          </button>\n        </div>\n      </div>\n\n      <div style={{ padding: '16px 24px', flexShrink: 0 }}>\n        <Input\n          ref={inputRef}\n          prefix={<SearchOutlined style={{ color: palette.inputPrefixColor }} />}\n          placeholder=\"请输入...（支持中文、拼音及英文）\"\n          title=\"请输入...（支持中文、拼音及英文）\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onKeyDown={onKeyDown}\n          allowClear\n          autoFocus\n          size=\"large\"\n          className=\"global-search-input\"\n          style={{\n            backgroundColor: palette.inputBg,\n            borderColor: palette.inputBorder,\n            color: palette.inputText,\n            textOverflow: 'ellipsis',\n            overflow: 'hidden',\n            whiteSpace: 'nowrap',\n          }}\n        />\n      </div>\n\n      <div\n        ref={listRef}\n        style={{\n          flex: 1,\n          overflowY: 'auto',\n          marginTop: 0,\n          padding: '0 12px',\n          maxHeight: isFullscreen ? undefined : 280,\n        }}\n      >\n        {listToRender.length === 0 ? (\n          <div\n            style={{\n              padding: '32px 0',\n              textAlign: 'center',\n              color: palette.listEmptyText,\n            }}\n          >\n            无匹配菜单\n          </div>\n        ) : (\n          listToRender.map((entry, idx) => (\n            <SearchRow\n              key={entry.item.key}\n              entry={entry}\n              idx={idx}\n              isActive={idx === activeIndex}\n              isDark={isDark}\n              token={token}\n              setActiveIndex={setActiveIndex}\n              onSelect={onSelectEntry}\n            />\n          ))\n        )}\n      </div>\n\n      <div\n        style={{\n          padding: '12px 24px',\n          color: palette.footerText,\n          fontSize: 12,\n          borderTop: `1px solid ${palette.footerBorder}`,\n          display: 'flex',\n          justifyContent: 'flex-end',\n          alignItems: 'center',\n          gap: 16,\n          backgroundColor: palette.footerBg,\n          flexShrink: 0,\n        }}\n      >\n        <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n          <ArrowUpOutlined style={{ fontSize: 10 }} />\n          <ArrowDownOutlined style={{ fontSize: 10 }} /> 导航\n        </span>\n        <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n          <EnterOutlined style={{ fontSize: 10, color: palette.enterIcon }} /> 选择\n        </span>\n        <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n          <span\n            style={{\n              fontSize: 10,\n              border: `1px solid ${palette.escBorder}`,\n              borderRadius: 3,\n              padding: '0 4px',\n              lineHeight: '14px',\n            }}\n          >\n            ESC\n          </span>{' '}\n          关闭\n        </span>\n      </div>\n    </Modal>\n  )\n}\n\nfunction highlightWithIndices(text: string, indices?: Array<[number, number]>, isDark: boolean = false) {\n  if (!indices || indices.length === 0) return <>{text}</>\n  const parts: React.ReactNode[] = []\n  let last = 0\n  indices.forEach(([s, e], i) => {\n    if (s > last) parts.push(<span key={`t-${i}-${last}`}>{text.slice(last, s)}</span>)\n    parts.push(\n      <span\n        key={`h-${i}-${s}`}\n        style={{\n          background: isDark ? 'rgba(250, 230, 140, 0.4)' : 'rgba(250, 230, 140, 0.9)',\n          color: isDark ? '#fff' : '#000',\n          padding: '0 2px',\n          borderRadius: 2,\n          fontWeight: 500,\n        }}\n      >\n        {text.slice(s, e + 1)}\n      </span>\n    )\n    last = e + 1\n  })\n  if (last < text.length) parts.push(<span key={`t-last`}>{text.slice(last)}</span>)\n  return <>{parts}</>\n}\n\nconst GlobalSearchNew: React.FC<GlobalSearchProps> = ({ open, onClose, onNavigate }) => {\n  const [inputValue, setInputValue] = useState('')\n  const [activeIndex, setActiveIndex] = useState(-1)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const inputRef = useRef<InputRef>(null)\n  const listRef = useRef<HTMLDivElement>(null)\n  const { redirectTo } = useSafeNavigate()\n  const { themeSettings } = useProThemeContext()\n  const isDark = themeSettings.themeMode === 'dark'\n  const { token } = theme.useToken()\n\n  const keyword = useDebouncedTrimmedValue(inputValue, 150)\n\n  const results = useMenuSearch(keyword, 100, true)\n  const allItems = useMenuSearch('', 2000, false)\n\n  const { recentEntries, pushRecentItem } = useRecentMenuEntries(allItems)\n\n  const { bounds, dragRef, onStart } = useDraggableBounds()\n\n  const palette = React.useMemo(() => getSearchPalette(isDark), [isDark])\n\n  useResetOnOpen(open, setInputValue, setActiveIndex, inputRef)\n  useClampActiveIndex(keyword, results.length, recentEntries.length, setActiveIndex)\n  useScrollActiveIntoView(activeIndex, listRef)\n\n  const navigate = onNavigate ?? redirectTo\n\n  const handleSelectEntry = React.useCallback(\n    (entry: MenuSearchResult) => {\n      const path = entry.item.path || entry.item.key\n      pushRecentItem(entry)\n      navigate(path)\n      onClose()\n    },\n    [pushRecentItem, navigate, onClose]\n  )\n\n  const handleKeyDown = useSearchKeyDown(\n    keyword,\n    results,\n    recentEntries,\n    activeIndex,\n    setActiveIndex,\n    handleSelectEntry,\n    onClose\n  )\n\n  const listToRender = React.useMemo(\n    () => (keyword ? results : recentEntries).slice(0, 50),\n    [keyword, results, recentEntries]\n  )\n\n  const modalRender = React.useCallback(\n    (modal: React.ReactNode) => (\n      <DraggableModalRender\n        modal={modal}\n        isFullscreen={isFullscreen}\n        bounds={bounds}\n        dragRef={dragRef}\n        onStart={onStart}\n      />\n    ),\n    [isFullscreen, bounds, onStart]\n  )\n\n  return (\n    <GlobalSearchView\n      open={open}\n      onClose={onClose}\n      inputValue={inputValue}\n      setInputValue={setInputValue}\n      onKeyDown={handleKeyDown}\n      inputRef={inputRef}\n      listRef={listRef}\n      listToRender={listToRender}\n      activeIndex={activeIndex}\n      setActiveIndex={setActiveIndex}\n      onSelectEntry={handleSelectEntry}\n      isFullscreen={isFullscreen}\n      toggleFullscreen={() => setIsFullscreen((v) => !v)}\n      isDark={isDark}\n      palette={palette}\n      token={token}\n      modalRender={modalRender}\n    />\n  )\n}\n\nexport default GlobalSearchNew\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\KeepAlive\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'callback'. Either include it or remove the dependency array. If 'callback' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":25,"column":6,"nodeType":"ArrayExpression","endLine":25,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [active, callback]","fix":{"range":[727,735],"text":"[active, callback]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'callback'. Either include it or remove the dependency array. If 'callback' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":41,"column":6,"nodeType":"ArrayExpression","endLine":41,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [active, callback]","fix":{"range":[1094,1102],"text":"[active, callback]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":299,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":299,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'active'. Either include it or remove the dependency array.","line":364,"column":6,"nodeType":"ArrayExpression","endLine":364,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [active, persistOnUnmount]","fix":{"range":[11120,11138],"text":"[active, persistOnUnmount]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, createContext, useContext, useLayoutEffect, useState } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\n// React 19.2+ 提供 Activity API；若存在则使用，用于更精确的激活/失活检测\r\nconst ActivityComponent = React?.Activity ?? null\r\n\r\nconst KeepAliveContext = createContext(false)\r\n\r\nexport const useKeepAliveContext = () => useContext(KeepAliveContext)\r\n\r\n/**\r\n * Hook triggered when the component is activated\r\n * @param {Function} callback\r\n */\r\nexport const useActivate = (callback) => {\r\n  const active = useKeepAliveContext()\r\n  const mountedRef = useRef(false)\r\n\r\n  useEffect(() => {\r\n    if (active) {\r\n      callback()\r\n    }\r\n    mountedRef.current = true\r\n  }, [active])\r\n}\r\n\r\n/**\r\n * Hook triggered when the component is deactivated (hidden)\r\n * @param {Function} callback\r\n */\r\nexport const useUnactivate = (callback) => {\r\n  const active = useKeepAliveContext()\r\n  const mountedRef = useRef(false)\r\n\r\n  useEffect(() => {\r\n    if (mountedRef.current && !active) {\r\n      callback()\r\n    }\r\n    mountedRef.current = true\r\n  }, [active])\r\n}\r\n\r\nconst ensureHiddenContainer = () => {\r\n  if (typeof document === 'undefined') return null\r\n  let el = document.getElementById('__keepalive_hidden_root')\r\n  if (!el) {\r\n    el = document.createElement('div')\r\n    el.id = '__keepalive_hidden_root'\r\n    // Use fixed position and move out of viewport instead of display:none to keep internal state active if needed\r\n    el.style.cssText =\r\n      'position: fixed; left: -9999px; top: -9999px; width: 0; height: 0; overflow: hidden; pointer-events: none; opacity: 0; z-index: -1;'\r\n    document.body.appendChild(el)\r\n  }\r\n  return el\r\n}\r\n\r\n// Global LRU Cache Manager\r\nconst createKeepAliveManager = () => {\r\n  let limit = 10 // Default limit\r\n  let keys = [] // LRU keys (most recent at end)\r\n  const instances = new Map() // id -> { setShouldRender, persistOnUnmount }\r\n  const activeMap = new Map() // id -> boolean\r\n  const timeouts = new Map() // id -> timeoutId\r\n\r\n  // global options for deactivate strategy\r\n  let deactivateDelay = 3000 // ms to wait before hiding an inactive instance\r\n  let keepInactiveCount = 1 // how many most-recent inactive instances to keep rendered\r\n\r\n  const safeInvoke = (fn, label) => {\r\n    try {\r\n      fn()\r\n    } catch (err) {\r\n      // 仅在开发环境输出，避免生产环境噪音；同时满足 Sonar 对异常处理的要求\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.warn(`[KeepAlive] ${label} failed`, err)\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    setLimit: (n) => {\r\n      limit = n\r\n    },\r\n    // set global options: { deactivateDelay, keepInactiveCount, limit }\r\n    setOptions: (opts = {}) => {\r\n      if (typeof opts.deactivateDelay === 'number') deactivateDelay = opts.deactivateDelay\r\n      if (typeof opts.keepInactiveCount === 'number')\r\n        keepInactiveCount = Math.max(0, Math.floor(opts.keepInactiveCount))\r\n      if (typeof opts.limit === 'number') limit = Math.max(0, Math.floor(opts.limit))\r\n    },\r\n    register: (id, opts) => {\r\n      // opts: { setShouldRender, persistOnUnmount }\r\n      instances.set(id, {\r\n        setShouldRender: opts.setShouldRender,\r\n        persistOnUnmount: !!opts.persistOnUnmount,\r\n      })\r\n    },\r\n    unregister: (id) => {\r\n      if (timeouts.has(id)) {\r\n        clearTimeout(timeouts.get(id))\r\n        timeouts.delete(id)\r\n      }\r\n      instances.delete(id)\r\n      activeMap.delete(id)\r\n      keys = keys.filter((k) => k !== id)\r\n    },\r\n    activate: (id) => {\r\n      // Move to end (most recently used)\r\n      keys = keys.filter((k) => k !== id)\r\n      keys.push(id)\r\n      activeMap.set(id, true)\r\n\r\n      // cancel any pending hide timer for this id\r\n      if (timeouts.has(id)) {\r\n        clearTimeout(timeouts.get(id))\r\n        timeouts.delete(id)\r\n      }\r\n\r\n      // Check limit and evict least-recent non-persistent entries\r\n      while (keys.length > limit) {\r\n        const idToDrop = keys.shift()\r\n        const instance = instances.get(idToDrop)\r\n        if (instance && !instance.persistOnUnmount) {\r\n          safeInvoke(() => instance.setShouldRender(false), `setShouldRender(false) for ${idToDrop}`)\r\n        }\r\n      }\r\n\r\n      // Ensure current is rendered\r\n      const current = instances.get(id)\r\n      if (current) {\r\n        safeInvoke(() => current.setShouldRender(true), `setShouldRender(true) for ${id}`)\r\n      }\r\n    },\r\n    // advanced deactivate behavior: schedule hide with delay and preserve N most-recent inactive\r\n    deactivate: (id) => {\r\n      // mark inactive\r\n      activeMap.set(id, false)\r\n      const instance = instances.get(id)\r\n      if (!instance) return\r\n\r\n      // move id to front (least recently used) so it becomes a candidate for eviction\r\n      keys = keys.filter((k) => k !== id)\r\n      keys.unshift(id)\r\n\r\n      // If instance is persistent, do nothing\r\n      if (instance.persistOnUnmount) return\r\n\r\n      // cancel existing timer\r\n      if (timeouts.has(id)) {\r\n        clearTimeout(timeouts.get(id))\r\n        timeouts.delete(id)\r\n      }\r\n\r\n      const t = setTimeout(() => {\r\n        // if reactivated meanwhile, skip\r\n        if (activeMap.get(id)) {\r\n          timeouts.delete(id)\r\n          return\r\n        }\r\n\r\n        // compute inactive rendered ids (non-persistent) in LRU order\r\n        const inactiveRendered = keys.filter((k) => {\r\n          const inst = instances.get(k)\r\n          return inst && !activeMap.get(k) && !inst.persistOnUnmount\r\n        })\r\n\r\n        // preserve the last `keepInactiveCount` of them (most recently used)\r\n        const preserved = inactiveRendered.slice(-keepInactiveCount)\r\n\r\n        if (!preserved.includes(id)) {\r\n          const inst = instances.get(id)\r\n          if (inst) {\r\n            safeInvoke(() => inst.setShouldRender(false), `setShouldRender(false) for ${id}`)\r\n          }\r\n        }\r\n\r\n        timeouts.delete(id)\r\n      }, deactivateDelay)\r\n\r\n      timeouts.set(id, t)\r\n    },\r\n    // Force drop (unmount) an id regardless of persist flag\r\n    forceDrop: (id) => {\r\n      const instance = instances.get(id)\r\n      if (instance) {\r\n        safeInvoke(() => instance.setShouldRender(false), `forceDrop setShouldRender(false) for ${id}`)\r\n      }\r\n      if (timeouts.has(id)) {\r\n        clearTimeout(timeouts.get(id))\r\n        timeouts.delete(id)\r\n      }\r\n      instances.delete(id)\r\n      activeMap.delete(id)\r\n      keys = keys.filter((k) => k !== id)\r\n    },\r\n  }\r\n}\r\n\r\n// 优化：支持 HMR (热更新)\r\n// 在开发环境下，将 manager 挂载到 window 上，防止模块重载导致 manager 状态丢失\r\nlet manager\r\nif (typeof window !== 'undefined') {\r\n  if (!window.__keepAliveManager) {\r\n    window.__keepAliveManager = createKeepAliveManager()\r\n  }\r\n  manager = window.__keepAliveManager\r\n} else {\r\n  manager = createKeepAliveManager()\r\n}\r\n\r\nexport const keepAliveManager = manager\r\n\r\nconst KeepAlive = ({ id, active = false, children, persistOnUnmount = false, cacheLimit }) => {\r\n  const placeholderRef = useRef(null)\r\n  const containerRef = useRef(null)\r\n  const [shouldRender, setShouldRender] = useState(true)\r\n  const scrollPos = useRef(new Map())\r\n\r\n  // Activity 模式下需要一个受控的可见性开关（用于延迟隐藏，给副作用留出执行时间）\r\n  const [isActivityVisible, setIsActivityVisible] = useState(active)\r\n\r\n  // Update global limit if provided\r\n  useEffect(() => {\r\n    if (cacheLimit) {\r\n      keepAliveManager.setLimit(cacheLimit)\r\n    }\r\n  }, [cacheLimit])\r\n\r\n  // Register to manager (pass persistOnUnmount so manager knows whether to keep rendered)\r\n  useEffect(() => {\r\n    if (id) {\r\n      // 优化：如果使用 ActivityComponent，我们强制认为它是持久化的，\r\n      // 防止 Manager 在超时后销毁组件，从而避免状态丢失（如视频重播）。\r\n      // Activity 模式下，隐藏的开销很小，适合保留状态。\r\n      const effectivePersist = ActivityComponent ? true : persistOnUnmount\r\n      keepAliveManager.register(id, {\r\n        setShouldRender,\r\n        persistOnUnmount: effectivePersist,\r\n      })\r\n    }\r\n    return () => {\r\n      if (id) {\r\n        keepAliveManager.unregister(id)\r\n      }\r\n    }\r\n  }, [id, persistOnUnmount])\r\n\r\n  // Notify manager on active; Activity 模式下同步 deactivate（非 Activity 维持原有行为，不触发 deactivate）\r\n  useEffect(() => {\r\n    if (!id) return\r\n    if (active) {\r\n      keepAliveManager.activate(id)\r\n      return\r\n    }\r\n    if (ActivityComponent) {\r\n      keepAliveManager.deactivate(id)\r\n    }\r\n  }, [active, id])\r\n\r\n  useEffect(() => {\r\n    if (!ActivityComponent) return\r\n    let showTimer = null\r\n    if (active) {\r\n      // schedule state update asynchronously to avoid cascading render warnings\r\n      showTimer = setTimeout(() => setIsActivityVisible(true), 0)\r\n      return () => clearTimeout(showTimer)\r\n    }\r\n\r\n    const timer = setTimeout(() => {\r\n      setIsActivityVisible(false)\r\n    }, 16)\r\n\r\n    return () => {\r\n      clearTimeout(timer)\r\n      if (showTimer) clearTimeout(showTimer)\r\n    }\r\n  }, [active])\r\n\r\n  // Initialize container once (move DOM mutations into effect to satisfy hooks rules)\r\n  const [containerNode, setContainerNode] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return\r\n    if (containerRef.current) {\r\n      setContainerNode(containerRef.current)\r\n      return\r\n    }\r\n\r\n    // 优化：支持 HMR (热更新) —— 在开发环境下尝试复用已存在的 DOM 节点\r\n    let existing = null\r\n    try {\r\n      if (process.env.NODE_ENV === 'development' && id) {\r\n        const hidden = document.getElementById('__keepalive_hidden_root')\r\n        if (hidden) {\r\n          existing = hidden.querySelector(`[data-keepalive-id=\"${id}\"]`)\r\n        }\r\n      }\r\n    } catch (err) {\r\n      existing = null\r\n    }\r\n\r\n    if (existing) {\r\n      containerRef.current = existing\r\n    } else {\r\n      const div = document.createElement('div')\r\n      div.dataset.keepaliveId = id || ''\r\n      // Ensure the container takes full space\r\n      div.style.height = '100%'\r\n      div.style.width = '100%'\r\n      containerRef.current = div\r\n    }\r\n\r\n    setContainerNode(containerRef.current)\r\n    // no cleanup here; mount/unmount handled elsewhere\r\n  }, [id])\r\n\r\n  // Scroll restoration logic\r\n  useEffect(() => {\r\n    const container = containerRef.current\r\n    if (!container) return\r\n\r\n    const onScroll = (e) => {\r\n      if (!active) return\r\n      scrollPos.current.set(e.target, {\r\n        left: e.target.scrollLeft,\r\n        top: e.target.scrollTop,\r\n      })\r\n    }\r\n\r\n    // Capture scroll events to record positions\r\n    container.addEventListener('scroll', onScroll, {\r\n      capture: true,\r\n      passive: true,\r\n    })\r\n\r\n    return () => {\r\n      container.removeEventListener('scroll', onScroll, { capture: true })\r\n    }\r\n  }, [active])\r\n\r\n  // Mount/Unmount logic\r\n  useEffect(() => {\r\n    const container = containerRef.current\r\n    // const hidden = ensureHiddenContainer() // 移除这里原本的 ensureHiddenContainer 逻辑，不要在挂载时立即移动\r\n\r\n    // 初始化样式\r\n    if (container) {\r\n      container.style.display = active ? 'block' : 'none'\r\n    }\r\n\r\n    return () => {\r\n      // Cleanup on unmount\r\n      if (!persistOnUnmount) {\r\n        container?.parentNode?.removeChild(container)\r\n      } else {\r\n        // 只有在组件真正卸载且需要持久化时，才移动到隐藏容器\r\n        const hidden = ensureHiddenContainer()\r\n        if (container && hidden) {\r\n          hidden.appendChild(container)\r\n        }\r\n      }\r\n    }\r\n  }, [persistOnUnmount])\r\n\r\n  // Toggle visibility logic\r\n  useLayoutEffect(() => {\r\n    const container = containerRef.current\r\n    const placeholder = placeholderRef.current\r\n\r\n    if (!container || !placeholder) return\r\n\r\n    // 如果 container 还在隐藏容器里（比如从缓存恢复），把它移到当前占位符下\r\n    if (container.parentNode !== placeholder) {\r\n      // 在移动DOM之前，发送自定义事件通知子组件\r\n      const event = new CustomEvent('keepalive-dom-move', {\r\n        detail: { from: container.parentNode, to: placeholder },\r\n      })\r\n      container.dispatchEvent(event)\r\n\r\n      // 短暂延迟确保子组件有机会处理事件\r\n      setTimeout(() => {\r\n        if (container.parentNode !== placeholder) {\r\n          placeholder.appendChild(container)\r\n        }\r\n      }, 0)\r\n    }\r\n\r\n    // 如果使用 Activity，我们让 Activity 控制可见性，但我们需要确保 container 本身是 block\r\n    // 并且我们仍然需要手动恢复滚动位置，因为 container 是我们手动管理的 DOM\r\n    if (ActivityComponent) {\r\n      container.style.display = 'block'\r\n      if (active && shouldRender) {\r\n        scrollPos.current.forEach((pos, node) => {\r\n          if (node.isConnected) {\r\n            node.scrollLeft = pos.left\r\n            node.scrollTop = pos.top\r\n          }\r\n        })\r\n      }\r\n      return\r\n    }\r\n\r\n    if (active && shouldRender) {\r\n      // 使用 CSS 切换可见性，性能远高于 appendChild\r\n      container.style.display = 'block'\r\n\r\n      // Restore scroll positions\r\n      scrollPos.current.forEach((pos, node) => {\r\n        if (node.isConnected) {\r\n          node.scrollLeft = pos.left\r\n          node.scrollTop = pos.top\r\n        }\r\n      })\r\n    } else {\r\n      // 失活时：仅隐藏，不移动 DOM\r\n      container.style.display = 'none'\r\n    }\r\n  }, [active, shouldRender])\r\n\r\n  if (!shouldRender) return null\r\n\r\n  if (ActivityComponent) {\r\n    return (\r\n      <KeepAliveContext.Provider value={active}>\r\n        <ActivityComponent mode={isActivityVisible ? 'visible' : 'hidden'}>\r\n          <div ref={placeholderRef} style={{ width: '100%', height: '100%' }} />\r\n          {containerNode && createPortal(children, containerNode)}\r\n        </ActivityComponent>\r\n      </KeepAliveContext.Provider>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <KeepAliveContext.Provider value={active}>\r\n      <div ref={placeholderRef} style={{ width: '100%', height: '100%' }} />\r\n      {containerNode && createPortal(children, containerNode)}\r\n    </KeepAliveContext.Provider>\r\n  )\r\n}\r\n\r\nKeepAlive.propTypes = {\r\n  id: PropTypes.string,\r\n  active: PropTypes.bool,\r\n  children: PropTypes.node,\r\n  persistOnUnmount: PropTypes.bool,\r\n  cacheLimit: PropTypes.number,\r\n}\r\n\r\nexport default KeepAlive\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\OneTimePasscode\\OneTimePasscode.stories.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called in function \"render\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":60,"column":27,"nodeType":"Identifier","endLine":60,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Meta, StoryObj } from '@storybook/react-vite'\nimport React, { useState } from 'react'\n\nimport OneTimePasscode from '@stateless/OneTimePasscode'\n\nconst Shell = ({ children }: { children: React.ReactNode }) => (\n  <div style={{ padding: 24, minWidth: 320 }}>{children}</div>\n)\n\nconst meta = {\n  title: 'ProReactAdmin/OneTimePasscode',\n  component: OneTimePasscode,\n  parameters: {\n    layout: 'centered',\n  },\n  args: {\n    length: 6,\n    variant: 'modern',\n    autoFocus: false,\n    disabled: false,\n  },\n  argTypes: {\n    variant: {\n      control: { type: 'select' },\n      options: ['modern', 'compact', 'classic'],\n    },\n  },\n} satisfies Meta<typeof OneTimePasscode>\n\nexport default meta\n\ntype Story = StoryObj<typeof OneTimePasscode>\n\nexport const Modern: Story = {\n  render: (args) => (\n    <Shell>\n      <OneTimePasscode {...args} variant=\"modern\" />\n    </Shell>\n  ),\n}\n\nexport const Compact: Story = {\n  render: (args) => (\n    <Shell>\n      <OneTimePasscode {...args} variant=\"compact\" />\n    </Shell>\n  ),\n}\n\nexport const Classic: Story = {\n  render: (args) => (\n    <Shell>\n      <OneTimePasscode {...args} variant=\"classic\" />\n    </Shell>\n  ),\n}\n\nexport const Controlled: Story = {\n  render: (args) => {\n    const [val, setVal] = useState('')\n    return (\n      <Shell>\n        <OneTimePasscode {...args} value={val} onChange={(v) => setVal(v)} />\n      </Shell>\n    )\n  },\n}\n\nexport const Uncontrolled: Story = {\n  render: (args) => (\n    <Shell>\n      <OneTimePasscode {...args} />\n    </Shell>\n  ),\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\ResponsiveTable\\ResponsiveTable.stories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\ResponsiveTable\\index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'children' is assigned a value but never used.","line":904,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":904,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'children' is assigned a value but never used.","line":922,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":922,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\r\nimport type { ReactNode } from 'react'\r\nimport type { TableProps } from 'antd'\r\nimport type { ColumnsType } from 'antd/es/table'\r\nimport {\r\n  Table,\r\n  Pagination,\r\n  Popover,\r\n  Tag,\r\n  Checkbox,\r\n  Button,\r\n  Popconfirm,\r\n  Space,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  InputNumber,\r\n  Cascader,\r\n  TreeSelect,\r\n  Switch,\r\n  Drawer,\r\n  theme,\r\n} from 'antd'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { SettingOutlined } from '@ant-design/icons'\r\nimport useTable from './useTable'\r\n\r\nexport type ActionConfig<T> = {\r\n  key: string\r\n  label?: ReactNode\r\n  onClick?: (record: T) => any\r\n  confirm?: string\r\n  icon?: ReactNode\r\n  type?: string\r\n  danger?: boolean\r\n}\r\n\r\nexport type ResponsiveTableProps<T = any> = {\r\n  columns?: ColumnsType<T>\r\n  dataSource?: T[]\r\n  rowKey?: string | ((record: T) => React.Key)\r\n  initialPagination?: { current: number; pageSize: number }\r\n  minBodyHeight?: number\r\n  minWidth?: number\r\n  showColumnSettings?: boolean\r\n  pageSyncToUrl?: boolean\r\n  onPaginationChange?: (pagination: { current: number; pageSize: number }) => void\r\n  onChange?: (...args: any[]) => any\r\n  // actions can be preset strings or detailed configs\r\n  actions?: Array<'view' | 'edit' | 'delete' | ActionConfig<T>>\r\n  permissionChecker?: (actionKey: string, record: T) => boolean\r\n  onView?: (record: T) => any\r\n  onEdit?: (record: T) => any\r\n  onDelete?: (record: T) => any\r\n  // optionally provided reload/fetch helpers\r\n  reloadPage?: ((page: number, pageSize: number) => Promise<any>) | null\r\n  showIndex?: boolean\r\n  indexMode?: 'global' | 'page' | 'custom'\r\n  indexFixed?: false | 'left' | 'right'\r\n  actionsFixed?: false | 'left' | 'right'\r\n  customIndexRender?: (record: T, index: number, pagination: any) => ReactNode\r\n  rowSelection?: null | 'multiple' | 'single'\r\n  rowSelectable?: ((record: T) => boolean) | string | null\r\n  fetchData?: ((page: number, pageSize: number, sort?: any, extraParams?: any) => Promise<any>) | null\r\n  autoLoad?: boolean\r\n  fetchUrl?: string | null\r\n  requestParamMap?: {\r\n    pageField: string\r\n    pageSizeField: string\r\n    sortField: string\r\n    orderField: string\r\n  }\r\n  responseFieldMap?: { listField: string; totalField: string }\r\n  serverSort?: boolean\r\n  defaultSort?: any\r\n  virtualized?: boolean\r\n  mergeSearchToFetch?: boolean\r\n  mergeSearchToFetchOnce?: boolean\r\n  requestMethod?: string\r\n  clearUrlAfterInitialMerge?: boolean\r\n  showUrlAppliedTag?: boolean\r\n  indexWidth?: number\r\n  actionsWidth?: number\r\n  toolbar?: any\r\n  apiRef?: any\r\n  onToolbarReady?: (api: any) => void\r\n  scroll?: any\r\n} & TableProps<T>\r\n\r\nconst ResponsiveTable = <T,>(props: ResponsiveTableProps<T> & TableProps<T>) => {\r\n  const {\r\n    columns = [],\r\n    dataSource = [],\r\n    rowKey = 'id' as any,\r\n    initialPagination = { current: 1, pageSize: 10 },\r\n    minBodyHeight = 120,\r\n    minWidth = 600,\r\n    showColumnSettings = true,\r\n    pageSyncToUrl = false,\r\n    onPaginationChange = () => {},\r\n    onChange = () => {},\r\n    actions = ['view', 'edit', 'delete'] as Array<any>,\r\n    permissionChecker = () => true,\r\n    onView,\r\n    onEdit,\r\n    onDelete,\r\n    reloadPage,\r\n    showIndex = false,\r\n    indexMode = 'global',\r\n    indexFixed = 'left',\r\n    actionsFixed = 'right',\r\n    customIndexRender = null,\r\n    rowSelection = null,\r\n    rowSelectable = null,\r\n    fetchData = null,\r\n    autoLoad = false,\r\n    fetchUrl = null,\r\n    requestParamMap = {\r\n      pageField: 'page',\r\n      pageSizeField: 'pageSize',\r\n      sortField: 'sort',\r\n      orderField: 'order',\r\n    },\r\n    responseFieldMap = { listField: 'data', totalField: 'total' },\r\n    serverSort = false,\r\n    defaultSort = null,\r\n    virtualized = false,\r\n    mergeSearchToFetch = false,\r\n    mergeSearchToFetchOnce = false,\r\n    clearUrlAfterInitialMerge = true,\r\n    showUrlAppliedTag = false,\r\n    indexWidth = 80,\r\n    actionsWidth = 180,\r\n    toolbar = null,\r\n    apiRef = null,\r\n    onToolbarReady = null,\r\n    scroll: scrollProp = undefined,\r\n    requestMethod = 'get',\r\n    ...tableProps\r\n  } = props\r\n\r\n  // location/search parser must be defined before passing initialSearch into useTable\r\n  const location = useLocation()\r\n\r\n  const locationSearch = location?.search\r\n  const parseLocationSearch = React.useCallback(() => {\r\n    try {\r\n      const params = new URLSearchParams(locationSearch || '')\r\n      const obj: Record<string, any> = {}\r\n      for (const [k, v] of params.entries()) obj[k] = v\r\n      return obj\r\n    } catch {\r\n      return {}\r\n    }\r\n  }, [locationSearch])\r\n\r\n  // derive toolbar/query config early so initial form values can be merged into initialSearch\r\n  const toolbarConfig = toolbar || {}\r\n  const queryConfig = toolbarConfig.search && typeof toolbarConfig.search === 'object' ? toolbarConfig.search : null\r\n\r\n  const initialFormPayload = React.useMemo(() => {\r\n    if (!queryConfig) return {}\r\n    let payload: Record<string, any> = { ...(queryConfig.initialValues || {}) }\r\n    if (queryConfig && Array.isArray(queryConfig.fields)) {\r\n      for (const f of queryConfig.fields) {\r\n        if (f && typeof f.transform === 'function') {\r\n          payload[f.name] = f.transform(payload[f.name], payload)\r\n        }\r\n      }\r\n    }\r\n    if (queryConfig && typeof queryConfig.transformValues === 'function') {\r\n      payload = queryConfig.transformValues(payload) || payload\r\n    }\r\n    return payload\r\n  }, [queryConfig])\r\n\r\n  const {\r\n    containerRef,\r\n    pagination,\r\n    setPagination,\r\n    tableScroll,\r\n    pagedData,\r\n    handleDelete,\r\n    selectedRowKeys,\r\n    handleSelectionChange,\r\n    isRowSelectable,\r\n    calcIndex,\r\n    // internalData is returned by the hook but not used directly in this component\r\n    total,\r\n    fetchPage,\r\n    sortState,\r\n    setSortState,\r\n    hasMergedInitialSearch,\r\n  } = useTable<T>({\r\n    dataSource,\r\n    initialPagination,\r\n    minBodyHeight,\r\n    minWidth,\r\n    pageSyncToUrl,\r\n    onPaginationChange,\r\n    reloadPage: reloadPage ?? null,\r\n    fetchData: fetchData ?? null,\r\n    autoLoad,\r\n    serverSort,\r\n    defaultSort,\r\n    selectionMode: rowSelection ?? 'none',\r\n    rowSelectable,\r\n    fetchUrl,\r\n    requestParamMap,\r\n    responseFieldMap,\r\n    // forward search/merge options to hook\r\n    mergeSearchToFetch,\r\n    mergeSearchToFetchOnce,\r\n    clearUrlAfterInitialMerge,\r\n    // initialSearch merges URL search and toolbar initialValues so autoLoad includes form defaults\r\n    initialSearch: { ...parseLocationSearch(), ...(initialFormPayload || {}) },\r\n    requestMethod,\r\n  })\r\n\r\n  // toolbar form (right side)\r\n  const [form] = Form.useForm()\r\n  const [showAdvanced, setShowAdvanced] = React.useState(false)\r\n  const [drawerVisible, setDrawerVisible] = React.useState(false)\r\n  const [popoverVisible, setPopoverVisible] = React.useState(false)\r\n\r\n  const { token } = theme.useToken()\r\n\r\n  const leftActions = Array.isArray(toolbarConfig.actions) ? toolbarConfig.actions : []\r\n\r\n  const showToolbarLeft =\r\n    typeof toolbarConfig.showLeft !== 'undefined' ? !!toolbarConfig.showLeft : leftActions.length > 0\r\n  const showToolbarRight = typeof toolbarConfig.showRight !== 'undefined' ? !!toolbarConfig.showRight : !!queryConfig\r\n\r\n  const toolbarApi = React.useMemo(\r\n    () => ({\r\n      selectedRowKeys: Array.isArray(selectedRowKeys) ? [...selectedRowKeys] : [],\r\n      fetchPage: async (...args: any[]) => {\r\n        try {\r\n          return await fetchPage(...args)\r\n        } catch (err) {\r\n          console.error('toolbar fetchPage error', err)\r\n          throw err\r\n        }\r\n      },\r\n      // 返回当前 URL 查询对象（key -> value），供外部使用\r\n      getSearch: () => {\r\n        // 返回当前地址栏的查询对象，优先使用 react-router 的 location\r\n        return parseLocationSearch()\r\n      },\r\n      // fetchPage 并把当前 URL 查询合并到 extraParams 中\r\n      fetchPageWithSearch: async (\r\n        page = pagination.current,\r\n        pageSize = pagination.pageSize,\r\n        sort = sortState,\r\n        extraParams = {}\r\n      ) => {\r\n        try {\r\n          const searchObj = parseLocationSearch()\r\n          const merged = { ...searchObj, ...(extraParams || {}) }\r\n          return await fetchPage(page, pageSize, sort, merged)\r\n        } catch (err) {\r\n          console.error('toolbar fetchPageWithSearch error', err)\r\n          throw err\r\n        }\r\n      },\r\n      pagination: { ...pagination },\r\n      form,\r\n    }),\r\n    [selectedRowKeys, fetchPage, pagination, form, parseLocationSearch, sortState]\r\n  )\r\n\r\n  if (apiRef && typeof apiRef === 'object') {\r\n    apiRef.current = toolbarApi\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (apiRef && typeof apiRef === 'object') apiRef.current = null\r\n    }\r\n  }, [apiRef])\r\n\r\n  const _toolbarReadyFired = React.useRef(false)\r\n  React.useEffect(() => {\r\n    if (_toolbarReadyFired.current) return\r\n    if (typeof onToolbarReady === 'function') {\r\n      if (toolbarApi && toolbarApi.form) {\r\n        try {\r\n          onToolbarReady(toolbarApi)\r\n          _toolbarReadyFired.current = true\r\n        } catch (e) {\r\n          console.error('onToolbarReady callback error', e)\r\n        }\r\n      }\r\n    }\r\n  }, [onToolbarReady, toolbarApi])\r\n\r\n  React.useEffect(() => {\r\n    if (queryConfig && queryConfig.initialValues) {\r\n      form.setFieldsValue(queryConfig.initialValues)\r\n    }\r\n  }, [queryConfig, form])\r\n\r\n  const handleSearch = async () => {\r\n    try {\r\n      const values = await form.validateFields()\r\n      let payload: Record<string, any> = { ...values }\r\n      if (queryConfig && Array.isArray(queryConfig.fields)) {\r\n        for (const f of queryConfig.fields) {\r\n          if (f && typeof f.transform === 'function') {\r\n            payload[f.name] = f.transform(values[f.name], values)\r\n          }\r\n        }\r\n      }\r\n      if (queryConfig && typeof queryConfig.transformValues === 'function') {\r\n        payload = queryConfig.transformValues(payload) || payload\r\n      }\r\n      setPagination((p: any) => ({ ...p, current: 1 }))\r\n      const includeSearch =\r\n        mergeSearchToFetch && (!mergeSearchToFetchOnce || !hasMergedInitialSearch || !hasMergedInitialSearch())\r\n      const finalPayload = includeSearch ? { ...parseLocationSearch(), ...(payload || {}) } : payload\r\n      if (typeof queryConfig?.onSearch === 'function') {\r\n        await queryConfig.onSearch(finalPayload, {\r\n          fetchPage,\r\n          form,\r\n          setPagination,\r\n          pagination,\r\n        })\r\n      } else {\r\n        await fetchPage(1, pagination.pageSize, sortState, finalPayload)\r\n      }\r\n    } catch {\r\n      // validation error will be shown by Form\r\n    }\r\n  }\r\n\r\n  const handleReset = async () => {\r\n    form.resetFields()\r\n    setPagination((p: any) => ({ ...p, current: 1 }))\r\n    if (typeof queryConfig?.onReset === 'function') {\r\n      await queryConfig.onReset({ fetchPage, form, setPagination, pagination })\r\n    } else {\r\n      const includeSearch =\r\n        mergeSearchToFetch && (!mergeSearchToFetchOnce || !hasMergedInitialSearch || !hasMergedInitialSearch())\r\n      const extra = includeSearch ? parseLocationSearch() : {}\r\n      await fetchPage(1, pagination.pageSize, sortState, extra)\r\n    }\r\n  }\r\n\r\n  const [visibleKeys, setVisibleKeys] = React.useState<React.Key[]>(() =>\r\n    (columns || []).map((c) => (c as any).dataIndex || (c as any).key).filter(Boolean)\r\n  )\r\n\r\n  React.useEffect(\r\n    () => setVisibleKeys((columns || []).map((c) => (c as any).dataIndex || (c as any).key).filter(Boolean)),\r\n    [columns]\r\n  )\r\n\r\n  const currentColumns = React.useMemo(() => {\r\n    const keys = new Set(visibleKeys)\r\n    return columns.filter((c) => keys.has((c as any).dataIndex || (c as any).key))\r\n  }, [columns, visibleKeys])\r\n\r\n  const indexColumnFromColumns = React.useMemo(() => {\r\n    const idx = columns.find((c) => c && ((c as any).index === true || (c as any).type === 'index'))\r\n    if (!idx) return null\r\n    const col = {\r\n      ...idx,\r\n      key: idx.key || '__index',\r\n      width: typeof idx.width !== 'undefined' ? idx.width : indexWidth,\r\n      align: typeof idx.align !== 'undefined' ? idx.align : 'center',\r\n      fixed: typeof idx.fixed !== 'undefined' ? idx.fixed : indexFixed,\r\n      render:\r\n        idx.render ||\r\n        ((_text: any, _record: any, rowIndex: number) => (indexMode === 'page' ? rowIndex + 1 : calcIndex(rowIndex))),\r\n    }\r\n    return col\r\n  }, [columns, indexMode, calcIndex, indexFixed, indexWidth])\r\n\r\n  const effectiveColumns = React.useMemo(() => {\r\n    if (!indexColumnFromColumns) return currentColumns\r\n    const key = (indexColumnFromColumns as any).dataIndex || (indexColumnFromColumns as any).key\r\n    return currentColumns.filter((c) => ((c as any).dataIndex || (c as any).key) !== key)\r\n  }, [currentColumns, indexColumnFromColumns])\r\n\r\n  const columnOptions = columns\r\n    .map((c) => ({\r\n      label: (c as any).title || (c as any).dataIndex || (c as any).key,\r\n      value: (c as any).dataIndex || (c as any).key,\r\n    }))\r\n    .filter((o) => o.value)\r\n\r\n  const popContent = (\r\n    <div style={{ maxWidth: 320 }}>\r\n      <Checkbox.Group\r\n        value={visibleKeys}\r\n        onChange={(v: any) => setVisibleKeys(v)}\r\n        style={{ display: 'flex', flexDirection: 'column' }}\r\n      >\r\n        {columnOptions.map((opt) => (\r\n          <Checkbox key={opt.value} value={opt.value} style={{ margin: '4px 0' }}>\r\n            {opt.label}\r\n          </Checkbox>\r\n        ))}\r\n      </Checkbox.Group>\r\n      <div style={{ marginTop: 8, textAlign: 'right' }}>\r\n        <Button\r\n          size=\"small\"\r\n          onClick={() => setVisibleKeys((columns || []).map((c) => (c as any).dataIndex || (c as any).key))}\r\n          style={{ marginRight: 8 }}\r\n        >\r\n          全部\r\n        </Button>\r\n        <Button\r\n          size=\"small\"\r\n          onClick={() => setVisibleKeys((columns || []).slice(0, 3).map((c) => (c as any).dataIndex || (c as any).key))}\r\n        >\r\n          恢复默认\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  const defaultMap: Record<string, any> = {\r\n    view: { key: 'view', label: '查看', onClick: onView },\r\n    edit: { key: 'edit', label: '编辑', onClick: onEdit },\r\n    delete: { key: 'delete', label: '删除', onClick: onDelete },\r\n  }\r\n\r\n  const actionsConfig = (actions || []).map((a) => {\r\n    if (typeof a === 'string') return defaultMap[a] || { key: a, label: a, onClick: undefined }\r\n    return { ...(a.key ? defaultMap[a.key] : {}), ...a }\r\n  })\r\n\r\n  const opColumn = {\r\n    title: (\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n        }}\r\n      >\r\n        <span>操作</span>\r\n        {showColumnSettings && (\r\n          <Popover content={popContent} title=\"列设置\">\r\n            <Button icon={<SettingOutlined />} size=\"small\" aria-label=\"列设置\" title=\"列设置\" />\r\n          </Popover>\r\n        )}\r\n      </div>\r\n    ),\r\n    key: '__actions',\r\n    width: typeof actionsWidth !== 'undefined' ? actionsWidth : 180,\r\n    align: 'center',\r\n    fixed: actionsFixed,\r\n    render: (_text: any, record: any) => {\r\n      return (\r\n        <Space size=\"small\">\r\n          {actionsConfig.map((act: any) => {\r\n            if (!act || !act.key) return null\r\n            if (!permissionChecker(act.key, record)) return null\r\n            if (act.key === 'delete') {\r\n              return (\r\n                <Popconfirm\r\n                  key={act.key}\r\n                  title={act.confirm || '确认删除吗？'}\r\n                  onConfirm={async () => {\r\n                    if (typeof act.onClick === 'function') {\r\n                      await handleDelete(async (r: any) => await Promise.resolve(act.onClick(r)), record)\r\n                    }\r\n                  }}\r\n                >\r\n                  <Button danger size=\"small\">\r\n                    {act.label}\r\n                  </Button>\r\n                </Popconfirm>\r\n              )\r\n            }\r\n\r\n            return (\r\n              <Button key={act.key} type=\"link\" size=\"small\" onClick={() => act.onClick && act.onClick(record)}>\r\n                {act.label}\r\n              </Button>\r\n            )\r\n          })}\r\n        </Space>\r\n      )\r\n    },\r\n  }\r\n\r\n  const indexColumn = indexColumnFromColumns\r\n    ? indexColumnFromColumns\r\n    : showIndex\r\n      ? {\r\n          title: '序号',\r\n          key: '__index',\r\n          width: typeof indexWidth !== 'undefined' ? indexWidth : 80,\r\n          align: 'center',\r\n          fixed: indexFixed,\r\n          render: (_text: any, record: any, idx: number) => {\r\n            if (indexMode === 'page') return idx + 1\r\n            if (indexMode === 'custom' && typeof customIndexRender === 'function')\r\n              return customIndexRender(record, idx, pagination)\r\n            return calcIndex(idx)\r\n          },\r\n        }\r\n      : null\r\n\r\n  const columnsWithActions = indexColumn\r\n    ? [indexColumn, ...effectiveColumns, opColumn]\r\n    : [...effectiveColumns, opColumn]\r\n\r\n  const rowSelectionConfig =\r\n    rowSelection && rowSelection !== null\r\n      ? {\r\n          type: rowSelection === 'single' ? 'radio' : 'checkbox',\r\n          selectedRowKeys,\r\n          onChange: (keys: any, rows: any) => handleSelectionChange(keys, rows),\r\n          getCheckboxProps: (record: any) => ({\r\n            disabled: !isRowSelectable(record),\r\n          }),\r\n        }\r\n      : undefined\r\n\r\n  const onTableChange = async (pg: any, filters: any, sorter: any, extra: any) => {\r\n    const { current = 1, pageSize = pagination.pageSize } = pg || {}\r\n    setPagination({ current, pageSize })\r\n\r\n    if (serverSort) {\r\n      const sort = { field: sorter.field || null, order: sorter.order || null }\r\n      if (typeof setSortState === 'function') setSortState(sort)\r\n      try {\r\n        await fetchPage(current, pageSize, sort)\r\n      } catch (err) {\r\n        console.warn('fetchPage error', err)\r\n      }\r\n    }\r\n\r\n    if (typeof onChange === 'function') onChange(pg, filters, sorter, extra)\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef as any}\r\n      style={{\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}\r\n    >\r\n      {showUrlAppliedTag && hasMergedInitialSearch?.() && (\r\n        <Tag color=\"blue\" style={{ marginRight: 8 }}>\r\n          已应用地址栏初始筛选\r\n        </Tag>\r\n      )}\r\n      {(showToolbarLeft || showToolbarRight) && (\r\n        <div\r\n          className=\"responsive-table-toolbar\"\r\n          style={{\r\n            padding: '8px 0',\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <div>\r\n            {showToolbarLeft && (\r\n              <Space>\r\n                {leftActions.map((act: any) => (\r\n                  <Button\r\n                    key={act.key || act.label}\r\n                    type={act.type || 'default'}\r\n                    danger={act.danger}\r\n                    onClick={() => {\r\n                      try {\r\n                        if (typeof act.onClick === 'function') act.onClick(toolbarApi)\r\n                      } catch (err) {\r\n                        console.error('toolbar action error', err)\r\n                      }\r\n                    }}\r\n                  >\r\n                    {act.icon ? act.icon : null}\r\n                    {act.label}\r\n                  </Button>\r\n                ))}\r\n              </Space>\r\n            )}\r\n          </div>\r\n          <div>\r\n            {showToolbarRight &&\r\n              queryConfig &&\r\n              (() => {\r\n                const fields = queryConfig.fields || []\r\n                const threshold = queryConfig.advancedThreshold || 3\r\n                const baseFields = fields.slice(0, threshold)\r\n                const advFields = fields.slice(threshold)\r\n                const advancedPlacement = queryConfig.advancedPlacement || 'drawer'\r\n\r\n                const renderField = (f: any) => (\r\n                  <Form.Item key={f.name} name={f.name} label={f.label} rules={f.rules || []}>\r\n                    {f.render\r\n                      ? f.render()\r\n                      : (() => {\r\n                          const t = f.type || 'input'\r\n                          switch (t) {\r\n                            case 'select':\r\n                              return (\r\n                                <Select\r\n                                  style={{ minWidth: f.width || 160 }}\r\n                                  placeholder={f.placeholder}\r\n                                  options={f.options}\r\n                                />\r\n                              )\r\n                            case 'date':\r\n                              return <DatePicker {...(f.props || {})} />\r\n                            case 'dateRange':\r\n                              return <DatePicker.RangePicker {...(f.props || {})} />\r\n                            case 'number':\r\n                              return <InputNumber style={{ minWidth: f.width || 120 }} {...(f.props || {})} />\r\n                            case 'switch':\r\n                              return <Switch {...(f.props || {})} />\r\n                            case 'cascader':\r\n                              return <Cascader options={f.options} {...(f.props || {})} />\r\n                            case 'treeSelect':\r\n                              return <TreeSelect treeData={f.options} {...(f.props || {})} />\r\n                            case 'custom':\r\n                              return f.render ? f.render() : null\r\n                            default:\r\n                              return <Input placeholder={f.placeholder} {...(f.props || {})} />\r\n                          }\r\n                        })()}\r\n                  </Form.Item>\r\n                )\r\n\r\n                if (advancedPlacement === 'inline') {\r\n                  return (\r\n                    <Form\r\n                      form={form}\r\n                      {...(queryConfig.formProps || {})}\r\n                      layout={queryConfig.layout || 'inline'}\r\n                      style={{ display: 'flex', alignItems: 'center' }}\r\n                    >\r\n                      <Space wrap>\r\n                        {baseFields.map((f: any) => renderField(f))}\r\n                        {showAdvanced && advFields.map((f: any) => renderField(f))}\r\n                        {advFields.length > 0 && (\r\n                          <Button type=\"link\" onClick={() => setShowAdvanced((s) => !s)}>\r\n                            {showAdvanced ? '收起' : '高级筛选'}\r\n                          </Button>\r\n                        )}\r\n                        <Form.Item>\r\n                          <Space>\r\n                            <Button type=\"primary\" onClick={handleSearch}>\r\n                              {(queryConfig.buttons && queryConfig.buttons.searchText) || '查询'}\r\n                            </Button>\r\n                            <Button onClick={handleReset}>\r\n                              {(queryConfig.buttons && queryConfig.buttons.resetText) || '重置'}\r\n                            </Button>\r\n                          </Space>\r\n                        </Form.Item>\r\n                      </Space>\r\n                    </Form>\r\n                  )\r\n                }\r\n\r\n                if (advancedPlacement === 'popover') {\r\n                  return (\r\n                    <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                      <Form form={form} {...(queryConfig.formProps || {})} layout={queryConfig.layout || 'inline'}>\r\n                        <Space wrap>\r\n                          {baseFields.map((f: any) => renderField(f))}\r\n                          <Form.Item>\r\n                            <Space>\r\n                              <Button type=\"primary\" onClick={handleSearch}>\r\n                                {(queryConfig.buttons && queryConfig.buttons.searchText) || '查询'}\r\n                              </Button>\r\n                              <Button onClick={handleReset}>\r\n                                {(queryConfig.buttons && queryConfig.buttons.resetText) || '重置'}\r\n                              </Button>\r\n                            </Space>\r\n                          </Form.Item>\r\n                        </Space>\r\n                      </Form>\r\n\r\n                      {advFields.length > 0 && (\r\n                        <Popover\r\n                          placement={queryConfig.advancedPlacementPos || 'bottomRight'}\r\n                          trigger=\"click\"\r\n                          open={popoverVisible}\r\n                          onOpenChange={(open) => setPopoverVisible(open)}\r\n                          getPopupContainer={() => document.body}\r\n                          content={\r\n                            <div\r\n                              style={{\r\n                                minWidth: 320,\r\n                                maxWidth: 420,\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                              }}\r\n                            >\r\n                              <div\r\n                                style={{\r\n                                  padding: '12px 16px',\r\n                                  borderBottom: `1px solid ${token.colorBorder}`,\r\n                                }}\r\n                              >\r\n                                高级筛选\r\n                              </div>\r\n\r\n                              <div\r\n                                style={{\r\n                                  maxHeight: 360,\r\n                                  overflowY: 'auto',\r\n                                  padding: 16,\r\n                                }}\r\n                              >\r\n                                <Form form={form} layout=\"vertical\">\r\n                                  {advFields.map((f: any) => (\r\n                                    <Form.Item key={f.name} name={f.name} label={f.label} rules={f.rules || []}>\r\n                                      {f.render ? f.render() : renderField(f).props.children}\r\n                                    </Form.Item>\r\n                                  ))}\r\n                                </Form>\r\n                              </div>\r\n\r\n                              <div\r\n                                style={{\r\n                                  borderTop: `1px solid ${token.colorBorder}`,\r\n                                  padding: 12,\r\n                                  textAlign: 'right',\r\n                                }}\r\n                              >\r\n                                <Space>\r\n                                  <Button onClick={handleReset}>\r\n                                    {(queryConfig.buttons && queryConfig.buttons.resetText) || '重置'}\r\n                                  </Button>\r\n                                  <Button\r\n                                    type=\"primary\"\r\n                                    onClick={async () => {\r\n                                      await handleSearch()\r\n                                      setPopoverVisible(false)\r\n                                    }}\r\n                                  >\r\n                                    {(queryConfig.buttons && queryConfig.buttons.searchText) || '查询'}\r\n                                  </Button>\r\n                                </Space>\r\n                              </div>\r\n                            </div>\r\n                          }\r\n                        >\r\n                          <Button type=\"link\">高级筛选</Button>\r\n                        </Popover>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                }\r\n\r\n                if (advancedPlacement === 'drawer') {\r\n                  return (\r\n                    <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                      <Form form={form} {...(queryConfig.formProps || {})} layout={queryConfig.layout || 'inline'}>\r\n                        <Space wrap>\r\n                          {baseFields.map((f: any) => renderField(f))}\r\n                          <Form.Item>\r\n                            <Space>\r\n                              <Button type=\"primary\" onClick={handleSearch}>\r\n                                {(queryConfig.buttons && queryConfig.buttons.searchText) || '查询'}\r\n                              </Button>\r\n                              <Button onClick={handleReset}>\r\n                                {(queryConfig.buttons && queryConfig.buttons.resetText) || '重置'}\r\n                              </Button>\r\n                            </Space>\r\n                          </Form.Item>\r\n                        </Space>\r\n                      </Form>\r\n                      {advFields.length > 0 && (\r\n                        <>\r\n                          <Button type=\"link\" onClick={() => setDrawerVisible(true)}>\r\n                            高级筛选\r\n                          </Button>\r\n                          <Drawer\r\n                            title={'高级筛选'}\r\n                            placement=\"right\"\r\n                            onClose={() => setDrawerVisible(false)}\r\n                            open={drawerVisible}\r\n                            size={420}\r\n                            styles={{ body: { padding: 0 } }}\r\n                          >\r\n                            <div\r\n                              style={{\r\n                                height: '100%',\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                              }}\r\n                            >\r\n                              <div\r\n                                style={{\r\n                                  flex: 1,\r\n                                  overflowY: 'auto',\r\n                                  padding: 16,\r\n                                }}\r\n                              >\r\n                                <Form form={form} layout=\"vertical\">\r\n                                  {advFields.map((f: any) => (\r\n                                    <Form.Item key={f.name} name={f.name} label={f.label} rules={f.rules || []}>\r\n                                      {f.render ? f.render() : renderField(f).props.children}\r\n                                    </Form.Item>\r\n                                  ))}\r\n                                </Form>\r\n                              </div>\r\n\r\n                              <div\r\n                                style={{\r\n                                  borderTop: `1px solid ${token.colorBorder}`,\r\n                                  padding: 12,\r\n                                  textAlign: 'right',\r\n                                }}\r\n                              >\r\n                                <Space>\r\n                                  <Button onClick={handleReset}>\r\n                                    {(queryConfig.buttons && queryConfig.buttons.resetText) || '重置'}\r\n                                  </Button>\r\n                                  <Button\r\n                                    type=\"primary\"\r\n                                    onClick={() => {\r\n                                      handleSearch()\r\n                                      setDrawerVisible(false)\r\n                                    }}\r\n                                  >\r\n                                    {(queryConfig.buttons && queryConfig.buttons.searchText) || '查询'}\r\n                                  </Button>\r\n                                </Space>\r\n                              </div>\r\n                            </div>\r\n                          </Drawer>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                }\r\n\r\n                return (\r\n                  <Form\r\n                    form={form}\r\n                    {...(queryConfig.formProps || {})}\r\n                    layout={queryConfig.layout || 'inline'}\r\n                    style={{ display: 'flex', alignItems: 'center' }}\r\n                  >\r\n                    <Space wrap>\r\n                      {baseFields.map((f: any) => renderField(f))}\r\n                      {showAdvanced && advFields.map((f: any) => renderField(f))}\r\n                      {advFields.length > 0 && (\r\n                        <Button type=\"link\" onClick={() => setShowAdvanced((s) => !s)}>\r\n                          {showAdvanced ? '收起' : '高级筛选'}\r\n                        </Button>\r\n                      )}\r\n                      <Form.Item>\r\n                        <Space>\r\n                          <Button type=\"primary\" onClick={handleSearch}>\r\n                            {(queryConfig.buttons && queryConfig.buttons.searchText) || '查询'}\r\n                          </Button>\r\n                          <Button onClick={handleReset}>\r\n                            {(queryConfig.buttons && queryConfig.buttons.resetText) || '重置'}\r\n                          </Button>\r\n                        </Space>\r\n                      </Form.Item>\r\n                    </Space>\r\n                  </Form>\r\n                )\r\n              })()}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ flex: '1 1 auto', overflowX: 'auto', overflowY: 'hidden' }}>\r\n        {(() => {\r\n          const computed = { x: tableScroll.x, y: tableScroll.y }\r\n          const tablePropsAny = tableProps as any\r\n          const tableScrollFromProps = tablePropsAny?.scroll || {}\r\n          const finalScroll = {\r\n            ...(typeof computed === 'object' ? computed : {}),\r\n            ...(tableScrollFromProps || {}),\r\n            ...(scrollProp || {}),\r\n          }\r\n\r\n          const restTableProps: any = { ...tableProps }\r\n          if (restTableProps && restTableProps.scroll) delete restTableProps.scroll\r\n\r\n          // AntD/rc-table sometimes renders a scrollbar placeholder header cell:\r\n          // <th class=\"ant-table-cell ant-table-cell-scrollbar\" />\r\n          // This can trigger a11y rules like \"th-has-data-cells\".\r\n          // Convert it to a presentational <td> to keep semantics valid.\r\n          const componentsFromProps = restTableProps?.components\r\n          if (restTableProps && restTableProps.components) delete restTableProps.components\r\n\r\n          const mergedComponents = (() => {\r\n            if (!componentsFromProps) {\r\n              return {\r\n                header: {\r\n                  cell: (cellProps: any) => {\r\n                    const className = cellProps?.className ?? ''\r\n                    if (typeof className === 'string' && className.includes('ant-table-cell-scrollbar')) {\r\n                      const { children, ...rest } = cellProps ?? {}\r\n                      return <td {...rest} aria-hidden=\"true\" role=\"presentation\" tabIndex={-1} />\r\n                    }\r\n                    return <th {...cellProps} />\r\n                  },\r\n                },\r\n              }\r\n            }\r\n\r\n            const OriginalHeaderCell = componentsFromProps?.header?.cell\r\n\r\n            return {\r\n              ...componentsFromProps,\r\n              header: {\r\n                ...(componentsFromProps?.header || {}),\r\n                cell: (cellProps: any) => {\r\n                  const className = cellProps?.className ?? ''\r\n                  if (typeof className === 'string' && className.includes('ant-table-cell-scrollbar')) {\r\n                    const { children, ...rest } = cellProps ?? {}\r\n                    return <td {...rest} aria-hidden=\"true\" role=\"presentation\" tabIndex={-1} />\r\n                  }\r\n                  return OriginalHeaderCell ? <OriginalHeaderCell {...cellProps} /> : <th {...cellProps} />\r\n                },\r\n              },\r\n            }\r\n          })()\r\n\r\n          return (\r\n            <Table\r\n              rowKey={rowKey}\r\n              columns={columnsWithActions}\r\n              dataSource={pagedData}\r\n              rowSelection={rowSelectionConfig as any}\r\n              pagination={false}\r\n              scroll={finalScroll}\r\n              virtual={typeof tableProps.virtual !== 'undefined' ? tableProps.virtual : virtualized}\r\n              components={mergedComponents}\r\n              style={{ width: '100%' }}\r\n              onChange={onTableChange}\r\n              {...restTableProps}\r\n            />\r\n          )\r\n        })()}\r\n      </div>\r\n      <div\r\n        style={{\r\n          flex: '0 0 auto',\r\n          padding: 8,\r\n          display: 'flex',\r\n          justifyContent: 'flex-end',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Pagination\r\n          current={pagination.current}\r\n          pageSize={pagination.pageSize}\r\n          total={typeof total === 'number' && total > 0 ? total : dataSource.length}\r\n          showSizeChanger\r\n          showQuickJumper\r\n          showTotal={(totalVal) => `共 ${totalVal} 条`}\r\n          onChange={async (current, pageSize) => {\r\n            setPagination({ current, pageSize })\r\n            if (typeof fetchData === 'function' || typeof reloadPage === 'function') {\r\n              try {\r\n                const includeSearch =\r\n                  mergeSearchToFetch &&\r\n                  (!mergeSearchToFetchOnce || !hasMergedInitialSearch || !hasMergedInitialSearch())\r\n                const extra = includeSearch ? parseLocationSearch() : undefined\r\n                await fetchPage(current, pageSize, sortState, extra)\r\n              } catch (err) {\r\n                console.warn('pagination fetchPage error', err)\r\n              }\r\n            }\r\n          }}\r\n          onShowSizeChange={async (current, size) => {\r\n            setPagination({ current, pageSize: size })\r\n            if (typeof fetchData === 'function' || typeof reloadPage === 'function') {\r\n              try {\r\n                const includeSearch =\r\n                  mergeSearchToFetch &&\r\n                  (!mergeSearchToFetchOnce || !hasMergedInitialSearch || !hasMergedInitialSearch())\r\n                const extra = includeSearch ? parseLocationSearch() : undefined\r\n                await fetchPage(current, size, sortState, extra)\r\n              } catch (err) {\r\n                console.warn('pagination fetchPage error', err)\r\n              }\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ResponsiveTable\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\ResponsiveTable\\useTable.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'onPaginationChange', 'pageSyncToUrl', and 'pagination'. Either include them or remove the dependency array. Mutable values like 'pagination.current' aren't valid dependencies because mutating them doesn't re-render the component.","line":151,"column":6,"nodeType":"ArrayExpression","endLine":151,"endColumn":47,"suggestions":[{"desc":"Update the dependencies array to be: [onPaginationChange, pageSyncToUrl, pagination, pagination.pageSize]","fix":{"range":[5088,5129],"text":"[onPaginationChange, pageSyncToUrl, pagination, pagination.pageSize]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'fetchData', 'pagination', and 'reloadPage'. Either include them or remove the dependency array. Mutable values like 'pagination.current' aren't valid dependencies because mutating them doesn't re-render the component.","line":169,"column":6,"nodeType":"ArrayExpression","endLine":169,"endColumn":84,"suggestions":[{"desc":"Update the dependencies array to be: [dataSource, fetchData, internalData, pagination, reloadPage]","fix":{"range":[5946,6024],"text":"[dataSource, fetchData, internalData, pagination, reloadPage]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":253,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":253,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":262,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":262,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":327,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":327,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":364,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":364,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'autoLoad', 'fetchData', 'fetchPage', 'fetchUrl', 'pagination', 'reloadPage', and 'sortState'. Either include them or remove the dependency array.","line":442,"column":6,"nodeType":"ArrayExpression","endLine":442,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [autoLoad, fetchData, fetchPage, fetchUrl, pagination, reloadPage, sortState]","fix":{"range":[16085,16087],"text":"[autoLoad, fetchData, fetchPage, fetchUrl, pagination, reloadPage, sortState]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect, useMemo } from 'react'\n\n// --- Type helpers ---\nexport type RequestParamMap = {\n  pageField: string\n  pageSizeField: string\n  sortField: string\n  orderField: string\n}\n\nexport type ResponseFieldMap = {\n  listField: string\n  totalField: string\n}\n\nexport type UseTableOptions<T = any> = {\n  dataSource?: T[]\n  initialPagination?: { current: number; pageSize: number }\n  minBodyHeight?: number\n  minWidth?: number\n  pageSyncToUrl?: boolean\n  onPaginationChange?: (pagination: { current: number; pageSize: number }) => void\n  reloadPage?: ((page: number, pageSize: number) => Promise<any>) | null\n  fetchData?: ((page: number, pageSize: number, sort?: any, extraParams?: any) => Promise<any>) | null\n  fetchUrl?: string | null\n  requestLib?: any\n  requestMethod?: string\n  mergeSearchToFetch?: boolean\n  mergeSearchToFetchOnce?: boolean\n  clearUrlAfterInitialMerge?: boolean\n  initialSearch?: Record<string, any>\n  requestParamMap?: RequestParamMap\n  responseFieldMap?: ResponseFieldMap\n  autoLoad?: boolean\n  serverSort?: boolean\n  defaultSort?: any\n  selectionMode?: 'multiple' | 'single' | 'none'\n  rowSelectable?: ((record: T) => boolean) | string | null\n}\n\nexport type UseTableReturn<T = any> = {\n  containerRef: ReturnType<typeof useRef>\n  pagination: { current: number; pageSize: number }\n  setPagination: (\n    p:\n      | { current: number; pageSize: number }\n      | ((prev: { current: number; pageSize: number }) => {\n          current: number\n          pageSize: number\n        })\n  ) => void\n  tableScroll: { x: number; y: number }\n  pagedData: T[]\n  handleDelete: (deleteFn: (record?: T) => Promise<any>, record?: T) => Promise<void>\n  selectedRowKeys: Array<React.Key>\n  setSelectedRowKeys: (keys: Array<React.Key>) => void\n  handleSelectionChange: (keys: Array<React.Key>, rows: T[]) => { keys: Array<React.Key>; rows: T[] }\n  selectionMode: 'multiple' | 'single' | 'none'\n  isRowSelectable: (record: T) => boolean\n  calcIndex: (localIndex: number) => number\n  internalData?: T[]\n  total?: number\n  fetchPage: (page?: number, pageSize?: number, sort?: any, extraParams?: any) => Promise<any>\n  sortState?: any\n  setSortState?: (s: any) => void\n  hasMergedInitialSearch?: () => boolean\n}\nimport request from '@/service/request'\n\n// useTable: 提供分页管理、响应式 scroll 计算，以及删除后回退上一页的辅助方法\n//\n// 重要变更：fetchPage 支持第四个参数 `extraParams`，用于传递来自查询表单的过滤条件。\n// fetchPage(page, pageSize, sort, extraParams) 会把 extraParams 合并到通过 `fetchUrl` 发出的请求参数中；\n// 如果使用自定义 `fetchData`/`reloadPage`，则会以第四个参数的形式传入（向后兼容旧签名）。\nexport default function useTable<T = any>(opts: UseTableOptions<T> = {}): UseTableReturn<T> {\n  const {\n    dataSource = [],\n    initialPagination = { current: 1, pageSize: 10 },\n    minBodyHeight = 120,\n    minWidth = 600,\n    pageSyncToUrl = false,\n    onPaginationChange = () => {},\n    reloadPage = null,\n    fetchData = null,\n    fetchUrl = null,\n    requestLib = request,\n    requestMethod = 'get',\n    mergeSearchToFetch = false,\n    mergeSearchToFetchOnce = false,\n    clearUrlAfterInitialMerge = true,\n    initialSearch = {},\n    requestParamMap = {\n      pageField: 'page',\n      pageSizeField: 'pageSize',\n      sortField: 'sort',\n      orderField: 'order',\n    },\n    responseFieldMap = { listField: 'data', totalField: 'total' },\n    autoLoad = false,\n    serverSort = false,\n    defaultSort = null,\n    selectionMode = 'multiple',\n    rowSelectable = null,\n  } = opts\n  // ensure serverSort is referenced (used by consumer components); keep a no-op to avoid TS unused error\n  void serverSort\n  const containerRef = useRef<HTMLDivElement | null>(null)\n  const [pagination, setPagination] = useState(initialPagination)\n  // ensure pagination numbers are normalized\n  useEffect(() => {\n    setPagination((p) => {\n      const current = Number(p.current) || 1\n      const pageSize = Number(p.pageSize) || 10\n      if (current !== p.current || pageSize !== p.pageSize) return { current, pageSize }\n      return p\n    })\n    // run once on mount\n  }, [])\n  const [tableScroll, setTableScroll] = useState({\n    x: Math.max(minWidth, 800),\n    y: 280,\n  })\n\n  // 同步 URL（可选）\n  useEffect(() => {\n    if (!pageSyncToUrl) return\n    const params = new URLSearchParams(window.location.search)\n    const pageStr = params.get('page')\n    const current = pageStr ? parseInt(pageStr, 10) : null\n    const pageSizeStr = params.get('pageSize')\n    const pageSize = pageSizeStr ? parseInt(pageSizeStr, 10) : null\n    if (current !== null || pageSize !== null) {\n      setPagination((p) => ({\n        current: current || p.current,\n        pageSize: pageSize || p.pageSize,\n      }))\n    }\n  }, [pageSyncToUrl])\n\n  // 当 pagination 改变时触发回调并可选写入 URL\n  useEffect(() => {\n    const { current, pageSize } = pagination\n    onPaginationChange(pagination)\n    if (pageSyncToUrl) {\n      const params = new URLSearchParams(window.location.search)\n      params.set('page', String(current))\n      params.set('pageSize', String(pageSize))\n      const newUrl = `${window.location.pathname}?${params.toString()}`\n      window.history.replaceState({}, '', newUrl)\n    }\n  }, [pagination.current, pagination.pageSize])\n\n  // internal data 支持本地或服务端返回的数据\n  const [internalData, setInternalData] = useState(dataSource || [])\n  const [total, setTotal] = useState(Array.isArray(dataSource) ? dataSource.length : 0)\n  const [sortState, setSortState] = useState(defaultSort || { field: null, order: null })\n\n  const pagedData = useMemo(() => {\n    const { current, pageSize } = pagination\n    const isServerMode = typeof fetchData === 'function' || typeof reloadPage === 'function'\n    if (isServerMode) {\n      // internalData expected to be current page data when in server mode\n      return internalData || []\n    }\n    const ps = Number(pageSize) || 0\n    if (!ps || ps <= 0) return internalData || dataSource || []\n    const start = (Number(current) - 1) * ps\n    return (internalData || dataSource || []).slice(start, start + ps)\n  }, [dataSource, internalData, pagination.current, pagination.pageSize, sortState])\n\n  // Helper: get nested value by path\n  const getByPath = (obj: any, path: string) => {\n    if (!obj || !path) return undefined\n    const parts = path.split('.')\n    let cur = obj\n    for (const p of parts) {\n      if (cur == null) return undefined\n      cur = cur[p]\n    }\n    return cur\n  }\n\n  // 响应式计算 scroll\n  useEffect(() => {\n    const node = containerRef.current as HTMLDivElement | null\n    if (!node) return\n\n    const calc = () => {\n      const rect = node.getBoundingClientRect()\n\n      // Prefer clientHeight when available (excludes border), fallback to rect.height\n      const containerH =\n        typeof node.clientHeight === 'number' && node.clientHeight > 0\n          ? Math.floor(node.clientHeight)\n          : typeof rect.height === 'number' && rect.height > 0\n            ? Math.floor(rect.height)\n            : minBodyHeight + 120\n\n      const width = Math.max(Math.floor(rect.width || minWidth), minWidth)\n\n      // table header inside the antd Table\n      const headerEl =\n        node.querySelector<HTMLElement>('.ant-table-header') || node.querySelector<HTMLElement>('.ant-table-thead')\n      const headerH = headerEl ? headerEl.offsetHeight : 56\n\n      // toolbar (top actions / search) - subtract its height if present\n      const toolbarEl = node.querySelector<HTMLElement>('.responsive-table-toolbar')\n      const toolbarH = toolbarEl ? toolbarEl.offsetHeight : 0\n\n      const footerH = 64 // pagination area\n      const padding = 16\n\n      // available space for table body inside container\n      const availableBodyH = containerH - toolbarH - headerH - footerH - padding\n\n      // If availableBodyH is smaller than minBodyHeight, we allow shrinking\n      // to avoid creating an outer vertical scrollbar. But keep a hard lower\n      // bound so table remains usable.\n      const hardMin = 50\n      let bodyH = availableBodyH\n      if (availableBodyH <= 0) bodyH = hardMin\n      else if (availableBodyH < minBodyHeight) bodyH = Math.max(hardMin, availableBodyH)\n\n      setTableScroll({\n        x: Math.max(width, minWidth),\n        y: Math.max(bodyH, hardMin),\n      })\n    }\n\n    calc()\n    const ro = new ResizeObserver(() => calc())\n    ro.observe(node)\n    return () => ro.disconnect()\n  }, [containerRef, minBodyHeight, minWidth, pagination.pageSize])\n\n  // 删除后处理：deleteFn 应返回 Promise；如果当前页删除后无条目且页码>1，则自动回退并触发 reload\n  const handleDelete = async (deleteFn: (record?: T) => Promise<any>, record?: T) => {\n    if (typeof deleteFn !== 'function') throw new Error('deleteFn must be a function')\n    // 执行删除\n    await Promise.resolve(deleteFn(record))\n\n    const { current, pageSize } = pagination\n    // 如果本页只有一条（将被删除），尝试回退到上一页\n    if (pagedData && pagedData.length <= 1 && current > 1) {\n      const prev = current - 1\n      setPagination((p) => ({ ...p, current: prev }))\n      try {\n        // only include initialSearch if mergeSearchToFetch is enabled and\n        // either not configured to merge-once or hasn't merged yet\n        const includeSearch = mergeSearchToFetch && (!mergeSearchToFetchOnce || !initialMergedRef.current)\n        const extra = includeSearch ? initialSearch || {} : undefined\n        await fetchPage(prev, pageSize, undefined, extra)\n      } catch (e) {\n        // ignore - caller can handle\n      }\n    } else {\n      // 否则重新加载当前页\n      try {\n        const includeSearch = mergeSearchToFetch && (!mergeSearchToFetchOnce || !initialMergedRef.current)\n        const extra = includeSearch ? initialSearch || {} : undefined\n        await fetchPage(current, pageSize, undefined, extra)\n      } catch (e) {\n        // ignore\n      }\n    }\n  }\n\n  // 选择相关\n  const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([])\n\n  const handleSelectionChange = (keys: Array<React.Key>, rows: T[]) => {\n    setSelectedRowKeys(keys || [])\n    return { keys, rows }\n  }\n\n  // 计算序号（基于分页）\n  const calcIndex = (localIndex: number) => {\n    const { current, pageSize } = pagination\n    return (current - 1) * pageSize + (localIndex || 0) + 1\n  }\n\n  // 默认 rowSelectable 函数（如果未提供，所有行可选）\n  const isRowSelectable = (record: T) => {\n    if (typeof rowSelectable === 'function') return !!rowSelectable(record)\n    // 如果传入的是字符串字段名，用其为 key 判断 truthy 值表示可选\n    if (typeof rowSelectable === 'string') return !!(record as any)[rowSelectable]\n    return true\n  }\n\n  // fetch page helper（用于服务端模式）\n  // fetchPage 支持可选的 extraParams（例如查询表单的 filter 字段）\n  const fetchPage = async (\n    page = pagination.current,\n    pageSize = pagination.pageSize,\n    sort = sortState,\n    extraParams = {}\n  ) => {\n    const fetcher = fetchData || reloadPage\n    try {\n      let res\n      if (typeof fetcher === 'function') {\n        // 兼容性：向后兼容旧的 fetcher 签名，额外的参数会被忽略\n        res = await fetcher(page, pageSize, sort, extraParams)\n      } else if (fetchUrl) {\n        // build params according to requestParamMap\n        const params: Record<string, any> = {}\n        // if mergeSearchToFetch is enabled, merge initialSearch first (so extraParams override)\n        if (mergeSearchToFetch && initialSearch && typeof initialSearch === 'object') {\n          // if configured to merge only once, ensure we only merge the first time\n          if (!mergeSearchToFetchOnce || !initialMergedRef.current) {\n            Object.assign(params, initialSearch)\n            // mark as merged\n            initialMergedRef.current = true\n\n            // optionally clear the used query keys from the URL to avoid user confusion\n            try {\n              if (clearUrlAfterInitialMerge && typeof window !== 'undefined' && window && window.location) {\n                const usedKeys = Object.keys(initialSearch || {})\n                if (usedKeys.length > 0) {\n                  const sp = new URLSearchParams(window.location.search)\n                  for (const k of usedKeys) sp.delete(k)\n                  const qs = sp.toString()\n                  const newUrl = qs ? `${window.location.pathname}?${qs}` : window.location.pathname\n                  window.history.replaceState({}, '', newUrl)\n                }\n              }\n            } catch (e) {\n              // ignore URL modification errors\n            }\n          }\n        }\n        // merge extraParams so explicit page/pageSize/sort override if provided\n        Object.assign(params, extraParams || {})\n        // use configured pageField to represent current page\n        if (requestParamMap.pageField) params[requestParamMap.pageField] = page\n        params[requestParamMap.pageSizeField] = pageSize\n        if (sort && sort.field) params[requestParamMap.sortField] = sort.field\n        if (sort && sort.order) params[requestParamMap.orderField] = sort.order\n        // choose request method\n        const method = (requestMethod || 'get').toLowerCase()\n        try {\n          if (method === 'get') {\n            res = await requestLib.get(fetchUrl, params)\n          } else if (typeof requestLib[method] === 'function') {\n            // POST/PUT etc: send params as body\n            res = await requestLib[method](fetchUrl, params)\n          } else {\n            // fallback to get\n            res = await requestLib.get(fetchUrl, params)\n          }\n        } catch (e) {\n          console.error('fetchPage request failed', e)\n          res = null\n        }\n      } else {\n        return Promise.resolve()\n      }\n      if (!res) return Promise.resolve(res)\n\n      // Try using responseFieldMap first (listField / totalField)\n      let list: any = undefined\n      try {\n        list = getByPath(res, responseFieldMap.listField)\n      } catch (err) {\n        // ignore\n      }\n\n      // If mapping didn't yield an array, try a list of common candidate paths\n      if (!Array.isArray(list)) {\n        const listCandidates = []\n        if (responseFieldMap && responseFieldMap.listField) listCandidates.push(responseFieldMap.listField)\n        // common fallback paths\n        listCandidates.push('data.items', 'items', 'data', 'list')\n\n        for (const p of listCandidates) {\n          const v = getByPath(res, p)\n          if (Array.isArray(v)) {\n            list = v\n            break\n          }\n        }\n\n        // final fallback: if response itself is array\n        if (!Array.isArray(list) && Array.isArray(res)) list = res\n      }\n\n      if (Array.isArray(list)) {\n        setInternalData(list)\n\n        // resolve total using mapping first, then common fields\n        let totalCandidates = []\n        if (responseFieldMap && responseFieldMap.totalField) totalCandidates.push(responseFieldMap.totalField)\n        totalCandidates.push('total', 'count', 'data.total', 'data.count')\n\n        let resolvedTotal = undefined\n        for (const p of totalCandidates) {\n          const v = getByPath(res, p)\n          if (typeof v === 'number') {\n            resolvedTotal = v\n            break\n          }\n        }\n\n        if (typeof resolvedTotal === 'number') setTotal(resolvedTotal)\n        else setTotal(list.length)\n      }\n      return Promise.resolve(res)\n    } catch (e) {\n      console.error('fetchPage error', e)\n      return Promise.reject(e)\n    }\n  }\n\n  // autoLoad on mount when fetchUrl or fetchData provided and autoLoad true\n  const autoLoadRef = useRef(false)\n  const inFlightRef = useRef(false)\n  const initialMergedRef = useRef(false)\n\n  useEffect(() => {\n    if (!autoLoad) return\n    const isServerMode = typeof fetchData === 'function' || typeof reloadPage === 'function' || fetchUrl\n    if (!isServerMode) return\n    // guard against React StrictMode double-invocation in dev\n    if (autoLoadRef.current) return\n    autoLoadRef.current = true\n\n    // fetch initial page, avoid concurrent duplicate fetches\n    const doFetch = async () => {\n      if (inFlightRef.current) return\n      inFlightRef.current = true\n      try {\n        // let fetchPage handle merging initialSearch according to mergeSearchToFetch/Once\n        await fetchPage(pagination.current, pagination.pageSize, sortState)\n      } catch (e) {\n        console.error('autoLoad fetchPage failed', e)\n      } finally {\n        inFlightRef.current = false\n      }\n    }\n\n    doFetch()\n  }, [])\n\n  return {\n    containerRef,\n    pagination,\n    setPagination,\n    tableScroll,\n    pagedData,\n    handleDelete,\n    selectedRowKeys,\n    setSelectedRowKeys,\n    handleSelectionChange,\n    selectionMode,\n    isRowSelectable,\n    calcIndex,\n    // server-mode helpers\n    internalData,\n    total,\n    fetchPage,\n    sortState,\n    setSortState,\n    // indicate whether initialSearch has been merged already\n    hasMergedInitialSearch: () => !!initialMergedRef.current,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\RootLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\RouterErrorElement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\SmartVideoPlayer\\SmartVideoPlayer.stories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\WatermarkProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\AuthButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\AuthCallback.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'redirectTo'. Either include it or remove the dependency array.","line":64,"column":6,"nodeType":"ArrayExpression","endLine":64,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [location, redirectTo]","fix":{"range":[1934,1944],"text":"[location, redirectTo]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { Result, Spin } from 'antd'\nimport { useLocation } from 'react-router-dom'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { authService } from '@src/service/authService'\nimport { permissionService } from '@src/service/permissionService'\n\nexport const AuthCallback: React.FC = () => {\n  const [error, setError] = useState<string | null>(null)\n  const { redirectTo } = useSafeNavigate()\n  const location = useLocation()\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      try {\n        const urlParams = new URLSearchParams(location.search)\n        const code = urlParams.get('code')\n        const errorParam = urlParams.get('error')\n\n        if (errorParam) {\n          setError(`GitHub OAuth 错误: ${errorParam}`)\n          return\n        }\n\n        if (!code) {\n          setError('未收到授权码')\n          return\n        }\n\n        await authService.handleCallback(code)\n\n        // 登录成功后立即同步权限\n        try {\n          await permissionService.syncPermissions()\n        } catch (error) {\n          console.error('同步权限失败:', error)\n          // 即使权限同步失败，也允许登录，使用默认权限\n        }\n\n        // 获取用户可访问的第一个路由\n        try {\n          const routes = await permissionService.getAccessibleRoutes(true)\n          const safeRoutes = Array.isArray(routes) ? routes : []\n          if (safeRoutes.length > 0) {\n            // 跳转到第一个有权限的路由（优先首页）\n            const targetRoute = safeRoutes.includes('/') ? '/' : safeRoutes[0]\n            redirectTo(targetRoute)\n          } else {\n            // 如果没有权限，跳转到403\n            redirectTo('/403')\n          }\n        } catch (error) {\n          console.error('获取路由失败:', error)\n          // 默认跳转到首页，让路由守卫处理权限\n          redirectTo('/')\n        }\n      } catch (err) {\n        console.error('Callback handling error:', err)\n        setError(err instanceof Error ? err.message : '登录失败')\n      }\n    }\n\n    handleCallback()\n  }, [location])\n\n  if (error) {\n    return (\n      <Result\n        status=\"error\"\n        title=\"登录失败\"\n        subTitle={error}\n        extra={[\n          <button key=\"retry\" onClick={() => redirectTo('/signin')}>\n            重试\n          </button>,\n        ]}\n      />\n    )\n  }\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n      }}\n    >\n      <Spin size=\"large\" fullscreen tip=\"正在处理登录...\" />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\HashLink.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'replace' is assigned a value but never used. Allowed unused args must match /^_/u.","line":6,"column":73,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":80}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { forwardRef } from 'react'\nimport { LinkProps } from 'react-router-dom'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { HashRouterUtils } from '@src/utils/hashRouter'\n\nexport const HashLink = forwardRef<HTMLAnchorElement, LinkProps>(({ to, replace = false, children, ...props }, ref) => {\n  const { redirectTo } = useSafeNavigate()\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault()\n    // delegate to safe navigate\n    redirectTo(to as any)\n  }\n\n  const href = HashRouterUtils.buildHashUrl(to as any)\n\n  return (\n    <a ref={ref} href={href} onClick={handleClick} {...props}>\n      {children}\n    </a>\n  )\n})\n\nHashLink.displayName = 'HashLink'\n\n// 使用示例：\n// <HashLink to=\"/dashboard\">Dashboard</HashLink>\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\HashNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\PermissionGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\ProtectedRoute.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":32,"column":33,"nodeType":"Identifier","endLine":32,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":33,"column":35,"nodeType":"Identifier","endLine":33,"endColumn":43},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":35,"column":3,"nodeType":"Identifier","endLine":35,"endColumn":12}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { Navigate } from 'react-router-dom'\nimport { getLocalStorage } from '@utils/publicFn'\nimport { permissionService } from '@src/service/permissionService'\nimport type { PermissionCode } from '@src/types/permission'\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode\n  // 可选的权限/角色检查\n  permission?: PermissionCode | PermissionCode[]\n  roles?: string[]\n  requireAll?: boolean\n  fallback?: React.ReactNode\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({\n  children,\n  permission,\n  roles,\n  requireAll = false,\n  fallback,\n}) => {\n  // Token 检查（保持原有逻辑）\n  const { token } = getLocalStorage('token') || getLocalStorage('github_token') || { token: null }\n\n  if (!token) {\n    return <Navigate to=\"/signin\" replace />\n  }\n\n  // 如果没有传入权限/角色要求，直接渲染（保持向下兼容）\n  const needCheck = !!permission || (roles && roles.length > 0)\n  const [allowed, setAllowed] = useState<boolean>(!needCheck)\n  const [checking, setChecking] = useState<boolean>(!!needCheck)\n\n  useEffect(() => {\n    if (!needCheck) return\n\n    let alive = true\n    const checkPermissions = async () => {\n      try {\n        let hasAccess = true\n\n        // 权限检查\n        if (permission) {\n          if (Array.isArray(permission)) {\n            if (requireAll) {\n              const result = await permissionService.hasAllPermissions(permission)\n              hasAccess = result.hasPermission\n            } else {\n              const result = await permissionService.hasAnyPermission(permission)\n              hasAccess = result.hasPermission\n            }\n          } else {\n            hasAccess = await permissionService.hasPermission(permission)\n          }\n        }\n\n        // 角色检查\n        if (hasAccess && roles && roles.length > 0) {\n          if (requireAll) {\n            const result = await permissionService.hasAllRoles(roles)\n            hasAccess = result.hasPermission\n          } else {\n            const result = await permissionService.hasAnyRole(roles)\n            hasAccess = result.hasPermission\n          }\n        }\n\n        if (alive) {\n          setAllowed(hasAccess)\n        }\n      } catch (error) {\n        console.error('ProtectedRoute 权限检查失败:', error)\n        if (alive) {\n          setAllowed(false)\n        }\n      } finally {\n        if (alive) {\n          setChecking(false)\n        }\n      }\n    }\n\n    checkPermissions()\n\n    return () => {\n      alive = false\n    }\n  }, [permission, roles, requireAll, needCheck])\n\n  // 权限检查中，显示空白或加载状态\n  if (checking) {\n    return null\n  }\n\n  // 权限不足，显示 fallback 或跳转 403\n  if (!allowed) {\n    return fallback ? <>{fallback}</> : <Navigate to=\"/403\" replace />\n  }\n\n  return <>{children}</>\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\auth\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useApiCallOnMount\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useAutoScale\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useBodyScrollLock\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCallbackState\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCookie\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCookie\\use-cookie.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCopyToClipboard\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCopyToClipboard\\use-copy-clipboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCopyToClipboard\\use-copy.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":36,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\nimport { useCallback, useEffect, useState } from 'react'\n\ntype CopiedValue = string | null\n\ntype CopyFn = (text: string) => Promise<boolean>\n\nconst useCopy = ({\n  isCopiedDelay = 2000,\n}: {\n  isCopiedDelay?: number\n} = {}): [CopiedValue, CopyFn, boolean] => {\n  const [copiedText, setCopiedText] = useState<CopiedValue>(null)\n  const [isCopied, setIsCopied] = useState(false)\n\n  useEffect(() => {\n    if (!isCopied) {\n      return\n    }\n    setTimeout(() => {\n      setIsCopied(false)\n    }, isCopiedDelay)\n  }, [isCopied, isCopiedDelay])\n\n  const copy: CopyFn = useCallback(async (text) => {\n    if (!navigator?.clipboard) {\n      return false\n    }\n\n    // Try to save to clipboard then save it in the state if worked\n    try {\n      await navigator.clipboard.writeText(text)\n      setCopiedText(text)\n      setIsCopied(true)\n      return true\n    } catch (_error) {\n      setCopiedText(null)\n      return false\n    }\n  }, [])\n\n  return [copiedText, copy, isCopied]\n}\n\nexport default useCopy\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useCycle\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\n\nconst useCycle = (options = [], defaultValue = '') => {\n  const [index, setIndex] = useState(defaultValue ? undefined : 0)\n  const next = () => setIndex((i) => ((i ?? -1) + 1) % options.length)\n\n  return [index == null && defaultValue ? defaultValue : options[index ?? 0], next]\n}\n\n// const values[] = [398.43, -3243.5, 1435237]\n// const [value, cycleValue] = useCycle(values);\n\nexport default useCycle\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useDebounce\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useElementViewportPosition\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useErrorBoundary\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useEventListener\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useFetchReducer\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useFocus\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useHover\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useImageUpload\\image-upload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useImageUpload\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useInViewport\\index.jsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'elementRef' is not defined.","line":9,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":37},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'inViewRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'inViewRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":33,"column":46,"nodeType":"Identifier","endLine":33,"endColumn":53}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useState } from 'react'\n\nconst useInViewport = (triggerOnce = false, threshold = 0, rootMargin = '0px') => {\n  const inViewRef = useRef(null)\n  const [inViewport, setInViewport] = useState(false)\n  const observer = useRef(null)\n\n  useEffect(() => {\n    const targetElement = elementRef.current\n    if (!targetElement) return\n    observer.current = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting && entry.intersectionRatio >= threshold) {\n            setInViewport(true)\n            if (triggerOnce) {\n              observer.current.disconnect()\n            }\n          } else {\n            setInViewport(false)\n          }\n        })\n      },\n      { threshold, rootMargin }\n    )\n\n    if (inViewRef.current) {\n      observer.current.observe(inViewRef.current)\n    }\n\n    return () => {\n      if (inViewRef.current) {\n        observer.current.unobserve(inViewRef.current)\n      }\n    }\n  }, [threshold, triggerOnce, rootMargin])\n\n  return {\n    inViewRef,\n    inViewport,\n  }\n}\n\nexport default useInViewport\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useInitialRender\\index.js","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n   7 |     ref.current = true\n   8 |   }, [])\n>  9 |   return ref.current\n     |          ^^^^^^^^^^^ Cannot access ref value during render\n  10 | }\n  11 |\n  12 | export default useInitialRender","line":9,"column":10,"nodeType":null,"endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from 'react'\n// https://github.com/kentcdodds/use-deep-compare-effect\n\nconst useInitialRender = () => {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = true\n  }, [])\n  return ref.current\n}\n\nexport default useInitialRender\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useInterval\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useIsMount\\index.js","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n   6 |     isMountRef.current = false\n   7 |   }, [])\n>  8 |   return isMountRef.current\n     |          ^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n   9 | }\n  10 |\n  11 | export default useIsMount","line":8,"column":10,"nodeType":null,"endLine":8,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from 'react'\n\nconst useIsMount = () => {\n  const isMountRef = useRef(true)\n  useEffect(() => {\n    isMountRef.current = false\n  }, [])\n  return isMountRef.current\n}\n\nexport default useIsMount\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useKeyPress\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'downHandler' and 'upHandler'. Either include them or remove the dependency array.","line":20,"column":6,"nodeType":"ArrayExpression","endLine":20,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [downHandler, upHandler]","fix":{"range":[542,544],"text":"[downHandler, upHandler]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const useKeyPress = (targetKey) => {\n  const [keyPressed, setKeyPressed] = React.useState(false)\n\n  const downHandler = ({ key }) => {\n    if (key === targetKey) setKeyPressed(true)\n  }\n\n  const upHandler = ({ key }) => {\n    if (key === targetKey) setKeyPressed(false)\n  }\n\n  React.useEffect(() => {\n    window.addEventListener('keydown', downHandler)\n    window.addEventListener('keyup', upHandler)\n\n    return () => {\n      window.removeEventListener('keydown', downHandler)\n      window.removeEventListener('keyup', upHandler)\n    }\n  }, [])\n\n  return keyPressed\n}\n\nexport default useKeyPress\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useLocalStorage\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'ChildNode' is not defined.","line":5,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":47},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`elementLeft` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx:27:52\n  25 |           if (previous.nodeType === 1) {\n  26 |             el.style.marginTop = '0'\n> 27 |             if (previous instanceof HTMLElement && elementLeft(previous) === elementLeft(el)) {\n     |                                                    ^^^^^^^^^^^ `elementLeft` accessed before it is declared\n  28 |               el.style.marginTop = -(elementTop(el) - elementBottom(previous) - gapSize) + 'px'\n  29 |               break\n  30 |             }\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx:44:3\n  42 |   }, [items])\n  43 |\n> 44 |   const elementLeft = (el: HTMLElement) => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |     return el.getBoundingClientRect().left\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |   }\n     | ^^^^ `elementLeft` is declared here\n  47 |\n  48 |   const elementTop = (el: HTMLElement) => {\n  49 |     return el.getBoundingClientRect().top + window.scrollY","line":27,"column":52,"nodeType":null,"endLine":27,"endColumn":63},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`elementTop` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx:28:38\n  26 |             el.style.marginTop = '0'\n  27 |             if (previous instanceof HTMLElement && elementLeft(previous) === elementLeft(el)) {\n> 28 |               el.style.marginTop = -(elementTop(el) - elementBottom(previous) - gapSize) + 'px'\n     |                                      ^^^^^^^^^^ `elementTop` accessed before it is declared\n  29 |               break\n  30 |             }\n  31 |           }\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx:48:3\n  46 |   }\n  47 |\n> 48 |   const elementTop = (el: HTMLElement) => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 49 |     return el.getBoundingClientRect().top + window.scrollY\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 50 |   }\n     | ^^^^ `elementTop` is declared here\n  51 |\n  52 |   const elementBottom = (el: HTMLElement) => {\n  53 |     return el.getBoundingClientRect().bottom + window.scrollY","line":28,"column":38,"nodeType":null,"endLine":28,"endColumn":48},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`elementBottom` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx:28:55\n  26 |             el.style.marginTop = '0'\n  27 |             if (previous instanceof HTMLElement && elementLeft(previous) === elementLeft(el)) {\n> 28 |               el.style.marginTop = -(elementTop(el) - elementBottom(previous) - gapSize) + 'px'\n     |                                                       ^^^^^^^^^^^^^ `elementBottom` accessed before it is declared\n  29 |               break\n  30 |             }\n  31 |           }\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMasonry\\index.tsx:52:3\n  50 |   }\n  51 |\n> 52 |   const elementBottom = (el: HTMLElement) => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 53 |     return el.getBoundingClientRect().bottom + window.scrollY\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |   }\n     | ^^^^ `elementBottom` is declared here\n  55 |\n  56 |   return masonryContainer\n  57 | }","line":28,"column":55,"nodeType":null,"endLine":28,"endColumn":68}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useLayoutEffect, useState, useRef } from 'react'\n\nconst useMasonry = () => {\n  const masonryContainer = useRef<HTMLDivElement | null>(null)\n  const [items, setItems] = useState<ChildNode[]>([])\n\n  useLayoutEffect(() => {\n    if (masonryContainer.current) {\n      const masonryItem = Array.from(masonryContainer.current.children)\n      setItems(masonryItem)\n    }\n  }, [])\n\n  useEffect(() => {\n    const handleMasonry = () => {\n      if (!items || items.length < 1) return\n      let gapSize = 0\n      if (masonryContainer.current) {\n        gapSize = parseInt(window.getComputedStyle(masonryContainer.current).getPropertyValue('grid-row-gap'))\n      }\n      items.forEach((el) => {\n        if (!(el instanceof HTMLElement)) return\n        let previous = el.previousSibling\n        while (previous) {\n          if (previous.nodeType === 1) {\n            el.style.marginTop = '0'\n            if (previous instanceof HTMLElement && elementLeft(previous) === elementLeft(el)) {\n              el.style.marginTop = -(elementTop(el) - elementBottom(previous) - gapSize) + 'px'\n              break\n            }\n          }\n          previous = previous.previousSibling\n        }\n      })\n    }\n\n    handleMasonry()\n    window.addEventListener('resize', handleMasonry)\n    return () => {\n      window.removeEventListener('resize', handleMasonry)\n    }\n  }, [items])\n\n  const elementLeft = (el: HTMLElement) => {\n    return el.getBoundingClientRect().left\n  }\n\n  const elementTop = (el: HTMLElement) => {\n    return el.getBoundingClientRect().top + window.scrollY\n  }\n\n  const elementBottom = (el: HTMLElement) => {\n    return el.getBoundingClientRect().bottom + window.scrollY\n  }\n\n  return masonryContainer\n}\n\nexport default useMasonry\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMounted\\index.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMounted\\index.ts:7:5\n   5 |\n   6 |   useEffect(() => {\n>  7 |     setMounted(true)\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n   8 |   }, [])\n   9 |\n  10 |   return mounted","line":7,"column":5,"nodeType":null,"endLine":7,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\n\nexport default function useMounted() {\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  return mounted\n}\n\n// const mounted = useMounted();\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMousePosition\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMousePosition\\use-mouse-position.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useMousePosition\\use-mouse.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useNetworkStatus\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\n\nconst useNetworkStatus = () => {\n  const [isOnline, setIsOnline] = useState(navigator.onLine)\n\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true)\n    const handleOffline = () => setIsOnline(false)\n\n    window.addEventListener('online', handleOnline)\n    window.addEventListener('offline', handleOffline)\n\n    return () => {\n      window.removeEventListener('online', handleOnline)\n      window.removeEventListener('offline', handleOffline)\n    }\n  }, [])\n\n  return isOnline\n}\n\nexport default useNetworkStatus\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useOAuth\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":8,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":16,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// OAuth Hook\nimport { message } from 'antd'\n\nexport function useOAuth() {\n  const loginWithGitHub = () => {\n    try {\n      window.location.href = '/api/auth/github'\n    } catch (error) {\n      message.error('GitHub登录失败，请重试')\n    }\n  }\n\n  const loginWithGoogle = () => {\n    try {\n      window.location.href = '/api/auth/google'\n    } catch (error) {\n      message.error('Google登录失败，请重试')\n    }\n  }\n\n  return {\n    loginWithGitHub,\n    loginWithGoogle,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\usePersistedState\\index.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":9,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'localStorageKey'. Either include it or remove the dependency array.","line":16,"column":6,"nodeType":"ArrayExpression","endLine":16,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [localStorageKey, value]","fix":{"range":[475,482],"text":"[localStorageKey, value]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\n\nconst usePersistedState = (defaultValue, localStorageKey) => {\n  const [value, setValue] = useState(() => {\n    const localStorageItem = localStorage.getItem(localStorageKey)\n    if (localStorageItem === null) return defaultValue\n    try {\n      return JSON.parse(localStorageItem)\n    } catch (err) {\n      return defaultValue\n    }\n  })\n\n  useEffect(() => {\n    localStorage.setItem(localStorageKey, JSON.stringify(value))\n  }, [value])\n\n  // Expose the value and the updater function.\n  return [value, setValue]\n}\n\nexport default usePersistedState\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\usePollingEffect\\index.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":16,"column":7,"nodeType":"SpreadElement","endLine":16,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from 'react'\n\nconst usePollingEffect = (asyncCallback, dependencies = [], options = { interval: 10000 }) => {\n  const timeoutIdRef = useRef(null)\n  useEffect(() => {\n    // Side note: preceding semicolon needed for IIFEs.\n    ;(async function pollingCallback() {\n      try {\n        await asyncCallback()\n      } finally {\n        // Initiate timeout only after a response/error is received\n        timeoutIdRef.current = setTimeout(pollingCallback, options.interval)\n      }\n    })()\n    return () => clearTimeout(timeoutIdRef.current)\n  }, [...dependencies, asyncCallback, options.interval])\n}\n\nexport default usePollingEffect\n\n// const [data, setData] = useState({})\n// usePollingEffect(\n//   async () => setData(await fetch(...)),\n//   [],\n//   { interval: 3000 }\n// )\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\usePreviousValue\\index.js","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  4 |   const ref = useRef()\n  5 |   useEffect(() => (ref.current = value))\n> 6 |   return ref.current\n    |          ^^^^^^^^^^^ Cannot access ref value during render\n  7 | }\n  8 |\n  9 | export default usePreviousValue","line":6,"column":10,"nodeType":null,"endLine":6,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRef, useEffect } from 'react'\n\nconst usePreviousValue = (value) => {\n  const ref = useRef()\n  useEffect(() => (ref.current = value))\n  return ref.current\n}\n\nexport default usePreviousValue\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRandomInterval\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRandomInterval' is assigned a value but never used.","line":5,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\n// Utility helper for random number generation\nconst random = (min, max) => Math.floor(Math.random() * (max - min)) + min\n\nconst useRandomInterval = (callback, minDelay, maxDelay) => {\n  const timeoutId = React.useRef(null)\n  const savedCallback = React.useRef(callback)\n\n  React.useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  React.useEffect(() => {\n    let isEnabled = typeof minDelay === 'number' && typeof maxDelay === 'number'\n\n    if (isEnabled) {\n      const handleTick = () => {\n        const nextTickAt = random(minDelay, maxDelay)\n\n        timeoutId.current = window.setTimeout(() => {\n          savedCallback.current()\n          handleTick()\n        }, nextTickAt)\n      }\n\n      handleTick()\n    }\n\n    return () => window.clearTimeout(timeoutId.current)\n  }, [minDelay, maxDelay])\n\n  const cancel = React.useCallback(function () {\n    window.clearTimeout(timeoutId.current)\n  }, [])\n\n  return cancel\n}\n\n// const [value, setValue] = React.useState([400, 1000]);\n// const [key, setKey] = React.useState(null);\n// useRandomInterval(() => setKey(Math.random()), ...value);\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRect\\index.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRect\\index.tsx:21:19\n  19 | const useRect = (): [RectResult, React.RefObject<HTMLDivElement | null>] => {\n  20 |   const ref = useRef<HTMLDivElement | null>(null)\n> 21 |   const current = ref.current || null\n     |                   ^^^^^^^^^^^ Cannot access ref value during render\n  22 |   const [rect, setRect] = useState(getRect(current))\n  23 |\n  24 |   const handleResize = useCallback(() => {","line":21,"column":19,"nodeType":null,"endLine":21,"endColumn":30},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRect\\index.tsx:21:19\n  19 | const useRect = (): [RectResult, React.RefObject<HTMLDivElement | null>] => {\n  20 |   const ref = useRef<HTMLDivElement | null>(null)\n> 21 |   const current = ref.current || null\n     |                   ^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  22 |   const [rect, setRect] = useState(getRect(current))\n  23 |\n  24 |   const handleResize = useCallback(() => {","line":21,"column":19,"nodeType":null,"endLine":21,"endColumn":30}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useLayoutEffect, useRef, useState } from 'react'\n\nimport ResizeObserver from 'resize-observer-polyfill'\n\ntype RectResult = {\n  bottom: number\n  height: number\n  left: number\n  right: number\n  top: number\n  width: number\n} | null\n\nconst getRect = (element: HTMLElement | null): RectResult | null => {\n  if (!element) return null\n  return element.getBoundingClientRect()\n}\n\nconst useRect = (): [RectResult, React.RefObject<HTMLDivElement | null>] => {\n  const ref = useRef<HTMLDivElement | null>(null)\n  const current = ref.current || null\n  const [rect, setRect] = useState(getRect(current))\n\n  const handleResize = useCallback(() => {\n    if (!ref.current) return\n\n    // Update client rect\n    setRect(getRect(ref.current))\n  }, [ref])\n\n  useLayoutEffect(() => {\n    const element = ref.current\n    if (!element) return\n\n    handleResize()\n    if (typeof ResizeObserver === 'function') {\n      let resizeObserver: ResizeObserver | null = new ResizeObserver(() => handleResize())\n      resizeObserver.observe(element)\n\n      return () => {\n        if (!resizeObserver) return\n        resizeObserver.disconnect()\n        resizeObserver = null\n      }\n    }\n    // set resize listener\n    window.addEventListener('resize', handleResize)\n    // remove resize listener\n    return () => window.removeEventListener('resize', handleResize)\n  }, [handleResize])\n\n  return [rect, ref]\n}\n\nexport default useRect\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRefVariable\\index.js","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  3 | const useRefVariable = (value) => {\n  4 |   const ref = useRef()\n> 5 |   ref.current = value\n    |   ^^^^^^^^^^^ Cannot update ref during render\n  6 |   return ref\n  7 | }\n  8 |","line":5,"column":3,"nodeType":null,"endLine":5,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRef } from 'react'\n\nconst useRefVariable = (value) => {\n  const ref = useRef()\n  ref.current = value\n  return ref\n}\n\nexport default useRefVariable\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRemoveGlobalLoader.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useRootClick\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'cb'. Either include it or remove the dependency array. If 'cb' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":25,"column":6,"nodeType":"ArrayExpression","endLine":25,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [cb]","fix":{"range":[555,557],"text":"[cb]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react'\n\nconst useRootClick = (cb = () => {}) => {\n  useEffect(() => {\n    const controller = new AbortController()\n    document.documentElement.addEventListener(\n      'click',\n      () => {\n        cb()\n      },\n      { signal: controller.signal }\n    )\n    document.documentElement.addEventListener(\n      'mousedown',\n      (event) => {\n        if (event.detail > 1) {\n          event.preventDefault()\n        }\n      },\n      { signal: controller.signal }\n    )\n    return () => {\n      controller.abort()\n    }\n  }, [])\n}\n\nexport default useRootClick\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useScript\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useScrollIntoView\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  44 |   useEffect(() => {\n  45 |     if (isScrolled) {\n> 46 |       setIsScrolled(false)\n     |       ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  47 |     }\n  48 |   }, [isScrolled])\n  49 |","line":46,"column":7,"nodeType":null,"endLine":46,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react'\n\nconst useScrollIntoView = ({ offset = 0 }) => {\n  const targetRef = useRef(null)\n  const [isScrolled, setIsScrolled] = useState(false)\n\n  const scrollIntoView = () => {\n    if (targetRef.current) {\n      const rect = targetRef.current.getBoundingClientRect()\n      const scrollTop = window.scrollX || document.documentElement.scrollTop\n      const scrollLeft = window.scrollY || document.documentElement.scrollLeft\n      const elementTop = rect.top + scrollTop\n      const elementLeft = rect.left + scrollLeft\n\n      const windowHeight = window.innerHeight\n      const windowWidth = window.innerWidth\n\n      // 根据偏移量调整滚动位置\n      const adjustedTop = elementTop - offset\n      const adjustedLeft = elementLeft - offset\n\n      // 判断是否需要滚动\n      const shouldScrollY = adjustedTop < 0 || adjustedTop > windowHeight\n      const shouldScrollX = adjustedLeft < 0 || adjustedLeft > windowWidth\n\n      if (shouldScrollY) {\n        window.scrollTo({\n          top: shouldScrollY ? adjustedTop : scrollTop,\n          behavior: 'smooth',\n        })\n      }\n\n      if (shouldScrollX) {\n        window.scrollTo({\n          left: shouldScrollX ? adjustedLeft : scrollLeft,\n          behavior: 'smooth',\n        })\n      }\n\n      setIsScrolled(true)\n    }\n  }\n\n  useEffect(() => {\n    if (isScrolled) {\n      setIsScrolled(false)\n    }\n  }, [isScrolled])\n\n  return {\n    scrollIntoView,\n    targetRef,\n  }\n}\n\nexport default useScrollIntoView\n\n// const { scrollIntoView, targetRef } = useScrollIntoView({\n//   offset: 60\n// });\n\n// return (\n//   <div>\n//       <div ref={targetRef}>这是要滚动到的目标元素</div>\n//       <button onClick={scrollIntoView}>滚动到目标元素</button>\n//   </div>\n// );\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useScrollPosition\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useStep\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useStep\\use-step.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useSystemTheme\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useTable\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  80 |   useEffect(() => {\n  81 |     if (implemented) {\n> 82 |       resetTable()\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  83 |       setCachePayload({ ...payload })\n  84 |       getTableList(dataInterface, { ...payload })\n  85 |     }","line":82,"column":7,"nodeType":null,"endLine":82,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'getTableList' and 'payload'. Either include them or remove the dependency array.","line":86,"column":6,"nodeType":"ArrayExpression","endLine":86,"endColumn":59,"suggestions":[{"desc":"Update the dependencies array to be: [dataInterface, getTableList, implemented, payload]","fix":{"range":[2500,2553],"text":"[dataInterface, getTableList, implemented, payload]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":86,"column":7,"nodeType":"CallExpression","endLine":86,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\n\r\nconst useTable = (props) => {\r\n  const { dataInterface, implemented = true, isPagination = true, paths = ['data'], payload = {} } = props\r\n  const [rawData, setRawData] = useState({})\r\n  const [dataSource, setDataSource] = useState([])\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(payload.pageNum || 1)\r\n  const [pageSize, setPageSize] = useState(10)\r\n  const [cachePayload, setCachePayload] = useState({ ...payload })\r\n  const [loading, setLoading] = useState(!dataInterface)\r\n\r\n  const onChange = (page, pageSize) => {\r\n    setPage(page)\r\n    setPageSize(pageSize)\r\n    if (isPagination) {\r\n      getTableList(dataInterface, { page, pageSize, ...payload })\r\n    }\r\n  }\r\n\r\n  const getTableList = (dataInterface, { page = 1, pageSize = 10, ...other }) => {\r\n    setLoading(true)\r\n    if (!dataInterface || typeof dataInterface !== 'function') {\r\n      setLoading(false)\r\n      return\r\n    }\r\n    dataInterface({\r\n      ...(isPagination ? { pageNum: page, pageSize } : {}),\r\n      ...other,\r\n    }).then((resp) => {\r\n      if (resp && resp.status === 1) {\r\n        setPage(page)\r\n        setPageSize(pageSize)\r\n        try {\r\n          let data = JSON.parse(JSON.stringify(resp))\r\n\r\n          let _path = [...paths]\r\n          while (_path.length) {\r\n            data = data[_path[0]]\r\n            _path = _path.slice(1)\r\n          }\r\n\r\n          if (Array.isArray(data)) {\r\n            setTotal(data.length)\r\n            setDataSource(data)\r\n          } else {\r\n            setTotal(data.total || 0)\r\n            setDataSource(data.list || [])\r\n          }\r\n        } catch {\r\n          setTotal(0)\r\n          setDataSource([])\r\n        }\r\n        setRawData(resp.data)\r\n      }\r\n      setLoading(false)\r\n    })\r\n  }\r\n\r\n  const resetTable = () => {\r\n    setTotal(0)\r\n    setPage(1)\r\n    setPageSize(10)\r\n    setDataSource([])\r\n  }\r\n\r\n  const updateTable = (params) => {\r\n    const { dataInterface, payload } = params || {}\r\n    const safePayload = payload && typeof payload === 'object' ? payload : {}\r\n\r\n    setPage(safePayload.page || 1)\r\n    setPageSize(safePayload.pageSize || 10)\r\n    setCachePayload({ ...safePayload })\r\n    getTableList(dataInterface || props.dataInterface, {\r\n      ...cachePayload,\r\n      ...safePayload,\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (implemented) {\r\n      resetTable()\r\n      setCachePayload({ ...payload })\r\n      getTableList(dataInterface, { ...payload })\r\n    }\r\n  }, [JSON.stringify(payload), dataInterface, implemented])\r\n\r\n  return {\r\n    tableConfig: {\r\n      loading,\r\n      dataSource: [...dataSource],\r\n      pagination: isPagination\r\n        ? {\r\n            total,\r\n            size: 'default',\r\n            current: page,\r\n            pageSize,\r\n            onChange,\r\n            onShowSizeChange: onChange,\r\n            showQuickJumper: true,\r\n            showSizeChanger: true,\r\n            hideOnSinglePage: false,\r\n            showTotal: (total) => <span>{`共计 ${total} 条记录 第${page}/${Math.ceil(total / pageSize)}页`}</span>,\r\n          }\r\n        : false,\r\n      scroll: dataSource.length ? { scrollToFirstRowOnChange: true, x: 'max-content' } : false,\r\n    },\r\n    page,\r\n    pageSize,\r\n    rawData,\r\n    updateTable,\r\n    resetTable,\r\n  }\r\n}\r\nexport default useTable\r\n\r\n/**\r\n *\r\n * const [searchValues, setSearchValues] = useState({})\r\n * getResultData 请求方法\r\n * const { tableConfig, page, pageSize } = useTable({\r\n    dataInterface: getResultData,\r\n    payload: {\r\n      key: 'url',\r\n      ...searchValues,\r\n    },\r\n  });\r\n */\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useThrottle\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useTitle\\index.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'originalTitle.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'originalTitle.current' to a variable inside the effect, and use that variable in the cleanup function.","line":12,"column":38,"nodeType":"Identifier","endLine":12,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'documentDefined' and 'title'. Either include them or remove the dependency array.","line":14,"column":6,"nodeType":"ArrayExpression","endLine":14,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [documentDefined, title]","fix":{"range":[386,388],"text":"[documentDefined, title]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nconst useTitle = (title) => {\n  const documentDefined = typeof document !== 'undefined'\n  const originalTitle = React.useRef(documentDefined ? document.title : null)\n\n  React.useEffect(() => {\n    if (!documentDefined) return\n\n    if (document.title !== title) document.title = title\n\n    return () => {\n      document.title = originalTitle.current\n    }\n  }, [])\n}\n\nexport default useTitle\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useUnload\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useUpdate\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useVideo\\index.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleTimeControl` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useVideo\\index.tsx:125:7\n  123 |     // (especially noticeable in fullscreen with heavy UI around the video)\n  124 |     const now = typeof performance !== 'undefined' ? performance.now() : Date.now()\n> 125 |     ;(handleTimeControl as any)._lastTs = (handleTimeControl as any)._lastTs || 0\n      |       ^^^^^^^^^^^^^^^^^ `handleTimeControl` accessed before it is declared\n  126 |     const lastTs = (handleTimeControl as any)._lastTs as number\n  127 |     if (now - lastTs < 120) return\n  128 |     ;(handleTimeControl as any)._lastTs = now\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useVideo\\index.tsx:119:3\n  117 |   )\n  118 |\n> 119 |   const handleTimeControl = useCallback((e: Event) => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 120 |     const target = e.target as HTMLVideoElement\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 121 |     const nextTime = target.currentTime\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 136 |     })\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 137 |   }, [])\n      | ^^^^^^^^^ `handleTimeControl` is declared here\n  138 |\n  139 |   const toggleFullscreen = useCallback(() => {\n  140 |     if (document.fullscreenElement) {","line":125,"column":7,"nodeType":null,"endLine":125,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'FrameRequestCallback' is not defined.","line":179,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":179,"endColumn":47}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useState, useRef, type RefObject } from 'react'\nimport { useActivate, useUnactivate } from '@src/components/KeepAlive'\n\ntype UseVideoOptions = {\n  enabled?: boolean\n}\n\nconst useVideo = (ref: RefObject<HTMLVideoElement | null>, options: UseVideoOptions = {}) => {\n  const { enabled = true } = options\n  const [videoState, setVideoState] = useState({\n    isPaused: true,\n    isMuted: false,\n    currentVolume: 100,\n    currentTime: 0,\n  })\n\n  // 首次挂载后，同步一次真实 video 初始值（ref.current 在 effect 阶段已可用）\n  useEffect(() => {\n    if (!enabled) return\n    const video = ref.current\n    if (!video) return\n    setVideoState((prev) => ({\n      ...prev,\n      isPaused: video.paused,\n      isMuted: video.muted,\n      currentVolume: video.volume * 100,\n      currentTime: video.currentTime,\n    }))\n  }, [enabled, ref])\n\n  const play = useCallback(() => {\n    const video = ref.current\n    if (!video) return\n    const p = video.play()\n    Promise.resolve(p).catch(() => {\n      // ignore autoplay/policy errors\n    })\n  }, [ref])\n\n  const pause = useCallback(() => {\n    const video = ref.current\n    video?.pause()\n  }, [ref])\n\n  const handlePlayPauseControl = useCallback((e: Event) => {\n    const target = e.target as HTMLVideoElement\n    setVideoState((prev) => ({\n      ...prev,\n      isPaused: target.paused,\n    }))\n  }, [])\n\n  const togglePause = useCallback(() => {\n    const video = ref.current\n    if (!video) return\n    return video.paused ? play() : pause()\n  }, [pause, play, ref])\n\n  const handleVolume = useCallback(\n    (delta: number) => {\n      const deltaDecimal = delta / 100\n\n      const video = ref.current\n      if (video) {\n        let newVolume = video.volume + deltaDecimal\n\n        if (newVolume >= 1) {\n          newVolume = 1\n        } else if (newVolume <= 0) {\n          newVolume = 0\n        }\n\n        video.volume = newVolume\n      }\n    },\n    [ref]\n  )\n\n  const handleVolumeControl = useCallback((e: Event) => {\n    const target = e.target as HTMLVideoElement\n    setVideoState((prev) => ({\n      ...prev,\n      currentVolume: target.volume * 100,\n      isMuted: target.muted,\n    }))\n  }, [])\n\n  const handleMute = useCallback(\n    (mute: boolean) => {\n      const video = ref.current\n      if (!video) return\n      video.muted = mute\n      setVideoState((prev) => ({\n        ...prev,\n        isMuted: video.muted,\n      }))\n    },\n    [ref]\n  )\n\n  const handleTime = useCallback(\n    (delta = 5) => {\n      const video = ref.current\n      if (video) {\n        let newTime = video.currentTime + delta\n\n        if (newTime >= video.duration) {\n          newTime = video.duration\n        } else if (newTime <= 0) {\n          newTime = 0\n        }\n\n        video.currentTime = newTime\n      }\n    },\n    [ref]\n  )\n\n  const handleTimeControl = useCallback((e: Event) => {\n    const target = e.target as HTMLVideoElement\n    const nextTime = target.currentTime\n    // Throttle frequent timeupdate to reduce re-render pressure\n    // (especially noticeable in fullscreen with heavy UI around the video)\n    const now = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    ;(handleTimeControl as any)._lastTs = (handleTimeControl as any)._lastTs || 0\n    const lastTs = (handleTimeControl as any)._lastTs as number\n    if (now - lastTs < 120) return\n    ;(handleTimeControl as any)._lastTs = now\n\n    setVideoState((prev) => {\n      if (Math.abs(prev.currentTime - nextTime) < 0.05) return prev\n      return {\n        ...prev,\n        currentTime: nextTime,\n      }\n    })\n  }, [])\n\n  const toggleFullscreen = useCallback(() => {\n    if (document.fullscreenElement) {\n      document.exitFullscreen()\n    } else {\n      const video = ref.current\n      video?.requestFullscreen().catch((err) => {\n        console.log(err)\n      })\n    }\n  }, [ref])\n\n  const pausedByDeactivate = useRef(false)\n\n  useUnactivate(() => {\n    const video = ref.current\n    if (video && !video.paused) {\n      pause()\n      pausedByDeactivate.current = true\n    }\n  })\n\n  useActivate(() => {\n    if (pausedByDeactivate.current) {\n      play()\n      pausedByDeactivate.current = false\n    }\n  })\n\n  useEffect(() => {\n    if (!enabled) return\n    return () => {\n      pause()\n    }\n  }, [enabled, pause])\n\n  useEffect(() => {\n    if (!enabled) return\n    let disposed = false\n    let attachedTo: HTMLVideoElement | null = null\n\n    const schedule = (cb: FrameRequestCallback) => {\n      if (typeof requestAnimationFrame === 'function') return requestAnimationFrame(cb)\n      return setTimeout(() => cb(performance.now()), 0) as unknown as number\n    }\n\n    const attach = () => {\n      if (disposed) return\n      const video = ref.current\n      if (!video) {\n        // ref.current 理论上在 effect 时已就绪，但 KeepAlive/条件渲染下可能会延后，做一次轻量重试\n        schedule(attach)\n        return\n      }\n\n      attachedTo = video\n      video.addEventListener('volumechange', handleVolumeControl)\n      video.addEventListener('play', handlePlayPauseControl)\n      video.addEventListener('pause', handlePlayPauseControl)\n      video.addEventListener('timeupdate', handleTimeControl)\n    }\n\n    attach()\n\n    return () => {\n      disposed = true\n      if (!attachedTo) return\n      attachedTo.removeEventListener('volumechange', handleVolumeControl)\n      attachedTo.removeEventListener('play', handlePlayPauseControl)\n      attachedTo.removeEventListener('pause', handlePlayPauseControl)\n      attachedTo.removeEventListener('timeupdate', handleTimeControl)\n    }\n  }, [enabled, handlePlayPauseControl, handleTimeControl, handleVolumeControl, ref])\n\n  const increaseVolume = useCallback(\n    (increase = 5) => {\n      handleVolume(increase)\n    },\n    [handleVolume]\n  )\n\n  const decreaseVolume = useCallback(\n    (decrease = 5) => {\n      handleVolume(decrease * -1)\n    },\n    [handleVolume]\n  )\n\n  const mute = useCallback(() => {\n    handleMute(true)\n  }, [handleMute])\n\n  const unmute = useCallback(() => {\n    handleMute(false)\n  }, [handleMute])\n\n  const toggleMute = useCallback(() => {\n    handleMute(!ref.current?.muted)\n  }, [handleMute, ref])\n\n  const forward = useCallback(\n    (increase = 5) => {\n      handleTime(increase)\n    },\n    [handleTime]\n  )\n\n  const back = useCallback(\n    (decrease = 5) => {\n      handleTime(decrease * -1)\n    },\n    [handleTime]\n  )\n\n  return {\n    ...videoState,\n    play,\n    pause,\n    togglePause,\n    increaseVolume,\n    decreaseVolume,\n    mute,\n    unmute,\n    toggleMute,\n    forward,\n    back,\n    toggleFullscreen,\n  }\n}\n\nexport default useVideo\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useViewport\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useViewport\\use-view-port.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useWebsocket\\index.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'webSocketInit'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [ws, verify, webSocketInit]","fix":{"range":[1627,1639],"text":"[ws, verify, webSocketInit]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react'\n\n// https://thenable.io/building-a-use-socket-hook-in-react\n// https://aravindballa.com/writings/custom-hook-to-listen-websockets/\n// https://github.com/robtaussig/react-use-websocket\n// https://www.youtube.com/watch?v=sPVS2Z5dI8A\n\nconst useWebsocket = ({ url, verify }) => {\n  const ws = useRef(null)\n  const [wsData, setWsData] = useState('')\n  const [readyState, setReadyState] = useState({ key: 0, value: '正在链接中' })\n\n  const creatWebSocket = () => {\n    const stateArr = [\n      { key: 0, value: '正在链接中' },\n      { key: 1, value: '已经链接并且可以通讯' },\n      { key: 2, value: '连接正在关闭' },\n      { key: 3, value: '连接已关闭或者没有链接成功' },\n    ]\n    try {\n      ws.current = new WebSocket(url)\n\n      ws.current.onopen = () => setReadyState(stateArr[ws.current?.readyState ?? 0])\n\n      ws.current.onclose = () => {\n        setReadyState(stateArr[ws.current?.readyState ?? 0])\n      }\n\n      ws.current.onerror = () => {\n        setReadyState(stateArr[ws.current?.readyState ?? 0])\n      }\n\n      ws.current.onmessage = (e) => {\n        setWsData(e.data)\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const webSocketInit = () => {\n    if (!ws.current || ws.current.readyState === 3) {\n      creatWebSocket()\n    }\n  }\n\n  //  关闭 WebSocket\n  const closeWebSocket = () => {\n    ws.current?.close()\n  }\n\n  const reconnect = () => {\n    try {\n      closeWebSocket()\n      ws.current = null\n      creatWebSocket()\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  useEffect(() => {\n    if (verify) webSocketInit()\n    return () => {\n      ws.current?.close()\n    }\n  }, [ws, verify])\n\n  return {\n    wsData,\n    readyState,\n    closeWebSocket,\n    reconnect,\n  }\n}\nexport default useWebsocket\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\hooks\\useWindowScroll\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateful\\CheckableTags\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateful\\TreeList\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  196 |   }\n  197 |   useEffect(() => {\n> 198 |     getTreeListData()\n      |     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  199 |     return () => {\n  200 |       setTreeList([])\n  201 |       setTreeData([])","line":198,"column":5,"nodeType":null,"endLine":198,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getTreeListData'. Either include it or remove the dependency array.","line":206,"column":6,"nodeType":"ArrayExpression","endLine":206,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [getTreeListData]","fix":{"range":[5982,5984],"text":"[getTreeListData]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react'\nimport { Input, Tree } from 'antd'\nimport Loading from '@stateless/Loading'\nimport { isEmpty, makeTree, _getParentKey, loopTreeDataWithSearch, getDefaultKey } from './utils'\nimport styles from './index.module.less'\n\nconst { Search } = Input\n\nconst Index = forwardRef((props, ref) => {\n  const {\n    getTreeList, // 获取数据的接口\n    search = false, // 是否展示查询框\n    selectedKeys, // 选中的节点\n    setSelectedKeys, // 选中外传函数\n    selectable = false, // 父级节点是否可以选中\n    params = {}, // 额外的参数\n  } = props\n  const [treeList, setTreeList] = useState([]) // 全量数据源列表\n  const [treeData, setTreeData] = useState([])\n  const [searchValue, setSearchValue] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [expandedKeys, setExpandedKeys] = useState([])\n  const [fixSelectedKeys, setFixSelectedKeys] = useState(selectedKeys || [])\n\n  // 展开树\n  const handleExpand = (a, b) => {\n    const expandedKey = b.node.key\n\n    if (expandedKeys.includes(expandedKey)) {\n      setExpandedKeys([...expandedKeys.filter((e) => !e.startsWith(expandedKey))])\n    } else {\n      setExpandedKeys([...expandedKeys, expandedKey])\n    }\n  }\n\n  const onSearch = (value) => {\n    if (value !== searchValue) {\n      if (!value) {\n        const { expanded } = getDefaultKey(treeData)\n        setExpandedKeys(expanded)\n        setSearchValue(value)\n        return\n      }\n      const expandedKeys = treeList\n        .map((item) => {\n          if (item.name.includes(value)) {\n            return _getParentKey(item.id, treeData)\n          }\n          return null\n        })\n        .filter((item, i, self) => item && self.indexOf(item) === i)\n      setSearchValue(value)\n\n      setExpandedKeys(expandedKeys)\n    }\n  }\n\n  const onSelect = (selectedKeys, info) => {\n    if (!selectedKeys.length) return\n    if (selectable) {\n      setSelectedKeys(selectedKeys, info)\n      return setFixSelectedKeys(selectedKeys, info)\n    }\n    if (!info) {\n      setSelectedKeys(selectedKeys, info)\n      return setFixSelectedKeys(selectedKeys, info)\n    }\n    if (!info?.node?.children?.length) {\n      setSelectedKeys(selectedKeys, info)\n      return setFixSelectedKeys(selectedKeys, info)\n    }\n    handleExpand(selectedKeys, info)\n  }\n\n  const getTreeListData = (type) => {\n    setLoading(true)\n\n    getTreeList(params).then((resp) => {\n      if (resp.status === 1) {\n        setTreeList(resp.data)\n\n        let treeData = makeTree(resp.data, 'id', 'pid')\n        const setPath = (data, path) =>\n          data.map((item) => {\n            const itemPath = path ? `${path}.${item.id}` : item.id\n\n            return {\n              ...item,\n              key: itemPath,\n              ...(item.children?.length ? { children: setPath(item.children, itemPath) } : {}),\n            }\n          })\n        treeData = setPath(treeData)\n\n        setTreeData(treeData)\n\n        if (!type) {\n          treeInit(resp.data)\n          let selected = []\n          let expanded = []\n          try {\n            if (selectedKeys?.length) {\n              resp.data.some((item) => {\n                if (item.id === selectedKeys[0]) {\n                  return item.id === selectedKeys[0]\n                }\n              })\n              selected = selectedKeys\n\n              const loop = (params) =>\n                params.some((item) => {\n                  if (item.realId === selectedKeys[0]) {\n                    expanded = [item.key]\n                    selected = [item.key]\n                    return true\n                  }\n                  if (item.children && item.children.length) {\n                    return loop(item.children)\n                  }\n                })\n              loop(treeData)\n            } else {\n              const defaultKey = selectable\n                ? {\n                    selected: [treeData[0].key],\n                    expanded: [treeData[0].key],\n                  }\n                : getDefaultKey(treeData)\n              selected = defaultKey.selected\n              expanded = defaultKey.expanded\n            }\n          } catch {\n            const defaultKey = selectable\n              ? {\n                  selected: [treeData[0].key],\n                  expanded: [treeData[0].key],\n                }\n              : getDefaultKey(treeData)\n            selected = defaultKey.selected\n            expanded = defaultKey.expanded\n          }\n          onSelect(selected)\n          setExpandedKeys(expanded)\n        }\n      }\n      setLoading(false)\n    })\n  }\n\n  const treeInit = (resData, isReset) => {\n    let selected = []\n    let expanded = []\n    try {\n      if (selectedKeys?.length && !isReset) {\n        resData.some((item) => {\n          if (item.id === selectedKeys[0]) {\n            return item.id === selectedKeys[0]\n          }\n        })\n        selected = selectedKeys\n\n        function loop(params) {\n          return params.some((item) => {\n            if (item.realId === selectedKeys[0]) {\n              expanded = [item.key]\n              selected = [item.key]\n              return true\n            }\n            if (item?.children?.length) {\n              return loop(item.children)\n            }\n          })\n        }\n        loop(treeData)\n      } else {\n        const defaultKey = selectable\n          ? {\n              selected: [treeData[0].key],\n              expanded: [treeData[0].key],\n            }\n          : getDefaultKey(treeData)\n        selected = defaultKey.selected\n        expanded = defaultKey.expanded\n      }\n    } catch {\n      const defaultKey = getDefaultKey(treeData)\n      selected = defaultKey.selected\n      expanded = defaultKey.expanded\n    }\n\n    onSelect(selected)\n    setExpandedKeys(expanded) // 默认展开的节点\n  }\n  const updateTree = () => {\n    getTreeListData()\n  }\n  useEffect(() => {\n    getTreeListData()\n    return () => {\n      setTreeList([])\n      setTreeData([])\n      setSearchValue('')\n      setFixSelectedKeys([])\n      setExpandedKeys([])\n    }\n  }, [])\n\n  useImperativeHandle(ref, () => ({\n    reset: () => {\n      treeInit(treeList, true)\n    },\n    updateTree,\n    getTreeListData,\n    expandedKeys,\n    setExpandedKeys,\n    setSelectedKeys: setFixSelectedKeys,\n    treeData,\n  }))\n\n  return (\n    <div className={`${styles.treeList} treeList`}>\n      <div>\n        {search && (\n          <Search placeholder=\"查询\" onSearch={onSearch} style={{ marginBottom: 10, width: '100%' }} allowClear />\n        )}\n        <Tree\n          selectedKeys={!isEmpty(selectedKeys) ? selectedKeys : fixSelectedKeys}\n          expandedKeys={expandedKeys}\n          autoExpandParent\n          onExpand={handleExpand}\n          onSelect={onSelect}\n          treeData={loopTreeDataWithSearch(treeData, searchValue)}\n        />\n      </div>\n      {loading ? <Loading /> : null}\n    </div>\n  )\n})\nexport default Index\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateful\\TreeList\\utils.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateful\\markmap\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateful\\mermaidHooks\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":1,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef, useId } from 'react'\n\nconst MermaidHooks = ({ chart, config }) => {\n  const [svg, setSvg] = useState('')\n  const [error, setError] = useState(null)\n  const [loading, setLoading] = useState(true)\n  // Generate a unique ID for mermaid to use for rendering\n  // useId returns string with colons which might be problematic for selectors, strip them\n  const id = useId().replace(/:/g, '')\n  const mermaidId = `mermaid-${id}`\n\n  useEffect(() => {\n    let isMounted = true\n\n    const renderChart = async () => {\n      if (!chart) return\n\n      setLoading(true)\n      setError(null)\n\n      try {\n        // Dynamic import for performance\n        const mermaid = (await import('mermaid')).default\n\n        // Initialize with default config or props\n        // Note: initialize is global, but safe to call repeatedly with same config\n        mermaid.initialize({\n          startOnLoad: false,\n          theme: 'default',\n          securityLevel: 'loose',\n          fontFamily: 'monospace',\n          ...config,\n        })\n\n        // Attempt to render\n        // mermaid.render returns an object { svg } in newer versions\n        const { svg: renderedSvg } = await mermaid.render(mermaidId, chart)\n\n        if (isMounted) {\n          setSvg(renderedSvg)\n          setLoading(false)\n        }\n      } catch (err) {\n        console.error('Mermaid render error:', err)\n        if (isMounted) {\n          setError(err.message || 'Failed to render chart')\n          setLoading(false)\n        }\n      }\n    }\n\n    // Debounce rendering slightly to avoid thrashing on rapid input\n    const timeoutId = setTimeout(renderChart, 200)\n\n    return () => {\n      isMounted = false\n      clearTimeout(timeoutId)\n    }\n  }, [chart, config, mermaidId])\n\n  return (\n    <div className=\"mermaid-wrapper\" style={{ minHeight: 100, position: 'relative' }}>\n      {loading && !svg && (\n        <div className=\"absolute inset-0 flex items-center justify-center text-gray-400\">Loading...</div>\n      )}\n\n      {error ? (\n        <div className=\"rounded border border-red-200 bg-red-50 p-4 text-red-500\">\n          <p className=\"font-bold\">Syntax Error:</p>\n          <pre className=\"mt-2 overflow-auto text-xs\">{error}</pre>\n        </div>\n      ) : (\n        <div className=\"mermaid-output\" dangerouslySetInnerHTML={{ __html: svg }} />\n      )}\n    </div>\n  )\n}\n\nexport default MermaidHooks\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AboutSection\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AdvancedCodeBlock\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AlignCenter\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AlternatingText\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimBackground\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  17 |   useEffect(() => {\n  18 |     if (defaultValue !== undefined) {\n> 19 |       setActiveId(defaultValue)\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  20 |     }\n  21 |   }, [defaultValue])\n  22 |","line":19,"column":7,"nodeType":null,"endLine":19,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AnimatePresence, motion } from 'motion/react'\nimport React, { Children, cloneElement, useEffect, useState, useId } from 'react'\nimport clsx from 'clsx'\n\nconst AnimatedBackground = ({ children, defaultValue, onValueChange, className, transition, enableHover = false }) => {\n  const [activeId, setActiveId] = useState(null)\n  const uniqueId = useId()\n\n  const handleSetActiveId = (id) => {\n    setActiveId(id)\n\n    if (onValueChange) {\n      onValueChange(id)\n    }\n  }\n\n  useEffect(() => {\n    if (defaultValue !== undefined) {\n      setActiveId(defaultValue)\n    }\n  }, [defaultValue])\n\n  return Children.map(children, (child, index) => {\n    const id = child.props['data-id']\n\n    const interactionProps = enableHover\n      ? {\n          onMouseEnter: () => handleSetActiveId(id),\n          onMouseLeave: () => handleSetActiveId(null),\n        }\n      : {\n          onClick: () => handleSetActiveId(id),\n        }\n\n    return cloneElement(\n      child,\n      {\n        key: index,\n        className: clsx('relative inline-flex', child.props.className),\n        'data-checked': activeId === id ? 'true' : 'false',\n        ...interactionProps,\n      },\n      <>\n        <AnimatePresence initial={false}>\n          {activeId === id && (\n            <motion.div\n              layoutId={`background-${uniqueId}`}\n              className={clsx('absolute inset-0', className)}\n              transition={transition}\n              initial={{ opacity: defaultValue ? 1 : 0 }}\n              animate={{\n                opacity: 1,\n              }}\n              exit={{\n                opacity: 0,\n              }}\n            />\n          )}\n        </AnimatePresence>\n        <div className=\"z-10\">{child.props.children}</div>\n      </>\n    )\n  })\n}\n\nexport default AnimatedBackground\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimGroup\\index.jsx","messages":[{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n  100 |\n  101 |   return (\n> 102 |     <MotionComponent initial=\"hidden\" animate=\"visible\" variants={containerVariants} className={className}>\n      |      ^^^^^^^^^^^^^^^ This component is created during render\n  103 |       {React.Children.map(children, (child, index) => (\n  104 |         <MotionChild key={index} variants={itemVariants}>\n  105 |           {child}\n\n   95 |   const itemVariants = variants?.item || selectedVariants.item\n   96 |\n>  97 |   const MotionComponent = motion.create(asParent)\n      |                           ^^^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n   98 |\n   99 |   const MotionChild = motion.create(asChild)\n  100 |","line":102,"column":6,"nodeType":null,"endLine":102,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { motion } from 'motion/react'\n\n// export type PresetType =\n//   | 'fade'\n//   | 'slide'\n//   | 'scale'\n//   | 'blur'\n//   | 'blur-slide'\n//   | 'zoom'\n//   | 'flip'\n//   | 'bounce'\n//   | 'rotate'\n//   | 'swing';\n\nconst defaultContainerVariants = {\n  visible: {\n    transition: {\n      staggerChildren: 0.1,\n    },\n  },\n}\n\nconst defaultItemVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1 },\n}\n\nconst presetVariants = {\n  fade: {},\n  slide: {\n    hidden: { y: 20 },\n    visible: { y: 0 },\n  },\n  scale: {\n    hidden: { scale: 0.8 },\n    visible: { scale: 1 },\n  },\n  blur: {\n    hidden: { filter: 'blur(4px)' },\n    visible: { filter: 'blur(0px)' },\n  },\n  'blur-slide': {\n    hidden: { filter: 'blur(4px)', y: 20 },\n    visible: { filter: 'blur(0px)', y: 0 },\n  },\n  zoom: {\n    hidden: { scale: 0.5 },\n    visible: {\n      scale: 1,\n      transition: { type: 'spring', stiffness: 300, damping: 20 },\n    },\n  },\n  flip: {\n    hidden: { rotateX: -90 },\n    visible: {\n      rotateX: 0,\n      transition: { type: 'spring', stiffness: 300, damping: 20 },\n    },\n  },\n  bounce: {\n    hidden: { y: -50 },\n    visible: {\n      y: 0,\n      transition: { type: 'spring', stiffness: 400, damping: 10 },\n    },\n  },\n  rotate: {\n    hidden: { rotate: -180 },\n    visible: {\n      rotate: 0,\n      transition: { type: 'spring', stiffness: 200, damping: 15 },\n    },\n  },\n  swing: {\n    hidden: { rotate: -10 },\n    visible: {\n      rotate: 0,\n      transition: { type: 'spring', stiffness: 300, damping: 8 },\n    },\n  },\n}\n\nconst addDefaultVariants = (variants) => ({\n  hidden: { ...defaultItemVariants.hidden, ...variants.hidden },\n  visible: { ...defaultItemVariants.visible, ...variants.visible },\n})\n\nconst AnimatedGroup = ({ children, className, variants, preset, asParent = 'div', asChild = 'div' }) => {\n  const selectedVariants = {\n    item: addDefaultVariants(preset ? presetVariants[preset] : {}),\n    container: addDefaultVariants(defaultContainerVariants),\n  }\n  const containerVariants = variants?.container || selectedVariants.container\n  const itemVariants = variants?.item || selectedVariants.item\n\n  const MotionComponent = motion.create(asParent)\n\n  const MotionChild = motion.create(asChild)\n\n  return (\n    <MotionComponent initial=\"hidden\" animate=\"visible\" variants={containerVariants} className={className}>\n      {React.Children.map(children, (child, index) => (\n        <MotionChild key={index} variants={itemVariants}>\n          {child}\n        </MotionChild>\n      ))}\n    </MotionComponent>\n  )\n}\n\nexport default AnimatedGroup\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimInViewBasic\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimInView\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimText\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimateOnScreen\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'ref.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'ref.current' to a variable inside the effect, and use that variable in the cleanup function.","line":30,"column":40,"nodeType":"Identifier","endLine":30,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react'\n\n// import useElementViewportPosition from '@hooks/useElementViewportPosition'\n\nconst useElementOnScreen = (ref, rootMargin = '0px', threshold = 0, triggerOnce = false) => {\n  const [isIntersecting, setIsIntersecting] = useState(true)\n  const observer = useRef(null)\n\n  // const { position } = useElementViewportPosition(ref)\n\n  useEffect(() => {\n    observer.current = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting && entry.intersectionRatio >= threshold) {\n          setIsIntersecting(true)\n          if (triggerOnce) {\n            observer.current.disconnect()\n          }\n        } else {\n          setIsIntersecting(false)\n        }\n      },\n      { rootMargin, threshold }\n    )\n    if (ref.current) {\n      observer.current.observe(ref.current)\n    }\n    return () => {\n      if (ref.current) {\n        observer.current.unobserve(ref.current)\n      }\n    }\n  }, [ref, rootMargin, threshold, triggerOnce])\n  return isIntersecting\n}\n\nconst AnimateIn = ({ from, to, rootMargin, threshold, triggerOnce, children }) => {\n  const ref = useRef(null)\n  const onScreen = useElementOnScreen(ref, rootMargin, threshold, triggerOnce)\n  const defaultStyles = {\n    transition: '1000ms ease-in-out',\n  }\n  return (\n    <div\n      ref={ref}\n      style={\n        onScreen\n          ? {\n              ...defaultStyles,\n              ...to,\n            }\n          : {\n              ...defaultStyles,\n              ...from,\n            }\n      }\n    >\n      {children}\n    </div>\n  )\n}\n\nconst FadeIn = ({ rootMargin = '0px', threshold = 0, triggerOnce = false, children }) => (\n  <AnimateIn\n    from={{ opacity: 0 }}\n    to={{ opacity: 1 }}\n    rootMargin={rootMargin}\n    threshold={threshold}\n    triggerOnce={triggerOnce}\n  >\n    {children}\n  </AnimateIn>\n)\n\nconst FadeUp = ({ rootMargin = '0px', threshold = 0, triggerOnce = false, children }) => (\n  <AnimateIn\n    from={{ opacity: 0, translate: '0 2rem' }}\n    to={{ opacity: 1, translate: 'none' }}\n    rootMargin={rootMargin}\n    threshold={threshold}\n    triggerOnce={triggerOnce}\n  >\n    {children}\n  </AnimateIn>\n)\n\nconst ScaleIn = ({ rootMargin = '0px', threshold = 0, triggerOnce = false, children }) => (\n  <AnimateIn\n    from={{ scale: '0' }}\n    to={{ scale: '1' }}\n    rootMargin={rootMargin}\n    threshold={threshold}\n    triggerOnce={triggerOnce}\n  >\n    {children}\n  </AnimateIn>\n)\n\nconst DiyAnimation = ({ from, to, rootMargin = '0px', threshold = 0, triggerOnce = false, children }) => (\n  <AnimateIn from={from} to={to} rootMargin={rootMargin} threshold={threshold} triggerOnce={triggerOnce}>\n    {children}\n  </AnimateIn>\n)\n\nconst AnimateOnScreen = {\n  FadeIn,\n  FadeUp,\n  ScaleIn,\n  DiyAnimation,\n}\n\nexport default AnimateOnScreen\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimateRipple\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimateWave\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'children' is defined but never used. Allowed unused args must match /^_/u.","line":4,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport styles from './index.module.less'\n\nconst AnimateWave = ({ children }) => {\n  return (\n    <>\n      <section className={styles.hIBkFg}>\n        <h2>\n          Design and code{' '}\n          <span className={styles.kqOLaE}>\n            <span>R</span>\n            <span>e</span>\n            <span>a</span>\n            <span>c</span>\n            <span>t</span>\n          </span>{' '}\n          apps\n        </h2>\n      </section>\n      <section style={{ fontSize: 30, position: 'relative' }}>\n        Dropping Texts:\n        <div className={styles.droppingTexts}>\n          <div>React</div>\n          <div>Vue</div>\n          <div>Angular</div>\n          <div>Remix!</div>\n        </div>\n      </section>\n    </>\n  )\n}\n\nexport default AnimateWave\n// https://svgwave.in/\n// https://codepen.io/natgeyzentech/pen/PoRYvRM\n// https://codepen.io/tedmcdo/pen/PqxKXg\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimatedList\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AnimationTabs\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ApiStateHandler\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AutoLink\\index.jsx","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":6,"column":48,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":6,"endColumn":49,"suggestions":[{"messageId":"removeEscape","fix":{"range":[168,169],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[168,168],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":6,"column":71,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":6,"endColumn":72,"suggestions":[{"messageId":"removeEscape","fix":{"range":[191,192],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[191,191],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":6,"column":83,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":6,"endColumn":84,"suggestions":[{"messageId":"removeEscape","fix":{"range":[203,204],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[203,203],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":6,"column":207,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":6,"endColumn":208,"suggestions":[{"messageId":"removeEscape","fix":{"range":[327,328],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[327,327],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport styles from './index.module.less'\n\nconst AutoLink = ({ text }) => {\n  const delimiter =\n    /((?:https?:\\/\\/)?(?:(?:[a-z0-9]?(?:[a-z0-9\\-]{1,61}[a-z0-9])?\\.[^\\.|\\s])+[a-z\\.]*[a-z]+|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3})(?::\\d{1,5})*[a-z0-9.,_\\/~#&=;%+?\\-\\\\(\\\\)]*)/gi\n\n  return (\n    <>\n      {text.split(delimiter).map((word, index) => {\n        const match = word.match(delimiter)\n        if (match) {\n          const url = match[0]\n          return (\n            <a\n              key={index}\n              className={styles.squiggle}\n              target=\"_blank\"\n              href={url.startsWith('http') ? url : `http://${url}`}\n            >\n              {url}\n            </a>\n          )\n        }\n        return word\n      })}\n    </>\n  )\n}\n\nexport default AutoLink\n\n// <AutoLink text=\"foo bar baz http://example.org bar\" />\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AutoScrollSection\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AutoSlider\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPeople' is assigned a value but never used.","line":42,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"Assignments to the 'slider' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","line":57,"column":14,"nodeType":"CallExpression","endLine":59,"endColumn":13},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: This value cannot be modified\n\nModifying a value used previously in an effect function or as an effect dependency is not allowed. Consider moving the modification before calling useEffect().\n\n  66 |     clearInterval(slider)\n  67 |     setIndex(newIndex)\n> 68 |     slider = setInterval(() => {\n     |     ^^^^^^ `slider` cannot be modified\n  69 |       setIndex((prevIndex) => (prevIndex + 1) % people.length)\n  70 |     }, 5000)\n  71 |   }","line":68,"column":5,"nodeType":null,"endLine":68,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport { ArrowRight, ArrowLeft, Quote } from 'lucide-react'\nimport styles from './index.module.less'\n\nimport SpringPng from '@assets/images/spring.png'\nimport HePng from '@assets/images/he.png'\nimport SongPng from '@assets/images/song.png'\nimport XuePng from '@assets/images/xue.png'\n\nconst data = [\n  {\n    id: 1,\n    name: '《咏柳》',\n    title: '贺知章',\n    quote: '碧玉妆成一树高，万条垂下绿丝绦。不知细叶谁裁出，二月春风似剪刀。',\n    image: SpringPng,\n  },\n  {\n    id: 2,\n    name: '《小池》',\n    title: '杨万里',\n    quote: '泉眼无声惜细流，树阴照水爱晴柔。小荷才露尖尖角，早有蜻蜓立上头。',\n    image: HePng,\n  },\n  {\n    id: 3,\n    name: '《山居秋暝》',\n    title: '王维',\n    quote: '空山新雨后，天气晚来秋。明月松间照，清泉石上流。',\n    image: SongPng,\n  },\n  {\n    id: 4,\n    name: '《逢雪宿芙蓉山主人》',\n    title: '刘长卿',\n    quote: '日暮苍山远，天寒白屋贫。柴门闻犬吠，风雪夜归人。',\n    image: XuePng,\n  },\n]\n\nconst AutoSlider = () => {\n  const [people, setPeople] = useState(data)\n  const [index, setIndex] = React.useState(0)\n\n  useEffect(() => {\n    const lastIndex = people.length - 1\n    if (index < 0) {\n      setIndex(lastIndex)\n    }\n    if (index > lastIndex) {\n      setIndex(0)\n    }\n  }, [index, people])\n\n  let slider = null\n  useEffect(() => {\n    slider = setInterval(() => {\n      setIndex(index + 1)\n    }, 5000)\n    return () => {\n      clearInterval(slider)\n    }\n  }, [index])\n\n  const handleIndexChange = (newIndex) => {\n    clearInterval(slider)\n    setIndex(newIndex)\n    slider = setInterval(() => {\n      setIndex((prevIndex) => (prevIndex + 1) % people.length)\n    }, 5000)\n  }\n\n  return (\n    <section className={styles['section']}>\n      <div className={styles['section-center']}>\n        {people.map((person, personIndex) => {\n          const { id, image, name, title, quote } = person\n\n          let position = styles['nextSlide']\n          if (personIndex === index) {\n            position = styles['activeSlide']\n          }\n          if (personIndex === index - 1 || (index === 0 && personIndex === people.length - 1)) {\n            position = styles['lastSlide']\n          }\n\n          return (\n            <article className={position} key={id}>\n              <img src={image} alt={name} className={styles['person-img']} />\n              <h4>{name}</h4>\n              <p className={styles['title']}>{title}</p>\n              <p className={styles['text']}>{quote}</p>\n              <Quote className={styles['icon']} />\n            </article>\n          )\n        })}\n        <button className={styles['prev']} onClick={() => handleIndexChange(index - 1)}>\n          <ArrowLeft />\n        </button>\n        <button className={styles['next']} onClick={() => handleIndexChange(index + 1)}>\n          <ArrowRight />\n        </button>\n      </div>\n    </section>\n  )\n}\n\nexport default AutoSlider\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\AvatarCard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\BackgroundBeams\\index.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  102 |                 x2: ['0%', '95%'],\n  103 |                 y1: ['0%', '100%'],\n> 104 |                 y2: ['0%', `${93 + Math.random() * 8}%`],\n      |                                    ^^^^^^^^^^^^^ Cannot call impure function\n  105 |               }}\n  106 |               transition={{\n  107 |                 duration: Math.random() * 10 + 10,","line":104,"column":36,"nodeType":null,"endLine":104,"endColumn":49},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  105 |               }}\n  106 |               transition={{\n> 107 |                 duration: Math.random() * 10 + 10,\n      |                           ^^^^^^^^^^^^^ Cannot call impure function\n  108 |                 ease: 'easeInOut',\n  109 |                 repeat: Infinity,\n  110 |                 delay: Math.random() * 10,","line":107,"column":27,"nodeType":null,"endLine":107,"endColumn":40},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  108 |                 ease: 'easeInOut',\n  109 |                 repeat: Infinity,\n> 110 |                 delay: Math.random() * 10,\n      |                        ^^^^^^^^^^^^^ Cannot call impure function\n  111 |               }}\n  112 |             >\n  113 |               <stop stopColor=\"#18CCFC\" stopOpacity=\"0\"></stop>","line":110,"column":24,"nodeType":null,"endLine":110,"endColumn":37}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { motion } from 'motion/react'\nimport clsx from 'clsx'\n\nconst BackgroundBeams = React.memo(({ className }) => {\n  const paths = [\n    'M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875',\n    'M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867',\n    'M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859',\n    'M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851',\n    'M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843',\n    'M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835',\n    'M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827',\n    'M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819',\n    'M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811',\n    'M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803',\n    'M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795',\n    'M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787',\n    'M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779',\n    'M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771',\n    'M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763',\n    'M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755',\n    'M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747',\n    'M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739',\n    'M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731',\n    'M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723',\n    'M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715',\n    'M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707',\n    'M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699',\n    'M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691',\n    'M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683',\n    'M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675',\n    'M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667',\n    'M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659',\n    'M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651',\n    'M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643',\n    'M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635',\n    'M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627',\n    'M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619',\n    'M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611',\n    'M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603',\n    'M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595',\n    'M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587',\n    'M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579',\n    'M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571',\n    'M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563',\n    'M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555',\n    'M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547',\n    'M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539',\n    'M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531',\n    'M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523',\n    'M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515',\n    'M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507',\n    'M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499',\n    'M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491',\n    'M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483',\n  ]\n  return (\n    <div\n      className={clsx(\n        'absolute inset-0 flex h-full w-full items-center justify-center [mask-size:40px] [mask-repeat:no-repeat]',\n        className\n      )}\n    >\n      <svg\n        className=\"pointer-events-none absolute z-0 h-full w-full\"\n        width=\"100%\"\n        height=\"100%\"\n        viewBox=\"0 0 696 316\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483M-30 -589C-30 -589 38 -184 502 -57C966 70 1034 475 1034 475M-23 -597C-23 -597 45 -192 509 -65C973 62 1041 467 1041 467M-16 -605C-16 -605 52 -200 516 -73C980 54 1048 459 1048 459M-9 -613C-9 -613 59 -208 523 -81C987 46 1055 451 1055 451M-2 -621C-2 -621 66 -216 530 -89C994 38 1062 443 1062 443M5 -629C5 -629 73 -224 537 -97C1001 30 1069 435 1069 435M12 -637C12 -637 80 -232 544 -105C1008 22 1076 427 1076 427M19 -645C19 -645 87 -240 551 -113C1015 14 1083 419 1083 419\"\n          stroke=\"url(#paint0_radial_242_278)\"\n          strokeOpacity=\"0.05\"\n          strokeWidth=\"0.5\"\n        ></path>\n\n        {paths.map((path, index) => (\n          <motion.path\n            key={`path-` + index}\n            d={path}\n            stroke={`url(#linearGradient-${index})`}\n            strokeOpacity=\"0.4\"\n            strokeWidth=\"0.6\"\n          ></motion.path>\n        ))}\n        <defs>\n          {paths.map((path, index) => (\n            <motion.linearGradient\n              id={`linearGradient-${index}`}\n              key={`gradient-${index}`}\n              initial={{\n                x1: '0%',\n                x2: '0%',\n                y1: '0%',\n                y2: '0%',\n              }}\n              animate={{\n                x1: ['0%', '100%'],\n                x2: ['0%', '95%'],\n                y1: ['0%', '100%'],\n                y2: ['0%', `${93 + Math.random() * 8}%`],\n              }}\n              transition={{\n                duration: Math.random() * 10 + 10,\n                ease: 'easeInOut',\n                repeat: Infinity,\n                delay: Math.random() * 10,\n              }}\n            >\n              <stop stopColor=\"#18CCFC\" stopOpacity=\"0\"></stop>\n              <stop stopColor=\"#18CCFC\"></stop>\n              <stop offset=\"32.5%\" stopColor=\"#6344F5\"></stop>\n              <stop offset=\"100%\" stopColor=\"#AE48FF\" stopOpacity=\"0\"></stop>\n            </motion.linearGradient>\n          ))}\n\n          <radialGradient\n            id=\"paint0_radial_242_278\"\n            cx=\"0\"\n            cy=\"0\"\n            r=\"1\"\n            gradientUnits=\"userSpaceOnUse\"\n            gradientTransform=\"translate(352 34) rotate(90) scale(555 1560.62)\"\n          >\n            <stop offset=\"0.0666667\" stopColor=\"var(--neutral-300)\"></stop>\n            <stop offset=\"0.243243\" stopColor=\"var(--neutral-300)\"></stop>\n            <stop offset=\"0.43594\" stopColor=\"white\" stopOpacity=\"0\"></stop>\n          </radialGradient>\n        </defs>\n      </svg>\n    </div>\n  )\n})\n\nexport default BackgroundBeams\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\BackgroundBoxes\\index.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  20 |\n  21 |   const getRandomColor = () => {\n> 22 |     return colors[Math.floor(Math.random() * colors.length)]\n     |                              ^^^^^^^^^^^^^ Cannot call impure function\n  23 |   }\n  24 |\n  25 |   return (","line":22,"column":30,"nodeType":null,"endLine":22,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { motion } from 'motion/react'\nimport clsx from 'clsx'\n\nexport const BoxesCore = ({ className, ...rest }) => {\n  const rows = new Array(50).fill(1)\n  const cols = new Array(30).fill(1)\n\n  const colors = [\n    'rgb(125 211 252)',\n    'rgb(249 168 212)',\n    'rgb(134 239 172)',\n    'rgb(253 224 71)',\n    'rgb(252 165 165)',\n    'rgb(216 180 254)',\n    'rgb(147 197 253)',\n    'rgb(165 180 252)',\n    'rgb(196 181 253)',\n  ]\n\n  const getRandomColor = () => {\n    return colors[Math.floor(Math.random() * colors.length)]\n  }\n\n  return (\n    <div\n      style={{\n        transform: `translate(-40%,-60%) skewX(-48deg) skewY(14deg) scale(0.675) rotate(0deg) translateZ(0)`,\n      }}\n      className={clsx(\n        'absolute -top-1/4 left-1/4 z-0 flex h-full w-full -translate-x-1/2 -translate-y-1/2 p-4',\n        className\n      )}\n      {...rest}\n    >\n      {rows.map((_, i) => (\n        <motion.div key={`row` + i} className=\"relative h-8 w-16 border-l border-slate-700\">\n          {cols.map((_, j) => (\n            <motion.div\n              whileHover={{\n                backgroundColor: getRandomColor(),\n                transition: { duration: 0 },\n              }}\n              animate={{\n                transition: { duration: 1 },\n              }}\n              key={`col` + j}\n              className=\"relative h-8 w-16 border-t border-r border-slate-700\"\n            >\n              {j % 2 === 0 && i % 2 === 0 ? (\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth=\"1.5\"\n                  stroke=\"currentColor\"\n                  className=\"pointer-events-none absolute -top-[14px] -left-[22px] h-6 w-10 stroke-[1px] text-slate-700\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 6v12m6-6H6\" />\n                </svg>\n              ) : null}\n            </motion.div>\n          ))}\n        </motion.div>\n      ))}\n    </div>\n  )\n}\n\nconst BackgroundBoxes = React.memo(BoxesCore)\nexport default BackgroundBoxes\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\BlurFade\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\BlurText\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\BorderBeam\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\BreatheText\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ClockFace\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\CodeHighlighter\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ColorfulText\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'colors'. Either include it or remove the dependency array.","line":29,"column":6,"nodeType":"ArrayExpression","endLine":29,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [colors]","fix":{"range":[747,749],"text":"[colors]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { motion } from 'motion/react'\n\nconst ColorfulText = ({ text }) => {\n  const colors = [\n    'rgb(131, 179, 32)',\n    'rgb(47, 195, 106)',\n    'rgb(42, 169, 210)',\n    'rgb(4, 112, 202)',\n    'rgb(107, 10, 255)',\n    'rgb(183, 0, 218)',\n    'rgb(218, 0, 171)',\n    'rgb(230, 64, 92)',\n    'rgb(232, 98, 63)',\n    'rgb(249, 129, 47)',\n  ]\n\n  const [currentColors, setCurrentColors] = React.useState(colors)\n  const [count, setCount] = React.useState(0)\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      const shuffled = [...colors].sort(() => Math.random() - 0.5)\n      setCurrentColors(shuffled)\n      setCount((prev) => prev + 1)\n    }, 5000)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  return text.split('').map((char, index) => (\n    <motion.span\n      key={`${char}-${count}-${index}`}\n      initial={{\n        y: 0,\n      }}\n      animate={{\n        color: currentColors[index % currentColors.length],\n        y: [0, -3, 0],\n        scale: [1, 1.01, 1],\n        filter: ['blur(0px)', `blur(5px)`, 'blur(0px)'],\n        opacity: [1, 0.8, 1],\n      }}\n      transition={{\n        duration: 0.5,\n        delay: index * 0.05,\n      }}\n      className=\"inline-block font-sans tracking-tight\"\n    >\n      {char}\n    </motion.span>\n  ))\n}\n\nexport default ColorfulText\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\CompareAll\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isMouseOver' is assigned a value but never used.","line":22,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clientX' is defined but never used. Allowed unused args must match /^_/u.","line":74,"column":6,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\nimport React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { AnimatePresence, motion, useMotionValue, useTransform } from 'motion/react'\nimport { GitMerge } from 'lucide-react'\nimport clsx from 'clsx'\n\nconst Compare = ({\n  firstImage = '',\n  secondImage = '',\n  className,\n  firstImageClassName,\n  secondImageClassname,\n  initialSliderPercentage = 50,\n  slideMode = 'hover',\n  showHandlebar = true,\n  autoplay = false,\n  autoplayDuration = 5000,\n}) => {\n  const x = useMotionValue(initialSliderPercentage)\n  const [isDragging, setIsDragging] = useState(false)\n  const sliderRef = useRef(null)\n  const [isMouseOver, setIsMouseOver] = useState(false)\n  const autoplayRef = useRef(null)\n\n  // Map x to style values\n  const left = useTransform(x, (value) => `${value}%`)\n  const clipPath = useTransform(x, (value) => `inset(0 ${100 - value}% 0 0)`)\n\n  const startAutoplay = useCallback(() => {\n    if (!autoplay) return\n\n    const startTime = Date.now()\n    const animate = () => {\n      const elapsedTime = Date.now() - startTime\n      const progress = (elapsedTime % (autoplayDuration * 2)) / autoplayDuration\n      const percentage = progress <= 1 ? progress * 100 : (2 - progress) * 100\n\n      x.set(percentage)\n      autoplayRef.current = requestAnimationFrame(animate)\n    }\n\n    animate()\n  }, [autoplay, autoplayDuration, x])\n\n  const stopAutoplay = useCallback(() => {\n    if (autoplayRef.current) {\n      cancelAnimationFrame(autoplayRef.current)\n      autoplayRef.current = null\n    }\n  }, [])\n\n  useEffect(() => {\n    startAutoplay()\n    return () => stopAutoplay()\n  }, [startAutoplay, stopAutoplay])\n\n  function mouseEnterHandler() {\n    setIsMouseOver(true)\n    stopAutoplay()\n  }\n\n  function mouseLeaveHandler() {\n    setIsMouseOver(false)\n    if (slideMode === 'hover') {\n      x.set(initialSliderPercentage)\n    }\n    if (slideMode === 'drag') {\n      setIsDragging(false)\n    }\n    startAutoplay()\n  }\n\n  const handleStart = useCallback(\n    (clientX) => {\n      if (slideMode === 'drag') {\n        setIsDragging(true)\n      }\n    },\n    [slideMode]\n  )\n\n  const handleEnd = useCallback(() => {\n    if (slideMode === 'drag') {\n      setIsDragging(false)\n    }\n  }, [slideMode])\n\n  const handleMove = useCallback(\n    (clientX) => {\n      if (!sliderRef.current) return\n      if (slideMode === 'hover' || (slideMode === 'drag' && isDragging)) {\n        const rect = sliderRef.current.getBoundingClientRect()\n        const mouseX = clientX - rect.left\n        const percent = (mouseX / rect.width) * 100\n        x.set(Math.max(0, Math.min(100, percent)))\n      }\n    },\n    [slideMode, isDragging, x]\n  )\n\n  const handleMouseDown = useCallback(\n    (e) => {\n      e.preventDefault()\n      handleStart(e.clientX)\n    },\n    [handleStart]\n  )\n  const handleMouseUp = useCallback(() => handleEnd(), [handleEnd])\n  const handleMouseMove = useCallback((e) => handleMove(e.clientX), [handleMove])\n\n  const handleTouchStart = useCallback(\n    (e) => {\n      if (!autoplay) {\n        handleStart(e.touches[0].clientX)\n      }\n    },\n    [handleStart, autoplay]\n  )\n\n  const handleTouchEnd = useCallback(() => {\n    if (!autoplay) {\n      handleEnd()\n    }\n  }, [handleEnd, autoplay])\n\n  const handleTouchMove = useCallback(\n    (e) => {\n      if (!autoplay) {\n        handleMove(e.touches[0].clientX)\n      }\n    },\n    [handleMove, autoplay]\n  )\n\n  return (\n    <div\n      ref={sliderRef}\n      className={clsx('h-[160px] w-[360px] overflow-hidden', className)}\n      style={{\n        position: 'relative',\n        cursor: slideMode === 'drag' ? 'grab' : 'col-resize',\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={mouseLeaveHandler}\n      onMouseEnter={mouseEnterHandler}\n      onMouseDown={handleMouseDown}\n      onMouseUp={handleMouseUp}\n      onTouchStart={handleTouchStart}\n      onTouchEnd={handleTouchEnd}\n      onTouchMove={handleTouchMove}\n    >\n      <AnimatePresence initial={false}>\n        <motion.div\n          className=\"absolute top-0 z-30 m-auto h-full w-px bg-linear-to-b from-transparent from-5% via-indigo-500 to-transparent to-95%\"\n          style={{\n            left,\n            top: '0',\n            zIndex: 40,\n          }}\n          transition={{ duration: 0 }}\n        >\n          <div className=\"absolute top-1/2 left-0 z-20 h-full w-36 -translate-y-1/2 bg-linear-to-r from-indigo-400 via-transparent to-transparent [mask-image:radial-gradient(100px_at_left,white,transparent)] opacity-50\" />\n          <div className=\"absolute top-1/2 left-0 z-10 h-1/2 w-10 -translate-y-1/2 bg-linear-to-r from-cyan-400 via-transparent to-transparent [mask-image:radial-gradient(50px_at_left,white,transparent)] opacity-100\" />\n          <div className=\"absolute top-1/2 -right-10 h-3/4 w-10 -translate-y-1/2 [mask-image:radial-gradient(100px_at_left,white,transparent)]\"></div>\n          {showHandlebar && (\n            <div className=\"absolute top-1/2 -right-2.5 z-30 flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded-md bg-white shadow-[0px_-1px_0px_0px_#FFFFFF40]\">\n              <GitMerge className=\"h-4 w-4 text-black\" />\n            </div>\n          )}\n        </motion.div>\n      </AnimatePresence>\n      <div className=\"pointer-events-none relative z-20 h-full w-full overflow-hidden\">\n        <AnimatePresence initial={false}>\n          {firstImage ? (\n            <motion.div\n              className={clsx(\n                'absolute inset-0 z-20 h-full w-full shrink-0 overflow-hidden select-none',\n                firstImageClassName\n              )}\n              style={{\n                clipPath,\n              }}\n              transition={{ duration: 0 }}\n            >\n              <img\n                alt=\"first image\"\n                src={firstImage}\n                className={clsx('absolute inset-0 z-20 h-full w-full shrink-0 select-none', firstImageClassName)}\n                draggable={false}\n              />\n            </motion.div>\n          ) : null}\n        </AnimatePresence>\n      </div>\n\n      <AnimatePresence initial={false}>\n        {secondImage ? (\n          <motion.img\n            className={clsx('absolute top-0 left-0 z-19 h-full w-full select-none', secondImageClassname)}\n            alt=\"second image\"\n            src={secondImage}\n            draggable={false}\n          />\n        ) : null}\n      </AnimatePresence>\n    </div>\n  )\n}\n\nexport default Compare\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ContactSection\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ContentPlaceholder\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\CopyToClipboard\\index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":10,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react'\r\nimport { CheckIcon, CopyIcon } from 'lucide-react'\r\n\r\nconst CopyToClipboard = ({ code }: Readonly<{ code: string }>) => {\r\n  const [isCopied, setIsCopied] = useState(false)\r\n  const copyToClipboard = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(code)\r\n      setIsCopied(true)\r\n    } catch (_error) {\r\n      setIsCopied(false)\r\n    } finally {\r\n      setTimeout(() => {\r\n        setIsCopied(false)\r\n      }, 2000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className=\"relative flex size-4 cursor-pointer bg-transparent text-base leading-6 font-normal text-zinc-500 transition-colors duration-150 ease-in-out dark:text-zinc-400\"\r\n        onClick={copyToClipboard}\r\n        type=\"button\"\r\n      >\r\n        {isCopied ? (\r\n          <CheckIcon className=\"block size-4 align-middle\" />\r\n        ) : (\r\n          <CopyIcon className=\"block size-4 align-middle\" />\r\n        )}\r\n      </button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CopyToClipboard\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\CopyToClipboard\\useCopyed.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":36,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\nimport { useCallback, useEffect, useState } from 'react'\n\ntype CopiedValue = string | null\n\ntype CopyFn = (text: string) => Promise<boolean>\n\nexport function useCopyToClipboard({\n  isCopiedDelay = 2000,\n}: {\n  isCopiedDelay?: number\n} = {}): [CopiedValue, CopyFn, boolean] {\n  const [copiedText, setCopiedText] = useState<CopiedValue>(null)\n  const [isCopied, setIsCopied] = useState(false)\n\n  useEffect(() => {\n    if (!isCopied) {\n      return\n    }\n    setTimeout(() => {\n      setIsCopied(false)\n    }, isCopiedDelay)\n  }, [isCopied, isCopiedDelay])\n\n  const copy: CopyFn = useCallback(async (text) => {\n    if (!navigator?.clipboard) {\n      return false\n    }\n\n    // Try to save to clipboard then save it in the state if worked\n    try {\n      await navigator.clipboard.writeText(text)\n      setCopiedText(text)\n      setIsCopied(true)\n      return true\n    } catch (_error) {\n      setCopiedText(null)\n      return false\n    }\n  }, [])\n\n  return [copiedText, copy, isCopied]\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\CubeSpinner\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\CustomSwitch\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'redirectTo'. Either include it or remove the dependency array.","line":10,"column":6,"nodeType":"ArrayExpression","endLine":10,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [path, redirectTo, url]","fix":{"range":[314,325],"text":"[path, redirectTo, url]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react'\nimport { Routes, Route, useMatch } from 'react-router-dom'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\n\nfunction NoFundPage() {\n  const { redirectTo } = useSafeNavigate()\n  const { url, path } = useMatch()\n  useEffect(() => {\n    redirectTo(`${url}/404`)\n  }, [path, url])\n  return null\n}\nconst CustomSwitch = (props) => {\n  const { children } = props\n\n  return (\n    <Routes>\n      {children}\n      <Route path=\"*\" element={<NoFundPage />} />\n    </Routes>\n  )\n}\n\nexport default CustomSwitch\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\DescBox\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\DonutCharts\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'initChart' function makes the dependencies of useCallback Hook (at line 201) change on every render. To fix this, wrap the definition of 'initChart' in its own useCallback() Hook.","line":42,"column":9,"nodeType":"VariableDeclarator","endLine":193,"endColumn":4,"suggestions":[{"desc":"Wrap the definition of 'initChart' in its own useCallback() Hook.","fix":{"range":[1049,4560],"text":"useCallback(() => {\n    if (!chartRef.current) return\n\n    // 销毁旧实例\n    if (chartInstance.current) {\n      chartInstance.current.dispose()\n    }\n\n    // 创建新实例\n    chartInstance.current = echarts.init(chartRef.current)\n\n    const data = eOptions?.data?.map((item, index) => ({\n      ...item,\n      tooltip: {\n        trigger: 'item',\n        ...eOptions?.options?.tooltip,\n      },\n      emphasis: {\n        label: {\n          show: true,\n        },\n      },\n      labelLine: {\n        // show: index === 0, // 显示第一个\n        show: true,\n        length: 15,\n        length2: 10,\n        ...eOptions?.options?.labelLine,\n      },\n      label: {\n        trigger: 'item',\n        // show: index === 0, // 显示第一个\n        show: true,\n        alignTo: 'edge',\n        minMargin: 5,\n        edgeDistance: 10,\n        rich: {\n          a: {\n            color: '#fff',\n            fontWeight: 'bold',\n            fontSize: 14,\n          },\n          b: {\n            color: '#fff',\n            fontSize: 12,\n            padding: [8, 0, 0, 0],\n          },\n          c: {\n            color: '#fff',\n            fontSize: 16,\n            padding: [8, 0, 0, 15],\n          },\n          d: {\n            padding: [28, 0, 0, 0],\n            color: '#fff',\n            fontWeight: 'bold',\n          },\n          e: {\n            color: '#EF4A10',\n            fontSize: 12,\n            padding: [8, 0, 0, 0],\n          },\n          f: {\n            color: '#EF4A10',\n            fontSize: 16,\n            padding: [8, 0, 0, 15],\n          },\n          g: {\n            color: '#2878FF',\n            fontSize: 16,\n            padding: [8, 0, 0, 15],\n          },\n        },\n        ...eOptions?.options?.label,\n      },\n      itemStyle: {\n        color: {\n          colorStops: [\n            { offset: 0, color: colors[index % colors.length][0] },\n            { offset: 1, color: colors[index % colors.length][1] },\n          ],\n        },\n      },\n    }))\n\n    const optionSerie = {\n      type: 'pie',\n      data,\n      radius: ['30', '90'],\n      center: ['50%', '50%'],\n      roseType: 'radius',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      label: {\n        position: 'outside',\n        distance: 0,\n        alignTo: 'labelLine',\n      },\n      itemStyle: {\n        borderRadius: 0,\n        color: {\n          type: 'linear',\n          x: 0,\n          y: 0,\n          x2: 1,\n          y2: 0,\n        },\n      },\n      labelLayout: (params) => {\n        const isLeft = params.labelRect.x < chartInstance.current.getWidth() / 2\n        const points = params.labelLinePoints\n        points[2][0] = isLeft ? params.labelRect.x : params.labelRect.x + params.labelRect.width\n        return {\n          labelLinePoints: points,\n          hideOverlap: true,\n        }\n      },\n      animationEasing: 'elasticOut',\n      animationDelay: () => Math.random() * 200,\n    }\n\n    // 配置项\n    const defaultOption = {\n      title: {\n        text: '',\n        subtext: '',\n        left: 'center',\n        ...eOptions?.options?.title,\n      },\n      tooltip: {\n        trigger: 'item',\n        ...eOptions?.options?.tooltip,\n      },\n      legend: {\n        show: true,\n        orient: 'vertical',\n        right: 20,\n        ...eOptions?.options?.legend,\n      },\n      series:\n        eOptions?.options?.series?.length > 0\n          ? eOptions?.options?.series.map((item) => ({\n              ...optionSerie,\n              ...item,\n            }))\n          : [optionSerie],\n    }\n\n    chartInstance.current.setOption(defaultOption)\n  })"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initChart'. Either include it or remove the dependency array.","line":221,"column":6,"nodeType":"ArrayExpression","endLine":221,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [initChart, reinitChart]","fix":{"range":[5238,5251],"text":"[initChart, reinitChart]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initChart'. Either include it or remove the dependency array.","line":228,"column":6,"nodeType":"ArrayExpression","endLine":228,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [eOptions, initChart]","fix":{"range":[5345,5355],"text":"[eOptions, initChart]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useCallback } from 'react'\nimport * as echarts from 'echarts'\n\nconst DonutChart = ({ height = '100%', eOptions }) => {\n  const chartRef = useRef(null)\n  const chartInstance = useRef(null)\n\n  const colors = [\n    ['#2878FF', '#73B9FF'],\n    ['#ABF1FF', '#39D3FF'],\n    ['#ECC6FF', '#BA86FF'],\n    ['#ACFFDC', '#72D592'],\n    ['#FFE6A5', '#FFBD4A'],\n    ['#FD80F1', '#FFADF6'],\n    ['#5657E8', '#B9BAFF'],\n    ['#E85B89', '#FFB8CF'],\n    ['#38A047', '#ADDFB5'],\n    ['#F2FA8B', '#BCC81C'],\n    ['#B0CEFF', '#346FD3'],\n    ['#FFD3AD', '#E08230'],\n    ['#9CE9FF', '#29A1C3'],\n    ['#4442CA', '#D6D5FF'],\n    ['#C02D56', '#FFA8C0'],\n    ['#C84FD1', '#FCD3FF'],\n    ['#9FDE47', '#CEF19E'],\n    ['#AAC6FF', '#3A7AFF'],\n    ['#CF8E29', '#FFCF84'],\n    ['#98E4FB', '#23C1F0'],\n    ['#FFE0D6', '#E57450'],\n    ['#B465FF', '#E8D0FF'],\n    ['#F8C106', '#FFEAA4'],\n  ]\n\n  // 处理窗口大小变化\n  const handleResize = () => {\n    if (chartInstance.current) {\n      chartInstance.current.resize()\n    }\n  }\n\n  // 初始化图表\n  const initChart = () => {\n    if (!chartRef.current) return\n\n    // 销毁旧实例\n    if (chartInstance.current) {\n      chartInstance.current.dispose()\n    }\n\n    // 创建新实例\n    chartInstance.current = echarts.init(chartRef.current)\n\n    const data = eOptions?.data?.map((item, index) => ({\n      ...item,\n      tooltip: {\n        trigger: 'item',\n        ...eOptions?.options?.tooltip,\n      },\n      emphasis: {\n        label: {\n          show: true,\n        },\n      },\n      labelLine: {\n        // show: index === 0, // 显示第一个\n        show: true,\n        length: 15,\n        length2: 10,\n        ...eOptions?.options?.labelLine,\n      },\n      label: {\n        trigger: 'item',\n        // show: index === 0, // 显示第一个\n        show: true,\n        alignTo: 'edge',\n        minMargin: 5,\n        edgeDistance: 10,\n        rich: {\n          a: {\n            color: '#fff',\n            fontWeight: 'bold',\n            fontSize: 14,\n          },\n          b: {\n            color: '#fff',\n            fontSize: 12,\n            padding: [8, 0, 0, 0],\n          },\n          c: {\n            color: '#fff',\n            fontSize: 16,\n            padding: [8, 0, 0, 15],\n          },\n          d: {\n            padding: [28, 0, 0, 0],\n            color: '#fff',\n            fontWeight: 'bold',\n          },\n          e: {\n            color: '#EF4A10',\n            fontSize: 12,\n            padding: [8, 0, 0, 0],\n          },\n          f: {\n            color: '#EF4A10',\n            fontSize: 16,\n            padding: [8, 0, 0, 15],\n          },\n          g: {\n            color: '#2878FF',\n            fontSize: 16,\n            padding: [8, 0, 0, 15],\n          },\n        },\n        ...eOptions?.options?.label,\n      },\n      itemStyle: {\n        color: {\n          colorStops: [\n            { offset: 0, color: colors[index % colors.length][0] },\n            { offset: 1, color: colors[index % colors.length][1] },\n          ],\n        },\n      },\n    }))\n\n    const optionSerie = {\n      type: 'pie',\n      data,\n      radius: ['30', '90'],\n      center: ['50%', '50%'],\n      roseType: 'radius',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      label: {\n        position: 'outside',\n        distance: 0,\n        alignTo: 'labelLine',\n      },\n      itemStyle: {\n        borderRadius: 0,\n        color: {\n          type: 'linear',\n          x: 0,\n          y: 0,\n          x2: 1,\n          y2: 0,\n        },\n      },\n      labelLayout: (params) => {\n        const isLeft = params.labelRect.x < chartInstance.current.getWidth() / 2\n        const points = params.labelLinePoints\n        points[2][0] = isLeft ? params.labelRect.x : params.labelRect.x + params.labelRect.width\n        return {\n          labelLinePoints: points,\n          hideOverlap: true,\n        }\n      },\n      animationEasing: 'elasticOut',\n      animationDelay: () => Math.random() * 200,\n    }\n\n    // 配置项\n    const defaultOption = {\n      title: {\n        text: '',\n        subtext: '',\n        left: 'center',\n        ...eOptions?.options?.title,\n      },\n      tooltip: {\n        trigger: 'item',\n        ...eOptions?.options?.tooltip,\n      },\n      legend: {\n        show: true,\n        orient: 'vertical',\n        right: 20,\n        ...eOptions?.options?.legend,\n      },\n      series:\n        eOptions?.options?.series?.length > 0\n          ? eOptions?.options?.series.map((item) => ({\n              ...optionSerie,\n              ...item,\n            }))\n          : [optionSerie],\n    }\n\n    chartInstance.current.setOption(defaultOption)\n  }\n\n  // 重新初始化图表\n  const reinitChart = useCallback(() => {\n    if (chartInstance.current) {\n      chartInstance.current.dispose()\n    }\n    initChart()\n  }, [initChart])\n\n  // 组件挂载和卸载时的处理\n  useEffect(() => {\n    initChart()\n    window.addEventListener('resize', handleResize)\n\n    // 监听 BigScreen 页面重新初始化事件\n    const handleReinit = () => {\n      reinitChart()\n    }\n    window.addEventListener('bigscreen-charts-reinit', handleReinit)\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n      window.removeEventListener('bigscreen-charts-reinit', handleReinit)\n      if (chartInstance.current) {\n        chartInstance.current.dispose()\n      }\n    }\n  }, [reinitChart])\n\n  // 当props变化时重新初始化图表\n  useEffect(() => {\n    if (eOptions) {\n      initChart()\n    }\n  }, [eOptions])\n\n  return <div ref={chartRef} style={{ height, width: '100%' }} />\n}\n\nexport default DonutChart\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\DottedStepper\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\DynamicBackground\\icons.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\DynamicBackground\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'onHoverDebounced'. Either include it or remove the dependency array.","line":61,"column":6,"nodeType":"ArrayExpression","endLine":61,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [onHoverDebounced]","fix":{"range":[1609,1611],"text":"[onHoverDebounced]"}}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  75 |             const col = i % cols\n  76 |\n> 77 |             const xOffset = Math.random() * (cellWidth - 75)\n     |                             ^^^^^^^^^^^^^ Cannot call impure function\n  78 |             const yOffset = Math.random() * (cellHeight - 75)\n  79 |\n  80 |             const baseX = col * cellWidth","line":77,"column":29,"nodeType":null,"endLine":77,"endColumn":42},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  76 |\n  77 |             const xOffset = Math.random() * (cellWidth - 75)\n> 78 |             const yOffset = Math.random() * (cellHeight - 75)\n     |                             ^^^^^^^^^^^^^ Cannot call impure function\n  79 |\n  80 |             const baseX = col * cellWidth\n  81 |             const baseY = row * cellHeight","line":78,"column":29,"nodeType":null,"endLine":78,"endColumn":42}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react'\nimport { useDebouncedCallback } from 'use-debounce'\nimport icons from './icons'\nimport styles from './index.module.less'\n\nconst setThresholds = (size, x, y) => {\n  if (size === 'sm') {\n    return {\n      hoverX: x * 0.03,\n      hoverY: y * 0.03,\n    }\n  }\n\n  if (size === 'md') {\n    return {\n      hoverX: x * 0.06,\n      hoverY: y * 0.06,\n    }\n  }\n\n  if (size === 'lg') {\n    return {\n      hoverX: x * 0.1,\n      hoverY: y * 0.1,\n    }\n  }\n}\n\nconst DynamicBackground = () => {\n  const [hasMounted, setHasMounted] = useState(false)\n  const heroRef = useRef()\n  const iconsRef = useRef([])\n  const iconCount = icons?.length\n  const { offsetWidth: width, offsetHeight: height } = heroRef?.current ?? {}\n\n  const onHover = ({ clientX, clientY }) => {\n    iconsRef.current.forEach((item) => {\n      const { xPos, yPos } = item?.initialPositions ?? {}\n      const size = item.size\n      const { hoverX, hoverY } = setThresholds(size, clientX, clientY)\n\n      if (item.refItem) {\n        item.refItem.style.transform = `translate(${xPos + hoverX}px, ${yPos + hoverY}px)`\n      }\n    })\n  }\n  const onHoverDebounced = useDebouncedCallback(onHover, 10)\n\n  useEffect(() => {\n    setHasMounted(true)\n    const refVal = heroRef?.current\n    if (!refVal) return\n    refVal.addEventListener('mousemove', onHoverDebounced)\n    refVal.addEventListener('resize', onHoverDebounced)\n\n    return () => {\n      if (!refVal) return\n      refVal.removeEventListener('mousemove', onHoverDebounced)\n      refVal.removeEventListener('resize', onHoverDebounced)\n    }\n  }, [])\n\n  return (\n    <div className={styles.hero} ref={heroRef}>\n      {hasMounted && (\n        <div className={styles.iconLayer}>\n          {icons.map(({ size, type, icon }, i) => {\n            const rows = Math.ceil(Math.sqrt(iconCount))\n            const cols = Math.ceil(iconCount / rows)\n\n            const cellWidth = width / cols\n            const cellHeight = height / rows\n\n            const row = Math.floor(i / cols)\n            const col = i % cols\n\n            const xOffset = Math.random() * (cellWidth - 75)\n            const yOffset = Math.random() * (cellHeight - 75)\n\n            const baseX = col * cellWidth\n            const baseY = row * cellHeight\n\n            const xPos = baseX + xOffset\n            const yPos = baseY + yOffset\n\n            return (\n              <span\n                key={i}\n                ref={(refItem) =>\n                  (iconsRef.current[i] = {\n                    refItem,\n                    initialPositions: {\n                      xPos,\n                      yPos,\n                    },\n                    size,\n                  })\n                }\n                className={`${styles.icon} ${styles[type]} ${styles[size]}`}\n                style={{\n                  transform: `translateX(${xPos}px) translateY(${yPos}px)`,\n                }}\n              >\n                {icon && icon}\n              </span>\n            )\n          })}\n        </div>\n      )}\n      <div className={styles.heroText}>\n        <h1>\n          Grow your <br /> <span>Frontend Skills</span>\n        </h1>\n        <h3>\n          with <span>React</span>, <span>Angular</span>, <span>Vue</span>, <span>Typescript</span>, <span>Redux</span>,{' '}\n          <span>Node</span>, <span>GraphQL</span>,<span>CSS</span>, <span>HTML</span>, <span>Webpack</span>,{' '}\n          <span>Rollup</span>, <span>ESLint</span>, <span>Prettier</span>, <span>Stylelint</span>,<span>PostCSS</span>,{' '}\n          <span>Styled Components</span>, <span>Emotion</span>, <span>Material UI</span>, <span>Ant Design</span>,{' '}\n          <span>Bootstrap</span>, <span>Foundation</span>,<span>React Native</span>, <span>Flutter</span>,{' '}\n          <span>Python</span>, <span>Go</span>,<span>JavaScript</span>, and <span>NPM</span>\n        </h3>\n      </div>\n    </div>\n  )\n}\n\nexport default DynamicBackground\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\EChartsCommon\\BaseChart\\echarts.ocnfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\EChartsCommon\\BaseChart\\index.jsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  20 |\n  21 |   // 自适应防抖优化\n> 22 |   const debounceResize = debounce(resize, 500)\n     |                                   ^^^^^^ Passing a ref to a function may read its value during render\n  23 |\n  24 |   useEffect(() => {\n  25 |     if (cDom.current) {","line":22,"column":35,"nodeType":null,"endLine":22,"endColumn":41},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'onClick'. Either include it or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":47,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [cDom, onClick, options]","fix":{"range":[1266,1281],"text":"[cDom, onClick, options]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'debounceResize'. Either include it or remove the dependency array.","line":61,"column":6,"nodeType":"ArrayExpression","endLine":61,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [debounceResize, options]","fix":{"range":[1560,1569],"text":"[debounceResize, options]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect, useLayoutEffect, useImperativeHandle } from 'react'\r\nimport debounce from 'lodash-es/debounce'\r\nimport echarts from './echarts.config'\r\n\r\nconst EChart = (props, ref) => {\r\n  const { options, loading = false, onClick, style = {} } = props\r\n  const cDom = useRef(null)\r\n  const cInstance = useRef(null)\r\n\r\n  // 获取实例\r\n  const getInstance = () => cInstance.current\r\n\r\n  // 窗口自适应并开启过渡动画\r\n  const resize = () => {\r\n    cInstance.current &&\r\n      cInstance.current.resize({\r\n        animation: { duration: 300 },\r\n      })\r\n  }\r\n\r\n  // 自适应防抖优化\r\n  const debounceResize = debounce(resize, 500)\r\n\r\n  useEffect(() => {\r\n    if (cDom.current) {\r\n      // 校验 Dom 节点上是否已经挂载了 ECharts 实例，只有未挂载时才初始化\r\n      cInstance.current = echarts.getInstanceByDom(cDom.current)\r\n      if (!cInstance.current) {\r\n        cInstance.current = echarts.init(cDom.current, null, {\r\n          renderer: 'svg',\r\n        })\r\n      } else {\r\n        cInstance.current.clear()\r\n      }\r\n\r\n      // 绑定鼠标点击事件\r\n      cInstance.current.on('click', (event) => {\r\n        if (event && onClick) onClick(event)\r\n      })\r\n\r\n      options && cInstance.current.setOption(options)\r\n    }\r\n\r\n    return () => {\r\n      cInstance.current.dispose() // 容器被销毁之后，销毁实例，避免内存泄漏\r\n    }\r\n  }, [cDom, options])\r\n\r\n  // 监听高度变化\r\n  useLayoutEffect(() => {\r\n    resize()\r\n  }, [style.width, style.height])\r\n\r\n  // 监听窗口大小\r\n  useEffect(() => {\r\n    window.addEventListener('resize', debounceResize)\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', debounceResize)\r\n    }\r\n  }, [options])\r\n\r\n  // 展示 loading 动画\r\n  useEffect(() => {\r\n     \r\n    loading ? cInstance.current.showLoading() : cInstance.current.hideLoading()\r\n  }, [loading])\r\n\r\n  // 对父组件暴露获取ECharts实例的方法，可直接通过实例调用原生函数\r\n  useImperativeHandle(ref, () => ({ getInstance }))\r\n\r\n  return <div id=\"myEChart\" ref={cDom} style={{ width: '100%', height: '100%', ...style }} />\r\n}\r\n\r\nexport default React.memo(React.forwardRef(EChart))\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\EChartsCommon\\index.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`initChart` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\EChartsCommon\\index.tsx:86:9\n  84 |         // 尝试重新初始化图表\n  85 |         dispose()\n> 86 |         initChart(drawDomRef.current)\n     |         ^^^^^^^^^ `initChart` accessed before it is declared\n  87 |       }\n  88 |     },\n  89 |     [props.notMerge, props.lazyUpdate, dispose]\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\EChartsCommon\\index.tsx:93:3\n   91 |\n   92 |   // 初始化图表\n>  93 |   const initChart = useCallback(\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  94 |     (dom: HTMLDivElement | null) => {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  95 |       if (!dom || chartRef.current) return\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 129 |     [props, setOption, setupResizeObserver]\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 130 |   )\n      | ^^^^ `initChart` is declared here\n  131 |\n  132 |   // 处理图表初始化或更新\n  133 |   const initHandle = useCallback(() => {","line":86,"column":9,"nodeType":null,"endLine":86,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'initChart' and 'props'. Either include them or remove the dependency array.","line":89,"column":5,"nodeType":"ArrayExpression","endLine":89,"endColumn":48,"suggestions":[{"desc":"Update the dependencies array to be: [props, dispose, initChart]","fix":{"range":[2438,2481],"text":"[props, dispose, initChart]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initChart'. Either include it or remove the dependency array.","line":166,"column":6,"nodeType":"ArrayExpression","endLine":166,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [initHandle, dispose, initChart]","fix":{"range":[4412,4433],"text":"[initHandle, dispose, initChart]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { debounce } from 'lodash'\r\nimport { useCallback, useEffect, useRef } from 'react'\r\nimport * as echarts from 'echarts'\r\nimport { EChartsType } from 'echarts'\r\nimport { RendererType } from 'echarts/types/src/util/types.js'\r\nimport china from '@assets/map/china.json'\r\nimport { GeoJSONCompressed } from 'echarts/types/src/coord/geo/geoTypes.js'\r\n\r\ntype OptionType = {\r\n  [T: string]: unknown\r\n}\r\n\r\nconst state = {\r\n  width: '100%',\r\n  height: '100%',\r\n}\r\n\r\n// 注册地图数据\r\necharts.registerMap('china', china as unknown as GeoJSONCompressed)\r\n\r\nconst EChartsCommon = (props: {\r\n  renderer?: RendererType\r\n  notMerge?: boolean\r\n  lazyUpdate?: boolean\r\n  option: OptionType\r\n  instanceHandle?: (instance: EChartsType) => void\r\n}) => {\r\n  const drawDomRef = useRef<HTMLDivElement>(null)\r\n  const chartRef = useRef<EChartsType | null>(null)\r\n  const isInitializedRef = useRef(false)\r\n  const resizeObserverRef = useRef<ResizeObserver | null>(null)\r\n\r\n  // 安全地销毁图表实例\r\n  const dispose = useCallback(() => {\r\n    if (chartRef.current) {\r\n      try {\r\n        chartRef.current.dispose()\r\n      } catch (error) {\r\n        console.error('ECharts dispose error:', error)\r\n      }\r\n      chartRef.current = null\r\n      isInitializedRef.current = false\r\n    }\r\n  }, [])\r\n\r\n  // 使用 ResizeObserver 替代 window.resize 事件\r\n  const setupResizeObserver = useCallback(() => {\r\n    if (!drawDomRef.current || !chartRef.current) return\r\n\r\n    // 清理旧的观察者\r\n    if (resizeObserverRef.current) {\r\n      resizeObserverRef.current.disconnect()\r\n    }\r\n\r\n    // 创建新的观察者\r\n    resizeObserverRef.current = new ResizeObserver(\r\n      debounce(() => {\r\n        if (chartRef.current) {\r\n          try {\r\n            chartRef.current.resize()\r\n          } catch (error) {\r\n            console.error('ECharts resize error:', error)\r\n          }\r\n        }\r\n      }, 100)\r\n    )\r\n\r\n    resizeObserverRef.current.observe(drawDomRef.current)\r\n  }, [])\r\n\r\n  // 安全地设置图表配置\r\n  const setOption = useCallback(\r\n    (option: OptionType) => {\r\n      if (!chartRef.current) {\r\n        console.warn('ECharts instance is not available')\r\n        return\r\n      }\r\n\r\n      try {\r\n        const { notMerge = false, lazyUpdate = false } = props\r\n        chartRef.current.setOption(option, notMerge, lazyUpdate)\r\n      } catch (error) {\r\n        console.error('ECharts setOption error:', error)\r\n        // 尝试重新初始化图表\r\n        dispose()\r\n        initChart(drawDomRef.current)\r\n      }\r\n    },\r\n    [props.notMerge, props.lazyUpdate, dispose]\r\n  )\r\n\r\n  // 初始化图表\r\n  const initChart = useCallback(\r\n    (dom: HTMLDivElement | null) => {\r\n      if (!dom || chartRef.current) return\r\n\r\n      try {\r\n        // 确保 DOM 元素有尺寸\r\n        if (dom.clientWidth === 0 || dom.clientHeight === 0) {\r\n          console.warn('Chart container has zero size, delaying initialization')\r\n          return\r\n        }\r\n\r\n        const renderer = props.renderer || 'canvas'\r\n        chartRef.current = echarts.init(dom, null, {\r\n          renderer,\r\n          width: 'auto',\r\n          height: 'auto',\r\n        })\r\n\r\n        isInitializedRef.current = true\r\n\r\n        // 执行初始化回调\r\n        if (props.instanceHandle) {\r\n          props.instanceHandle(chartRef.current)\r\n        }\r\n\r\n        // 设置初始配置\r\n        setOption(props.option)\r\n\r\n        // 设置尺寸观察\r\n        setupResizeObserver()\r\n      } catch (error) {\r\n        console.error('ECharts initialization error:', error)\r\n        chartRef.current = null\r\n        isInitializedRef.current = false\r\n      }\r\n    },\r\n    [props, setOption, setupResizeObserver]\r\n  )\r\n\r\n  // 处理图表初始化或更新\r\n  const initHandle = useCallback(() => {\r\n    if (!chartRef.current || !isInitializedRef.current) {\r\n      initChart(drawDomRef.current)\r\n    } else {\r\n      setOption(props.option)\r\n    }\r\n  }, [initChart, setOption, props.option])\r\n\r\n  // 组件挂载和卸载\r\n  useEffect(() => {\r\n    initHandle()\r\n\r\n    // 监听 BigScreen 页面重新初始化事件\r\n    const handleReinit = () => {\r\n      // 延迟执行，确保容器可见\r\n      setTimeout(() => {\r\n        dispose()\r\n        initChart(drawDomRef.current)\r\n      }, 50)\r\n    }\r\n    window.addEventListener('bigscreen-charts-reinit', handleReinit)\r\n\r\n    return () => {\r\n      window.removeEventListener('bigscreen-charts-reinit', handleReinit)\r\n      // 清理 ResizeObserver\r\n      if (resizeObserverRef.current) {\r\n        resizeObserverRef.current.disconnect()\r\n        resizeObserverRef.current = null\r\n      }\r\n\r\n      // 销毁图表实例\r\n      dispose()\r\n    }\r\n  }, [initHandle, dispose])\r\n\r\n  // 当 option 变化时更新图表\r\n  useEffect(() => {\r\n    if (isInitializedRef.current) {\r\n      setOption(props.option)\r\n    }\r\n  }, [props.option, setOption])\r\n\r\n  return (\r\n    <div\r\n      className=\"default-chart\"\r\n      ref={drawDomRef}\r\n      style={{\r\n        width: state.width,\r\n        height: state.height,\r\n        minHeight: '200px', // 确保容器有最小高度\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nexport default EChartsCommon\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Exception\\exception401.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Exception\\exception403.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Exception\\exception404.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Exception\\exception500.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Exception\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FeatureAny\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  45 |   useEffect(() => {\n  46 |     if (timer > intervalDuration) {\n> 47 |       setFeatureOpen((prev) => (prev + 1) % data.length)\n     |       ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  48 |       setTimer(0)\n  49 |     }\n  50 |   }, [timer, data.length, intervalDuration])","line":47,"column":7,"nodeType":null,"endLine":47,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport clsx from 'clsx'\nimport TextComponent from '@stateless/TextComponent'\nimport SpringPng from '@assets/images/spring.png'\nimport HePng from '@assets/images/he.png'\nimport SongPng from '@assets/images/song.png'\nimport XuePng from '@assets/images/xue.png'\n\nconst defaultData = [\n  {\n    title: '《咏柳》—— 贺知章',\n    content: '碧玉妆成一树高，万条垂下绿丝绦。不知细叶谁裁出，二月春风似剪刀。',\n    srcImage: SpringPng,\n  },\n  {\n    title: '《小池》—— 杨万里',\n    content: '泉眼无声惜细流，树阴照水爱晴柔。小荷才露尖尖角，早有蜻蜓立上头。',\n    srcImage: HePng,\n  },\n  {\n    title: '《山居秋暝》—— 王维',\n    content: '空山新雨后，天气晚来秋。明月松间照，清泉石上流。',\n    srcImage: SongPng,\n  },\n  {\n    title: '《逢雪宿芙蓉山主人》—— 刘长卿',\n    content: '日暮苍山远，天寒白屋贫。柴门闻犬吠，风雪夜归人。',\n    srcImage: XuePng,\n  },\n]\n\nconst FeatureAny = ({ data = defaultData, autoPlay = true, intervalDuration = 5000 }) => {\n  const [featureOpen, setFeatureOpen] = useState(0)\n  const [timer, setTimer] = useState(0)\n\n  useEffect(() => {\n    if (!autoPlay) return\n\n    const interval = setInterval(() => {\n      setTimer((prev) => prev + 10)\n    }, 10)\n    return () => clearInterval(interval)\n  }, [autoPlay])\n\n  useEffect(() => {\n    if (timer > intervalDuration) {\n      setFeatureOpen((prev) => (prev + 1) % data.length)\n      setTimer(0)\n    }\n  }, [timer, data.length, intervalDuration])\n\n  return (\n    <div className=\"grid grid-cols-1 gap-4 rounded-sm border border-neutral-500/10 p-4 md:grid-cols-2 dark:border-neutral-500/15\">\n      <div className=\"space-y-6\">\n        {data.map((item, index) => (\n          <button\n            className=\"w-full\"\n            key={item.title}\n            onClick={() => {\n              setFeatureOpen(index)\n              setTimer(0)\n            }}\n            type=\"button\"\n          >\n            <TextComponent\n              content={item.content}\n              isOpen={featureOpen === index}\n              loadingWidthPercent={featureOpen === index ? (timer / intervalDuration) * 100 : 0}\n              number={index + 1}\n              title={item.title}\n            />\n          </button>\n        ))}\n      </div>\n      <div className=\"h-full min-h-[300px]\">\n        <div className={clsx('relative h-full w-full overflow-hidden rounded-lg')}>\n          {data.map((item, index) => (\n            <img\n              alt={item.title}\n              className={clsx(\n                'absolute h-full w-full transform-gpu rounded-lg object-cover transition-all duration-300',\n                featureOpen === index ? 'scale-100 opacity-100' : 'scale-70 opacity-0',\n                featureOpen > index ? 'translate-y-full' : ''\n              )}\n              key={item.title}\n              src={item.srcImage}\n              style={{ zIndex: data.length - index }}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FeatureAny\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixCarouse\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setData' is assigned a value but never used.","line":11,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleClear' is assigned a value but never used.","line":31,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":20},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  50 |\n  51 |   useEffect(() => {\n> 52 |     filterData()\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  53 |   }, [selectedFilter, data])\n  54 |\n  55 |   return (","line":52,"column":5,"nodeType":null,"endLine":52,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'filterData'. Either include it or remove the dependency array.","line":53,"column":6,"nodeType":"ArrayExpression","endLine":53,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [selectedFilter, data, filterData]","fix":{"range":[1626,1648],"text":"[selectedFilter, data, filterData]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport { Select, Button } from 'antd'\nimport { ChevronRight, ChevronLeft } from 'lucide-react'\n\nconst mockData = Array.from({ length: 30 }, (_, i) => ({\n  name: `Item ${i + 1}`,\n  category: ['A', 'B', 'C'][i % 3],\n}))\n\nconst FixCarousel = ({ tradeList = [] }) => {\n  const [data, setData] = useState([...tradeList, ...mockData])\n  const [selectedFilter, setSelectedFilter] = useState('all')\n  const [filteredData, setFilteredData] = useState([...tradeList, ...mockData])\n  const [currentPage, setCurrentPage] = useState(0)\n  const filters = [\n    { label: '全部', value: 'all' },\n    { label: '分类 A', value: 'A' },\n    { label: '分类 B', value: 'B' },\n    { label: '分类 C', value: 'C' },\n  ]\n\n  const filterData = () => {\n    if (selectedFilter === 'all') {\n      setFilteredData([...data])\n    } else {\n      setFilteredData(data.filter((item) => selectedFilter.includes(item.category)))\n    }\n    setCurrentPage(0)\n  }\n\n  const handleClear = () => {\n    setSelectedFilter('all')\n    filterData()\n  }\n\n  const itemsPerPage = 6\n  const paginatedData = React.useMemo(() => {\n    const pages = []\n    for (let i = 0; i < filteredData.length; i += itemsPerPage) {\n      pages.push(filteredData.slice(i, i + itemsPerPage))\n    }\n    return pages\n  }, [filteredData])\n\n  const totalPages = Math.ceil(filteredData.length / itemsPerPage)\n\n  const prevPage = () => setCurrentPage(Math.max(0, currentPage - 1))\n  const nextPage = () => setCurrentPage(Math.min(totalPages - 1, currentPage + 1))\n  const goToPage = (index) => setCurrentPage(index)\n\n  useEffect(() => {\n    filterData()\n  }, [selectedFilter, data])\n\n  return (\n    <div className=\"relative mx-auto w-full max-w-6xl\">\n      <div className=\"mb-4 flex justify-end\">\n        <Select\n          value={selectedFilter}\n          onChange={setSelectedFilter}\n          className=\"w-[240px]\"\n          placeholder=\"请选择分类\"\n          options={filters}\n        />\n      </div>\n      <div className=\"relative flex items-center justify-between\">\n        <Button className=\"cursor-pointer rounded-full\" onClick={prevPage} disabled={currentPage === 0} shape=\"circle\">\n          <ChevronLeft />\n        </Button>\n        <div className=\"relative mx-4 flex-grow overflow-hidden\">\n          <div\n            className=\"flex transition-transform duration-300 ease-in-out\"\n            style={{ transform: `translateX(-${currentPage * 100}%)` }}\n          >\n            {paginatedData.length === 0 ? (\n              <div className=\"w-full text-center text-gray-500\">暂无数据</div>\n            ) : (\n              <>\n                {paginatedData.map((page, pageIndex) => (\n                  <div key={pageIndex} className=\"flex min-w-full flex-wrap justify-center\">\n                    {page.map((item, itemIndex) => (\n                      <div key={itemIndex} className=\"w-1/3 p-2\">\n                        <div className=\"cus-bg mx-auto rounded-md border border-sky-500 p-4 text-center shadow-md\">\n                          <div className=\"mb-2 text-xl text-sky-500\">{item.name}</div>\n                          <div className=\"text-gray-500\">{item.category}</div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ))}\n              </>\n            )}\n          </div>\n        </div>\n        <Button\n          className=\"cursor-pointer rounded-full\"\n          onClick={nextPage}\n          disabled={currentPage === totalPages - 1 || data.length === 0}\n          shape=\"circle\"\n        >\n          <ChevronRight />\n        </Button>\n      </div>\n      <div className=\"mt-4 flex justify-center gap-4 space-x-4\">\n        {Array.from({ length: totalPages }).map((_, index) => (\n          <button\n            key={index}\n            className={`h-2 w-2 rounded-full ring ring-blue-600/80 transition-colors duration-300 hover:bg-blue-600/80 ${\n              currentPage === index ? 'bg-blue-600/80' : 'bg-white'\n            }`}\n            onClick={() => goToPage(index)}\n          ></button>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default FixCarousel\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixLayout\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PrimaryNav' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { Layout, theme } from 'antd'\nimport FlipLink from '@stateless/FlipLink'\nimport PrimaryNav from '@pages/layout/primaryNav'\n\nconst { Header, Content } = Layout\n\nconst FixLayout = ({ children }) => {\n  const {\n    token: { colorBgContainer },\n  } = theme.useToken()\n\n  return (\n    <Layout style={{ width: '100%', height: '100vh', overflow: 'hidden' }}>\n      <Header\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          background: colorBgContainer,\n          padding: '0 20px',\n          height: 48,\n          lineHeight: '48px',\n          borderBottom: '1px solid #f0f0f0',\n          zIndex: 100,\n        }}\n      >\n        <div style={{ fontWeight: 'bold', fontSize: 16, padding: '0 10px' }}>Pro React Admin</div>\n        <div style={{ padding: '0 10px' }}>\n          <FlipLink href={`https://skyline.github.com/wkylin/${new Date().getFullYear() - 1}`}>SkyLine</FlipLink>\n        </div>\n      </Header>\n      <Content style={{ overflow: 'auto', position: 'relative' }}>{children}</Content>\n    </Layout>\n  )\n}\n\nexport default FixLayout\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\Controls.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\Player.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  35 |     const audio = audioRef.current\n  36 |     if (audio && activeSong?.audioUrl) {\n> 37 |       setIsLoading(true)\n     |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  38 |       audio.load()\n  39 |\n  40 |       const handleLoadedData = () => {","line":37,"column":7,"nodeType":null,"endLine":37,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect, useState } from 'react'\n\nconst Player = ({ activeSong, isPlaying, volume, seekTime, onEnded, onTimeUpdate, onLoadedData, repeat }) => {\n  const audioRef = useRef(null)\n  const [isLoading, setIsLoading] = useState(false)\n\n  useEffect(() => {\n    const audio = audioRef.current\n    if (!audio) return\n\n    if (isPlaying && !isLoading) {\n      audio.play().catch((error) => {\n        console.error('Error playing audio:', error)\n      })\n    } else {\n      audio.pause()\n    }\n  }, [isPlaying, isLoading])\n\n  useEffect(() => {\n    const audio = audioRef.current\n    if (audio) {\n      audio.volume = volume\n    }\n  }, [volume])\n\n  useEffect(() => {\n    const audio = audioRef.current\n    if (audio && seekTime !== undefined) {\n      audio.currentTime = seekTime\n    }\n  }, [seekTime])\n\n  useEffect(() => {\n    const audio = audioRef.current\n    if (audio && activeSong?.audioUrl) {\n      setIsLoading(true)\n      audio.load()\n\n      const handleLoadedData = () => {\n        setIsLoading(false)\n      }\n\n      audio.addEventListener('loadeddata', handleLoadedData)\n\n      return () => {\n        audio.removeEventListener('loadeddata', handleLoadedData)\n      }\n    }\n  }, [activeSong?.audioUrl])\n\n  return (\n    <audio\n      src={activeSong?.audioUrl}\n      ref={audioRef}\n      loop={repeat}\n      onEnded={onEnded}\n      onTimeUpdate={onTimeUpdate}\n      onLoadedData={onLoadedData}\n      preload=\"metadata\"\n    />\n  )\n}\n\nexport default Player\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\Playlist.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\Seekbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\SongCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\Track.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\VolumeBar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\data\\songs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\hooks\\useMusicPlayer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixMusicPlayer\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'theme' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\nimport { useActivate, useUnactivate } from '@src/components/KeepAlive'\n\nimport Controls from './Controls'\nimport Player from './Player'\nimport Seekbar from './Seekbar'\nimport Track from './Track'\nimport VolumeBar from './VolumeBar'\nimport Playlist from './Playlist'\nimport useMusicPlayer from './hooks/useMusicPlayer'\nimport songData from './data/songs'\nimport { useProThemeContext } from '@/theme/hooks'\nimport { theme } from 'antd'\n\nconst MusicPlayer = () => {\n  const { themeSettings } = useProThemeContext()\n  const {\n    currentIndex,\n    isPlaying,\n    isActive,\n    duration,\n    seekTime,\n    appTime,\n    volume,\n    repeat,\n    shuffle,\n    currentSongs,\n    activeSong,\n    setRepeat,\n    setShuffle,\n    handlePlayPause,\n    handleNextSong,\n    handlePrevSong,\n    handleSeek,\n    handleVolumeChange,\n    handleLoadedData,\n    handleTimeUpdate,\n    handleEnded,\n    handleSongClick,\n  } = useMusicPlayer(songData)\n\n  // 自动处理 Tab 切换时的播放状态\n  const pausedByDeactivate = useRef(false)\n\n  useUnactivate(() => {\n    if (isPlaying) {\n      handlePlayPause()\n      pausedByDeactivate.current = true\n    }\n  })\n\n  useActivate(() => {\n    if (pausedByDeactivate.current) {\n      handlePlayPause()\n      pausedByDeactivate.current = false\n    }\n  })\n\n  // 根据主题调整背景色和文本色\n  const isDark = themeSettings.themeMode === 'dark'\n  const bgClass = isDark\n    ? 'bg-linear-to-br from-black/20 to-[#1a1a4a] backdrop-blur-lg'\n    : 'bg-linear-to-br from-white/10 to-[#2a2a80] backdrop-blur-lg'\n  const textColor = isDark ? '#ffffff' : '#000000d9'\n  const secondaryTextColor = isDark ? '#ffffffa6' : '#00000073'\n  const activeColor = themeSettings.colorPrimary || '#1677ff'\n\n  return (\n    <div className=\"flex h-full flex-col\">\n      <div className=\"flex-1\">\n        <Playlist\n          songs={currentSongs}\n          currentIndex={currentIndex}\n          isPlaying={isPlaying}\n          isActive={isActive}\n          onSongClick={handleSongClick}\n          themeMode={themeSettings.themeMode}\n          textColor={textColor}\n          secondaryTextColor={secondaryTextColor}\n          activeColor={activeColor}\n        />\n      </div>\n      <div className={`animate-slideup sticky right-0 bottom-0 left-0 z-10 mt-auto flex h-20 sm:h-28 ${bgClass}`}>\n        <div className=\"relative flex w-full items-center justify-between px-4 sm:px-8 md:px-12\">\n          <Track\n            isPlaying={isPlaying}\n            isActive={isActive}\n            activeSong={activeSong}\n            textColor={textColor}\n            secondaryTextColor={secondaryTextColor}\n          />\n          <div className=\"flex flex-1 flex-col items-center justify-center\">\n            <Controls\n              isPlaying={isPlaying}\n              isActive={isActive}\n              repeat={repeat}\n              setRepeat={setRepeat}\n              shuffle={shuffle}\n              setShuffle={setShuffle}\n              currentSongs={currentSongs}\n              handlePlayPause={handlePlayPause}\n              handlePrevSong={handlePrevSong}\n              handleNextSong={handleNextSong}\n              textColor={textColor}\n              themeMode={themeSettings.themeMode}\n            />\n            <Seekbar\n              value={appTime}\n              min=\"0\"\n              max={duration}\n              onInput={(event) => handleSeek(event.target.value)}\n              setSeekTime={handleSeek}\n              appTime={appTime}\n              textColor={textColor}\n              themeMode={themeSettings.themeMode}\n            />\n            <Player\n              activeSong={activeSong}\n              volume={volume}\n              isPlaying={isPlaying}\n              seekTime={seekTime}\n              repeat={repeat}\n              onEnded={handleEnded}\n              onTimeUpdate={handleTimeUpdate}\n              onLoadedData={handleLoadedData}\n            />\n          </div>\n          <VolumeBar\n            value={volume}\n            min=\"0\"\n            max=\"1\"\n            onChange={(event) => handleVolumeChange(event.target.value)}\n            setVolume={handleVolumeChange}\n            textColor={textColor}\n            themeMode={themeSettings.themeMode}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default MusicPlayer\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixTabPanel\\examples.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixTabPanel\\index.jsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  33 |         {showScrollProgress && (\n  34 |           <ScrollProgressBar\n> 35 |             container={wrapperRef.current}\n     |                        ^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  36 |             position=\"fixed\" // sticky\n  37 |             {...scrollProgressProps}\n  38 |           />","line":35,"column":24,"nodeType":null,"endLine":35,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\r\nimport { FloatButton } from 'antd'\r\nimport { VerticalAlignTopOutlined } from '@ant-design/icons'\r\nimport ScrollProgressBar from '@stateless/ScrollProgressBar'\r\n\r\nconst FixTabPanel = React.forwardRef(\r\n  ({ style, children, className, showScrollProgress = true, scrollProgressProps = {}, fill = true, ...rest }, ref) => {\r\n    const wrapperRef = useRef(null)\r\n\r\n    const setRef = (node) => {\r\n      wrapperRef.current = node\r\n      if (typeof ref === 'function') {\r\n        ref(node)\r\n      } else if (ref) {\r\n        ref.current = node\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={setRef}\r\n        {...rest}\r\n        className={`fix-tab-panel-scroll-container ${fill ? 'fix-tab-panel-fill' : ''} ${className || ''}`}\r\n        style={{\r\n          width: '100%',\r\n          height: '100%',\r\n          position: 'relative',\r\n          overflowY: 'auto',\r\n          overflowX: 'hidden',\r\n          ...style,\r\n        }}\r\n      >\r\n        {showScrollProgress && (\r\n          <ScrollProgressBar\r\n            container={wrapperRef.current}\r\n            position=\"fixed\" // sticky\r\n            {...scrollProgressProps}\r\n          />\r\n        )}\r\n\r\n        <div\r\n          style={{\r\n            position: 'relative',\r\n            zIndex: 1,\r\n            width: '100%',\r\n            maxWidth: '100%',\r\n            minWidth: 0,\r\n            height: fill ? '100%' : 'auto',\r\n            padding: '5px',\r\n            boxSizing: 'border-box',\r\n          }}\r\n        >\r\n          {children}\r\n        </div>\r\n\r\n        <FloatButton.BackTop target={() => wrapperRef.current} style={{ right: 6, bottom: 2 }}>\r\n          <VerticalAlignTopOutlined style={{ fontSize: 20 }} />\r\n        </FloatButton.BackTop>\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nFixTabPanel.displayName = 'FixTabPanel'\r\n\r\nexport default FixTabPanel\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FixTabs\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  13 |   useEffect(() => {\n  14 |     if (!activeTab && tabs.length > 0) {\n> 15 |       setActiveTab(tabs[0].id)\n     |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |     }\n  17 |   }, [tabs, activeTab])\n  18 |","line":15,"column":7,"nodeType":null,"endLine":15,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { useProThemeContext } from '@src/theme/hooks'\nimport styles from './index.module.less'\n\nconst FixTabs = ({ tabs = [], defaultActiveId }) => {\n  const { themeSettings } = useProThemeContext()\n  const isDark = themeSettings.themeMode === 'dark'\n\n  const [activeTab, setActiveTab] = useState(defaultActiveId || (tabs[0] && tabs[0].id))\n\n  useEffect(() => {\n    if (!activeTab && tabs.length > 0) {\n      setActiveTab(tabs[0].id)\n    }\n  }, [tabs, activeTab])\n\n  const handleTabClick = (tabId) => {\n    setActiveTab(tabId)\n  }\n\n  if (!tabs || tabs.length === 0) {\n    return null\n  }\n\n  return (\n    <div className={`${styles.container} ${isDark ? styles.dark : ''}`}>\n      <div className={styles.tabsHeader}>\n        {tabs.map((tab) => (\n          <button\n            key={tab.id}\n            className={`${styles.tabButton} ${activeTab === tab.id ? styles.active : ''}`}\n            onClick={() => handleTabClick(tab.id)}\n          >\n            <div className={styles.tabLabel}>{tab.label}</div>\n          </button>\n        ))}\n      </div>\n\n      <div className={styles.content}>\n        {tabs.map((tab) => (\n          <div key={tab.id} className={`${styles.tabContent} ${activeTab === tab.id ? styles.active : ''}`}>\n            {tab.content}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default FixTabs\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FlipLink\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FlipWords\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FloatAny\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\FloatingIcon\\index.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  11 |       // 检查组件是否仍挂载\n  12 |       await controls.start({\n> 13 |         x: initialX + Math.random() * 30 - 15,\n     |                       ^^^^^^^^^^^^^ Cannot call impure function\n  14 |         y: Math.random() * 30 - 15,\n  15 |         transition: {\n  16 |           duration: 3,","line":13,"column":23,"nodeType":null,"endLine":13,"endColumn":36},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  12 |       await controls.start({\n  13 |         x: initialX + Math.random() * 30 - 15,\n> 14 |         y: Math.random() * 30 - 15,\n     |            ^^^^^^^^^^^^^ Cannot call impure function\n  15 |         transition: {\n  16 |           duration: 3,\n  17 |           ease: 'easeInOut',","line":14,"column":12,"nodeType":null,"endLine":14,"endColumn":25},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'controls'. Either include it or remove the dependency array.","line":36,"column":6,"nodeType":"ArrayExpression","endLine":36,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [controls]","fix":{"range":[878,880],"text":"[controls]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'startFloating'. Either include it or remove the dependency array.","line":42,"column":6,"nodeType":"ArrayExpression","endLine":42,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [isClient, startFloating]","fix":{"range":[956,966],"text":"[isClient, startFloating]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":51,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":57}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from 'react'\nimport { motion, useAnimation } from 'framer-motion'\n\nconst FloatingIcon = ({ children, initialX }) => {\n  const [isClient, setIsClient] = useState(false)\n  const controls = useAnimation()\n  const isMounted = useRef(true) // 添加ref来跟踪组件挂载状态\n\n  const startFloating = async () => {\n    if (isClient && isMounted.current) {\n      // 检查组件是否仍挂载\n      await controls.start({\n        x: initialX + Math.random() * 30 - 15,\n        y: Math.random() * 30 - 15,\n        transition: {\n          duration: 3,\n          ease: 'easeInOut',\n        },\n      })\n\n      // 递归调用前再次检查组件是否挂载\n      if (isMounted.current) {\n        startFloating()\n      }\n    }\n  }\n\n  useEffect(() => {\n    setIsClient(true)\n\n    // 添加清理函数，组件卸载时设置isMounted为false\n    return () => {\n      isMounted.current = false\n      controls.stop() // 停止所有动画\n    }\n  }, [])\n\n  useEffect(() => {\n    if (isClient) {\n      startFloating()\n    }\n  }, [isClient])\n\n  return (\n    <motion.div initial={{ x: initialX, y: 0 }} animate={controls}>\n      {children}\n    </motion.div>\n  )\n}\n\nexport const SocialIcon = ({ icon: Icon, color, ...props }) => (\n  <div className={`rounded-full p-3 ${color} shadow-lg transition-shadow hover:shadow-xl`}>\n    <Icon className=\"h-6 w-6 text-white\" />\n  </div>\n)\n\nexport default FloatingIcon\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Footer\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\GradientAnimation\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\GradientStats\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\GradientTracking\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\GradualSpacing\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\HorizontalScroll\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useTransform' is defined but never used.","line":2,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useScroll' is defined but never used.","line":2,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\nimport { motion, useTransform, useScroll } from 'motion/react'\n\nconst cards = [\n  {\n    url: 'https://picsum.photos/id/28/400/267',\n    title: 'Title 1',\n    id: 1,\n  },\n  {\n    url: 'https://picsum.photos/id/29/400/267',\n    title: 'Title 2',\n    id: 2,\n  },\n  {\n    url: 'https://picsum.photos/id/30/400/267',\n    title: 'Title 3',\n    id: 3,\n  },\n  {\n    url: 'https://picsum.photos/id/31/400/267',\n    title: 'Title 4',\n    id: 4,\n  },\n  {\n    url: 'https://picsum.photos/id/32/400/267',\n    title: 'Title 5',\n    id: 5,\n  },\n]\nconst HorizontalScrollParallax = () => {\n  return (\n    <>\n      {cards.map((card) => (\n        <Card card={card} key={card.id} />\n      ))}\n    </>\n  )\n}\n\nconst Card = ({ card }) => {\n  return (\n    <div key={card.id} className=\"group relative h-[267px] w-[400px] overflow-hidden\">\n      <div\n        style={{\n          backgroundImage: `url(${card.url})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n        }}\n        className=\"absolute inset-0 z-0 transition-transform duration-300 group-hover:scale-110\"\n      ></div>\n      <div className=\"absolute inset-0 z-10 grid place-content-center\">\n        <p className=\"bg-linear-to-br from-white/20 to-white/0 p-8 text-6xl font-black text-white uppercase backdrop-blur-lg\">\n          {card.title}\n        </p>\n      </div>\n    </div>\n  )\n}\n\nexport default HorizontalScrollParallax\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\IconCloud\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setRotation' is assigned a value but never used.","line":11,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rafIdRef' is assigned a value but never used.","line":20,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":17},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   98 |       })\n   99 |     }\n> 100 |     setIconPositions(newIcons)\n      |     ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  101 |   }, [icons, images])\n  102 |\n  103 |   // Handle mouse events","line":100,"column":5,"nodeType":null,"endLine":100,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react'\nimport { renderToString } from 'react-dom/server'\n\nfunction easeOutCubic(t) {\n  return 1 - Math.pow(1 - t, 3)\n}\n\nconst IconCloud = ({ icons, images }) => {\n  const canvasRef = useRef(null)\n  const [iconPositions, setIconPositions] = useState([])\n  const [rotation, setRotation] = useState({ x: 0, y: 0 })\n  const [isDragging, setIsDragging] = useState(false)\n  const [lastMousePos, setLastMousePos] = useState({ x: 0, y: 0 })\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 })\n  const [targetRotation, setTargetRotation] = useState(null)\n  const animationFrameRef = useRef()\n  const rotationRef = useRef(rotation)\n  const iconCanvasesRef = useRef([])\n  const imagesLoadedRef = useRef([])\n  const rafIdRef = useRef(0)\n\n  useEffect(() => {\n    if (!icons && !images) return\n\n    const items = icons || images || []\n    imagesLoadedRef.current = new Array(items.length).fill(false)\n\n    const newIconCanvases = items.map((item, index) => {\n      const offscreen = document.createElement('canvas')\n      offscreen.width = 40\n      offscreen.height = 40\n      const offCtx = offscreen.getContext('2d')\n\n      if (offCtx) {\n        if (images) {\n          // Handle image URLs directly\n          const img = new Image()\n          img.crossOrigin = 'anonymous'\n          img.src = items[index]\n          img.onload = () => {\n            offCtx.clearRect(0, 0, offscreen.width, offscreen.height)\n\n            // Create circular clipping path\n            offCtx.beginPath()\n            offCtx.arc(20, 20, 20, 0, Math.PI * 2)\n            offCtx.closePath()\n            offCtx.clip()\n\n            // Draw the image\n            offCtx.drawImage(img, 0, 0, 40, 40)\n\n            imagesLoadedRef.current[index] = true\n          }\n        } else {\n          // Handle SVG icons\n          offCtx.scale(0.4, 0.4)\n          const svgString = renderToString(item)\n          const img = new Image()\n          img.src = 'data:image/svg+xml;base64,' + btoa(svgString)\n          img.onload = () => {\n            offCtx.clearRect(0, 0, offscreen.width, offscreen.height)\n            offCtx.drawImage(img, 0, 0)\n            imagesLoadedRef.current[index] = true\n          }\n        }\n      }\n      return offscreen\n    })\n\n    iconCanvasesRef.current = newIconCanvases\n  }, [icons, images])\n\n  // Generate initial icon positions on a sphere\n  useEffect(() => {\n    const items = icons || images || []\n    const newIcons = []\n    const numIcons = items.length || 20\n\n    // Fibonacci sphere parameters\n    const offset = 2 / numIcons\n    const increment = Math.PI * (3 - Math.sqrt(5))\n\n    for (let i = 0; i < numIcons; i++) {\n      const y = i * offset - 1 + offset / 2\n      const r = Math.sqrt(1 - y * y)\n      const phi = i * increment\n\n      const x = Math.cos(phi) * r\n      const z = Math.sin(phi) * r\n\n      newIcons.push({\n        x: x * 100,\n        y: y * 100,\n        z: z * 100,\n        scale: 1,\n        opacity: 1,\n        id: i,\n      })\n    }\n    setIconPositions(newIcons)\n  }, [icons, images])\n\n  // Handle mouse events\n  const handleMouseDown = (e) => {\n    const rect = canvasRef.current?.getBoundingClientRect()\n    if (!rect || !canvasRef.current) return\n\n    const x = e.clientX - rect.left\n    const y = e.clientY - rect.top\n\n    const ctx = canvasRef.current.getContext('2d')\n    if (!ctx) return\n\n    iconPositions.forEach((icon) => {\n      const cosX = Math.cos(rotationRef.current.x)\n      const sinX = Math.sin(rotationRef.current.x)\n      const cosY = Math.cos(rotationRef.current.y)\n      const sinY = Math.sin(rotationRef.current.y)\n\n      const rotatedX = icon.x * cosY - icon.z * sinY\n      const rotatedZ = icon.x * sinY + icon.z * cosY\n      const rotatedY = icon.y * cosX + rotatedZ * sinX\n\n      const screenX = canvasRef.current?.width / 2 + rotatedX\n      const screenY = canvasRef.current?.height / 2 + rotatedY\n\n      const scale = (rotatedZ + 200) / 300\n      const radius = 20 * scale\n      const dx = x - screenX\n      const dy = y - screenY\n\n      if (dx * dx + dy * dy < radius * radius) {\n        const targetX = -Math.atan2(icon.y, Math.sqrt(icon.x * icon.x + icon.z * icon.z))\n        const targetY = Math.atan2(icon.x, icon.z)\n\n        const currentX = rotationRef.current.x\n        const currentY = rotationRef.current.y\n        const distance = Math.sqrt(Math.pow(targetX - currentX, 2) + Math.pow(targetY - currentY, 2))\n\n        const duration = Math.min(2000, Math.max(800, distance * 1000))\n\n        setTargetRotation({\n          x: targetX,\n          y: targetY,\n          startX: currentX,\n          startY: currentY,\n          distance,\n          startTime: performance.now(),\n          duration,\n        })\n        return\n      }\n    })\n\n    setIsDragging(true)\n    setLastMousePos({ x: e.clientX, y: e.clientY })\n  }\n\n  const handleMouseMove = (e) => {\n    const rect = canvasRef.current?.getBoundingClientRect()\n    if (rect) {\n      const x = e.clientX - rect.left\n      const y = e.clientY - rect.top\n      setMousePos({ x, y })\n    }\n\n    if (isDragging) {\n      const deltaX = e.clientX - lastMousePos.x\n      const deltaY = e.clientY - lastMousePos.y\n\n      rotationRef.current = {\n        x: rotationRef.current.x + deltaY * 0.002,\n        y: rotationRef.current.y + deltaX * 0.002,\n      }\n\n      setLastMousePos({ x: e.clientX, y: e.clientY })\n    }\n  }\n\n  const handleMouseUp = () => {\n    setIsDragging(false)\n  }\n\n  // Animation and rendering\n  useEffect(() => {\n    const canvas = canvasRef.current\n    const ctx = canvas?.getContext('2d')\n    if (!canvas || !ctx) return\n\n    const animate = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n      const centerX = canvas.width / 2\n      const centerY = canvas.height / 2\n      const maxDistance = Math.sqrt(centerX * centerX + centerY * centerY)\n      const dx = mousePos.x - centerX\n      const dy = mousePos.y - centerY\n      const distance = Math.sqrt(dx * dx + dy * dy)\n      const speed = 0.003 + (distance / maxDistance) * 0.01\n\n      if (targetRotation) {\n        const elapsed = performance.now() - targetRotation.startTime\n        const progress = Math.min(1, elapsed / targetRotation.duration)\n        const easedProgress = easeOutCubic(progress)\n\n        rotationRef.current = {\n          x: targetRotation.startX + (targetRotation.x - targetRotation.startX) * easedProgress,\n          y: targetRotation.startY + (targetRotation.y - targetRotation.startY) * easedProgress,\n        }\n\n        if (progress >= 1) {\n          setTargetRotation(null)\n        }\n      } else if (!isDragging) {\n        rotationRef.current = {\n          x: rotationRef.current.x + (dy / canvas.height) * speed,\n          y: rotationRef.current.y + (dx / canvas.width) * speed,\n        }\n      }\n\n      iconPositions.forEach((icon, index) => {\n        const cosX = Math.cos(rotationRef.current.x)\n        const sinX = Math.sin(rotationRef.current.x)\n        const cosY = Math.cos(rotationRef.current.y)\n        const sinY = Math.sin(rotationRef.current.y)\n\n        const rotatedX = icon.x * cosY - icon.z * sinY\n        const rotatedZ = icon.x * sinY + icon.z * cosY\n        const rotatedY = icon.y * cosX + rotatedZ * sinX\n\n        const scale = (rotatedZ + 200) / 300\n        const opacity = Math.max(0.2, Math.min(1, (rotatedZ + 150) / 200))\n\n        ctx.save()\n        ctx.translate(canvas.width / 2 + rotatedX, canvas.height / 2 + rotatedY)\n        ctx.scale(scale, scale)\n        ctx.globalAlpha = opacity\n\n        if (icons || images) {\n          if (iconCanvasesRef.current[index] && imagesLoadedRef.current[index]) {\n            ctx.drawImage(iconCanvasesRef.current[index], -20, -20, 40, 40)\n          }\n        } else {\n          ctx.beginPath()\n          ctx.arc(0, 0, 20, 0, Math.PI * 2)\n          ctx.fillStyle = '#4444ff'\n          ctx.fill()\n          ctx.fillStyle = 'white'\n          ctx.textAlign = 'center'\n          ctx.textBaseline = 'middle'\n          ctx.font = '16px Arial'\n          ctx.fillText(`${icon.id + 1}`, 0, 0)\n        }\n\n        ctx.restore()\n      })\n      animationFrameRef.current = requestAnimationFrame(animate)\n    }\n\n    animate()\n\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current)\n      }\n    }\n  }, [icons, images, iconPositions, isDragging, mousePos, targetRotation])\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={360}\n      height={360}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n    />\n  )\n}\n\nexport default IconCloud\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\InteractiveGrid\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\IntervalInput\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\IsometricCard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\LandingPage\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\LanguageSwitcher\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\LazyLoadImage\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'loadInitially', 'observerCallback', and 'observerOptions'. Either include them or remove the dependency array.","line":39,"column":6,"nodeType":"ArrayExpression","endLine":39,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadInitially, observerCallback, observerOptions]","fix":{"range":[931,933],"text":"[loadInitially, observerCallback, observerOptions]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport styles from './index.module.less'\n\nconst LazyLoadImage = ({\n  alt,\n  src,\n  className,\n  loadInitially = false,\n  observerOptions = { root: null, rootMargin: '200px 0px' },\n  ...props\n}) => {\n  const observerRef = React.useRef(null)\n  const imgRef = React.useRef(null)\n  const [isLoaded, setIsLoaded] = React.useState(loadInitially)\n\n  const observerCallback = React.useCallback(\n    (entries) => {\n      if (entries[0].isIntersecting) {\n        observerRef.current.disconnect()\n        setIsLoaded(true)\n      }\n    },\n    [observerRef]\n  )\n\n  React.useEffect(() => {\n    if (loadInitially) return\n\n    if ('loading' in HTMLImageElement.prototype) {\n      setIsLoaded(true)\n      return\n    }\n\n    observerRef.current = new IntersectionObserver(observerCallback, observerOptions)\n    observerRef.current.observe(imgRef.current)\n    return () => {\n      observerRef.current.disconnect()\n    }\n  }, [])\n\n  return (\n    <figure className={styles.hoverRotate}>\n      <img\n        alt={alt}\n        src={isLoaded ? src : null}\n        ref={imgRef}\n        className={className}\n        loading={loadInitially ? undefined : 'lazy'}\n        {...props}\n      />\n      <figcaption>\n        <h3>\n          Lorem <br />\n          Ipsum\n        </h3>\n      </figcaption>\n    </figure>\n  )\n}\n\nexport default LazyLoadImage\n\n{\n  /* <LazyLoadImage src=\"https://picsum.photos/id/1080/600/600\" alt=\"Strawberries\" /> */\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\LineBordered\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\LinearWrap\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Loading\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\LogoSlider\\index.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`slide` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n   9 |\n  10 |     const interval = setInterval(() => {\n> 11 |       slide(direction)\n     |       ^^^^^ `slide` accessed before it is declared\n  12 |     }, autorotateTiming)\n  13 |\n  14 |     return () => clearInterval(interval)\n\n  15 |   }, [companies, autorotateTiming, direction])\n  16 |\n> 17 |   const slide = (dir) => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^\n> 18 |     const step = dir === 'right' ? 1 : -1\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 19 |     setActiveIndex((prevIndex) => (prevIndex + step + companies.length) % companies.length)\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 20 |   }\n     | ^^^^ `slide` is declared here\n  21 |\n  22 |   const calculatePosition = (offset) => {\n  23 |     const angle = offset * (Math.PI / 3)","line":11,"column":7,"nodeType":null,"endLine":11,"endColumn":12},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'slide'. Either include it or remove the dependency array.","line":15,"column":6,"nodeType":"ArrayExpression","endLine":15,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [companies, autorotateTiming, direction, slide]","fix":{"range":[480,520],"text":"[companies, autorotateTiming, direction, slide]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'offset' is defined but never used. Allowed unused args must match /^_/u.","line":32,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'offset' is defined but never used. Allowed unused args must match /^_/u.","line":46,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'calculatePosition'. Either include it or remove the dependency array.","line":57,"column":5,"nodeType":"ArrayExpression","endLine":57,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [calculatePosition, direction]","fix":{"range":[1649,1668],"text":"[calculatePosition, direction]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\n\nconst LogoSlider = ({ companies, autorotateTiming = 3000, direction = 'right', radius = 180 }) => {\n  const [activeIndex, setActiveIndex] = useState(0)\n\n  useEffect(() => {\n    if (!companies || companies.length === 0) return\n\n    const interval = setInterval(() => {\n      slide(direction)\n    }, autorotateTiming)\n\n    return () => clearInterval(interval)\n  }, [companies, autorotateTiming, direction])\n\n  const slide = (dir) => {\n    const step = dir === 'right' ? 1 : -1\n    setActiveIndex((prevIndex) => (prevIndex + step + companies.length) % companies.length)\n  }\n\n  const calculatePosition = (offset) => {\n    const angle = offset * (Math.PI / 3)\n    return {\n      x: Math.sin(angle) * radius,\n      y: -Math.cos(angle) * radius + radius / 2,\n    }\n  }\n\n  const logoVariants = useMemo(\n    () => ({\n      enter: (offset) => {\n        const { x, y } = calculatePosition(direction === 'right' ? -2 : 2)\n        return { x, y, opacity: 0, scale: 0.5 }\n      },\n      center: (offset) => {\n        const { x, y } = calculatePosition(offset)\n        return {\n          x,\n          y,\n          opacity: 1,\n          scale: offset === 0 ? 1 : 0.8,\n          transition: { duration: 0.6, ease: [0.6, 0.05, 0.01, 0.9] },\n        }\n      },\n      exit: (offset) => {\n        const { x, y } = calculatePosition(direction === 'right' ? 2 : -2)\n        return {\n          x,\n          y,\n          opacity: 0,\n          scale: 0.5,\n          transition: { duration: 0.6, ease: [0.6, 0.05, 0.01, 0.9] },\n        }\n      },\n    }),\n    [direction, radius]\n  )\n\n  const visibleLogos = useMemo(() => {\n    if (!companies || companies.length === 0) return []\n    return [-1, 0, 1].map((offset) => {\n      const index = (activeIndex + offset + companies.length) % companies.length\n      return { offset, logo: companies[index], index }\n    })\n  }, [activeIndex, companies])\n\n  return (\n    <div>\n      <div className=\"mx-auto w-full text-center\">\n        <div className=\"relative h-[260px] overflow-hidden\">\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"relative min-h-[500px] min-w-[500px]\">\n              <AnimatePresence initial={false} mode=\"popLayout\">\n                {visibleLogos.map(({ offset, logo, index }) => (\n                  <motion.div\n                    key={index}\n                    custom={offset}\n                    variants={logoVariants}\n                    initial=\"enter\"\n                    animate=\"center\"\n                    exit=\"exit\"\n                    className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/3\"\n                  >\n                    <img\n                      src={logo}\n                      width={80}\n                      height={80}\n                      alt={`Company logo ${index + 1}`}\n                      className=\"dark:brightness-200\"\n                    />\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default LogoSlider\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MagicTrail\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'drawSparkle' is assigned a value but never used.","line":114,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react'\nimport clsx from 'clsx'\n\nconst MagicTrail = ({\n  className,\n  colors = ['#8b5cf6', '#ec4899', '#3b82f6', '#10b981'],\n  particleCount = 50,\n  trailLength = 35,\n  decay = 0.03,\n  smoothing = 0.65,\n  containerRef,\n}) => {\n  const canvasRef = useRef(null)\n  const points = useRef([])\n  const particles = useRef([])\n  const mousePos = useRef({ x: 0, y: 0 })\n  const targetPos = useRef({ x: 0, y: 0 })\n  const animationFrameId = useRef(null)\n  const colorIndex = useRef(0)\n  const lastAddTime = useRef(0)\n  const isPointerInBounds = useRef(true)\n\n  const createParticle = (x, y, color) => {\n    const angle = Math.random() * Math.PI * 2\n    const speed = Math.random() * 2 + 1\n    return {\n      x,\n      y,\n      vx: Math.cos(angle) * speed,\n      vy: Math.sin(angle) * speed,\n      life: 1,\n      color,\n      size: Math.random() * 3 + 1,\n    }\n  }\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    const container = containerRef?.current || canvas?.parentElement\n    if (!canvas || !container) return\n\n    const ctx = canvas.getContext('2d', { alpha: true })\n    if (!ctx) return\n\n    const updateCanvasSize = () => {\n      const dpr = window.devicePixelRatio || 1\n      const rect = container.getBoundingClientRect()\n      canvas.width = rect.width * dpr\n      canvas.height = rect.height * dpr\n      ctx.scale(dpr, dpr)\n    }\n\n    const handleMouseMove = (e) => {\n      const rect = container.getBoundingClientRect()\n      const x = e.clientX - rect.left\n      const y = e.clientY - rect.top\n      isPointerInBounds.current = x >= 0 && x <= rect.width && y >= 0 && y <= rect.height\n\n      if (isPointerInBounds.current) {\n        targetPos.current = { x, y }\n      }\n    }\n\n    const handleMouseLeave = () => {\n      isPointerInBounds.current = false\n    }\n\n    const addPoint = () => {\n      if (!isPointerInBounds.current) {\n        return\n      }\n\n      const now = performance.now()\n      const timeDiff = now - lastAddTime.current\n\n      mousePos.current.x += (targetPos.current.x - mousePos.current.x) * smoothing\n      mousePos.current.y += (targetPos.current.y - mousePos.current.y) * smoothing\n\n      const lastPoint = points.current[points.current.length - 1]\n      const distance = lastPoint\n        ? Math.hypot(mousePos.current.x - lastPoint.x, mousePos.current.y - lastPoint.y)\n        : Infinity\n\n      if (distance > 2 || timeDiff > 16) {\n        const currentColor = colors[colorIndex.current]\n\n        points.current.push({\n          x: mousePos.current.x,\n          y: mousePos.current.y,\n          age: 0,\n          color: currentColor,\n        })\n\n        for (let i = 0; i < 3; i++) {\n          particles.current.push(createParticle(mousePos.current.x, mousePos.current.y, currentColor))\n        }\n\n        if (distance > 10) {\n          colorIndex.current = (colorIndex.current + 1) % colors.length\n        }\n\n        lastAddTime.current = now\n\n        if (points.current.length > trailLength) {\n          points.current.shift()\n        }\n\n        if (particles.current.length > particleCount) {\n          particles.current = particles.current.slice(-particleCount)\n        }\n      }\n    }\n\n    const drawSparkle = (x, y, size, color) => {\n      const opacity = Math.random() * 0.5 + 0.5\n      ctx.strokeStyle = `${color}${Math.floor(opacity * 255)\n        .toString(16)\n        .padStart(2, '0')}`\n      ctx.lineWidth = size * 0.5\n\n      for (let i = 0; i < 4; i++) {\n        const angle = (Math.PI / 2) * i\n        ctx.beginPath()\n        ctx.moveTo(x - Math.cos(angle) * size, y - Math.sin(angle) * size)\n        ctx.lineTo(x + Math.cos(angle) * size, y + Math.sin(angle) * size)\n        ctx.stroke()\n      }\n    }\n\n    const animate = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n      ctx.globalCompositeOperation = 'lighter'\n\n      addPoint()\n\n      ctx.lineCap = 'round'\n      ctx.lineJoin = 'round'\n      ctx.shadowBlur = 15\n\n      for (let i = 1; i < points.current.length; i++) {\n        const point = points.current[i]\n        const prevPoint = points.current[i - 1]\n        const opacity = Math.max(1 - point.age, 0)\n        const size = Math.max(4 * (1 - point.age), 0)\n\n        ctx.shadowColor = point.color\n        const gradient = ctx.createLinearGradient(prevPoint.x, prevPoint.y, point.x, point.y)\n\n        const prevOpacity = Math.max(1 - prevPoint.age, 0)\n        gradient.addColorStop(\n          0,\n          `${prevPoint.color}${Math.floor(prevOpacity * 255)\n            .toString(16)\n            .padStart(2, '0')}`\n        )\n        gradient.addColorStop(\n          1,\n          `${point.color}${Math.floor(opacity * 255)\n            .toString(16)\n            .padStart(2, '0')}`\n        )\n\n        ctx.beginPath()\n        ctx.strokeStyle = gradient\n        ctx.lineWidth = size\n        ctx.moveTo(prevPoint.x, prevPoint.y)\n        ctx.lineTo(point.x, point.y)\n        ctx.stroke()\n      }\n\n      ctx.shadowBlur = 0\n      particles.current.forEach((particle) => {\n        particle.x += particle.vx\n        particle.y += particle.vy\n        particle.vy += 0.05\n        particle.life -= 0.02\n\n        // if (particle.life > 0) {\n        //   const opacity = particle.life;\n        //   drawSparkle(\n        //     particle.x,\n        //     particle.y,\n        //     particle.size * opacity,\n        //     particle.color,\n        //   );\n        // }\n      })\n\n      particles.current = particles.current.filter((p) => p.life > 0)\n\n      points.current.forEach((point) => {\n        point.age += decay\n      })\n      points.current = points.current.filter((point) => point.age < 1)\n\n      animationFrameId.current = requestAnimationFrame(animate)\n    }\n\n    updateCanvasSize()\n    window.addEventListener('resize', updateCanvasSize)\n    container.addEventListener('mousemove', handleMouseMove)\n    container.addEventListener('mouseleave', handleMouseLeave)\n    animate()\n\n    return () => {\n      window.removeEventListener('resize', updateCanvasSize)\n      container.removeEventListener('mousemove', handleMouseMove)\n      container.removeEventListener('mouseleave', handleMouseLeave)\n      if (animationFrameId.current) {\n        cancelAnimationFrame(animationFrameId.current)\n      }\n    }\n  }, [colors, trailLength, decay, smoothing, particleCount, containerRef])\n\n  return (\n    <div\n      className={clsx('pointer-events-none absolute inset-0', className)}\n      style={{ width: '100%', height: '100%', zIndex: 100 }}\n    >\n      <canvas ref={canvasRef} className=\"pointer-events-none absolute inset-0 h-full w-full\" />\n    </div>\n  )\n}\n\nexport default MagicTrail\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MarketingHero\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MemoizedStars\\index.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | const Stars = () => {\n> 5 |   const randomMove = () => Math.random() * 4 - 2\n    |                            ^^^^^^^^^^^^^ Cannot call impure function\n  6 |   const randomOpacity = () => Math.random()\n  7 |   const random = () => Math.random()\n  8 |   return (","line":5,"column":28,"nodeType":null,"endLine":5,"endColumn":41},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  4 | const Stars = () => {\n  5 |   const randomMove = () => Math.random() * 4 - 2\n> 6 |   const randomOpacity = () => Math.random()\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  7 |   const random = () => Math.random()\n  8 |   return (\n  9 |     <div className=\"absolute inset-0\">","line":6,"column":31,"nodeType":null,"endLine":6,"endColumn":44},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n   5 |   const randomMove = () => Math.random() * 4 - 2\n   6 |   const randomOpacity = () => Math.random()\n>  7 |   const random = () => Math.random()\n     |                        ^^^^^^^^^^^^^ Cannot call impure function\n   8 |   return (\n   9 |     <div className=\"absolute inset-0\">\n  10 |       {[...Array(80)].map((_, i) => (","line":7,"column":24,"nodeType":null,"endLine":7,"endColumn":37}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { memo } from 'react'\nimport { motion } from 'motion/react'\n\nconst Stars = () => {\n  const randomMove = () => Math.random() * 4 - 2\n  const randomOpacity = () => Math.random()\n  const random = () => Math.random()\n  return (\n    <div className=\"absolute inset-0\">\n      {[...Array(80)].map((_, i) => (\n        <motion.span\n          key={`star-${i}`}\n          animate={{\n            top: `calc(${random() * 100}% + ${randomMove()}px)`,\n            left: `calc(${random() * 100}% + ${randomMove()}px)`,\n            opacity: randomOpacity(),\n            scale: [1, 1.2, 0],\n          }}\n          transition={{\n            duration: random() * 10 + 20,\n            repeat: Infinity,\n            ease: 'linear',\n          }}\n          style={{\n            position: 'absolute',\n            top: `${random() * 100}%`,\n            left: `${random() * 100}%`,\n            width: `2px`,\n            height: `2px`,\n            backgroundColor: 'white',\n            borderRadius: '50%',\n            zIndex: 1,\n          }}\n          className=\"inline-block\"\n        ></motion.span>\n      ))}\n    </div>\n  )\n}\n\nconst MemoizedStars = memo(Stars)\n\nexport default MemoizedStars\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MeshGradientBackground\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":4,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport styles from './index.module.less'\n\nconst MeshGradientBackground = (props) => {\n  return (\n    <div style={{ position: 'relative', height: '100%' }}>\n      <div className={styles.background}>Mesh Gradient Background</div>\n    </div>\n  )\n}\nexport default MeshGradientBackground\n\n// https://www.csshero.org/animator/\n// https://csshero.org/mesher/\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Meteors\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'starTailLength' is assigned a value but never used.","line":6,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":25},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  4 | const Meteors = ({ starCount = 50, primaryColor = '#ffffff', className = '' }) => {\n  5 |   const stars = Array.from({ length: starCount }, (_, i) => {\n> 6 |     const starTailLength = Math.random() * 2.5 + 5\n    |                            ^^^^^^^^^^^^^ Cannot call impure function\n  7 |     const topOffset = Math.random() * 100\n  8 |     const fallDuration = Math.random() * 6 + 6\n  9 |     const fallDelay = Math.random() * 10","line":6,"column":28,"nodeType":null,"endLine":6,"endColumn":41},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n   5 |   const stars = Array.from({ length: starCount }, (_, i) => {\n   6 |     const starTailLength = Math.random() * 2.5 + 5\n>  7 |     const topOffset = Math.random() * 100\n     |                       ^^^^^^^^^^^^^ Cannot call impure function\n   8 |     const fallDuration = Math.random() * 6 + 6\n   9 |     const fallDelay = Math.random() * 10\n  10 |","line":7,"column":23,"nodeType":null,"endLine":7,"endColumn":36},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n   6 |     const starTailLength = Math.random() * 2.5 + 5\n   7 |     const topOffset = Math.random() * 100\n>  8 |     const fallDuration = Math.random() * 6 + 6\n     |                          ^^^^^^^^^^^^^ Cannot call impure function\n   9 |     const fallDelay = Math.random() * 10\n  10 |\n  11 |     return {","line":8,"column":26,"nodeType":null,"endLine":8,"endColumn":39},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n   7 |     const topOffset = Math.random() * 100\n   8 |     const fallDuration = Math.random() * 6 + 6\n>  9 |     const fallDelay = Math.random() * 10\n     |                       ^^^^^^^^^^^^^ Cannot call impure function\n  10 |\n  11 |     return {\n  12 |       id: i,","line":9,"column":23,"nodeType":null,"endLine":9,"endColumn":36}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { motion } from 'motion/react'\n\nconst Meteors = ({ starCount = 50, primaryColor = '#ffffff', className = '' }) => {\n  const stars = Array.from({ length: starCount }, (_, i) => {\n    const starTailLength = Math.random() * 2.5 + 5\n    const topOffset = Math.random() * 100\n    const fallDuration = Math.random() * 6 + 6\n    const fallDelay = Math.random() * 10\n\n    return {\n      id: i,\n      topOffset,\n      fallDuration,\n      fallDelay,\n    }\n  })\n\n  return (\n    <div\n      className={`pointer-events-none absolute inset-0 h-full w-full -rotate-45 ${className}`}\n      style={{\n        perspective: '1000px',\n        transformStyle: 'preserve-3d',\n      }}\n    >\n      {stars.map((star) => (\n        <motion.div\n          key={star.id}\n          className={`absolute h-[2px] rounded-full bg-gradient-to-r from-current to-transparent drop-shadow-[0_0_6px_currentColor]`}\n          style={{\n            top: `${star.topOffset}vh`,\n            width: '6em',\n            color: primaryColor,\n            willChange: 'transform',\n          }}\n          initial={{ x: '104em' }}\n          animate={{ x: '-30em' }}\n          transition={{\n            duration: star.fallDuration,\n            delay: star.fallDelay,\n            repeat: Infinity,\n            ease: 'linear',\n            repeatType: 'loop',\n          }}\n        >\n          <div className=\"relative h-full w-full\">\n            <div\n              className={`rounded-inherit animate-blink absolute top-0 left-[calc(-1em)] h-full w-[1em] bg-gradient-to-r from-transparent via-current to-transparent`}\n              style={{\n                willChange: 'transform, opacity',\n              }}\n            />\n            <div\n              className={`rounded-inherit animate-blink absolute top-0 left-[calc(-1em)] h-full w-[1em] rotate-45 bg-gradient-to-r from-transparent via-current to-transparent`}\n              style={{\n                willChange: 'transform, opacity',\n              }}\n            />\n            <div\n              className={`rounded-inherit animate-blink absolute top-0 left-[calc(-1em)] h-full w-[1em] -rotate-45 bg-gradient-to-r from-transparent via-current to-transparent`}\n              style={{\n                willChange: 'transform, opacity',\n              }}\n            />\n          </div>\n        </motion.div>\n      ))}\n    </div>\n  )\n}\n\nexport default Meteors\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MouseTrail\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MultiColorBorder\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MultiDirectionSlide\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\MusicPlayer\\index.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleNext` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  69 |       // 如果不是单曲循环，audio 不会自动重播，会触发 ended\n  70 |       if (!audio.loop) {\n> 71 |         handleNext()\n     |         ^^^^^^^^^^ `handleNext` accessed before it is declared\n  72 |       }\n  73 |     }\n  74 |\n\n  140 |\n  141 |   // 使用 useCallback 避免依赖闭包问题\n> 142 |   const handleNext = useCallback(() => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 143 |     setCurrentTrackIndex((prev) => (prev === TRACKS.length - 1 ? 0 : prev + 1))\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 144 |   }, [])\n      | ^^^^^^^^^ `handleNext` is declared here\n  145 |\n  146 |   const handleSeek = (e) => {\n  147 |     const newTime = Number(e.target.value)","line":71,"column":9,"nodeType":null,"endLine":71,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleNext'. Either include it or remove the dependency array.","line":87,"column":6,"nodeType":"ArrayExpression","endLine":87,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [handleNext]","fix":{"range":[2611,2613],"text":"[handleNext]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isPlaying'. Either include it or remove the dependency array.","line":115,"column":6,"nodeType":"ArrayExpression","endLine":115,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [currentTrackIndex, isPlaying]","fix":{"range":[3300,3319],"text":"[currentTrackIndex, isPlaying]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { Play, Pause, SkipBack, SkipForward, Repeat, ListMusic, Clock, RefreshCw } from 'lucide-react'\n\n// 模拟音乐数据\nconst TRACKS = [\n  {\n    id: 1,\n    title: 'Cyberpunk City',\n    artist: 'MokkaMusic',\n    cover: 'https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?w=200&h=200&fit=crop',\n    src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',\n  },\n  {\n    id: 2,\n    title: 'Dreamy Vibes',\n    artist: 'Panda Beats',\n    cover: 'https://images.unsplash.com/photo-1493225255756-d9584f8606e9?w=200&h=200&fit=crop',\n    src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',\n  },\n  {\n    id: 3,\n    title: 'Deep Ocean',\n    artist: 'Blue Wave',\n    cover: 'https://images.unsplash.com/photo-1459749411177-287ce1465453?w=200&h=200&fit=crop',\n    src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',\n  },\n]\n\nconst MusicPlayer = () => {\n  // --- State ---\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [currentTrackIndex, setCurrentTrackIndex] = useState(0)\n  const [currentTime, setCurrentTime] = useState(0)\n  const [duration, setDuration] = useState(0)\n  const [isLooping, setIsLooping] = useState(false) // false: 列表循环, true: 单曲循环\n\n  // --- Ref (关键优化：只实例化一次 Audio) ---\n  // 这里的 Audio 对象在组件卸载前一直存在，不会被反复销毁重建\n  const audioRef = useRef(new Audio(TRACKS[0].src))\n\n  // 用于防止快速切换时的竞态条件\n  const isReady = useRef(false)\n\n  // --- 格式化时间 MM:SS ---\n  const formatTime = (time) => {\n    if (isNaN(time)) return '00:00'\n    const minutes = Math.floor(time / 60)\n    const seconds = Math.floor(time % 60)\n    return `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`\n  }\n\n  // --- 核心逻辑 ---\n\n  // 1. 初始化事件监听 (只运行一次)\n  useEffect(() => {\n    const audio = audioRef.current\n    audio.preload = 'metadata'\n\n    const setAudioData = () => {\n      setDuration(audio.duration)\n    }\n\n    const setAudioTime = () => {\n      setCurrentTime(audio.currentTime)\n    }\n\n    const handleEnded = () => {\n      // 这里不需要手动判断循环，因为我们在 useEffect 中处理了 loop 属性\n      // 如果不是单曲循环，audio 不会自动重播，会触发 ended\n      if (!audio.loop) {\n        handleNext()\n      }\n    }\n\n    // 绑定事件\n    audio.addEventListener('loadedmetadata', setAudioData)\n    audio.addEventListener('timeupdate', setAudioTime)\n    audio.addEventListener('ended', handleEnded)\n\n    // 清理函数\n    return () => {\n      audio.pause()\n      audio.removeEventListener('loadedmetadata', setAudioData)\n      audio.removeEventListener('timeupdate', setAudioTime)\n      audio.removeEventListener('ended', handleEnded)\n    }\n  }, []) // 空依赖数组，确保只绑定一次\n\n  // 2. 监听 歌曲切换 (currentTrackIndex 变化)\n  useEffect(() => {\n    const audio = audioRef.current\n\n    // 暂停当前播放\n    audio.pause()\n\n    // 切换源\n    audio.src = TRACKS[currentTrackIndex].src\n    audio.load() // 重新加载资源\n\n    setCurrentTime(0)\n\n    // 如果当前是播放状态，或者是用户刚刚点击了列表切歌（isReady为true表示组件已挂载）\n    if (isReady.current) {\n      if (isPlaying) {\n        const playPromise = audio.play()\n        Promise.resolve(playPromise).catch((error) => {\n          // 捕获 \"The play() request was interrupted\" 错误，静默处理\n          console.log('Playback prevented/interrupted (harmless):', error)\n        })\n      }\n    } else {\n      // 第一次加载组件时不自动播放\n      isReady.current = true\n    }\n  }, [currentTrackIndex])\n\n  // 3. 监听 播放/暂停 状态变化\n  useEffect(() => {\n    const audio = audioRef.current\n    if (isPlaying) {\n      const playPromise = audio.play()\n      Promise.resolve(playPromise).catch((e) => console.log('Play interaction error:', e))\n    } else {\n      audio.pause()\n    }\n  }, [isPlaying])\n\n  // 4. 监听 循环模式变化\n  useEffect(() => {\n    audioRef.current.loop = isLooping\n  }, [isLooping])\n\n  // --- 交互函数 ---\n\n  const togglePlay = () => setIsPlaying(!isPlaying)\n\n  const handlePrev = () => {\n    setCurrentTrackIndex((prev) => (prev === 0 ? TRACKS.length - 1 : prev - 1))\n  }\n\n  // 使用 useCallback 避免依赖闭包问题\n  const handleNext = useCallback(() => {\n    setCurrentTrackIndex((prev) => (prev === TRACKS.length - 1 ? 0 : prev + 1))\n  }, [])\n\n  const handleSeek = (e) => {\n    const newTime = Number(e.target.value)\n    audioRef.current.currentTime = newTime\n    setCurrentTime(newTime)\n  }\n\n  // 点击列表切歌\n  const playTrack = (index) => {\n    if (index === currentTrackIndex) {\n      togglePlay() // 如果点的是当前这首，就切换播放/暂停\n    } else {\n      setCurrentTrackIndex(index)\n      setIsPlaying(true) // 切歌后默认播放\n    }\n  }\n\n  const currentTrack = TRACKS[currentTrackIndex]\n  const remainingTime = duration - currentTime\n\n  return (\n    <div className=\"mx-auto flex h-[700px] max-w-md flex-col overflow-hidden rounded-2xl bg-gray-900 font-sans text-white shadow-2xl\">\n      {/* === 上半部分：播放器控制 === */}\n      <div className=\"z-10 flex flex-col items-center bg-gradient-to-br from-gray-800 to-gray-900 p-6 shadow-lg\">\n        {/* 封面 & 旋转动画 */}\n        <div\n          className={`relative mb-6 h-56 w-56 overflow-hidden rounded-full border-8 border-gray-800 shadow-2xl ${isPlaying ? 'animate-[spin_12s_linear_infinite]' : ''}`}\n        >\n          <img src={currentTrack.cover} alt=\"cover\" className=\"h-full w-full object-cover\" />\n          {/* 中间的小圆点，模拟黑胶唱片 */}\n          <div className=\"absolute top-1/2 left-1/2 z-10 h-8 w-8 -translate-x-1/2 -translate-y-1/2 transform rounded-full bg-gray-800\"></div>\n        </div>\n\n        {/* 歌曲信息 */}\n        <div className=\"mb-6 w-full text-center\">\n          <h2 className=\"truncate text-xl font-bold text-white\">{currentTrack.title}</h2>\n          <p className=\"mt-1 text-sm text-gray-400\">{currentTrack.artist}</p>\n        </div>\n\n        {/* 进度条 & 时间 */}\n        <div className=\"mb-6 w-full space-y-2\">\n          <input\n            type=\"range\"\n            min=\"0\"\n            max={duration || 0}\n            value={currentTime}\n            onChange={handleSeek}\n            className=\"h-1 w-full cursor-pointer appearance-none rounded-lg bg-gray-700 accent-green-500 transition-all hover:h-2\"\n          />\n          <div className=\"flex justify-between font-mono text-xs text-gray-400\">\n            <span>{formatTime(currentTime)}</span>\n            <span>-{formatTime(remainingTime)}</span>\n          </div>\n        </div>\n\n        {/* 按钮组 */}\n        <div className=\"flex w-full items-center justify-between px-4\">\n          {/* 循环切换 */}\n          <button\n            onClick={() => setIsLooping(!isLooping)}\n            className={`rounded-full p-2 transition ${isLooping ? 'bg-gray-800 text-green-400' : 'text-gray-400 hover:text-white'}`}\n            title={isLooping ? '单曲循环' : '列表循环'}\n          >\n            {isLooping ? <Repeat size={20} /> : <RefreshCw size={20} />}\n          </button>\n\n          <button onClick={handlePrev} className=\"p-2 text-gray-300 transition hover:scale-110 hover:text-white\">\n            <SkipBack size={28} />\n          </button>\n\n          {/* 播放/暂停大按钮 */}\n          <button\n            onClick={togglePlay}\n            className=\"rounded-full bg-green-500 p-4 text-black shadow-lg shadow-green-500/30 transition hover:scale-105 hover:bg-green-400 active:scale-95\"\n          >\n            {isPlaying ? (\n              <Pause size={32} fill=\"currentColor\" />\n            ) : (\n              <Play size={32} fill=\"currentColor\" className=\"ml-1\" />\n            )}\n          </button>\n\n          <button onClick={handleNext} className=\"p-2 text-gray-300 transition hover:scale-110 hover:text-white\">\n            <SkipForward size={28} />\n          </button>\n\n          {/* 占位/菜单按钮 */}\n          <button className=\"p-2 text-gray-400 hover:text-white\">\n            <Clock size={20} />\n          </button>\n        </div>\n      </div>\n\n      {/* === 下半部分：播放列表 (固定高度，内部滚动) === */}\n      <div className=\"flex flex-1 flex-col overflow-hidden bg-black/20 backdrop-blur-sm\">\n        <div className=\"flex items-center gap-2 bg-gray-900/50 px-6 py-3 text-xs font-bold tracking-wider text-gray-500 uppercase\">\n          <ListMusic size={14} />\n          <span>Playlist ({TRACKS.length})</span>\n        </div>\n\n        <div className=\"custom-scrollbar flex-1 overflow-y-auto p-2\">\n          {TRACKS.map((track, index) => {\n            const isCurrent = index === currentTrackIndex\n            return (\n              <button\n                key={track.id}\n                onClick={() => playTrack(index)}\n                type=\"button\"\n                aria-label={`Play ${track.title} by ${track.artist}`}\n                className={`group mb-1 flex w-full items-center rounded-xl p-3 text-left transition-all duration-200 ${isCurrent ? 'bg-gray-800/80' : 'text-gray-400 hover:bg-gray-800/40'} `}\n              >\n                {/* 序号 / 动态图标 */}\n                <div className=\"mr-2 flex w-10 items-center justify-center\">\n                  {isCurrent && isPlaying ? (\n                    <div className=\"flex h-3 items-end gap-1\">\n                      <span className=\"h-full w-0.5 animate-[bounce_1s_infinite] bg-green-500\"></span>\n                      <span className=\"h-2/3 w-0.5 animate-[bounce_1.2s_infinite] bg-green-500\"></span>\n                      <span className=\"h-1/2 w-0.5 animate-[bounce_0.8s_infinite] bg-green-500\"></span>\n                    </div>\n                  ) : (\n                    <span className={`font-mono text-sm ${isCurrent ? 'text-green-500' : 'text-gray-600'}`}>\n                      {index + 1}\n                    </span>\n                  )}\n                </div>\n\n                {/* 标题信息 */}\n                <div className=\"min-w-0 flex-1\">\n                  <div\n                    className={`truncate font-medium ${isCurrent ? 'text-green-400' : 'text-gray-200 group-hover:text-white'}`}\n                  >\n                    {track.title}\n                  </div>\n                  <div className=\"truncate text-xs text-gray-500\">{track.artist}</div>\n                </div>\n\n                {/* 播放状态文字 */}\n                {isCurrent && (\n                  <span className=\"px-2 text-xs font-medium text-green-500/80\">{isPlaying ? 'Playing' : 'Paused'}</span>\n                )}\n              </button>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default MusicPlayer\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\NavigationTabs\\index.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'subItems' logical expression could make the dependencies of useMemo Hook (at line 77) change on every render. To fix this, wrap the initialization of 'subItems' in its own useMemo() Hook.","line":68,"column":9,"nodeType":"VariableDeclarator","endLine":68,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react'\nimport styles from './index.module.less'\n\nexport interface TabItem {\n  label: string\n  key?: string | number\n  content?: React.ReactNode\n  children?: TabItem[]\n}\n\nexport interface NavigationTabsProps {\n  items?: TabItem[]\n  className?: string\n  style?: React.CSSProperties\n}\n\n// 默认模拟数据，用于演示组件功能\nconst defaultItems: TabItem[] = [\n  {\n    label: '首页',\n    content: <div className={styles.mockContent}>首页内容</div>,\n  },\n  {\n    label: '产品',\n    content: <div className={styles.mockContent}>产品介绍内容</div>,\n  },\n  {\n    label: '关于',\n    content: <div className={styles.mockContent}>关于我们内容</div>,\n  },\n  {\n    label: '服务',\n    children: [\n      {\n        label: '概览',\n        content: <div className={styles.mockContent}>服务概览内容</div>,\n      },\n      {\n        label: '技术支持',\n        content: <div className={styles.mockContent}>技术支持内容</div>,\n      },\n      {\n        label: '售后',\n        content: <div className={styles.mockContent}>售后服务内容</div>,\n      },\n    ],\n  },\n  {\n    label: '联系',\n    content: <div className={styles.mockContent}>联系我们内容</div>,\n  },\n]\n\nconst NavigationTabs: React.FC<NavigationTabsProps> = ({ items = defaultItems, className, style }) => {\n  const [activeIndex, setActiveIndex] = useState<number>(0)\n  const [subActiveIndex, setSubActiveIndex] = useState<number>(0)\n\n  const handleTabClick = (index: number) => {\n    setActiveIndex(index)\n    setSubActiveIndex(0) // 切换一级导航时，重置二级导航选中项\n  }\n\n  const handleSubTabClick = (index: number) => {\n    setSubActiveIndex(index)\n  }\n\n  const activeItem = items[activeIndex]\n  const subItems = activeItem?.children || []\n  const hasChildren = subItems.length > 0\n\n  // 获取当前显示的内容\n  const currentContent = useMemo(() => {\n    if (hasChildren) {\n      return subItems[subActiveIndex]?.content || null\n    }\n    return activeItem?.content || null\n  }, [activeItem, hasChildren, subItems, subActiveIndex])\n\n  return (\n    <div className={`${styles.container} ${className || ''}`} style={style}>\n      {/* 一级导航 */}\n      <div className={styles.tabsContainer}>\n        <div className={styles.tabsList}>\n          {items.map((item, index) => {\n            const isActive = activeIndex === index\n            const itemHasChildren = item.children && item.children.length > 0\n\n            return (\n              <div\n                key={index}\n                className={`${styles.tabItem} ${\n                  itemHasChildren && isActive ? styles.hasArrow : isActive ? styles.actived : ''\n                }`}\n                onClick={() => handleTabClick(index)}\n              >\n                <span>{item.label}</span>\n                {itemHasChildren && <span className={`${styles.arrow} ${isActive ? styles.arrowDown : ''}`}>▼</span>}\n              </div>\n            )\n          })}\n        </div>\n\n        {/* 二级导航 */}\n        {hasChildren && (\n          <div className={styles.subTabsList}>\n            {subItems.map((subItem, index) => {\n              const isSubActive = subActiveIndex === index\n              return (\n                <div\n                  key={index}\n                  className={`${styles.subTabItem} ${isSubActive ? styles.presented : ''}`}\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    handleSubTabClick(index)\n                  }}\n                >\n                  {subItem.label}\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* 内容区域 */}\n      <div className={styles.contentArea}>{currentContent || <div className={styles.mockContent}>暂无内容</div>}</div>\n    </div>\n  )\n}\n\nexport default NavigationTabs\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\NoMatch\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useProThemeContext' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { Button, Result, Flex, Typography, theme } from 'antd'\nimport { HomeOutlined, RollbackOutlined } from '@ant-design/icons'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { useProThemeContext } from '@src/theme/hooks'\n\nconst { Text, Paragraph } = Typography\n\nconst NoMatch = () => {\n  const location = useLocation()\n  const { redirectTo, goBack } = useSafeNavigate()\n  const {\n    token: { colorBgContainer },\n  } = theme.useToken()\n\n  // 禁止页面滚动\n  React.useEffect(() => {\n    const original = document.body.style.overflow\n    document.body.style.overflow = 'hidden'\n    return () => {\n      document.body.style.overflow = original\n    }\n  }, [])\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: '100vh',\n        padding: 20,\n        background: colorBgContainer,\n      }}\n    >\n      <Result\n        status=\"404\"\n        title=\"页面未找到\"\n        subTitle={\n          <Flex vertical gap=\"small\" align=\"center\" style={{ marginTop: 16 }}>\n            <Paragraph style={{ marginBottom: 0 }}>\n              抱歉，您访问的页面 <Text code>{location.pathname}</Text> 不存在或已被移除。\n            </Paragraph>\n            <Text type=\"secondary\" style={{ fontSize: 14 }}>\n              请检查 URL 是否正确，或返回首页继续浏览。\n            </Text>\n          </Flex>\n        }\n        extra={\n          <Flex gap=\"middle\" justify=\"center\" style={{ marginTop: 24 }}>\n            <Button icon={<RollbackOutlined />} onClick={goBack}>\n              返回上一页\n            </Button>\n            <Button type=\"primary\" icon={<HomeOutlined />} onClick={() => redirectTo('/')}>\n              返回首页\n            </Button>\n          </Flex>\n        }\n      />\n    </div>\n  )\n}\n\nexport default NoMatch\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\NotificationDrawer\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\NumberFlowFix\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\NumberViewCard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\OneTimePasscode\\index.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\OneTimePasscode\\index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":135,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react'\r\nimport styles from './index.module.less'\r\nimport { useOptionalProThemeContext } from '@/theme/hooks'\r\nimport { theme as antdTheme } from 'antd'\r\n\r\nexport interface OneTimePasscodeProps {\r\n  length?: number\r\n  value?: string\r\n  onChange?: (value: string) => void\r\n  autoFocus?: boolean\r\n  disabled?: boolean\r\n  className?: string\r\n  inputClassName?: string\r\n  id?: string\r\n  name?: string\r\n  /* allow any single-character validation, e.g. /\\d/ */\r\n  validateChar?: (ch: string) => boolean\r\n  variant?: 'modern' | 'compact' | 'classic'\r\n}\r\n\r\n// 默认仅允许单个可见字符（空字符串用于删除）\r\nconst defaultValidate = (ch: string) => ch === '' || ch.length === 1\r\n\r\nexport const OneTimePasscode: React.FC<OneTimePasscodeProps> = ({\r\n  length = 6,\r\n  value,\r\n  onChange,\r\n  autoFocus = false,\r\n  disabled = false,\r\n  className,\r\n  inputClassName,\r\n  id,\r\n  name,\r\n  validateChar = defaultValidate,\r\n  variant = 'modern',\r\n}) => {\r\n  const controlled = value !== undefined\r\n  const [internal, setInternal] = useState<string>(() => (value ?? '').slice(0, length))\r\n  const refs = useRef<Array<HTMLInputElement | null>>([])\r\n  const composing = useRef(false)\r\n\r\n  useEffect(() => {\r\n    // keep refs.current sized to `length`, preserving existing elements when possible\r\n    refs.current = Array.from({ length }).map((_, i) => refs.current[i] ?? null)\r\n  }, [length])\r\n\r\n  useEffect(() => {\r\n    if (controlled) setInternal((value ?? '').slice(0, length))\r\n  }, [value, length, controlled])\r\n\r\n  useEffect(() => {\r\n    if (autoFocus && refs.current[0]) refs.current[0].focus()\r\n  }, [autoFocus])\r\n\r\n  const setValue = (next: string) => {\r\n    const truncated = next.slice(0, length)\r\n    if (!controlled) setInternal(truncated)\r\n    onChange?.(truncated)\r\n  }\r\n\r\n  const makeArray = (src?: string) => Array.from({ length }, (_, i) => (src && src[i]) || '')\r\n\r\n  const handleChange = (index: number, ch: string) => {\r\n    // allow clearing the slot\r\n    if (ch === '') {\r\n      const arr = makeArray(controlled ? (value ?? '') : internal)\r\n      arr[index] = ''\r\n      // trim trailing empty slots\r\n      const joined = arr.join('').replace(/\\s+$/g, '')\r\n      setValue(joined)\r\n      return\r\n    }\r\n\r\n    if (!validateChar(ch)) return\r\n\r\n    const arr = makeArray(controlled ? (value ?? '') : internal)\r\n    arr[index] = ch\r\n    const joined = arr.join('').replace(/\\s+$/g, '')\r\n    setValue(joined)\r\n    // focus next\r\n    const next = refs.current[index + 1]\r\n    if (next) next.focus()\r\n  }\r\n\r\n  const handleKeyDown = (index: number, e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    const target = e.currentTarget\r\n    if (e.key === 'Backspace') {\r\n      if (target.value === '' && index > 0) {\r\n        const prev = refs.current[index - 1]\r\n        prev?.focus()\r\n        const arr = makeArray(controlled ? (value ?? '') : internal)\r\n        arr[index - 1] = ''\r\n        setValue(arr.join('').replace(/\\s+$/g, ''))\r\n        e.preventDefault()\r\n      }\r\n    } else if (e.key === 'ArrowLeft') {\r\n      if (index > 0) refs.current[index - 1]?.focus()\r\n      e.preventDefault()\r\n    } else if (e.key === 'ArrowRight') {\r\n      if (index < length - 1) refs.current[index + 1]?.focus()\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  const handlePaste = (index: number, e: React.ClipboardEvent<HTMLInputElement>) => {\r\n    const paste = e.clipboardData.getData('text')\r\n    if (!paste) return\r\n    const chars = paste.split('').filter((c) => validateChar(c))\r\n    if (chars.length === 0) return\r\n    const base = makeArray(controlled ? (value ?? '') : internal)\r\n    for (let i = 0; i < chars.length && index + i < length; i++) {\r\n      base[index + i] = chars[i]\r\n    }\r\n    setValue(base.join('').replace(/\\s+$/g, ''))\r\n    // focus after pasted segment\r\n    const focusIndex = Math.min(length - 1, index + chars.length - 1)\r\n    refs.current[focusIndex]?.focus()\r\n    e.preventDefault()\r\n  }\r\n\r\n  const values = Array.from({ length }, (_, i) => (controlled ? (value ?? '')[i] : internal[i]) || '')\r\n\r\n  // defensive: allow missing CSS modules (e.g. in some test/story setups)\r\n  const css = styles ?? ({} as Record<string, string>)\r\n\r\n  // read theme color from optional context for focus ring / accent\r\n  const optionalTheme = useOptionalProThemeContext()\r\n  let themeStyle: React.CSSProperties = {}\r\n\r\n  // try read antd theme tokens (Antd v5)\r\n  let antdToken: Record<string, any> = {}\r\n  try {\r\n    const maybe = antdTheme?.useToken?.()\r\n    antdToken = maybe?.token ?? {}\r\n  } catch (err) {\r\n    antdToken = {}\r\n  }\r\n\r\n  const themeSettings = optionalTheme?.themeSettings\r\n  const primary = themeSettings?.colorPrimary ?? antdToken.colorPrimary ?? '#1677ff'\r\n  const themeMode = themeSettings?.themeMode ?? 'light'\r\n  const hexToRgb = (hex: string) => {\r\n    const h = hex.replace('#', '')\r\n    const bigint = parseInt(\r\n      h.length === 3\r\n        ? h\r\n            .split('')\r\n            .map((c) => c + c)\r\n            .join('')\r\n        : h,\r\n      16\r\n    )\r\n    const r = (bigint >> 16) & 255\r\n    const g = (bigint >> 8) & 255\r\n    const b = bigint & 255\r\n    return `${r}, ${g}, ${b}`\r\n  }\r\n\r\n  themeStyle = {\r\n    ['--otp-primary' as any]: primary,\r\n    ['--otp-primary-rgb' as any]: hexToRgb(primary),\r\n    ['--otp-bg' as any]: antdToken.colorBgContainer ?? (themeMode === 'dark' ? '#0b1220' : '#fff'),\r\n    ['--otp-fg' as any]: antdToken.colorText ?? (themeMode === 'dark' ? '#e6eef8' : '#0f1720'),\r\n    ['--otp-bg-1' as any]: themeMode === 'dark' ? 'rgba(11, 18, 32, 0.92)' : 'rgba(255, 255, 255, 0.92)',\r\n    ['--otp-bg-2' as any]: themeMode === 'dark' ? 'rgba(9, 14, 24, 0.92)' : 'rgba(245, 247, 250, 0.92)',\r\n  }\r\n\r\n  const wrapperClass = [css.wrapper, (css as any)[variant] ?? '', className ?? ''].filter(Boolean).join(' ')\r\n\r\n  // provide an inline style fallback when CSS Modules are not loaded\r\n  const inputInlineFallback: React.CSSProperties | undefined = css.input\r\n    ? undefined\r\n    : {\r\n        width: '3.25rem',\r\n        height: '3.25rem',\r\n        borderRadius: '0.75rem',\r\n        border: '1px solid rgba(15,23,32,0.12)',\r\n        background: 'var(--otp-bg, #fff)',\r\n        color: 'var(--otp-fg, #0f1720)',\r\n        fontFamily: \"ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, monospace\",\r\n        fontSize: '1.125rem',\r\n        fontWeight: 600,\r\n        textAlign: 'center' as const,\r\n        boxShadow: '0 8px 20px rgba(2,6,23,0.06)',\r\n        transition: 'box-shadow 180ms cubic-bezier(.2,.9,.2,1), transform 160ms ease, border-color 120ms ease',\r\n        outline: 'none',\r\n        caretColor: 'var(--otp-primary, #1677ff)',\r\n        appearance: 'none' as const,\r\n      }\r\n\r\n  return (\r\n    <div className={wrapperClass} id={id} role=\"group\" aria-label={name ?? 'one-time-passcode'} style={themeStyle}>\r\n      {Array.from({ length }).map((_, i) => (\r\n        <input\r\n          key={i}\r\n          ref={(el) => {\r\n            refs.current[i] = el\r\n          }}\r\n          type=\"text\"\r\n          inputMode=\"numeric\"\r\n          maxLength={1}\r\n          value={values[i] ?? ''}\r\n          onChange={(e) => {\r\n            if (composing.current) return\r\n            handleChange(i, e.target.value.slice(-1))\r\n          }}\r\n          onCompositionStart={() => {\r\n            composing.current = true\r\n          }}\r\n          onCompositionEnd={(e) => {\r\n            composing.current = false\r\n            handleChange(i, e.currentTarget.value.slice(-1))\r\n          }}\r\n          onKeyDown={(e) => handleKeyDown(i, e)}\r\n          onPaste={(e) => handlePaste(i, e)}\r\n          disabled={disabled}\r\n          className={`${css.input ?? ''} ${inputClassName ?? ''}`.trim()}\r\n          style={inputInlineFallback}\r\n          aria-label={`digit-${i + 1}`}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OneTimePasscode\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\OrbitingCircles\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\OrgChart\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedNode' is assigned a value but never used.","line":60,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expandedInfo' is assigned a value but never used.","line":61,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setExpandedInfo' is assigned a value but never used.","line":61,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'event' is defined but never used. Allowed unused args must match /^_/u.","line":64,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":64,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// App.jsx\nimport React, { useState } from 'react'\nimport OrgChart from './org-chart'\n\n// 示例组织数据\nconst orgData = {\n  id: 1,\n  name: '总公司',\n  children: [\n    {\n      id: 2,\n      name: '技术部',\n      children: [\n        {\n          id: 5,\n          name: '前端组',\n          children: [\n            { id: 11, name: 'React 小组' },\n            { id: 12, name: 'Vue 小组' },\n            { id: 15, name: 'Angular 小组' },\n            { id: 16, name: '移动端小组' },\n          ],\n        },\n        {\n          id: 6,\n          name: '后端组',\n          children: [\n            { id: 13, name: 'Java 小组' },\n            { id: 14, name: 'Python 小组' },\n            { id: 17, name: 'Go 小组' },\n            { id: 18, name: 'Node.js 小组' },\n          ],\n        },\n      ],\n    },\n    {\n      id: 3,\n      name: '市场部',\n      children: [\n        { id: 7, name: '推广组' },\n        { id: 8, name: '销售组' },\n        { id: 25, name: '品牌组' },\n        { id: 26, name: '公关组' },\n      ],\n    },\n    {\n      id: 4,\n      name: '人力资源部',\n      children: [\n        { id: 9, name: '招聘组' },\n        { id: 10, name: '培训组' },\n        { id: 27, name: '薪酬组' },\n        { id: 28, name: '员工关系组' },\n      ],\n    },\n  ],\n}\n\nfunction OrgChartDemo() {\n  const [selectedNode, setSelectedNode] = useState(null)\n  const [expandedInfo, setExpandedInfo] = useState('')\n\n  // 处理节点点击\n  const handleNodeClick = (node, event) => {\n    console.log('点击节点:', node)\n    setSelectedNode(node)\n  }\n\n  // 自定义样式\n  const customStyles = {\n    currentBox: {\n      // 可以在这里覆盖默认样式\n    },\n    childBox: {\n      // 可以在这里覆盖默认样式\n    },\n  }\n\n  return (\n    <div className=\"chart-container\">\n      <OrgChart\n        data={orgData}\n        onNodeClick={handleNodeClick}\n        defaultExpanded={true}\n        highlightOnHover={true}\n        animated={true}\n        rootNodeClassName=\"custom-root-node\"\n        expandIcon=\"▶\"\n        collapseIcon=\"▼\"\n        showExpandIcon={true}\n        customStyles={customStyles}\n      />\n    </div>\n  )\n}\n\nexport default OrgChartDemo\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\OrgChart\\org-chart\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'containerRefs' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":22},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  44 |     // 将树形数据转换为扁平化数据\n  45 |     const flattened = flattenTreeData(data)\n> 46 |     setFlatData(flattened)\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  47 |\n  48 |     // 默认展开所有节点\n  49 |     if (defaultExpanded) {","line":46,"column":5,"nodeType":null,"endLine":46,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isHovered' is assigned a value but never used.","line":109,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":141,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":141,"endColumn":54}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react'\nimport styles from './index.module.less'\n\n// 将树形数据转换为扁平化数据，并建立父子关系\nconst flattenTreeData = (node, parentId = null, level = 0) => {\n  const flatNode = {\n    ...node,\n    parentId,\n    level,\n    childrenIds: node.children ? node.children.map((child) => child.id) : [],\n  }\n\n  let result = [flatNode]\n\n  if (node.children) {\n    node.children.forEach((child) => {\n      result = result.concat(flattenTreeData(child, node.id, level + 1))\n    })\n  }\n\n  return result\n}\n\nconst OrgChart = ({\n  data,\n  onNodeClick,\n  onNodeExpand,\n  defaultExpanded = true,\n  highlightOnHover = true,\n  nodeClassName,\n  rootNodeClassName,\n  animated = true,\n  expandIcon = '▼',\n  collapseIcon = '▲',\n  showExpandIcon = true,\n  customStyles = {},\n}) => {\n  const [flatData, setFlatData] = useState([])\n  const [hoveredNodeId, setHoveredNodeId] = useState(null)\n  const [expandedNodes, setExpandedNodes] = useState(new Set())\n  const containerRefs = useRef({})\n\n  useEffect(() => {\n    // 将树形数据转换为扁平化数据\n    const flattened = flattenTreeData(data)\n    setFlatData(flattened)\n\n    // 默认展开所有节点\n    if (defaultExpanded) {\n      const allNodeIds = new Set(flattened.map((node) => node.id))\n      setExpandedNodes(allNodeIds)\n    }\n  }, [data, defaultExpanded])\n\n  // 获取节点的所有父节点ID\n  const getParentIds = (nodeId) => {\n    const node = flatData.find((n) => n.id === nodeId)\n    if (!node || !node.parentId) return []\n    return [node.parentId, ...getParentIds(node.parentId)]\n  }\n\n  // 检查节点是否应该高亮\n  const isNodeHighlighted = (nodeId) => {\n    if (!highlightOnHover || !hoveredNodeId) return false\n    const parentIds = getParentIds(hoveredNodeId)\n    return parentIds.includes(nodeId) || nodeId === hoveredNodeId\n  }\n\n  // 切换节点展开/收起状态\n  const toggleNodeExpansion = (nodeId) => {\n    setExpandedNodes((prev) => {\n      const newSet = new Set(prev)\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId)\n      } else {\n        newSet.add(nodeId)\n      }\n      return newSet\n    })\n  }\n\n  // 处理节点点击\n  const handleNodeClick = (node, event) => {\n    event.stopPropagation()\n\n    // 如果有子节点，切换展开状态\n    if (node.childrenIds.length > 0) {\n      toggleNodeExpansion(node.id)\n\n      // 调用展开/收起回调\n      if (onNodeExpand) {\n        const isExpanded = expandedNodes.has(node.id)\n        onNodeExpand(node, !isExpanded)\n      }\n    }\n\n    // 调用外部点击回调\n    if (onNodeClick) {\n      onNodeClick(node, event)\n    }\n  }\n\n  // 渲染单个节点及其子树\n  const renderNodeTree = (nodeId) => {\n    const node = flatData.find((n) => n.id === nodeId)\n    if (!node) return null\n\n    const isHighlighted = isNodeHighlighted(nodeId)\n    const isHovered = hoveredNodeId === nodeId\n    const isExpanded = expandedNodes.has(nodeId)\n    const hasChildren = node.childrenIds.length > 0\n\n    return (\n      <div key={nodeId} className={styles.orgChart}>\n        {/* 当前节点 */}\n        <div className={styles.currentContainer}>\n          <div\n            className={` ${styles.currentBox} ${node.level === 0 ? styles.rootBox : ''} ${isHighlighted ? styles.highlightedParent : ''} ${nodeClassName || ''} ${node.level === 0 ? rootNodeClassName || '' : ''} ${animated ? styles.animated : ''} ${hasChildren ? styles.hasChildren : ''} `}\n            style={customStyles.currentBox}\n            onMouseEnter={() => highlightOnHover && setHoveredNodeId(nodeId)}\n            onMouseLeave={() => highlightOnHover && setHoveredNodeId(null)}\n            onClick={(e) => handleNodeClick(node, e)}\n          >\n            <div className={styles.currentTitle}>\n              {node.name}\n              {showExpandIcon && hasChildren && (\n                <span className={`${styles.expandIcon} ${isExpanded ? styles.expanded : ''}`}>\n                  {isExpanded ? collapseIcon : expandIcon}\n                </span>\n              )}\n            </div>\n          </div>\n          {hasChildren && isExpanded && <div className={`${styles.line} ${styles.downWithLine}`}></div>}\n        </div>\n\n        {/* 子节点容器 */}\n        {hasChildren && isExpanded && (\n          <div className={styles.childrenContainer}>\n            <div className={styles.childrenScroll}>\n              <div className={styles.childrenWrapper}>\n                {node.childrenIds.map((childId, index) => (\n                  <div key={childId} className={styles.childWrapper}>\n                    <div className={`${styles.arrow} ${styles.arrowChild} ${styles.downArrowWithLine}`}></div>\n                    <div\n                      className={` ${styles.childBox} ${isNodeHighlighted(childId) ? styles.highlightedChild : ''} ${animated ? styles.animated : ''} `}\n                      style={customStyles.childBox}\n                      onMouseEnter={() => highlightOnHover && setHoveredNodeId(childId)}\n                      onMouseLeave={() => highlightOnHover && setHoveredNodeId(null)}\n                      onClick={(e) => {\n                        const childNode = flatData.find((n) => n.id === childId)\n                        if (childNode) handleNodeClick(childNode, e)\n                      }}\n                    >\n                      <div className={styles.childTitle}>{flatData.find((n) => n.id === childId)?.name}</div>\n                    </div>\n                    {/* 递归渲染子节点 */}\n                    {renderNodeTree(childId)}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  // 获取根节点ID\n  const rootNodeId = flatData.find((n) => n.level === 0)?.id\n\n  if (!rootNodeId) {\n    return <div className={styles.emptyState}>暂无组织架构数据</div>\n  }\n\n  return <div className={styles.chartContainer}>{renderNodeTree(rootNodeId)}</div>\n}\n\nexport default OrgChart\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\PDFExport\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\PHBarChart\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\PageContainer\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\PieNestCharts\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used. Allowed unused args must match /^_/u.","line":4,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'innerColors' array makes the dependencies of useCallback Hook (at line 132) change on every render. Move it inside the useCallback callback. Alternatively, wrap the initialization of 'innerColors' in its own useMemo() Hook.","line":7,"column":9,"nodeType":"VariableDeclarator","endLine":7,"endColumn":56},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'outerColors' array makes the dependencies of useCallback Hook (at line 132) change on every render. Move it inside the useCallback callback. Alternatively, wrap the initialization of 'outerColors' in its own useMemo() Hook.","line":8,"column":9,"nodeType":"VariableDeclarator","endLine":8,"endColumn":100},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`updateChart` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  20 |\n  21 |     myChartRef.current = echarts.init(chartRef.current)\n> 22 |     updateChart()\n     |     ^^^^^^^^^^^ `updateChart` accessed before it is declared\n  23 |   }, [])\n  24 |\n  25 |   // 更新图表配置\n\n   24 |\n   25 |   // 更新图表配置\n>  26 |   const updateChart = useCallback(() => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  27 |     if (!myChartRef.current) return\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  28 |\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 131 |     myChartRef.current.setOption(defaultOption)\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 132 |   }, [eOptions, innerColors, outerColors])\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `updateChart` is declared here\n  133 |\n  134 |   // 重新初始化图表\n  135 |   const reinitChart = useCallback(() => {","line":22,"column":5,"nodeType":null,"endLine":22,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'updateChart'. Either include it or remove the dependency array.","line":23,"column":6,"nodeType":"ArrayExpression","endLine":23,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [updateChart]","fix":{"range":[707,709],"text":"[updateChart]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'params' is defined but never used. Allowed unused args must match /^_/u.","line":100,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":100,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState, useCallback } from 'react'\nimport * as echarts from 'echarts'\n\nconst PieNestChart = ({ data = [], height = '100%', eOptions = {} }) => {\n  const chartRef = useRef(null)\n  const myChartRef = useRef(null)\n  const innerColors = ['#3B70FD', '#0EC374', '#F57A43']\n  const outerColors = ['#6A93FF', '#98B5FF', '#2CCD97', '#2BE79E', '#95FBB1', '#FF9440', '#FFB860']\n\n  // 处理窗口大小变化\n  const handleResize = useCallback(() => {\n    if (myChartRef.current) {\n      myChartRef.current.resize()\n    }\n  }, [])\n\n  // 初始化图表\n  const initChart = useCallback(() => {\n    if (!chartRef.current) return\n\n    myChartRef.current = echarts.init(chartRef.current)\n    updateChart()\n  }, [])\n\n  // 更新图表配置\n  const updateChart = useCallback(() => {\n    if (!myChartRef.current) return\n\n    const defaultOption = {\n      tooltip: {\n        show: false,\n      },\n      legend: {\n        show: false,\n        ...eOptions?.options?.legend,\n      },\n      series: eOptions?.options?.series?.map((item, index) => {\n        if (index === 0) {\n          return {\n            name: 'inner',\n            type: 'pie',\n            selectedMode: 'single',\n            radius: [0, '24%'],\n            emphasis: {\n              label: {\n                show: true,\n              },\n            },\n            label: {\n              show: true,\n              position: 'inner',\n              fontSize: 14,\n              formatter: '{a|{b}}',\n              rich: {\n                a: { color: '#fff', fontSize: 12 },\n              },\n              ...item.label,\n            },\n            labelLine: {\n              show: false,\n            },\n            itemStyle: {\n              borderColor: '#fff',\n              borderWidth: 2,\n            },\n            data: item?.data?.map((temp, idx) => ({\n              ...temp,\n              itemStyle: { color: innerColors[idx % innerColors.length] },\n            })),\n            tooltip: {\n              show: false,\n              trigger: 'item',\n              formatter: (params) => `${params.name}: ${params.value}(${params.percent}%)`,\n              ...item?.tooltip,\n            },\n          }\n        } else {\n          return {\n            name: 'outer',\n            type: 'pie',\n            radius: ['24%', '40%'],\n            labelLine: {\n              length: 30,\n              length2: 60,\n            },\n            label: {\n              show: false,\n              formatter: '{b|{b}}\\n{c}}\\n{d}%',\n              rich: {\n                a: { color: '#fff', fontSize: 12, lineHeight: 22 },\n                b: {\n                  color: '#fff',\n                  fontSize: 14,\n                  fontWeight: 'bold',\n                  lineHeight: 33,\n                },\n              },\n              ...item?.label,\n            },\n            labelLayout: (params) => {\n              return {\n                hideOverlap: true,\n                moveOverlap: true,\n              }\n            },\n            emphasis: {\n              label: {\n                show: true,\n              },\n            },\n            itemStyle: {\n              opacity: 0.8,\n              borderColor: '#fff',\n              borderWidth: 2,\n            },\n            data: item?.data?.map((temp, idx) => ({\n              ...temp,\n              itemStyle: { color: outerColors[idx % outerColors.length] },\n            })),\n            tooltip: {\n              show: false,\n              trigger: 'item',\n              formatter: (params) => `${params.name}: ${params.value}(${params.percent}%)`,\n              ...item?.tooltip,\n            },\n          }\n        }\n      }),\n    }\n\n    myChartRef.current.setOption(defaultOption)\n  }, [eOptions, innerColors, outerColors])\n\n  // 重新初始化图表\n  const reinitChart = useCallback(() => {\n    if (myChartRef.current) {\n      myChartRef.current.dispose()\n    }\n    initChart()\n  }, [initChart])\n\n  // 初始化和事件监听\n  useEffect(() => {\n    window.addEventListener('resize', handleResize)\n    initChart()\n\n    // 监听 BigScreen 页面重新初始化事件\n    const handleReinit = () => {\n      reinitChart()\n    }\n    window.addEventListener('bigscreen-charts-reinit', handleReinit)\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n      window.removeEventListener('bigscreen-charts-reinit', handleReinit)\n      if (myChartRef.current) {\n        myChartRef.current.dispose()\n      }\n    }\n  }, [handleResize, initChart, reinitChart])\n\n  // 监听 eOptions 变化\n  useEffect(() => {\n    reinitChart()\n  }, [eOptions, reinitChart])\n\n  return <div ref={chartRef} style={{ height, width: '100%' }} />\n}\n\nexport default PieNestChart\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\PointerMove\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\RadioInput\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ReMarkdown\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":23,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":32,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refText' is assigned a value but never used.","line":41,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'renderMermaid'. Either include it or remove the dependency array.","line":64,"column":6,"nodeType":"ArrayExpression","endLine":64,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [props.children, renderMermaid]","fix":{"range":[2022,2038],"text":"[props.children, renderMermaid]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect } from 'react'\r\nimport { message } from 'antd'\r\nimport Icon from '@ant-design/icons'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport RemarkMath from 'remark-math'\r\nimport RemarkBreaks from 'remark-breaks'\r\nimport RehypeKatex from 'rehype-katex'\r\nimport RemarkGfm from 'remark-gfm'\r\nimport RehypeHighlight from 'rehype-highlight'\r\nimport RehypeRaw from 'rehype-raw'\r\nimport { useDebouncedCallback } from 'use-debounce'\r\nimport LoadingIcon from '@assets/svg/three-dots.svg'\r\nimport 'highlight.js/styles/github.css'\r\n\r\nimport styles from './index.module.less'\r\n\r\nconst copyTextToClipboard = async (copyText) => {\r\n  try {\r\n    if (navigator?.clipboard?.writeText) {\r\n      await navigator.clipboard.writeText(copyText)\r\n      message.success('已成功复制到剪贴板')\r\n    }\r\n  } catch (err) {\r\n    const textArea = document.createElement('textarea')\r\n    textArea.value = copyText\r\n    document.body.appendChild(textArea)\r\n    textArea.focus()\r\n    textArea.select()\r\n    try {\r\n      document.execCommand('copy')\r\n      message.success('已成功复制到剪贴板')\r\n    } catch (error) {\r\n      message.success('复制到剪贴板失败')\r\n    }\r\n    document.body.removeChild(textArea)\r\n  }\r\n}\r\n\r\nconst PreCode = (props) => {\r\n  const ref = useRef(null)\r\n  const [refText, setRefText] = React.useState('')\r\n  const [lang, setLang] = React.useState('')\r\n  const renderMermaid = useDebouncedCallback(() => {\r\n    const el = ref.current\r\n    if (!el) return\r\n    const codeEl = el.querySelector && el.querySelector('code')\r\n    const className = codeEl?.className || ''\r\n    const match = /language-(\\w+)/.exec(className)\r\n    if (match) {\r\n      const [, found] = match\r\n      setLang(found)\r\n    }\r\n  }, 800)\r\n\r\n  useEffect(() => {\r\n    // read DOM after mount/update, avoid reading ref during render\r\n    const txt = ref.current?.innerText ?? ''\r\n    const s = setTimeout(() => setRefText(txt), 0)\r\n    const t = setTimeout(() => renderMermaid(), 1)\r\n    return () => {\r\n      clearTimeout(t)\r\n      clearTimeout(s)\r\n    }\r\n  }, [props.children])\r\n\r\n  return (\r\n    <section>\r\n      <section className={styles.copySection}>\r\n        <span className={styles.lang}>{lang}</span>\r\n        <span\r\n          className={styles.copySpan}\r\n          role=\"button\"\r\n          onClick={() => {\r\n            if (ref.current) {\r\n              const code = ref.current.innerText\r\n              copyTextToClipboard(code)\r\n            }\r\n          }}\r\n        >\r\n          复制代码\r\n        </span>\r\n      </section>\r\n      <pre className={styles.preCode} ref={ref}>\r\n        {props.children}\r\n      </pre>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst ReMarkdown = ({ markdownText = '', isLoading = false }) => (\r\n  <section className={styles.markdownBody}>\r\n    {isLoading && !markdownText && (\r\n      <Icon component={LoadingIcon} style={{ color: '#fff' }} className={styles.loadingIcon} />\r\n    )}\r\n    {markdownText && (\r\n      <ReactMarkdown\r\n        remarkPlugins={[RemarkMath, RemarkGfm, RemarkBreaks]}\r\n        rehypePlugins={[\r\n          RehypeKatex,\r\n          RehypeRaw,\r\n          [\r\n            RehypeHighlight,\r\n            {\r\n              detect: false,\r\n              ignoreMissing: true,\r\n            },\r\n          ],\r\n        ]}\r\n        components={{\r\n          pre: PreCode,\r\n          p: (pProps) => <p {...pProps} dir=\"auto\" />,\r\n          a: (aProps) => {\r\n            const href = aProps.href || ''\r\n            const isInternal = /^\\/#/i.test(href)\r\n            const target = isInternal ? '_self' : (aProps.target ?? '_blank')\r\n            return <a {...aProps} target={target} />\r\n          },\r\n        }}\r\n      >\r\n        {markdownText}\r\n      </ReactMarkdown>\r\n    )}\r\n  </section>\r\n)\r\n\r\nexport default ReMarkdown\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ReactSignature\\index.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ReactSignature\\index.tsx:45:41\n  43 |         {readonly && (\n  44 |           <>\n> 45 |             <DownloadButton svgElement={$svg.current?.svg} />\n     |                                         ^^^^^^^^^^^^ Cannot access ref value during render\n  46 |             <CopySvgButton svgElement={$svg.current?.svg} />\n  47 |           </>\n  48 |         )}","line":45,"column":41,"nodeType":null,"endLine":45,"endColumn":53},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ReactSignature\\index.tsx:45:41\n  43 |         {readonly && (\n  44 |           <>\n> 45 |             <DownloadButton svgElement={$svg.current?.svg} />\n     |                                         ^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  46 |             <CopySvgButton svgElement={$svg.current?.svg} />\n  47 |           </>\n  48 |         )}","line":45,"column":41,"nodeType":null,"endLine":45,"endColumn":58},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ReactSignature\\index.tsx:46:40\n  44 |           <>\n  45 |             <DownloadButton svgElement={$svg.current?.svg} />\n> 46 |             <CopySvgButton svgElement={$svg.current?.svg} />\n     |                                        ^^^^^^^^^^^^ Cannot access ref value during render\n  47 |           </>\n  48 |         )}\n  49 |         {!readonly && <ClearButton onClick={handleClear} />}","line":46,"column":40,"nodeType":null,"endLine":46,"endColumn":52},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ReactSignature\\index.tsx:46:40\n  44 |           <>\n  45 |             <DownloadButton svgElement={$svg.current?.svg} />\n> 46 |             <CopySvgButton svgElement={$svg.current?.svg} />\n     |                                        ^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  47 |           </>\n  48 |         )}\n  49 |         {!readonly && <ClearButton onClick={handleClear} />}","line":46,"column":40,"nodeType":null,"endLine":46,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":139,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":139,"endColumn":11}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\nimport clsx from 'clsx'\r\nimport Signature, { type SignatureRef } from '@uiw/react-signature'\r\nimport { CheckIcon, CopyIcon, DownloadIcon, Eraser, RefreshCcwIcon } from 'lucide-react'\r\nimport { type ComponentProps, useRef, useState } from 'react'\r\nimport { useCopy } from '@hooks/useCopyToClipboard'\r\n\r\nexport function ReactSignature({ className, ...props }: ComponentProps<typeof Signature>) {\r\n  const [readonly, setReadonly] = useState(false)\r\n  const $svg = useRef<SignatureRef>(null)\r\n\r\n  const handleClear = () => $svg.current?.clear()\r\n\r\n  const handleValidate = () => {\r\n    if (readonly) {\r\n      $svg.current?.clear()\r\n      setReadonly(false)\r\n    } else {\r\n      setReadonly(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-2\">\r\n      <p className=\"text-lg tracking-tight text-neutral-500\">数字签名：</p>\r\n      <Signature\r\n        className={clsx(\r\n          'h-28 w-80 rounded-lg border border-neutral-500/20 bg-neutral-500/10',\r\n          readonly ? 'cursor-not-allowed fill-neutral-500' : 'fill-neutral-800 dark:fill-neutral-200',\r\n          className\r\n        )}\r\n        options={{\r\n          smoothing: 0,\r\n          streamline: 0.8,\r\n          thinning: 0.7,\r\n        }}\r\n        readonly={readonly}\r\n        {...props}\r\n        ref={$svg}\r\n      />\r\n      <div className=\"flex justify-end gap-1 text-neutral-700 dark:text-neutral-200\">\r\n        <ValidateButton onClick={handleValidate} readonly={readonly} />\r\n        {readonly && (\r\n          <>\r\n            <DownloadButton svgElement={$svg.current?.svg} />\r\n            <CopySvgButton svgElement={$svg.current?.svg} />\r\n          </>\r\n        )}\r\n        {!readonly && <ClearButton onClick={handleClear} />}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction prepareSvgElement(svgElement: SVGSVGElement) {\r\n  const svgElm = svgElement.cloneNode(true) as SVGSVGElement\r\n  const clientWidth = svgElement.clientWidth\r\n  const clientHeight = svgElement.clientHeight\r\n  svgElm.removeAttribute('style')\r\n  svgElm.setAttribute('width', `${clientWidth}px`)\r\n  svgElm.setAttribute('height', `${clientHeight}px`)\r\n  svgElm.setAttribute('viewBox', `0 0 ${clientWidth} ${clientHeight}`)\r\n  return { svgElm, clientWidth, clientHeight }\r\n}\r\n\r\nfunction ValidateButton({\r\n  readonly,\r\n  onClick,\r\n}: Readonly<{\r\n  readonly: boolean\r\n  onClick: () => void\r\n}>) {\r\n  return (\r\n    <button\r\n      className=\"inline-grid size-8 place-content-center rounded-md border border-neutral-500/10 bg-neutral-500/10 hover:bg-neutral-500/20\"\r\n      onClick={onClick}\r\n      type=\"button\"\r\n    >\r\n      {readonly ? (\r\n        <>\r\n          <RefreshCcwIcon className=\"size-5\" />\r\n          <span className=\"sr-only\">Reset</span>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <CheckIcon className=\"size-5\" />\r\n          <span className=\"sr-only\">Validate</span>\r\n        </>\r\n      )}\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction DownloadButton({\r\n  svgElement,\r\n}: Readonly<{\r\n  svgElement: SVGSVGElement | undefined | null\r\n}>) {\r\n  const handleDownloadImage = () => {\r\n    if (!svgElement) {\r\n      return\r\n    }\r\n\r\n    const { svgElm, clientWidth, clientHeight } = prepareSvgElement(svgElement)\r\n\r\n    const data = new XMLSerializer().serializeToString(svgElm)\r\n    const canvas = document.createElement('canvas')\r\n    const ctx = canvas.getContext('2d')\r\n    const img = new Image()\r\n    img.onload = () => {\r\n      canvas.width = clientWidth ?? 0\r\n      canvas.height = clientHeight ?? 0\r\n      ctx?.drawImage(img, 0, 0)\r\n      const a = document.createElement('a')\r\n      a.download = 'signature.png'\r\n      a.href = canvas.toDataURL('image/png')\r\n      a.click()\r\n    }\r\n    img.src = `data:image/svg+xml;base64,${window.btoa(decodeURIComponent(encodeURIComponent(data)))}`\r\n  }\r\n\r\n  return (\r\n    <button\r\n      className=\"inline-grid size-8 place-content-center rounded-md border border-neutral-500/10 bg-neutral-500/10 hover:bg-neutral-500/20\"\r\n      onClick={handleDownloadImage}\r\n      type=\"button\"\r\n    >\r\n      <DownloadIcon className=\"size-5\" />\r\n      <span className=\"sr-only\">Download</span>\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction CopySvgButton({\r\n  svgElement,\r\n}: Readonly<{\r\n  svgElement: SVGSVGElement | undefined | null\r\n}>) {\r\n  const [_, copyText, isCopied] = useCopy()\r\n\r\n  const handleCopySvg = () => {\r\n    if (!svgElement) {\r\n      return\r\n    }\r\n\r\n    const { svgElm } = prepareSvgElement(svgElement)\r\n    copyText(svgElm.outerHTML)\r\n  }\r\n\r\n  return (\r\n    <button\r\n      className=\"inline-flex items-center gap-1 rounded-md border border-neutral-500/10 bg-neutral-500/10 px-1 text-sm tracking-tight hover:bg-neutral-500/20\"\r\n      onClick={handleCopySvg}\r\n      type=\"button\"\r\n    >\r\n      {isCopied ? (\r\n        <>\r\n          <span>Copied</span>\r\n          <CheckIcon className=\"size-5\" />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <span>Copy to SVG</span>\r\n          <CopyIcon className=\"size-5\" />\r\n        </>\r\n      )}\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction ClearButton({ onClick }: Readonly<{ onClick: () => void }>) {\r\n  return (\r\n    <button\r\n      className=\"inline-grid size-8 place-content-center rounded-md border border-neutral-500/10 bg-neutral-500/10 hover:bg-neutral-500/20\"\r\n      onClick={onClick}\r\n      type=\"button\"\r\n    >\r\n      <Eraser className=\"size-5\" />\r\n      <span className=\"sr-only\">Clear</span>\r\n    </button>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SafeLink\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":26,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":19},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":26,"column":21,"nodeType":"BlockStatement","messageId":"unexpected","endLine":26,"endColumn":23,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[803,803],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":35,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":17},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":35,"column":19,"nodeType":"BlockStatement","messageId":"unexpected","endLine":35,"endColumn":21,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1045,1045],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeClassName' is defined but never used. Allowed unused args must match /^_/u.","line":47,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":57,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":19},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":57,"column":21,"nodeType":"BlockStatement","messageId":"unexpected","endLine":57,"endColumn":23,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1604,1604],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { Link, NavLink, useNavigate } from 'react-router-dom'\nimport { message } from 'antd'\nimport { permissionService } from '@src/service/permissionService'\n\nconst isExternal = (to) => typeof to === 'string' && /^(https?:)?\\/\\//.test(to)\n\nexport const SafeLink = ({ to, children, onClick, target, replace = false, ...rest }) => {\n  const navigate = useNavigate()\n  const handleClick = async (e) => {\n    if (onClick) onClick(e)\n    // 如果已经 preventDefault，尊重它\n    if (e.defaultPrevented) return\n\n    // 外部链接或新标签直接打开\n    if (target === '_blank' || isExternal(to)) {\n      return\n    }\n\n    e.preventDefault()\n    try {\n      const ok = await permissionService.canAccessRoute(to, false)\n      if (!ok) {\n        try {\n          message.error('您没有权限访问该页面')\n        } catch (e) {}\n        return\n      }\n      if (replace) navigate(to, { replace: true })\n      else navigate(to)\n    } catch (err) {\n      console.error('SafeLink navigation failed', err)\n      try {\n        message.error('您没有权限访问该页面')\n      } catch (e) {}\n    }\n  }\n\n  // render as regular Link but intercept clicks\n  return (\n    <Link to={to} onClick={handleClick} target={target} {...rest}>\n      {children}\n    </Link>\n  )\n}\n\nexport const SafeNavLink = ({ to, children, className, activeClassName, ...rest }) => {\n  const navigate = useNavigate()\n  const handleClick = async (e) => {\n    if (e.defaultPrevented) return\n    e.preventDefault()\n    try {\n      const ok = await permissionService.canAccessRoute(to, false)\n      if (!ok) {\n        try {\n          message.error('您没有权限访问该页面')\n        } catch (e) {}\n        return\n      }\n      navigate(to)\n    } catch (err) {\n      console.error('SafeNavLink navigation failed', err)\n    }\n  }\n\n  return (\n    <NavLink to={to} onClick={handleClick} className={className} {...rest}>\n      {children}\n    </NavLink>\n  )\n}\n\nexport default SafeLink\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SandpackBasic\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScratchToReveal\\index.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`scratch` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  29 |     const handleDocumentMouseMove = (event) => {\n  30 |       if (!isScratching) return\n> 31 |       scratch(event.clientX, event.clientY)\n     |       ^^^^^^^ `scratch` accessed before it is declared\n  32 |     }\n  33 |\n  34 |     const handleDocumentTouchMove = (event) => {\n\n  71 |   const handleTouchStart = () => setIsScratching(true)\n  72 |\n> 73 |   const scratch = (clientX, clientY) => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 74 |     const canvas = canvasRef.current\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 75 |     const ctx = canvas?.getContext('2d')\n     …\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 84 |     }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 85 |   }\n     | ^^^^ `scratch` is declared here\n  86 |\n  87 |   const checkCompletion = () => {\n  88 |     if (isComplete) return // Check if already completed","line":31,"column":7,"nodeType":null,"endLine":31,"endColumn":14},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`checkCompletion` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  40 |     const handleDocumentMouseUp = () => {\n  41 |       setIsScratching(false)\n> 42 |       checkCompletion()\n     |       ^^^^^^^^^^^^^^^ `checkCompletion` accessed before it is declared\n  43 |     }\n  44 |\n  45 |     const handleDocumentTouchEnd = () => {\n\n   85 |   }\n   86 |\n>  87 |   const checkCompletion = () => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  88 |     if (isComplete) return // Check if already completed\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  89 |\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 112 |     }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 113 |   }\n      | ^^^^ `checkCompletion` is declared here\n  114 |\n  115 |   const startAnimation = () => {\n  116 |     controls.start({","line":42,"column":7,"nodeType":null,"endLine":42,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkCompletion'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [checkCompletion, isScratching]","fix":{"range":[2499,2513],"text":"[checkCompletion, isScratching]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect, useState } from 'react'\nimport clsx from 'clsx'\nimport { motion, useAnimation } from 'motion/react'\n\nconst ScratchToReveal = ({ width, height, minScratchPercentage = 50, onComplete, children, className }) => {\n  const canvasRef = useRef(null)\n  const [isScratching, setIsScratching] = useState(false)\n  const [isComplete, setIsComplete] = useState(false)\n\n  const controls = useAnimation()\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    if (canvas) {\n      // 关键优化：添加willReadFrequently: true\n      const ctx = canvas.getContext('2d', { willReadFrequently: true })\n      if (ctx) {\n        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height)\n        gradient.addColorStop(0, '#A97CF8')\n        gradient.addColorStop(0.5, '#F38CB8')\n        gradient.addColorStop(1, '#FDCC92')\n        ctx.fillStyle = gradient\n        ctx.fillRect(0, 0, canvas.width, canvas.height)\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    const handleDocumentMouseMove = (event) => {\n      if (!isScratching) return\n      scratch(event.clientX, event.clientY)\n    }\n\n    const handleDocumentTouchMove = (event) => {\n      if (!isScratching) return\n      const touch = event.touches[0]\n      scratch(touch.clientX, touch.clientY)\n    }\n\n    const handleDocumentMouseUp = () => {\n      setIsScratching(false)\n      checkCompletion()\n    }\n\n    const handleDocumentTouchEnd = () => {\n      setIsScratching(false)\n      checkCompletion()\n    }\n\n    document.addEventListener('mousedown', handleDocumentMouseMove)\n    document.addEventListener('mousemove', handleDocumentMouseMove)\n    document.addEventListener('touchstart', handleDocumentTouchMove)\n    document.addEventListener('touchmove', handleDocumentTouchMove)\n    document.addEventListener('mouseup', handleDocumentMouseUp)\n    document.addEventListener('touchend', handleDocumentTouchEnd)\n    document.addEventListener('touchcancel', handleDocumentTouchEnd)\n\n    return () => {\n      document.removeEventListener('mousedown', handleDocumentMouseMove)\n      document.removeEventListener('mousemove', handleDocumentMouseMove)\n      document.removeEventListener('touchstart', handleDocumentTouchMove)\n      document.removeEventListener('touchmove', handleDocumentTouchMove)\n      document.removeEventListener('mouseup', handleDocumentMouseUp)\n      document.removeEventListener('touchend', handleDocumentTouchEnd)\n      document.removeEventListener('touchcancel', handleDocumentTouchEnd)\n    }\n  }, [isScratching])\n\n  const handleMouseDown = () => setIsScratching(true)\n\n  const handleTouchStart = () => setIsScratching(true)\n\n  const scratch = (clientX, clientY) => {\n    const canvas = canvasRef.current\n    const ctx = canvas?.getContext('2d')\n    if (canvas && ctx) {\n      const rect = canvas.getBoundingClientRect()\n      const x = clientX - rect.left + 16\n      const y = clientY - rect.top + 16\n      ctx.globalCompositeOperation = 'destination-out'\n      ctx.beginPath()\n      ctx.arc(x, y, 30, 0, Math.PI * 2)\n      ctx.fill()\n    }\n  }\n\n  const checkCompletion = () => {\n    if (isComplete) return // Check if already completed\n\n    const canvas = canvasRef.current\n    const ctx = canvas?.getContext('2d')\n    if (canvas && ctx) {\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n      const pixels = imageData.data\n      const totalPixels = pixels.length / 4\n      let clearPixels = 0\n\n      for (let i = 3; i < pixels.length; i += 4) {\n        if (pixels[i] === 0) clearPixels++\n      }\n\n      const percentage = (clearPixels / totalPixels) * 100\n\n      if (percentage >= minScratchPercentage) {\n        setIsComplete(true)\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\n        startAnimation()\n        if (onComplete) {\n          onComplete()\n        }\n      }\n    }\n  }\n\n  const startAnimation = () => {\n    controls.start({\n      scale: [1, 1.5, 1],\n      rotate: [0, 10, -10, 10, -10, 0],\n      transition: { duration: 0.5 },\n    })\n  }\n\n  return (\n    <motion.div\n      className={clsx('relative select-none', className)}\n      style={{\n        width,\n        height,\n        cursor:\n          \"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzAwMDtzdHJva2Utd2lkdGg6MXB4OyIgLz4KPC9zdmc+'), auto\",\n      }}\n      animate={controls}\n    >\n      <canvas\n        ref={canvasRef}\n        width={width}\n        height={height}\n        className=\"absolute top-0 left-0\"\n        onMouseDown={handleMouseDown}\n        onTouchStart={handleTouchStart}\n      ></canvas>\n      {children}\n    </motion.div>\n  )\n}\n\nexport default ScratchToReveal\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScriptView\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState } from 'react'\nimport { Check, Copy } from 'lucide-react'\nimport { Highlight, themes } from 'prism-react-renderer'\nimport { useProThemeContext } from '@src/theme/hooks'\nimport styles from './index.module.less'\n\nconst ScriptView = ({ showMultiplePackageOptions = true, codeLanguage = 'bash', commandMap, className }) => {\n  const { themeSettings } = useProThemeContext()\n  const isDark = themeSettings.themeMode === 'dark'\n\n  const packageManagers = Object.keys(commandMap)\n  const [packageManager, setPackageManager] = useState(packageManagers[0])\n  const [copied, setCopied] = useState(false)\n  const command = commandMap[packageManager]\n\n  const copyToClipboard = () => {\n    navigator.clipboard.writeText(command)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  return (\n    <div className={`${styles.container} ${isDark ? styles.dark : ''} ${className || ''}`}>\n      <div className={styles.wrapper}>\n        {showMultiplePackageOptions && (\n          <div className={styles.header}>\n            <div className={styles.tabs}>\n              {packageManagers.map((pm, index) => (\n                <div key={pm} className={styles.tabItem}>\n                  <button\n                    className={`${styles.tabButton} ${packageManager === pm ? styles.active : ''}`}\n                    onClick={() => setPackageManager(pm)}\n                  >\n                    {pm}\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className={styles.codeWrapper}>\n          <div className={styles.codeContent}>\n            <Highlight theme={isDark ? themes.dracula : themes.github} code={command} language={codeLanguage}>\n              {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                <pre\n                  className={className}\n                  style={{\n                    ...style,\n                    background: 'transparent',\n                    margin: 0,\n                    padding: '0.625rem 1rem',\n                    overflowX: 'auto',\n                  }}\n                >\n                  {tokens.map((line, i) => (\n                    <div key={i} {...getLineProps({ line })}>\n                      {line.map((token, key) => (\n                        <span key={key} {...getTokenProps({ token })} />\n                      ))}\n                    </div>\n                  ))}\n                </pre>\n              )}\n            </Highlight>\n          </div>\n          <button className={styles.copyButton} onClick={copyToClipboard} title=\"Copy command\">\n            {copied ? <Check className={`${styles.icon} ${styles.checkIcon}`} /> : <Copy className={styles.icon} />}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ScriptView\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollAnimation\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollLayout\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollProgressBar\\examples.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollProgressBar\\index.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollProgressBar\\index.tsx:131:37\n  129 |   return (\n  130 |     <div ref={scrollRef} className={clsx('relative overflow-auto', className)} style={style}>\n> 131 |       <ScrollProgressBar container={scrollRef.current} position=\"relative\" {...progressBarProps} />\n      |                                     ^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  132 |       {children}\n  133 |     </div>\n  134 |   )","line":131,"column":37,"nodeType":null,"endLine":131,"endColumn":54}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\nimport { motion, useScroll, useSpring } from 'motion/react'\nimport clsx from 'clsx'\n\ninterface ScrollProgressBarProps {\n  /**\n   * 滚动容器元素，如果不指定则监听整个页面滚动\n   */\n  container?: HTMLElement | null\n  /**\n   * 定位方式：fixed（固定定位）、relative（相对定位）、absolute（绝对定位）或 sticky（粘性定位）\n   * @default 'fixed'\n   */\n  position?: 'fixed' | 'relative' | 'absolute' | 'sticky'\n  /**\n   * 进度条高度\n   * @default 3\n   */\n  height?: number\n  /**\n   * 进度条颜色，支持CSS颜色值或渐变\n   * @default 'linear-gradient(108deg,#0894ff,#ff2e54 70%,#ff9004)'\n   */\n  color?: string\n  /**\n   * 额外的CSS类名\n   */\n  className?: string\n  /**\n   * 是否显示滚动进度条\n   * @default true\n   */\n  show?: boolean\n  /**\n   * 动画配置\n   */\n  springConfig?: {\n    stiffness?: number\n    damping?: number\n    restDelta?: number\n  }\n}\n\nconst ScrollProgressBar: React.FC<ScrollProgressBarProps> = ({\n  container,\n  position = 'fixed',\n  height = 3,\n  color = 'linear-gradient(108deg,#0894ff,#ff2e54 70%,#ff9004)',\n  className,\n  show = true,\n  springConfig = {\n    stiffness: 100,\n    damping: 30,\n    restDelta: 0.001,\n  },\n}) => {\n  const internalRef = useRef<HTMLDivElement>(null)\n\n  // 使用传入的容器或内部ref\n  const scrollContainerRef = container ? { current: container } : internalRef\n\n  const { scrollYProgress } = useScroll({\n    container: scrollContainerRef,\n  })\n\n  const scaleX = useSpring(scrollYProgress, springConfig)\n\n  if (!show) return null\n\n  const positionStyles =\n    position === 'fixed'\n      ? {\n          position: 'fixed' as const,\n          top: 0,\n          left: 0,\n          width: '100%',\n          zIndex: 50,\n        }\n      : position === 'absolute'\n        ? {\n            position: 'absolute' as const,\n            top: 0,\n            left: 0,\n            width: '100%',\n            zIndex: 10,\n          }\n        : position === 'sticky'\n          ? {\n              position: 'sticky' as const,\n              top: 0,\n              left: 0,\n              width: '100%',\n              zIndex: 10,\n            }\n          : {\n              position: 'relative' as const,\n              width: '100%',\n            }\n\n  return (\n    <motion.div\n      ref={internalRef}\n      className={clsx('scroll-progress-bar', className)}\n      style={{\n        ...positionStyles,\n        height: `${height}px`,\n        backgroundImage: typeof color === 'string' && color.includes('gradient') ? color : undefined,\n        backgroundColor: typeof color === 'string' && !color.includes('gradient') ? color : undefined,\n        borderRadius: '3px',\n        transformOrigin: 'left',\n        scaleX: scaleX,\n      }}\n    />\n  )\n}\n\nexport default ScrollProgressBar\n\n// 包装器组件：提供滚动容器和进度条\ninterface ScrollAreaProps extends Omit<ScrollProgressBarProps, 'container'> {\n  children: React.ReactNode\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport const ScrollArea: React.FC<ScrollAreaProps> = ({ children, className, style, ...progressBarProps }) => {\n  const scrollRef = useRef<HTMLDivElement>(null)\n\n  return (\n    <div ref={scrollRef} className={clsx('relative overflow-auto', className)} style={style}>\n      <ScrollProgressBar container={scrollRef.current} position=\"relative\" {...progressBarProps} />\n      {children}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollToTop\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollVelocity\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ScrollableSections\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":128,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":39},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  141 |   const sectionPositions = React.useMemo(() => {\n  142 |     const container = scrollContainerRef?.current\n> 143 |     if (!container) return []\n      |          ^^^^^^^^^ Cannot access ref value during render\n  144 |\n  145 |     // 按照sections的顺序返回位置信息\n  146 |     return sections.map((section) => {\n\nTo initialize a ref only once, check that the ref is null with the pattern `if (ref.current == null) { ref.current = ... }`","line":143,"column":10,"nodeType":null,"endLine":143,"endColumn":19},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  144 |\n  145 |     // 按照sections的顺序返回位置信息\n> 146 |     return sections.map((section) => {\n      |                         ^^^^^^^^^^^^^^\n> 147 |       const sectionId = `${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 148 |       const sectionElement = sectionRefs.current[sectionId]\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 149 |       if (sectionElement) {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 150 |         const rect = sectionElement.getBoundingClientRect()\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 151 |         const containerRect = container.getBoundingClientRect()\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 152 |         return rect.top - containerRect.top + container.scrollTop\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 153 |       }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 154 |       return 0\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 155 |     })\n      | ^^^^^^ Passing a ref to a function may read its value during render\n  156 |   }, [activeScrollY, scrollContainerRef, sections])\n  157 |\n  158 |   // 动态计算section高度（基于容器高度的100%）","line":146,"column":25,"nodeType":null,"endLine":155,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has an unnecessary dependency: 'activeScrollY'. Either exclude it or remove the dependency array.","line":156,"column":6,"nodeType":"ArrayExpression","endLine":156,"endColumn":51,"suggestions":[{"desc":"Update the dependencies array to be: [scrollContainerRef, sections]","fix":{"range":[4916,4961],"text":"[scrollContainerRef, sections]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":258,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":258,"endColumn":38}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react'\nimport { motion } from 'motion/react'\nimport clsx from 'clsx'\nimport styles from './index.module.less'\n\n/**\n * ScrollableSections - 可复用的导航和内容滚动组件\n *\n * @param {Array} sections - 页面sections配置数组\n * @param {Object} sections[].title - section标题\n * @param {string} sections[].content - section内容文本\n * @param {React.Component} sections[].component - 可选的自定义组件\n * @param {React.RefObject} scrollContainerRef - 外部滚动容器的ref\n * @param {string} className - 额外的CSS类名\n * @param {string} navUlClassName - 导航ul的自定义CSS类名\n * @param {string} navLiClassName - 导航li的自定义CSS类名\n * @param {string} titleClassName - 标题的自定义CSS类名\n * @param {string} contentClassName - 内容的自定义CSS类名\n * @param {string} componentClassName - 组件容器的自定义CSS类名\n */\nconst ScrollableSections = ({\n  sections = [],\n  scrollContainerRef,\n  className = '',\n  navUlClassName = '',\n  navLiClassName = '',\n  titleClassName = '',\n  contentClassName = '',\n  componentClassName = '',\n}) => {\n  const [containerHeight, setContainerHeight] = useState('80vh')\n  const [navHeight, setNavHeight] = useState(80)\n  const [activeNavItemIndex, setActiveNavItemIndex] = useState(0)\n  const [activeScrollY, setActiveScrollY] = useState(0)\n  const [scrollHighlightIndex, setScrollHighlightIndex] = useState(-1)\n\n  const navItemsRef = useRef([])\n  const sectionRefs = useRef({})\n\n  const navItems = sections.map((section) => section.title)\n\n  // 获取样式类名，支持自定义样式\n  const getClassName = (baseClass, customClass, additionalClasses = {}) => {\n    let classes = [styles[baseClass]]\n\n    if (customClass && styles[customClass]) {\n      classes.push(styles[customClass])\n    } else if (customClass) {\n      classes.push(customClass)\n    }\n\n    // 添加额外的类，优先尝试从 CSS Modules 导出中取值\n    Object.entries(additionalClasses).forEach(([key, value]) => {\n      if (!value) return\n      // 如果 styles 中存在对应类名（支持带连字符的类名），优先使用模块化类名\n      if (styles && styles[key]) {\n        classes.push(styles[key])\n      } else {\n        classes.push(key)\n      }\n    })\n\n    return clsx(...classes)\n  }\n\n  const findIndex = (arr, x) => {\n    if (x <= arr[0]) {\n      return 0\n    }\n    for (let index = 0; index < arr.length - 1; index++) {\n      if (x > arr[index] && x <= arr[index + 1]) {\n        return index + 1\n      }\n    }\n    return arr.length\n  }\n\n  // 使用传统的事件监听来跟踪滚动状态\n  useEffect(() => {\n    const container = scrollContainerRef?.current\n    if (!container) return\n\n    let ticking = false\n\n    const handleScroll = () => {\n      if (!ticking) {\n        requestAnimationFrame(() => {\n          const scrollTop = container.scrollTop\n          setActiveScrollY(scrollTop)\n\n          // 计算当前激活的导航项\n          const currentPositions = sections.map((section) => {\n            const sectionId = `${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`\n            const sectionElement = sectionRefs.current[sectionId]\n            if (sectionElement) {\n              const rect = sectionElement.getBoundingClientRect()\n              const containerRect = container.getBoundingClientRect()\n              return rect.top - containerRect.top + scrollTop\n            }\n            return 0\n          })\n\n          const index = findIndex(currentPositions, scrollTop)\n          const validIndex = Math.max(0, Math.min(index, sections.length - 1))\n          setActiveNavItemIndex(validIndex)\n          setScrollHighlightIndex(validIndex)\n          ticking = false\n        })\n        ticking = true\n      }\n    }\n\n    container.addEventListener('scroll', handleScroll, { passive: true })\n    handleScroll() // 初始化调用\n\n    return () => {\n      container.removeEventListener('scroll', handleScroll)\n    }\n  }, [scrollContainerRef, sections])\n\n  // 获取 navItem 和 section 的 DOM 元素引用并存储\n  useEffect(() => {\n    // 延迟执行，确保DOM完全渲染\n    const timer = setTimeout(() => {\n      navItemsRef.current = Array.from(document.querySelectorAll(styles.navItem))\n      // 重新初始化sectionRefs\n      sectionRefs.current = {}\n      sections.forEach((section, index) => {\n        const sectionId = `${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`\n        const element = document.getElementById(sectionId)\n        if (element) {\n          sectionRefs.current[sectionId] = element\n        }\n      })\n    }, 100)\n\n    return () => clearTimeout(timer)\n  }, [sections])\n\n  // 动态计算各 section 的位置信息\n  const sectionPositions = React.useMemo(() => {\n    const container = scrollContainerRef?.current\n    if (!container) return []\n\n    // 按照sections的顺序返回位置信息\n    return sections.map((section) => {\n      const sectionId = `${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`\n      const sectionElement = sectionRefs.current[sectionId]\n      if (sectionElement) {\n        const rect = sectionElement.getBoundingClientRect()\n        const containerRect = container.getBoundingClientRect()\n        return rect.top - containerRect.top + container.scrollTop\n      }\n      return 0\n    })\n  }, [activeScrollY, scrollContainerRef, sections])\n\n  // 动态计算section高度（基于容器高度的100%）\n  useEffect(() => {\n    const container = scrollContainerRef?.current\n    if (!container) return\n\n    const updateSectionHeight = () => {\n      const containerHeight = container.offsetHeight\n      const sectionHeight = Math.round(containerHeight * 1)\n      setContainerHeight(`${sectionHeight}px`)\n    }\n\n    // 计算导航高度\n    const updateNavHeight = () => {\n      const navElement = document.querySelector(`.${styles.nav}`)\n      if (navElement) {\n        const height = navElement.offsetHeight\n        setNavHeight(height)\n      }\n    }\n\n    // 初始计算\n    updateSectionHeight()\n    updateNavHeight()\n\n    // 监听窗口大小变化\n    const resizeObserver = new ResizeObserver(() => {\n      updateSectionHeight()\n      updateNavHeight()\n    })\n\n    resizeObserver.observe(container)\n\n    // 监听窗口resize事件\n    window.addEventListener('resize', updateNavHeight)\n\n    return () => {\n      resizeObserver.disconnect()\n      window.removeEventListener('resize', updateNavHeight)\n    }\n  }, [scrollContainerRef])\n\n  // 处理点击 navItem 滚动到对应 section 的逻辑\n  const handleNavItemClick = (index) => {\n    const container = scrollContainerRef?.current\n    if (!container) return\n\n    // 立即设置激活状态，提供即时视觉反馈\n    setActiveNavItemIndex(index)\n\n    const section = sections[index]\n    const sectionId = `${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`\n    const sectionElement = sectionRefs.current[sectionId]\n    if (sectionElement) {\n      // 使用scrollTo，减去导航高度以避免遮挡\n      const elementPosition = sectionElement.offsetTop - navHeight - 20 // 多减去一些间距\n\n      container.scrollTo({\n        top: elementPosition,\n        behavior: 'smooth',\n      })\n    }\n  }\n\n  return (\n    <div className={className}>\n      <motion.nav\n        className={styles.nav}\n        style={{\n          position:\n            sectionPositions.length > 0 && activeScrollY > sectionPositions[sectionPositions.length - 1]\n              ? 'relative'\n              : 'sticky',\n          top: 0,\n          zIndex: 10,\n        }}\n        initial={{ opacity: 1 }}\n        animate={{\n          opacity: sectionPositions.length > 0 && activeScrollY > sectionPositions[sectionPositions.length - 1] ? 0 : 1,\n        }}\n        exit={{ opacity: 0 }}\n      >\n        <ul className={getClassName('navUl', navUlClassName)}>\n          {navItems.map((item, index) => (\n            <li\n              key={index}\n              className={getClassName('navItem', navLiClassName, {\n                active: index === activeNavItemIndex,\n                'scroll-highlight': index === scrollHighlightIndex,\n              })}\n              onClick={() => handleNavItemClick(index)}\n            >\n              {item}\n              <div className={styles.activeIndicator} />\n              <div className={styles.scrollIndicator} />\n            </li>\n          ))}\n        </ul>\n      </motion.nav>\n\n      <div className=\"content\" style={{ paddingTop: `${navHeight + 20}px` }}>\n        {sections.map((section, index) => (\n          <div\n            key={section.title}\n            id={`${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`}\n            className={styles.section}\n            style={{ minHeight: containerHeight }}\n            ref={(el) => (sectionRefs.current[`${section.title.toLowerCase().replace(/\\s+/g, '-')}-section`] = el)}\n          >\n            <div>\n              <h2 className={getClassName('title', titleClassName)}>{section.title} Section</h2>\n              <p className={getClassName('content', contentClassName)}>\n                {section.content || `这里是 ${section.title} 部分的详细内容......这里展示了各种动画效果和交互功能。`}\n              </p>\n              {section.component && (\n                <div className={getClassName('component', componentClassName)}>{section.component}</div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default ScrollableSections\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SectionNotFound\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SettingDrawer\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ShiCode\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ShiftingCard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ShinyText\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ShootingStars\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SkeletonFix\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SlideButton\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SlideLinear\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SlideText\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'text'. Either include it or remove the dependency array.","line":6,"column":38,"nodeType":"ArrayExpression","endLine":6,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [text]","fix":{"range":[227,229],"text":"[text]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react'\nimport { motion } from 'motion/react'\n\nconst SlideText = ({ text = [] }) => {\n  const [titleNumber, setTitleNumber] = useState(0)\n  const titles = useMemo(() => text, [])\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (titleNumber === titles.length - 1) {\n        setTitleNumber(0)\n      } else {\n        setTitleNumber(titleNumber + 1)\n      }\n    }, 2000)\n    return () => clearTimeout(timeoutId)\n  }, [titleNumber, titles])\n\n  return (\n    <span className=\"relative overflow-hidden pl-4 text-center\">\n      {titles.map((title, index) => (\n        <motion.span\n          key={index}\n          className=\"absolute font-semibold\"\n          initial={{ opacity: 0, y: -100 }}\n          transition={{ type: 'spring', stiffness: 50 }}\n          animate={\n            titleNumber === index\n              ? {\n                  y: 0,\n                  opacity: 1,\n                }\n              : {\n                  y: titleNumber > index ? -150 : 150,\n                  opacity: 0,\n                }\n          }\n        >\n          {title}\n        </motion.span>\n      ))}\n    </span>\n  )\n}\n\nexport default SlideText\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SmartVideoPlayer\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":218,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":218,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":273,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":273,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 't'. Either include it or remove the dependency array.","line":280,"column":5,"nodeType":"ArrayExpression","endLine":280,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [emitEvent, t]","fix":{"range":[7996,8007],"text":"[emitEvent, t]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'systemDefaultVolumeRef' is assigned a value but never used.","line":304,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":304,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":362,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":362,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":436,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":436,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":452,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":452,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":469,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":469,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":483,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":483,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":488,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":488,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":557,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":557,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 't'. Either include it or remove the dependency array.","line":591,"column":6,"nodeType":"ArrayExpression","endLine":591,"endColumn":71,"suggestions":[{"desc":"Update the dependencies array to be: [emitEvent, isEmbed, isHlsSrc, kickAutoPlayNow, reportError, src, t]","fix":{"range":[17301,17366],"text":"[emitEvent, isEmbed, isHlsSrc, kickAutoPlayNow, reportError, src, t]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 't'. Either include it or remove the dependency array.","line":619,"column":6,"nodeType":"ArrayExpression","endLine":619,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [isEmbed, isHlsSrc, src, t]","fix":{"range":[18412,18436],"text":"[isEmbed, isHlsSrc, src, t]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isEmbed'. Either include it or remove the dependency array.","line":805,"column":6,"nodeType":"ArrayExpression","endLine":805,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [config.playbackRate, isEmbed]","fix":{"range":[24052,24073],"text":"[config.playbackRate, isEmbed]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isEmbed'. Either include it or remove the dependency array.","line":810,"column":6,"nodeType":"ArrayExpression","endLine":810,"endColumn":11,"suggestions":[{"desc":"Update the dependencies array to be: [isEmbed, src]","fix":{"range":[24171,24176],"text":"[isEmbed, src]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isEmbed'. Either include it or remove the dependency array.","line":881,"column":6,"nodeType":"ArrayExpression","endLine":881,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [isEmbed, safePlay]","fix":{"range":[26382,26392],"text":"[isEmbed, safePlay]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":968,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":968,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":1187,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":1187,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":1233,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":1233,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport useVideo from '@hooks/useVideo'\r\nimport { I18nextProvider, useTranslation } from 'react-i18next'\r\nimport appI18n from '@/i18n/i18n'\r\nimport {\r\n  Play,\r\n  Pause,\r\n  SkipBack,\r\n  SkipForward,\r\n  Volume2,\r\n  VolumeX,\r\n  Maximize2,\r\n  Plus,\r\n  Minus,\r\n  Settings,\r\n  PictureInPicture,\r\n  ExternalLink,\r\n  X,\r\n  Minimize2,\r\n} from 'lucide-react'\r\n\r\nimport * as stylesModule from './index.module.less'\r\nimport { createSvpI18n, setStoredSvpUiLanguage } from './svpI18n'\r\n\r\nfunction unwrapCssModule(mod) {\r\n  if (!mod) return null\r\n\r\n  const candidates = []\r\n\r\n  if (typeof mod === 'object') {\r\n    if (mod.default) candidates.push(mod.default)\r\n    if (mod.Ay) candidates.push(mod.Ay)\r\n  }\r\n\r\n  candidates.push(mod)\r\n\r\n  for (const base of candidates) {\r\n    if (!base || typeof base !== 'object') continue\r\n\r\n    // style-loader + css-loader often exports an array/object with `.locals`.\r\n    if (base.locals && typeof base.locals === 'object') return base.locals\r\n\r\n    // Vite/other pipelines may export the mapping object directly.\r\n    if (!Array.isArray(base)) return base\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nconst stylesRaw = unwrapCssModule(stylesModule) || {}\r\nconst styles = new Proxy(stylesRaw, {\r\n  get(target, prop) {\r\n    if (typeof prop !== 'string') return target[prop]\r\n    return target[prop] || prop\r\n  },\r\n})\r\n\r\nconst DEFAULT_INITIAL_CONFIG = {\r\n  lazyPlay: true,\r\n  miniPlayer: true,\r\n  autoPlay: true,\r\n  autoMute: true,\r\n  playbackRate: 1,\r\n  ytControls: true,\r\n}\r\n\r\nfunction isSameConfig(a, b) {\r\n  if (a === b) return true\r\n  if (!a || !b) return false\r\n  return (\r\n    a.lazyPlay === b.lazyPlay &&\r\n    a.miniPlayer === b.miniPlayer &&\r\n    a.autoPlay === b.autoPlay &&\r\n    a.autoMute === b.autoMute &&\r\n    Number(a.playbackRate) === Number(b.playbackRate) &&\r\n    a.ytControls === b.ytControls\r\n  )\r\n}\r\n\r\nconst IconButton = React.memo(function IconButton({\r\n  Icon,\r\n  label,\r\n  onClick,\r\n  disabled = false,\r\n  buttonRef,\r\n  tooltipPlacement = 'top',\r\n}) {\r\n  const tooltipPlacementClass =\r\n    tooltipPlacement === 'topLeft'\r\n      ? styles.tooltipTopLeft\r\n      : tooltipPlacement === 'topRight'\r\n        ? styles.tooltipTopRight\r\n        : tooltipPlacement === 'right'\r\n          ? styles.tooltipRight\r\n          : tooltipPlacement === 'left'\r\n            ? styles.tooltipLeft\r\n            : tooltipPlacement === 'bottom'\r\n              ? styles.tooltipBottom\r\n              : tooltipPlacement === 'bottomLeft'\r\n                ? styles.tooltipBottomLeft\r\n                : tooltipPlacement === 'bottomRight'\r\n                  ? styles.tooltipBottomRight\r\n                  : ''\r\n\r\n  return (\r\n    <button\r\n      ref={buttonRef}\r\n      className={styles.iconButton}\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      aria-label={label}\r\n      disabled={disabled}\r\n    >\r\n      <Icon size={15} />\r\n      <span className={`${styles.tooltip} ${tooltipPlacementClass}`} aria-hidden>\r\n        {label}\r\n      </span>\r\n    </button>\r\n  )\r\n})\r\n\r\nconst SettingToggle = React.memo(function SettingToggle({ checked, label, onChange }) {\r\n  return (\r\n    <label className={styles.settingItem}>\r\n      <input\r\n        className={styles.settingCheckbox}\r\n        type=\"checkbox\"\r\n        checked={checked}\r\n        onChange={(e) => onChange(e.target.checked)}\r\n      />\r\n      <span className={styles.settingLabel}>{label}</span>\r\n    </label>\r\n  )\r\n})\r\n\r\nfunction getScrollParent(node) {\r\n  let current = node?.parentElement\r\n  while (current && current !== document.body && current !== document.documentElement) {\r\n    const style = window.getComputedStyle(current)\r\n    const overflow = `${style.overflow}${style.overflowX}${style.overflowY}`\r\n    const scrollable = /(auto|scroll|overlay)/.test(overflow)\r\n    if (scrollable && (current.scrollHeight > current.clientHeight || current.scrollWidth > current.clientWidth)) {\r\n      return current\r\n    }\r\n    current = current.parentElement\r\n  }\r\n  return null\r\n}\r\n\r\nconst SmartVideoPlayerInner = React.forwardRef(function SmartVideoPlayerInner(\r\n  {\r\n    src,\r\n    provider = 'html5',\r\n    youtubeId,\r\n    embedUrl,\r\n    getEmbedUrl,\r\n    externalUrl,\r\n    sourceUrl,\r\n    title,\r\n    trackSrc,\r\n    trackLang = 'en',\r\n    config: controlledConfig,\r\n    onConfigChange,\r\n    initialConfig,\r\n    onError,\r\n    onEvent,\r\n  },\r\n  ref\r\n) {\r\n  const useVideoRef = useRef(null)\r\n  const videoAnchorRef = useRef(null)\r\n  const playerWrapRef = useRef(null)\r\n  const settingsRef = useRef(null)\r\n  const settingsPanelRef = useRef(null)\r\n  const settingsButtonRef = useRef(null)\r\n  const prevSettingsOpenRef = useRef(false)\r\n  const userPausedRef = useRef(false)\r\n  const autoPausedRef = useRef(false)\r\n  const isPiPRef = useRef(false)\r\n  const inViewRef = useRef(true)\r\n  const fullyOutRef = useRef(false)\r\n  const userPlayOverrideUntilRef = useRef(0)\r\n  const miniDismissedRef = useRef(false)\r\n  const autoPlayAttemptedRef = useRef(false)\r\n  const configRef = useRef(null)\r\n  const autoStartFeedbackRef = useRef(false)\r\n\r\n  const onErrorRef = useRef(onError)\r\n  const onEventRef = useRef(onEvent)\r\n  const ctxRef = useRef({ provider, src, youtubeId, embedUrl })\r\n  const embedTimerRef = useRef(0)\r\n\r\n  const { t, i18n } = useTranslation()\r\n\r\n  useEffect(() => {\r\n    onErrorRef.current = onError\r\n  }, [onError])\r\n\r\n  useEffect(() => {\r\n    onEventRef.current = onEvent\r\n  }, [onEvent])\r\n\r\n  useEffect(() => {\r\n    ctxRef.current = { provider, src, youtubeId, embedUrl }\r\n  }, [provider, src, youtubeId, embedUrl])\r\n\r\n  const [settingsOpen, setSettingsOpen] = useState(false)\r\n  const [speedOpen, setSpeedOpen] = useState(false)\r\n  const [captionsOpen, setCaptionsOpen] = useState(false)\r\n  const [uiLangOpen, setUiLangOpen] = useState(false)\r\n\r\n  const emitEvent = useCallback((name, detail) => {\r\n    const fn = onEventRef.current\r\n    if (typeof fn !== 'function') return\r\n    try {\r\n      fn(name, detail)\r\n    } catch (_) {\r\n      // ignore\r\n    }\r\n  }, [])\r\n\r\n  const handleSettingsPanelPointerDownCapture = useCallback(\r\n    (e) => {\r\n      if (!speedOpen && !captionsOpen && !uiLangOpen) return\r\n      const target = e.target\r\n      if (!(target instanceof Element)) return\r\n\r\n      if (target.closest('[data-speed-dropdown=\"true\"]')) return\r\n      if (target.closest('[data-captions-dropdown=\"true\"]')) return\r\n      if (target.closest('[data-ui-lang-dropdown=\"true\"]')) return\r\n      setSpeedOpen(false)\r\n      setCaptionsOpen(false)\r\n      setUiLangOpen(false)\r\n    },\r\n    [captionsOpen, speedOpen, uiLangOpen]\r\n  )\r\n  const [inView, setInView] = useState(true)\r\n  const [fullyOut, setFullyOut] = useState(false)\r\n  const [miniDismissed, setMiniDismissed] = useState(false)\r\n  const [isPiP, setIsPiP] = useState(false)\r\n  const mergedInitialConfig = useMemo(() => {\r\n    return {\r\n      ...DEFAULT_INITIAL_CONFIG,\r\n      ...(initialConfig || {}),\r\n    }\r\n  }, [initialConfig])\r\n\r\n  const [uncontrolledConfig, setUncontrolledConfig] = useState(mergedInitialConfig)\r\n  const config = controlledConfig ?? uncontrolledConfig\r\n\r\n  // Keep refs in sync immediately (before effects), so event handlers read the latest config.\r\n  configRef.current = config\r\n  const [playError, setPlayError] = useState('')\r\n\r\n  const reportError = useCallback(\r\n    (message, extra) => {\r\n      const safeMessage = typeof message === 'string' ? message : t('svp.errorUnknown')\r\n      setPlayError(safeMessage)\r\n\r\n      const fn = onErrorRef.current\r\n      const ctx = ctxRef.current\r\n      if (typeof fn === 'function') {\r\n        try {\r\n          fn({\r\n            message: safeMessage,\r\n            provider: ctx.provider,\r\n            src: ctx.src,\r\n            youtubeId: ctx.youtubeId,\r\n            embedUrl: ctx.embedUrl,\r\n            ...extra,\r\n          })\r\n        } catch (_) {\r\n          // ignore\r\n        }\r\n      }\r\n\r\n      emitEvent('error', { message: safeMessage, ...extra })\r\n    },\r\n    [emitEvent]\r\n  )\r\n\r\n  const [bufferedEnd, setBufferedEnd] = useState(0)\r\n  const [hoverPreview, setHoverPreview] = useState(null)\r\n\r\n  const [embedLoaded, setEmbedLoaded] = useState(true)\r\n  const [embedTimeout, setEmbedTimeout] = useState(false)\r\n\r\n  const setConfigState = useCallback(\r\n    (updater) => {\r\n      if (controlledConfig != null) {\r\n        if (typeof onConfigChange !== 'function') return\r\n        const next = typeof updater === 'function' ? updater(controlledConfig) : updater\r\n        onConfigChange(next)\r\n        return\r\n      }\r\n      setUncontrolledConfig(updater)\r\n    },\r\n    [controlledConfig, onConfigChange]\r\n  )\r\n\r\n  const [observerRoot, setObserverRoot] = useState(null)\r\n\r\n  const systemDefaultVolumeRef = useRef(30)\r\n  const lastUserVolumeRef = useRef(null)\r\n\r\n  const isYouTube = provider === 'youtube'\r\n  const isEmbed = provider === 'embed' || isYouTube\r\n  const isMini = !isEmbed && config.miniPlayer && fullyOut && !isPiP && !miniDismissed\r\n\r\n  const isHlsSrc = useMemo(() => {\r\n    if (isEmbed) return false\r\n    if (typeof src !== 'string') return false\r\n    return /\\.m3u8($|\\?)/i.test(src)\r\n  }, [isEmbed, src])\r\n\r\n  const hlsRef = useRef(null)\r\n\r\n  const [mediaLoading, setMediaLoading] = useState(false)\r\n  const [mediaLoadingText, setMediaLoadingText] = useState(t('svp.loading'))\r\n\r\n  useEffect(() => {\r\n    if (!mediaLoading) return\r\n    setMediaLoadingText(isHlsSrc ? t('svp.loadingHls') : t('svp.loading'))\r\n  }, [isHlsSrc, mediaLoading, t, i18n.language, i18n.resolvedLanguage])\r\n\r\n  const [captionsEnabled, setCaptionsEnabled] = useState(false)\r\n  const [captionTracks, setCaptionTracks] = useState([])\r\n  const [captionTrackIndex, setCaptionTrackIndex] = useState(0)\r\n\r\n  const { isPaused, isMuted, currentVolume, currentTime, pause, mute, unmute, forward, back, toggleFullscreen } =\r\n    useVideo(useVideoRef, { enabled: !isEmbed })\r\n\r\n  const setConfigItem = useCallback(\r\n    (key, value) => {\r\n      if (key === 'autoPlay' && value === true) {\r\n        userPausedRef.current = false\r\n      }\r\n      if (key === 'autoMute' && value === false) {\r\n        unmute()\r\n      }\r\n      setConfigState((prev) => ({ ...prev, [key]: value }))\r\n    },\r\n    [setConfigState, unmute]\r\n  )\r\n\r\n  const [duration, setDuration] = useState(0)\r\n\r\n  const safePlay = useCallback(\r\n    (withFeedback = false) => {\r\n      const videoEl = useVideoRef.current\r\n      if (!videoEl) return\r\n\r\n      // Autoplay: 大多数浏览器要求 muted 才允许自动播放；这里做同步兜底，避免 effect 时序导致首次 play 被拦\r\n      if (configRef.current?.autoMute && !videoEl.muted) {\r\n        videoEl.muted = true\r\n      }\r\n\r\n      if (!isHlsSrc && videoEl.readyState === 0) {\r\n        try {\r\n          videoEl.load()\r\n        } catch (_) {\r\n          // ignore\r\n        }\r\n      }\r\n\r\n      const playPromise = videoEl.play()\r\n      Promise.resolve(playPromise)\r\n        .then(() => {\r\n          if (withFeedback) setPlayError('')\r\n          emitEvent('play', { provider: ctxRef.current?.provider })\r\n        })\r\n        .catch((err) => {\r\n          const isAutoStartAttempt = autoStartFeedbackRef.current\r\n          if (isAutoStartAttempt) autoStartFeedbackRef.current = false\r\n\r\n          if (!withFeedback) return\r\n\r\n          const name = typeof err?.name === 'string' ? err.name : 'PlayError'\r\n          const message = typeof err?.message === 'string' ? err.message : ''\r\n\r\n          // Autoplay may be blocked by browser policy/user settings.\r\n          // For auto-start attempts, don't surface this as a sticky UI error.\r\n          if (isAutoStartAttempt && name === 'NotAllowedError') {\r\n            emitEvent('autoplayBlocked', { name, message })\r\n            return\r\n          }\r\n\r\n          // Common & harmless: play() interrupted by pause() (e.g. IO lazy-play or rapid user toggles)\r\n          if (\r\n            name === 'AbortError' ||\r\n            /interrupted by a call to pause\\(\\)/i.test(message) ||\r\n            /The play\\(\\) request was interrupted/i.test(message)\r\n          ) {\r\n            return\r\n          }\r\n\r\n          reportError(message ? t('svp.unableToPlayWithMessage', { name, message }) : t('svp.unableToPlay', { name }), {\r\n            name,\r\n            message,\r\n          })\r\n        })\r\n    },\r\n    [emitEvent, isHlsSrc, reportError, t]\r\n  )\r\n\r\n  const kickAutoPlayNow = useCallback(() => {\r\n    const cfg = configRef.current\r\n    if (!cfg?.autoPlay) return\r\n    if (!inViewRef.current) return\r\n    if (userPausedRef.current) return\r\n    if (autoPlayAttemptedRef.current) return\r\n\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    if (!videoEl.paused) return\r\n\r\n    autoPlayAttemptedRef.current = true\r\n    autoStartFeedbackRef.current = true\r\n    safePlay(true)\r\n  }, [safePlay])\r\n\r\n  const safePlayFromUserGesture = useCallback(\r\n    (withFeedback = true) => {\r\n      // Treat as explicit user intent: clear pause flags and briefly ignore IO-driven auto pause.\r\n      userPausedRef.current = false\r\n      autoPausedRef.current = false\r\n      userPlayOverrideUntilRef.current = Date.now() + 1200\r\n\r\n      // When using <source>, changing src doesn't automatically reload media.\r\n      // Ensure the new source is actually loaded before play() within the click gesture.\r\n      const videoEl = useVideoRef.current\r\n      if (videoEl && !isHlsSrc) {\r\n        try {\r\n          videoEl.load()\r\n        } catch (_) {\r\n          // ignore\r\n        }\r\n      }\r\n      safePlay(withFeedback)\r\n    },\r\n    [isHlsSrc, safePlay]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (isEmbed || isHlsSrc) return\r\n    // <source src> updates require an explicit load() to take effect.\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    try {\r\n      videoEl.load()\r\n    } catch (_) {\r\n      // ignore\r\n    }\r\n  }, [isEmbed, isHlsSrc, src, trackSrc, trackLang])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    let cancelled = false\r\n\r\n    const destroyHls = () => {\r\n      const hls = hlsRef.current\r\n      if (!hls) return\r\n      try {\r\n        hls.destroy()\r\n      } catch (_) {\r\n        // ignore\r\n      }\r\n      hlsRef.current = null\r\n    }\r\n\r\n    if (!isHlsSrc) {\r\n      // Leaving HLS mode: HLS paths set videoEl.src (native) or attach a blob URL (hls.js).\r\n      // If we don't clear it, <source src=...> updates won't take effect and switching back to mp4 can fail.\r\n      destroyHls()\r\n      try {\r\n        if (videoEl.getAttribute('src')) videoEl.removeAttribute('src')\r\n        // Also clear the property for good measure.\r\n        if (videoEl.src) videoEl.src = ''\r\n      } catch (_) {\r\n        // ignore\r\n      }\r\n      try {\r\n        videoEl.load()\r\n      } catch (_) {\r\n        // ignore\r\n      }\r\n      return\r\n    }\r\n\r\n    // Ensure we start from a clean slate.\r\n    destroyHls()\r\n\r\n    const canPlayNative = Boolean(\r\n      videoEl.canPlayType?.('application/vnd.apple.mpegurl') || videoEl.canPlayType?.('application/x-mpegURL')\r\n    )\r\n\r\n    if (canPlayNative) {\r\n      try {\r\n        videoEl.src = src\r\n        videoEl.load()\r\n        emitEvent('hlsNative', {})\r\n        kickAutoPlayNow()\r\n      } catch (err) {\r\n        reportError(t('svp.hlsNativeLoadFailed'), {\r\n          type: 'hls',\r\n          name: err?.name,\r\n          reason: err?.message,\r\n        })\r\n      }\r\n      return\r\n    }\r\n\r\n    ;(async () => {\r\n      try {\r\n        const mod = await import('hls.js')\r\n        const Hls = mod?.default\r\n        if (!Hls || typeof Hls.isSupported !== 'function' || !Hls.isSupported()) {\r\n          reportError(t('svp.hlsNotSupported'), {\r\n            type: 'hls',\r\n            reason: 'not_supported',\r\n          })\r\n          return\r\n        }\r\n\r\n        if (cancelled) return\r\n\r\n        const hls = new Hls({\r\n          // keep defaults; avoid aggressive low-latency tuning here\r\n          enableWorker: true,\r\n        })\r\n        hlsRef.current = hls\r\n\r\n        hls.on(Hls.Events.ERROR, (_, data) => {\r\n          if (!data) return\r\n          emitEvent('hlsError', { details: data })\r\n\r\n          if (!data.fatal) return\r\n\r\n          reportError(t('svp.hlsPlaybackError'), {\r\n            type: 'hls',\r\n            fatal: true,\r\n            details: {\r\n              type: data.type,\r\n              details: data.details,\r\n              reason: data.reason,\r\n              response: data.response,\r\n            },\r\n          })\r\n\r\n          // Best-effort: destroy to stop retry loops\r\n          try {\r\n            hls.destroy()\r\n          } catch (_) {\r\n            // ignore\r\n          }\r\n          if (hlsRef.current === hls) hlsRef.current = null\r\n        })\r\n\r\n        hls.attachMedia(videoEl)\r\n        hls.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n          if (cancelled) return\r\n          try {\r\n            hls.loadSource(src)\r\n            emitEvent('hlsAttach', {})\r\n            kickAutoPlayNow()\r\n          } catch (err) {\r\n            reportError(t('svp.hlsLoadFailed'), {\r\n              type: 'hls',\r\n              name: err?.name,\r\n              reason: err?.message,\r\n            })\r\n          }\r\n        })\r\n      } catch (err) {\r\n        reportError(t('svp.hlsInitFailed'), {\r\n          type: 'hls',\r\n          name: err?.name,\r\n          reason: err?.message,\r\n        })\r\n      }\r\n    })()\r\n\r\n    return () => {\r\n      cancelled = true\r\n      destroyHls()\r\n    }\r\n  }, [emitEvent, isEmbed, isHlsSrc, kickAutoPlayNow, reportError, src])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    // When switching sources, show a simple overlay to avoid a \"blank\" feel.\r\n    // We rely on media events to clear it as soon as playback is ready.\r\n    const onLoadStart = () => {\r\n      setMediaLoadingText(isHlsSrc ? t('svp.loadingHls') : t('svp.loading'))\r\n      setMediaLoading(true)\r\n    }\r\n    const onCanPlay = () => setMediaLoading(false)\r\n    const onPlaying = () => setMediaLoading(false)\r\n    const onError = () => setMediaLoading(false)\r\n\r\n    videoEl.addEventListener('loadstart', onLoadStart)\r\n    videoEl.addEventListener('canplay', onCanPlay)\r\n    videoEl.addEventListener('playing', onPlaying)\r\n    videoEl.addEventListener('error', onError)\r\n\r\n    return () => {\r\n      videoEl.removeEventListener('loadstart', onLoadStart)\r\n      videoEl.removeEventListener('canplay', onCanPlay)\r\n      videoEl.removeEventListener('playing', onPlaying)\r\n      videoEl.removeEventListener('error', onError)\r\n    }\r\n  }, [isEmbed, isHlsSrc, src])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    const syncTracks = () => {\r\n      const list = videoEl.textTracks\r\n      const next = []\r\n      if (list && typeof list.length === 'number') {\r\n        for (let i = 0; i < list.length; i += 1) {\r\n          const t = list[i]\r\n          if (!t) continue\r\n          next.push({\r\n            index: i,\r\n            label: t.label || t.language || t('svp.captionN', { n: i + 1 }),\r\n            language: t.language || '',\r\n          })\r\n        }\r\n      }\r\n\r\n      setCaptionTracks(next)\r\n      if (next.length <= 0) {\r\n        setCaptionsEnabled(false)\r\n        setCaptionTrackIndex(0)\r\n      } else if (captionTrackIndex >= next.length) {\r\n        setCaptionTrackIndex(0)\r\n      }\r\n    }\r\n\r\n    const onMeta = () => {\r\n      // textTracks sometimes populate after metadata; defer a tick\r\n      window.setTimeout(syncTracks, 0)\r\n    }\r\n\r\n    videoEl.addEventListener('loadedmetadata', onMeta)\r\n    onMeta()\r\n    return () => {\r\n      videoEl.removeEventListener('loadedmetadata', onMeta)\r\n    }\r\n  }, [captionTrackIndex, isEmbed, src, trackLang, trackSrc])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    const list = videoEl.textTracks\r\n    if (!list || typeof list.length !== 'number') return\r\n\r\n    for (let i = 0; i < list.length; i += 1) {\r\n      const t = list[i]\r\n      if (!t) continue\r\n      t.mode = 'disabled'\r\n    }\r\n\r\n    if (!captionsEnabled) return\r\n    const active = list[captionTrackIndex]\r\n    if (active) active.mode = 'showing'\r\n  }, [captionsEnabled, captionTrackIndex, isEmbed])\r\n\r\n  useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      play: (withFeedback = false) => safePlay(withFeedback),\r\n      playFromUserGesture: (withFeedback = true) => safePlayFromUserGesture(withFeedback),\r\n    }),\r\n    [safePlay, safePlayFromUserGesture]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    const onPlaying = () => setPlayError('')\r\n    const onError = () => {\r\n      const code = videoEl.error?.code\r\n      const msg =\r\n        code === 1\r\n          ? t('svp.videoLoadAborted')\r\n          : code === 2\r\n            ? t('svp.videoNetworkError')\r\n            : code === 3\r\n              ? t('svp.videoDecodeError')\r\n              : code === 4\r\n                ? t('svp.videoSourceNotSupported')\r\n                : t('svp.videoLoadFailed')\r\n      reportError(msg, { code })\r\n    }\r\n\r\n    videoEl.addEventListener('playing', onPlaying)\r\n    videoEl.addEventListener('error', onError)\r\n    return () => {\r\n      videoEl.removeEventListener('playing', onPlaying)\r\n      videoEl.removeEventListener('error', onError)\r\n    }\r\n  }, [isEmbed, reportError, src, t])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    let rafId = 0\r\n    const updateBuffered = () => {\r\n      rafId = 0\r\n      const d = Number.isFinite(videoEl.duration) ? videoEl.duration : 0\r\n      if (!d || !videoEl.buffered || videoEl.buffered.length <= 0) {\r\n        setBufferedEnd(0)\r\n        return\r\n      }\r\n\r\n      let end = 0\r\n      for (let i = 0; i < videoEl.buffered.length; i += 1) {\r\n        const nextEnd = Number(videoEl.buffered.end(i))\r\n        if (Number.isFinite(nextEnd)) end = Math.max(end, nextEnd)\r\n      }\r\n      setBufferedEnd(Math.min(end, d))\r\n    }\r\n\r\n    const onProgress = () => {\r\n      if (rafId) return\r\n      rafId = requestAnimationFrame(updateBuffered)\r\n    }\r\n\r\n    videoEl.addEventListener('progress', onProgress)\r\n    videoEl.addEventListener('loadedmetadata', onProgress)\r\n    videoEl.addEventListener('durationchange', onProgress)\r\n    onProgress()\r\n\r\n    return () => {\r\n      if (rafId) cancelAnimationFrame(rafId)\r\n      videoEl.removeEventListener('progress', onProgress)\r\n      videoEl.removeEventListener('loadedmetadata', onProgress)\r\n      videoEl.removeEventListener('durationchange', onProgress)\r\n    }\r\n  }, [isEmbed, src])\r\n\r\n  useEffect(() => {\r\n    configRef.current = config\r\n  }, [config])\r\n\r\n  useEffect(() => {\r\n    // When uncontrolled, allow parent to update defaults by changing initialConfig.\r\n    if (controlledConfig != null) return\r\n    setUncontrolledConfig((prev) => {\r\n      if (isSameConfig(prev, mergedInitialConfig)) return prev\r\n      return mergedInitialConfig\r\n    })\r\n  }, [controlledConfig, mergedInitialConfig])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    const onPause = () => {\r\n      // Ignore pauses we triggered for lazy-play\r\n      if (autoPausedRef.current) return\r\n      // Ignore natural end\r\n      if (videoEl.ended) return\r\n      // Treat any other pause (e.g. PiP native controls / media keys) as user intent\r\n      userPausedRef.current = true\r\n    }\r\n\r\n    const onPlay = () => {\r\n      // When playback resumes (including PiP native controls), clear both flags.\r\n      userPausedRef.current = false\r\n      autoPausedRef.current = false\r\n    }\r\n\r\n    videoEl.addEventListener('pause', onPause)\r\n    videoEl.addEventListener('play', onPlay)\r\n    return () => {\r\n      videoEl.removeEventListener('pause', onPause)\r\n      videoEl.removeEventListener('play', onPlay)\r\n    }\r\n  }, [isEmbed, src])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    const rate = Number(config.playbackRate)\r\n    videoEl.playbackRate = Number.isFinite(rate) && rate > 0 ? rate : 1\r\n  }, [config.playbackRate])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    autoPlayAttemptedRef.current = false\r\n  }, [src])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    // For HLS, wait until native src / hls.js is attached.\r\n    if (isHlsSrc) return\r\n\r\n    // Non-HLS: try to start loading/play ASAP after the new <source> is committed.\r\n    const id = window.requestAnimationFrame(() => {\r\n      kickAutoPlayNow()\r\n    })\r\n    return () => window.cancelAnimationFrame(id)\r\n  }, [isEmbed, isHlsSrc, kickAutoPlayNow, src])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    // Video reload should restore default speed\r\n    setConfigState((prev) => ({ ...prev, playbackRate: 1 }))\r\n    const videoEl = useVideoRef.current\r\n    if (videoEl) videoEl.playbackRate = 1\r\n  }, [isEmbed, setConfigState, src])\r\n\r\n  useEffect(() => {\r\n    const el = videoAnchorRef.current\r\n    if (!el) return\r\n    if (!('getComputedStyle' in window)) return\r\n    setObserverRoot(getScrollParent(el))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    miniDismissedRef.current = miniDismissed\r\n  }, [miniDismissed])\r\n\r\n  useEffect(() => {\r\n    // 回到视口（哪怕只露出一点）就允许再次弹出小窗\r\n    if (!fullyOut) setMiniDismissed(false)\r\n  }, [fullyOut])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    const maybeAutoPlayOnReady = () => {\r\n      const cfg = configRef.current\r\n      if (!cfg?.autoPlay) return\r\n      if (!inViewRef.current) return\r\n      if (userPausedRef.current) return\r\n      if (autoPlayAttemptedRef.current) return\r\n      if (!videoEl.paused) return\r\n\r\n      autoPlayAttemptedRef.current = true\r\n      safePlay()\r\n    }\r\n\r\n    const handleLoadedMeta = () => {\r\n      const nextDuration = Number.isFinite(videoEl.duration) ? videoEl.duration : 0\r\n      setDuration(nextDuration)\r\n      maybeAutoPlayOnReady()\r\n    }\r\n\r\n    videoEl.addEventListener('loadedmetadata', handleLoadedMeta)\r\n    videoEl.addEventListener('durationchange', handleLoadedMeta)\r\n    videoEl.addEventListener('canplay', maybeAutoPlayOnReady)\r\n    handleLoadedMeta()\r\n\r\n    return () => {\r\n      videoEl.removeEventListener('loadedmetadata', handleLoadedMeta)\r\n      videoEl.removeEventListener('durationchange', handleLoadedMeta)\r\n      videoEl.removeEventListener('canplay', maybeAutoPlayOnReady)\r\n    }\r\n  }, [safePlay])\r\n\r\n  const updateSettingsPanelPosition = useCallback(() => {\r\n    const buttonWrapEl = settingsRef.current\r\n    if (!buttonWrapEl) return\r\n\r\n    const rect = buttonWrapEl.getBoundingClientRect()\r\n    const panelEl = settingsPanelRef.current\r\n\r\n    const panelWidth = panelEl?.offsetWidth || 240\r\n    const margin = 8\r\n    const gap = 10\r\n\r\n    const naturalPanelHeight = panelEl ? Math.max(panelEl.scrollHeight || 0, panelEl.offsetHeight || 0) : 160\r\n    const spaceBelow = Math.max(0, window.innerHeight - margin - (rect.bottom + gap))\r\n    const spaceAbove = Math.max(0, rect.top - gap - margin)\r\n\r\n    // Prefer below (like YouTube), but flip above if below can't fit and above is better.\r\n    const placeBelow = spaceBelow >= naturalPanelHeight || spaceBelow >= spaceAbove\r\n    const chosenSpace = placeBelow ? spaceBelow : spaceAbove\r\n\r\n    if (panelEl) {\r\n      panelEl.style.maxHeight = `${Math.max(120, Math.floor(chosenSpace))}px`\r\n    }\r\n\r\n    const left = Math.min(Math.max(margin, rect.right - panelWidth), window.innerWidth - panelWidth - margin)\r\n\r\n    const renderedHeight = panelEl ? panelEl.offsetHeight || 0 : 0\r\n    let top = placeBelow ? rect.bottom + gap : rect.top - gap - renderedHeight\r\n    top = Math.min(Math.max(margin, top), window.innerHeight - renderedHeight - margin)\r\n\r\n    if (panelEl) {\r\n      const x = `${Math.round(left)}px`\r\n      const y = `${Math.round(top)}px`\r\n      panelEl.style.setProperty('--svp-settings-left', x)\r\n      panelEl.style.setProperty('--svp-settings-top', y)\r\n      panelEl.style.left = x\r\n      panelEl.style.top = y\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!settingsOpen) return\r\n\r\n    const onPointerDown = (e) => {\r\n      const buttonWrapEl = settingsRef.current\r\n      const panelEl = settingsPanelRef.current\r\n      const target = e.target\r\n\r\n      if (buttonWrapEl && buttonWrapEl.contains(target)) return\r\n      if (panelEl && panelEl.contains(target)) return\r\n      setSettingsOpen(false)\r\n    }\r\n\r\n    const raf = requestAnimationFrame(updateSettingsPanelPosition)\r\n\r\n    const focusTimer = window.setTimeout(() => {\r\n      const panelEl = settingsPanelRef.current\r\n      if (!panelEl) return\r\n      const first = panelEl.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])')\r\n      if (first instanceof HTMLElement) first.focus()\r\n    }, 0)\r\n\r\n    window.addEventListener('resize', updateSettingsPanelPosition)\r\n    window.addEventListener('scroll', updateSettingsPanelPosition, true)\r\n    document.addEventListener('pointerdown', onPointerDown)\r\n\r\n    return () => {\r\n      window.clearTimeout(focusTimer)\r\n      cancelAnimationFrame(raf)\r\n      window.removeEventListener('resize', updateSettingsPanelPosition)\r\n      window.removeEventListener('scroll', updateSettingsPanelPosition, true)\r\n      document.removeEventListener('pointerdown', onPointerDown)\r\n    }\r\n  }, [settingsOpen, updateSettingsPanelPosition])\r\n\r\n  useEffect(() => {\r\n    const wasOpen = prevSettingsOpenRef.current\r\n    prevSettingsOpenRef.current = settingsOpen\r\n\r\n    // Only restore focus when the panel is closed (open -> closed).\r\n    if (!wasOpen || settingsOpen) return\r\n\r\n    const btn = settingsButtonRef.current\r\n    if (btn && btn instanceof HTMLElement) {\r\n      try {\r\n        btn.focus()\r\n      } catch (_) {\r\n        // ignore\r\n      }\r\n    }\r\n  }, [settingsOpen])\r\n\r\n  useEffect(() => {\r\n    if (settingsOpen) return\r\n    setSpeedOpen(false)\r\n    setCaptionsOpen(false)\r\n  }, [settingsOpen])\r\n\r\n  useEffect(() => {\r\n    if (!settingsOpen) return\r\n    const raf = requestAnimationFrame(updateSettingsPanelPosition)\r\n    return () => cancelAnimationFrame(raf)\r\n  }, [settingsOpen, config, updateSettingsPanelPosition])\r\n\r\n  useEffect(() => {\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    if (!('requestPictureInPicture' in videoEl)) return\r\n\r\n    const onEnter = () => {\r\n      isPiPRef.current = true\r\n      setIsPiP(true)\r\n      emitEvent('pipEnter', {})\r\n    }\r\n    const onLeave = () => {\r\n      isPiPRef.current = false\r\n      setIsPiP(false)\r\n      emitEvent('pipLeave', {})\r\n    }\r\n\r\n    videoEl.addEventListener('enterpictureinpicture', onEnter)\r\n    videoEl.addEventListener('leavepictureinpicture', onLeave)\r\n\r\n    return () => {\r\n      videoEl.removeEventListener('enterpictureinpicture', onEnter)\r\n      videoEl.removeEventListener('leavepictureinpicture', onLeave)\r\n    }\r\n  }, [emitEvent])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    if (!config.lazyPlay && !config.miniPlayer) return\r\n    if (!('IntersectionObserver' in window)) return\r\n\r\n    const el = videoAnchorRef.current\r\n    if (!el) return\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        const entry = entries[0]\r\n        if (!entry) return\r\n\r\n        // Fallback: some layouts/scroll roots can cause IO to report non-intersection incorrectly.\r\n        // If the element is actually visible by rect overlap, treat it as in-view.\r\n        let isIntersecting = entry.isIntersecting\r\n        let intersectionRatio = entry.intersectionRatio\r\n        if (!isIntersecting || intersectionRatio <= 0) {\r\n          const rect = el.getBoundingClientRect()\r\n          const rootRect = observerRoot ? observerRoot.getBoundingClientRect() : null\r\n          const viewLeft = rootRect ? rootRect.left : 0\r\n          const viewTop = rootRect ? rootRect.top : 0\r\n          const viewRight = rootRect ? rootRect.right : window.innerWidth\r\n          const viewBottom = rootRect ? rootRect.bottom : window.innerHeight\r\n          const overlaps =\r\n            rect.right > viewLeft && rect.left < viewRight && rect.bottom > viewTop && rect.top < viewBottom\r\n          if (overlaps) {\r\n            isIntersecting = true\r\n            intersectionRatio = 1\r\n          }\r\n        }\r\n\r\n        const nextFullyOut = !isIntersecting || intersectionRatio <= 0\r\n        if (nextFullyOut !== fullyOutRef.current) {\r\n          fullyOutRef.current = nextFullyOut\r\n          setFullyOut(nextFullyOut)\r\n        }\r\n\r\n        // Hysteresis to prevent flicker near threshold\r\n        const ratio = intersectionRatio\r\n        const currentlyInView = inViewRef.current\r\n        let nextInView = currentlyInView\r\n\r\n        if (currentlyInView) {\r\n          if (!isIntersecting || ratio < 0.25) nextInView = false\r\n        } else {\r\n          if (isIntersecting && ratio > 0.75) nextInView = true\r\n        }\r\n\r\n        if (nextInView !== currentlyInView) {\r\n          inViewRef.current = nextInView\r\n          setInView(nextInView)\r\n        }\r\n\r\n        // In PiP, user expects playback to be independent from viewport visibility.\r\n        // Avoid IO-driven pause/play fighting with PiP native controls.\r\n        if (isPiPRef.current) return\r\n\r\n        const shouldMini = Boolean(config.miniPlayer && nextFullyOut && !isPiP && !miniDismissedRef.current)\r\n\r\n        if (!nextInView) {\r\n          if (shouldMini) return\r\n          if (!config.lazyPlay) return\r\n\r\n          // If user explicitly started playback (e.g. via playlist click), don't instantly pause due to IO hysteresis.\r\n          if (Date.now() < userPlayOverrideUntilRef.current) return\r\n\r\n          if (!isPaused) {\r\n            autoPausedRef.current = true\r\n            pause()\r\n          }\r\n          return\r\n        }\r\n\r\n        if (userPausedRef.current) return\r\n\r\n        if (autoPausedRef.current) {\r\n          autoPausedRef.current = false\r\n          safePlay()\r\n          return\r\n        }\r\n\r\n        if (config.autoPlay && isPaused) {\r\n          safePlay()\r\n        }\r\n      },\r\n      {\r\n        threshold: [0, 0.25, 0.75, 1],\r\n        root: observerRoot,\r\n      }\r\n    )\r\n\r\n    observer.observe(el)\r\n    return () => observer.disconnect()\r\n  }, [isEmbed, config.autoPlay, config.lazyPlay, config.miniPlayer, observerRoot, isPaused, isPiP, pause, safePlay])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    if (config.autoMute) {\r\n      mute()\r\n    }\r\n  }, [isEmbed, config.autoMute, mute])\r\n\r\n  useEffect(() => {\r\n    if (isEmbed) return\r\n    if (!config.autoPlay) return\r\n    // Keep current playback state when entering PiP; avoid any autoPlay race.\r\n    if (isPiPRef.current) return\r\n    if (!inView) return\r\n    if (userPausedRef.current) return\r\n    if (!isPaused) return\r\n    const videoEl = useVideoRef.current\r\n    if (videoEl?.ended) return\r\n    safePlay()\r\n  }, [isEmbed, config.autoPlay, inView, isPaused, isPiP, safePlay])\r\n\r\n  const handleTogglePause = useCallback(() => {\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n\r\n    autoPausedRef.current = false\r\n\r\n    if (videoEl.paused) {\r\n      userPausedRef.current = false\r\n      safePlay(true)\r\n      return\r\n    }\r\n\r\n    userPausedRef.current = true\r\n    videoEl.pause()\r\n    emitEvent('pause', { provider: ctxRef.current?.provider })\r\n  }, [emitEvent, safePlay])\r\n\r\n  const computedEmbedSrc = useMemo(() => {\r\n    if (!isEmbed) return ''\r\n\r\n    if (typeof getEmbedUrl === 'function') {\r\n      const next = getEmbedUrl(config)\r\n      return typeof next === 'string' ? next : ''\r\n    }\r\n\r\n    if (provider === 'embed') {\r\n      return typeof embedUrl === 'string' ? embedUrl : ''\r\n    }\r\n\r\n    // provider === 'youtube'\r\n    if (!youtubeId) return ''\r\n    const params = new URLSearchParams({\r\n      autoplay: config.autoPlay ? '1' : '0',\r\n      mute: config.autoMute ? '1' : '0',\r\n      controls: config.ytControls ? '1' : '0',\r\n      playsinline: '1',\r\n      rel: '0',\r\n    })\r\n    return `https://www.youtube.com/embed/${encodeURIComponent(youtubeId)}?${params.toString()}`\r\n  }, [isEmbed, getEmbedUrl, config, provider, embedUrl, youtubeId])\r\n\r\n  const externalOpenUrl = useMemo(() => {\r\n    if (!isEmbed) return ''\r\n\r\n    const explicit =\r\n      typeof externalUrl === 'string' && externalUrl ? externalUrl : typeof sourceUrl === 'string' ? sourceUrl : ''\r\n    if (explicit) return explicit\r\n\r\n    if (provider === 'youtube') {\r\n      return youtubeId ? `https://www.youtube.com/watch?v=${encodeURIComponent(youtubeId)}` : ''\r\n    }\r\n    // Generic embed: best-effort open the embed url itself.\r\n    return computedEmbedSrc || ''\r\n  }, [isEmbed, externalUrl, sourceUrl, provider, youtubeId, computedEmbedSrc])\r\n\r\n  const handleOpenExternal = useCallback(() => {\r\n    if (!externalOpenUrl) return\r\n    try {\r\n      window.open(externalOpenUrl, '_blank', 'noopener,noreferrer')\r\n      emitEvent('openExternal', { url: externalOpenUrl })\r\n    } catch (_) {\r\n      // ignore\r\n    }\r\n  }, [emitEvent, externalOpenUrl])\r\n\r\n  useEffect(() => {\r\n    if (!isEmbed) return\r\n    if (!computedEmbedSrc) return\r\n\r\n    setEmbedLoaded(false)\r\n    setEmbedTimeout(false)\r\n\r\n    const t = window.setTimeout(() => {\r\n      setEmbedTimeout(true)\r\n      emitEvent('embedTimeout', { src: computedEmbedSrc })\r\n    }, 2200)\r\n\r\n    embedTimerRef.current = t\r\n\r\n    return () => {\r\n      window.clearTimeout(t)\r\n      if (embedTimerRef.current === t) embedTimerRef.current = 0\r\n    }\r\n  }, [computedEmbedSrc, emitEvent, isEmbed])\r\n\r\n  const handleEmbedLoad = useCallback(() => {\r\n    const t = embedTimerRef.current\r\n    if (t) window.clearTimeout(t)\r\n    embedTimerRef.current = 0\r\n    setEmbedLoaded(true)\r\n    setEmbedTimeout(false)\r\n    emitEvent('embedLoad', {})\r\n  }, [emitEvent])\r\n\r\n  const handleTogglePiP = useCallback(async () => {\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    if (!('requestPictureInPicture' in videoEl)) return\r\n\r\n    try {\r\n      if (document.pictureInPictureElement) {\r\n        await document.exitPictureInPicture()\r\n      } else {\r\n        await videoEl.requestPictureInPicture()\r\n      }\r\n      emitEvent('pipToggle', {})\r\n    } catch (_) {\r\n      // ignore\r\n    }\r\n  }, [emitEvent])\r\n\r\n  const handleCloseMini = useCallback(() => {\r\n    setMiniDismissed(true)\r\n    miniDismissedRef.current = true\r\n\r\n    if (fullyOutRef.current && config.lazyPlay) {\r\n      autoPausedRef.current = true\r\n      pause()\r\n    }\r\n  }, [config.lazyPlay, pause])\r\n\r\n  const handleRestoreMini = useCallback(() => {\r\n    setMiniDismissed(false)\r\n    miniDismissedRef.current = false\r\n  }, [])\r\n\r\n  const volumePercent = useMemo(() => {\r\n    const v = Number(currentVolume)\r\n    if (!Number.isFinite(v)) return 100\r\n    return v <= 1 ? Math.round(v * 100) : Math.round(v)\r\n  }, [currentVolume])\r\n\r\n  const isEffectivelyMuted = isMuted || volumePercent <= 0\r\n\r\n  const displayVolumePercent = useMemo(() => {\r\n    if (isEffectivelyMuted) return 0\r\n    return volumePercent\r\n  }, [isEffectivelyMuted, volumePercent])\r\n\r\n  const getRestoreVolume = useCallback(() => {\r\n    const userVol = Number(lastUserVolumeRef.current)\r\n    if (Number.isFinite(userVol) && userVol > 0) return Math.max(5, Math.min(100, userVol))\r\n    return 5\r\n  }, [])\r\n\r\n  const formatTime = (seconds) => {\r\n    const s = Math.max(0, Math.floor(Number(seconds) || 0))\r\n    const h = Math.floor(s / 3600)\r\n    const m = Math.floor((s % 3600) / 60)\r\n    const sec = s % 60\r\n    const hh = String(h).padStart(2, '0')\r\n    const mm = String(m).padStart(2, '0')\r\n    const ss = String(sec).padStart(2, '0')\r\n    return `${hh}:${mm}:${ss}`\r\n  }\r\n\r\n  const seekTo = useCallback(\r\n    (nextTime) => {\r\n      const videoEl = useVideoRef.current\r\n      if (!videoEl) return\r\n      const safe = Math.min(Math.max(0, nextTime), duration || 0)\r\n      videoEl.currentTime = safe\r\n      emitEvent('seek', { time: safe })\r\n    },\r\n    [duration, emitEvent]\r\n  )\r\n\r\n  const setVolume = useCallback((nextVolumePercent) => {\r\n    const videoEl = useVideoRef.current\r\n    if (!videoEl) return\r\n    const safe = Math.min(Math.max(0, nextVolumePercent), 100)\r\n    videoEl.volume = safe / 100\r\n  }, [])\r\n\r\n  const handleVolumeChangeSmart = useCallback(\r\n    (nextVolumePercent) => {\r\n      const safe = Math.min(Math.max(0, Number(nextVolumePercent) || 0), 100)\r\n\r\n      if (safe <= 0) {\r\n        mute()\r\n        setVolume(0)\r\n        emitEvent('volume', { volume: 0 })\r\n        return\r\n      }\r\n\r\n      if (config.autoMute) {\r\n        setConfigItem('autoMute', false)\r\n      }\r\n\r\n      unmute()\r\n\r\n      lastUserVolumeRef.current = safe\r\n      setVolume(safe)\r\n      emitEvent('volume', { volume: safe })\r\n    },\r\n    [config.autoMute, emitEvent, mute, setConfigItem, setVolume, unmute]\r\n  )\r\n\r\n  const handleToggleMuteSmart = useCallback(() => {\r\n    if (isEffectivelyMuted) {\r\n      if (config.autoMute) {\r\n        setConfigItem('autoMute', false)\r\n      }\r\n\r\n      unmute()\r\n      setVolume(getRestoreVolume())\r\n      emitEvent('mute', { muted: false })\r\n      return\r\n    }\r\n\r\n    if (volumePercent > 0) lastUserVolumeRef.current = Math.max(1, Math.min(100, volumePercent))\r\n    mute()\r\n    emitEvent('mute', { muted: true })\r\n  }, [\r\n    config.autoMute,\r\n    emitEvent,\r\n    getRestoreVolume,\r\n    isEffectivelyMuted,\r\n    mute,\r\n    setConfigItem,\r\n    setVolume,\r\n    unmute,\r\n    volumePercent,\r\n  ])\r\n\r\n  const handleBumpVolume = useCallback(\r\n    (delta) => {\r\n      if (isEffectivelyMuted) {\r\n        if (delta > 0) {\r\n          handleVolumeChangeSmart(getRestoreVolume())\r\n        }\r\n        return\r\n      }\r\n\r\n      const next = Math.min(100, Math.max(0, volumePercent + delta))\r\n      handleVolumeChangeSmart(next)\r\n    },\r\n    [getRestoreVolume, handleVolumeChangeSmart, isEffectivelyMuted, volumePercent]\r\n  )\r\n\r\n  const canDecrease = displayVolumePercent > 0\r\n  const canIncrease = displayVolumePercent < 100\r\n\r\n  const computedTrackSrc = trackSrc || (typeof src === 'string' ? src.replace(/\\.mp4$/, '.vtt') : undefined)\r\n\r\n  const bufferedPercent = useMemo(() => {\r\n    const d = Number(duration) || 0\r\n    if (!d) return 0\r\n    const end = Number(bufferedEnd) || 0\r\n    return Math.max(0, Math.min(100, (end / d) * 100))\r\n  }, [bufferedEnd, duration])\r\n\r\n  const updateHoverPreviewFromClientX = useCallback(\r\n    (clientX, el) => {\r\n      const rect = el.getBoundingClientRect()\r\n      const x = Math.min(Math.max(0, clientX - rect.left), rect.width)\r\n      const ratio = rect.width > 0 ? x / rect.width : 0\r\n      const t = ratio * (duration || 0)\r\n      setHoverPreview({ ratio, time: t })\r\n    },\r\n    [duration]\r\n  )\r\n\r\n  const handleProgressPointerMove = useCallback(\r\n    (e) => {\r\n      updateHoverPreviewFromClientX(e.clientX, e.currentTarget)\r\n    },\r\n    [updateHoverPreviewFromClientX]\r\n  )\r\n\r\n  const handleProgressPointerLeave = useCallback(() => {\r\n    setHoverPreview(null)\r\n  }, [])\r\n\r\n  const handlePlayerKeyDown = useCallback(\r\n    (e) => {\r\n      const target = e.target\r\n      if (target instanceof HTMLElement) {\r\n        const tag = target.tagName\r\n        if (tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT') return\r\n        if (target.isContentEditable) return\r\n      }\r\n\r\n      if (e.key === 'Escape' && settingsOpen) {\r\n        e.preventDefault()\r\n        setSettingsOpen(false)\r\n        return\r\n      }\r\n\r\n      if (isEmbed) {\r\n        if ((e.key === 'o' || e.key === 'O') && externalOpenUrl) {\r\n          e.preventDefault()\r\n          handleOpenExternal()\r\n        }\r\n        if ((e.key === 's' || e.key === 'S') && !isMini) {\r\n          e.preventDefault()\r\n          setSettingsOpen((v) => !v)\r\n        }\r\n        return\r\n      }\r\n\r\n      if (e.key === ' ' || e.key === 'k' || e.key === 'K') {\r\n        e.preventDefault()\r\n        handleTogglePause()\r\n        return\r\n      }\r\n      if (e.key === 'ArrowLeft') {\r\n        e.preventDefault()\r\n        back(5)\r\n        emitEvent('seekRelative', { delta: -5 })\r\n        return\r\n      }\r\n      if (e.key === 'ArrowRight') {\r\n        e.preventDefault()\r\n        forward(5)\r\n        emitEvent('seekRelative', { delta: 5 })\r\n        return\r\n      }\r\n      if (e.key === 'ArrowUp') {\r\n        e.preventDefault()\r\n        handleBumpVolume(5)\r\n        return\r\n      }\r\n      if (e.key === 'ArrowDown') {\r\n        e.preventDefault()\r\n        handleBumpVolume(-5)\r\n        return\r\n      }\r\n      if (e.key === 'm' || e.key === 'M') {\r\n        e.preventDefault()\r\n        handleToggleMuteSmart()\r\n        return\r\n      }\r\n      if (e.key === 'f' || e.key === 'F') {\r\n        e.preventDefault()\r\n        toggleFullscreen()\r\n        emitEvent('fullscreen', {})\r\n        return\r\n      }\r\n      if (e.key === 'p' || e.key === 'P') {\r\n        e.preventDefault()\r\n        handleTogglePiP()\r\n        return\r\n      }\r\n      if (e.key === 's' || e.key === 'S') {\r\n        if (isMini) return\r\n        e.preventDefault()\r\n        setSettingsOpen((v) => !v)\r\n      }\r\n    },\r\n    [\r\n      back,\r\n      emitEvent,\r\n      externalOpenUrl,\r\n      forward,\r\n      handleBumpVolume,\r\n      handleOpenExternal,\r\n      handleToggleMuteSmart,\r\n      handleTogglePause,\r\n      handleTogglePiP,\r\n      isEmbed,\r\n      isMini,\r\n      settingsOpen,\r\n      toggleFullscreen,\r\n    ]\r\n  )\r\n\r\n  const settingsPortal =\r\n    !isMini && settingsOpen\r\n      ? createPortal(\r\n          <div\r\n            ref={settingsPanelRef}\r\n            className={`${styles.settingsPanel} ${styles.settingsPanelPortal}`}\r\n            role=\"group\"\r\n            aria-label={t('svp.ariaPlaybackSettings')}\r\n            onPointerDownCapture={handleSettingsPanelPointerDownCapture}\r\n          >\r\n            {!isEmbed ? (\r\n              <div\r\n                className={`${styles.settingItem} ${styles.settingItemSplit}`}\r\n                role=\"group\"\r\n                aria-label={t('svp.ariaPlaybackSpeed')}\r\n              >\r\n                <span className={styles.settingLabel}>{t('svp.playbackSpeed')}</span>\r\n                <div className={styles.speedDropdown} data-speed-dropdown=\"true\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className={styles.speedTrigger}\r\n                    aria-haspopup=\"listbox\"\r\n                    aria-expanded={speedOpen}\r\n                    onClick={() => setSpeedOpen((v) => !v)}\r\n                  >\r\n                    {`${Number(config.playbackRate ?? 1)}x`}\r\n                  </button>\r\n\r\n                  {speedOpen ? (\r\n                    <div className={styles.speedMenu} role=\"listbox\" aria-label={t('svp.ariaPlaybackSpeedOptions')}>\r\n                      {[0.5, 0.75, 1, 1.25, 1.5, 2].map((rate) => {\r\n                        const active = Number(config.playbackRate ?? 1) === rate\r\n                        return (\r\n                          <button\r\n                            key={rate}\r\n                            type=\"button\"\r\n                            className={`${styles.speedItem} ${active ? styles.speedItemActive : ''}`}\r\n                            role=\"option\"\r\n                            aria-selected={active}\r\n                            onClick={() => {\r\n                              setConfigItem('playbackRate', rate)\r\n                              setSpeedOpen(false)\r\n                            }}\r\n                          >\r\n                            {rate === 1 ? t('svp.speedDefault') : `${rate}x`}\r\n                          </button>\r\n                        )\r\n                      })}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n\r\n            {!isEmbed && captionTracks.length > 0 ? (\r\n              <div\r\n                className={`${styles.settingItem} ${styles.settingItemSplit}`}\r\n                role=\"group\"\r\n                aria-label={t('svp.ariaCaptions')}\r\n              >\r\n                <span className={styles.settingLabel}>{t('svp.captions')}</span>\r\n                <div className={styles.speedDropdown} data-captions-dropdown=\"true\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className={styles.speedTrigger}\r\n                    aria-haspopup=\"listbox\"\r\n                    aria-expanded={captionsOpen}\r\n                    onClick={() => {\r\n                      setCaptionsOpen((v) => !v)\r\n                      setSpeedOpen(false)\r\n                      setUiLangOpen(false)\r\n                    }}\r\n                  >\r\n                    {captionsEnabled\r\n                      ? captionTracks[captionTrackIndex]?.label || t('svp.captionsFallbackLabel')\r\n                      : t('svp.captionsOff')}\r\n                  </button>\r\n\r\n                  {captionsOpen ? (\r\n                    <div className={styles.speedMenu} role=\"listbox\" aria-label={t('svp.ariaCaptionsOptions')}>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`${styles.speedItem} ${!captionsEnabled ? styles.speedItemActive : ''}`}\r\n                        role=\"option\"\r\n                        aria-selected={!captionsEnabled}\r\n                        onClick={() => {\r\n                          setCaptionsEnabled(false)\r\n                          setCaptionsOpen(false)\r\n                          emitEvent('captions', { enabled: false })\r\n                        }}\r\n                      >\r\n                        {t('svp.captionsOff')}\r\n                      </button>\r\n\r\n                      {captionTracks.map((t) => {\r\n                        const active = captionsEnabled && captionTrackIndex === t.index\r\n                        return (\r\n                          <button\r\n                            key={`${t.index}-${t.language || ''}-${t.label || ''}`}\r\n                            type=\"button\"\r\n                            className={`${styles.speedItem} ${active ? styles.speedItemActive : ''}`}\r\n                            role=\"option\"\r\n                            aria-selected={active}\r\n                            onClick={() => {\r\n                              setCaptionTrackIndex(t.index)\r\n                              setCaptionsEnabled(true)\r\n                              setCaptionsOpen(false)\r\n                              emitEvent('captions', {\r\n                                enabled: true,\r\n                                trackIndex: t.index,\r\n                              })\r\n                            }}\r\n                          >\r\n                            {t.label}\r\n                          </button>\r\n                        )\r\n                      })}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div\r\n              className={`${styles.settingItem} ${styles.settingItemSplit}`}\r\n              role=\"group\"\r\n              aria-label={t('svp.ariaUiLanguage')}\r\n            >\r\n              <span className={styles.settingLabel}>{t('svp.uiLanguage')}</span>\r\n              <div className={styles.speedDropdown} data-ui-lang-dropdown=\"true\">\r\n                <button\r\n                  type=\"button\"\r\n                  className={styles.speedTrigger}\r\n                  aria-haspopup=\"listbox\"\r\n                  aria-expanded={uiLangOpen}\r\n                  onClick={() => {\r\n                    setUiLangOpen((v) => !v)\r\n                    setSpeedOpen(false)\r\n                    setCaptionsOpen(false)\r\n                  }}\r\n                >\r\n                  {(i18n.resolvedLanguage || i18n.language || '').toLowerCase().startsWith('zh')\r\n                    ? t('svp.langZh')\r\n                    : t('svp.langEn')}\r\n                </button>\r\n\r\n                {uiLangOpen ? (\r\n                  <div className={styles.speedMenu} role=\"listbox\" aria-label={t('svp.ariaUiLanguageOptions')}>\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`${styles.speedItem} ${(i18n.resolvedLanguage || i18n.language || '').toLowerCase().startsWith('zh') ? styles.speedItemActive : ''}`}\r\n                      role=\"option\"\r\n                      aria-selected={(i18n.resolvedLanguage || i18n.language || '').toLowerCase().startsWith('zh')}\r\n                      onClick={() => {\r\n                        i18n.changeLanguage('zh')\r\n                        setStoredSvpUiLanguage('zh')\r\n                        setUiLangOpen(false)\r\n                        emitEvent('uiLanguage', { language: 'zh' })\r\n                      }}\r\n                    >\r\n                      {t('svp.langZh')}\r\n                    </button>\r\n\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`${styles.speedItem} ${!(i18n.resolvedLanguage || i18n.language || '').toLowerCase().startsWith('zh') ? styles.speedItemActive : ''}`}\r\n                      role=\"option\"\r\n                      aria-selected={!(i18n.resolvedLanguage || i18n.language || '').toLowerCase().startsWith('zh')}\r\n                      onClick={() => {\r\n                        i18n.changeLanguage('en')\r\n                        setStoredSvpUiLanguage('en')\r\n                        setUiLangOpen(false)\r\n                        emitEvent('uiLanguage', { language: 'en' })\r\n                      }}\r\n                    >\r\n                      {t('svp.langEn')}\r\n                    </button>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.settingsScroll} role=\"group\" aria-label={t('svp.ariaOtherSettings')}>\r\n              {!isEmbed ? (\r\n                <>\r\n                  <SettingToggle\r\n                    checked={config.lazyPlay}\r\n                    label={t('svp.lazyPlay')}\r\n                    onChange={(v) => setConfigItem('lazyPlay', v)}\r\n                  />\r\n                  <SettingToggle\r\n                    checked={config.miniPlayer}\r\n                    label={t('svp.miniPlayer')}\r\n                    onChange={(v) => setConfigItem('miniPlayer', v)}\r\n                  />\r\n                </>\r\n              ) : isYouTube ? (\r\n                <SettingToggle\r\n                  checked={Boolean(config.ytControls)}\r\n                  label={t('svp.youtubeControls')}\r\n                  onChange={(v) => setConfigItem('ytControls', v)}\r\n                />\r\n              ) : null}\r\n              <SettingToggle\r\n                checked={config.autoPlay}\r\n                label={t('svp.autoPlay')}\r\n                onChange={(v) => setConfigItem('autoPlay', v)}\r\n              />\r\n              <SettingToggle\r\n                checked={config.autoMute}\r\n                label={t('svp.autoMute')}\r\n                onChange={(v) => setConfigItem('autoMute', v)}\r\n              />\r\n            </div>\r\n          </div>,\r\n          document.body\r\n        )\r\n      : null\r\n\r\n  return (\r\n    <>\r\n      {!isMini && config.miniPlayer && fullyOut && !isPiP && miniDismissed ? (\r\n        <div className={styles.miniRestore}>\r\n          <IconButton Icon={Minimize2} label={t('svp.restoreMini')} onClick={handleRestoreMini} />\r\n        </div>\r\n      ) : null}\r\n\r\n      <div ref={videoAnchorRef} className={styles.videoAnchor}>\r\n        {isMini ? <div className={styles.miniPlaceholder} aria-hidden /> : null}\r\n\r\n        <div\r\n          ref={playerWrapRef}\r\n          className={`${styles.videoWrap} ${isMini ? styles.mini : ''} ${settingsOpen ? styles.controlsPinnedWrap : ''}`}\r\n          tabIndex={0}\r\n          onKeyDown={handlePlayerKeyDown}\r\n          role=\"region\"\r\n          aria-label={t('svp.ariaPlayer')}\r\n        >\r\n          {isEmbed ? (\r\n            computedEmbedSrc ? (\r\n              <div className={styles.embedRatio}>\r\n                <iframe\r\n                  key={computedEmbedSrc}\r\n                  className={styles.embedFrame}\r\n                  src={computedEmbedSrc}\r\n                  title={title || 'Embed'}\r\n                  allow=\"autoplay; encrypted-media; picture-in-picture; fullscreen\"\r\n                  referrerPolicy=\"strict-origin-when-cross-origin\"\r\n                  onLoad={handleEmbedLoad}\r\n                />\r\n\r\n                {embedTimeout && !embedLoaded ? (\r\n                  <div className={styles.embedHint} role=\"status\" aria-live=\"polite\">\r\n                    <div className={styles.embedHintTitle}>{t('svp.embedMayBeBlocked')}</div>\r\n                    {externalOpenUrl ? (\r\n                      <button type=\"button\" className={styles.embedHintAction} onClick={handleOpenExternal}>\r\n                        {t('svp.openInNewWindow')}\r\n                      </button>\r\n                    ) : null}\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            ) : (\r\n              <div className={styles.embedFallback}>\r\n                <div className={styles.embedFallbackTitle}>{title || t('svp.embedNotConfigured')}</div>\r\n                <div className={styles.embedFallbackMeta}>{t('svp.embedFallbackHint')}</div>\r\n              </div>\r\n            )\r\n          ) : (\r\n            <video\r\n              ref={useVideoRef}\r\n              className={styles.video}\r\n              muted={config.autoMute}\r\n              controls={false}\r\n              preload=\"metadata\"\r\n              controlsList=\"nodownload\"\r\n              playsInline\r\n              onClick={handleTogglePause}\r\n              onDoubleClick={toggleFullscreen}\r\n            >\r\n              {!isHlsSrc ? <source src={src} type=\"video/mp4\" /> : null}\r\n              {computedTrackSrc ? (\r\n                <track\r\n                  kind=\"captions\"\r\n                  srcLang={trackLang}\r\n                  label={trackLang?.toUpperCase?.() || 'CC'}\r\n                  src={computedTrackSrc}\r\n                />\r\n              ) : null}\r\n              {t('svp.videoTagUnsupported')}\r\n            </video>\r\n          )}\r\n\r\n          {!isEmbed && mediaLoading ? (\r\n            <div className={styles.loadingOverlay} role=\"status\" aria-live=\"polite\">\r\n              <div className={styles.loadingOverlayText}>{mediaLoadingText}</div>\r\n            </div>\r\n          ) : null}\r\n\r\n          {!isEmbed ? (\r\n            <div className={`${styles.centerToggle} ${isPaused ? styles.centerToggleVisible : ''}`} aria-hidden={false}>\r\n              <button\r\n                type=\"button\"\r\n                className={styles.centerToggleButton}\r\n                aria-label={isPaused ? t('svp.play') : t('svp.pause')}\r\n                onClick={(e) => {\r\n                  e.stopPropagation()\r\n                  handleTogglePause()\r\n                }}\r\n              >\r\n                {isPaused ? <Play size={34} /> : <Pause size={34} />}\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n\r\n          {isEmbed ? (\r\n            <div className={styles.embedToolbar} role=\"toolbar\" aria-label={t('svp.ariaEmbedToolbar')}>\r\n              {externalOpenUrl ? (\r\n                <IconButton Icon={ExternalLink} label={t('svp.openInNewWindow')} onClick={handleOpenExternal} />\r\n              ) : null}\r\n\r\n              <div ref={settingsRef} className={styles.settingsWrap}>\r\n                <IconButton\r\n                  Icon={Settings}\r\n                  label={t('svp.settings')}\r\n                  onClick={() => setSettingsOpen((v) => !v)}\r\n                  buttonRef={settingsButtonRef}\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n\r\n          {!isEmbed ? (\r\n            <div className={styles.videoControls} role=\"group\" aria-label={t('svp.ariaVideoControls')}>\r\n              <div className={styles.controlsTop} role=\"group\" aria-label={t('svp.ariaPlaybackTools')}>\r\n                {!isEmbed && !isMini ? (\r\n                  <IconButton\r\n                    Icon={SkipBack}\r\n                    label={t('svp.back10')}\r\n                    onClick={() => back(10)}\r\n                    tooltipPlacement=\"topLeft\"\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed ? (\r\n                  <IconButton\r\n                    Icon={isPaused ? Play : Pause}\r\n                    label={isPaused ? t('svp.play') : t('svp.pause')}\r\n                    onClick={handleTogglePause}\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? (\r\n                  <IconButton Icon={SkipForward} label={t('svp.forward10')} onClick={() => forward(10)} />\r\n                ) : null}\r\n\r\n                {isMini ? <IconButton Icon={X} label={t('svp.closeMini')} onClick={handleCloseMini} /> : null}\r\n\r\n                <div className={styles.spacer} />\r\n\r\n                {!isEmbed ? (\r\n                  <IconButton\r\n                    Icon={isEffectivelyMuted ? VolumeX : Volume2}\r\n                    label={isEffectivelyMuted ? t('svp.unmute') : t('svp.mute')}\r\n                    onClick={handleToggleMuteSmart}\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? (\r\n                  <input\r\n                    className={`${styles.range} ${styles.volumeRange}`}\r\n                    type=\"range\"\r\n                    min={0}\r\n                    max={100}\r\n                    step={1}\r\n                    value={displayVolumePercent}\r\n                    onChange={(e) => handleVolumeChangeSmart(Number(e.target.value))}\r\n                    aria-label={t('svp.volume')}\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? (\r\n                  <IconButton\r\n                    Icon={Minus}\r\n                    label={t('svp.volumeMinus')}\r\n                    onClick={() => handleBumpVolume(-5)}\r\n                    disabled={!canDecrease}\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? (\r\n                  <IconButton\r\n                    Icon={Plus}\r\n                    label={t('svp.volumePlus')}\r\n                    onClick={() => handleBumpVolume(5)}\r\n                    disabled={!canIncrease}\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? <div className={styles.sep} /> : null}\r\n\r\n                {!isMini ? (\r\n                  <div ref={settingsRef} className={styles.settingsWrap}>\r\n                    <IconButton\r\n                      Icon={Settings}\r\n                      label={t('svp.settings')}\r\n                      onClick={() => setSettingsOpen((v) => !v)}\r\n                      buttonRef={settingsButtonRef}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? (\r\n                  <IconButton\r\n                    Icon={PictureInPicture}\r\n                    label={isPiP ? t('svp.exitPip') : t('svp.pip')}\r\n                    onClick={handleTogglePiP}\r\n                  />\r\n                ) : null}\r\n\r\n                {!isEmbed && !isMini ? (\r\n                  <IconButton\r\n                    Icon={Maximize2}\r\n                    tooltipPlacement=\"topRight\"\r\n                    label={t('svp.fullscreen')}\r\n                    onClick={toggleFullscreen}\r\n                  />\r\n                ) : null}\r\n              </div>\r\n\r\n              {!isEmbed ? (\r\n                <div className={styles.controlsBottom} role=\"group\" aria-label={t('svp.ariaProgress')}>\r\n                  <span className={styles.time}>{formatTime(currentTime)}</span>\r\n                  <div\r\n                    className={styles.progressWrap}\r\n                    role=\"group\"\r\n                    onPointerMove={handleProgressPointerMove}\r\n                    onPointerLeave={handleProgressPointerLeave}\r\n                    aria-label={t('svp.ariaProgressBar')}\r\n                  >\r\n                    <div className={styles.bufferBar} style={{ width: `${bufferedPercent}%` }} aria-hidden />\r\n\r\n                    {hoverPreview ? (\r\n                      <div\r\n                        className={styles.previewTooltip}\r\n                        style={{\r\n                          left: `${Math.round((hoverPreview.ratio || 0) * 100)}%`,\r\n                        }}\r\n                        aria-hidden\r\n                      >\r\n                        {formatTime(hoverPreview.time)}\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    <input\r\n                      className={`${styles.range} ${styles.progressRange} ${styles.progressRangeOverlay}`}\r\n                      type=\"range\"\r\n                      min={0}\r\n                      max={duration || 0}\r\n                      step={0.1}\r\n                      value={Math.min(Math.max(0, Number(currentTime) || 0), duration || 0)}\r\n                      onChange={(e) => seekTo(Number(e.target.value))}\r\n                      aria-label={t('svp.progress')}\r\n                    />\r\n                  </div>\r\n                  <span className={styles.time}>{formatTime(duration)}</span>\r\n                </div>\r\n              ) : null}\r\n\r\n              {playError ? (\r\n                <div className={styles.playError} role=\"status\">\r\n                  {playError}\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          ) : null}\r\n\r\n          {settingsPortal}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n})\r\n\r\nconst SmartVideoPlayer = React.forwardRef(function SmartVideoPlayer(props, ref) {\r\n  const initialLang = (appI18n?.resolvedLanguage || appI18n?.language || 'zh').toString()\r\n  const svpI18n = useMemo(() => createSvpI18n(initialLang), [initialLang])\r\n\r\n  return (\r\n    <I18nextProvider i18n={svpI18n}>\r\n      <SmartVideoPlayerInner {...props} ref={ref} />\r\n    </I18nextProvider>\r\n  )\r\n})\r\n\r\nexport default React.memo(SmartVideoPlayer)\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SmartVideoPlayer\\svpI18n.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":19,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":30,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createInstance } from 'i18next'\nimport { initReactI18next } from 'react-i18next'\n\nimport zh from '@/locales/zh/translation.js'\nimport en from '@/locales/en/translation.js'\n\nexport const SVP_UI_LANGUAGE_STORAGE_KEY = 'svpUiLanguage'\n\nfunction normalizeLang(lang) {\n  const v = (lang || '').toString().toLowerCase()\n  return v.startsWith('zh') ? 'zh' : v.startsWith('en') ? 'en' : null\n}\n\nexport function getStoredSvpUiLanguage() {\n  try {\n    if (typeof window === 'undefined') return null\n    const raw = window.localStorage?.getItem?.(SVP_UI_LANGUAGE_STORAGE_KEY)\n    return normalizeLang(raw)\n  } catch (_) {\n    return null\n  }\n}\n\nexport function setStoredSvpUiLanguage(lang) {\n  const normalized = normalizeLang(lang)\n  if (!normalized) return\n  try {\n    if (typeof window === 'undefined') return\n    window.localStorage?.setItem?.(SVP_UI_LANGUAGE_STORAGE_KEY, normalized)\n  } catch (_) {\n    // ignore\n  }\n}\n\nexport function createSvpI18n(initialLanguage = 'zh') {\n  const instance = createInstance()\n\n  instance.use(initReactI18next).init({\n    lng: getStoredSvpUiLanguage() || normalizeLang(initialLanguage) || 'zh',\n    fallbackLng: 'en',\n    supportedLngs: ['zh', 'en'],\n    resources: {\n      zh: { translation: { svp: zh?.svp || {} } },\n      en: { translation: { svp: en?.svp || {} } },\n    },\n    interpolation: { escapeValue: false },\n    react: { useSuspense: false },\n    initImmediate: false,\n  })\n\n  return instance\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SoundBar\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SparklesText\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'sparklesCount'. Either include it or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":47,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [colors.first, colors.second, sparklesCount]","fix":{"range":[1345,1374],"text":"[colors.first, colors.second, sparklesCount]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { motion } from 'motion/react'\nimport clsx from 'clsx'\n\nconst SparklesText = ({\n  text,\n  colors = { first: '#9E7AFF', second: '#FE8BBB' },\n  className,\n  sparklesCount = 10,\n  ...props\n}) => {\n  const [sparkles, setSparkles] = useState([])\n\n  useEffect(() => {\n    const generateStar = () => {\n      const starX = `${Math.random() * 100}%`\n      const starY = `${Math.random() * 100}%`\n      const color = Math.random() > 0.5 ? colors.first : colors.second\n      const delay = Math.random() * 2\n      const scale = Math.random() * 1 + 0.3\n      const lifespan = Math.random() * 10 + 5\n      const id = `${starX}-${starY}-${Date.now()}`\n      return { id, x: starX, y: starY, color, delay, scale, lifespan }\n    }\n\n    const initializeStars = () => {\n      const newSparkles = Array.from({ length: sparklesCount }, generateStar)\n      setSparkles(newSparkles)\n    }\n\n    const updateStars = () => {\n      setSparkles((currentSparkles) =>\n        currentSparkles.map((star) => {\n          if (star.lifespan <= 0) {\n            return generateStar()\n          } else {\n            return { ...star, lifespan: star.lifespan - 0.1 }\n          }\n        })\n      )\n    }\n\n    initializeStars()\n    const interval = setInterval(updateStars, 100)\n\n    return () => clearInterval(interval)\n  }, [colors.first, colors.second])\n\n  return (\n    <div\n      className={clsx('text', className)}\n      {...props}\n      style={{\n        '--sparkles-first-color': `${colors.first}`,\n        '--sparkles-second-color': `${colors.second}`,\n      }}\n    >\n      <span className=\"relative inline-block\">\n        {sparkles.map((sparkle) => (\n          <Sparkle key={sparkle.id} {...sparkle} />\n        ))}\n        <i>{text}</i>\n      </span>\n    </div>\n  )\n}\n\nconst Sparkle = ({ id, x, y, color, delay, scale }) => {\n  return (\n    <motion.svg\n      key={id}\n      className=\"pointer-events-none absolute z-20\"\n      initial={{ opacity: 0, left: x, top: y }}\n      animate={{\n        opacity: [0, 1, 0],\n        scale: [0, scale, 0],\n        rotate: [75, 120, 150],\n      }}\n      transition={{ duration: 0.8, repeat: Infinity, delay }}\n      width=\"21\"\n      height=\"21\"\n      viewBox=\"0 0 21 21\"\n    >\n      <path\n        d=\"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z\"\n        fill={color}\n      />\n    </motion.svg>\n  )\n}\n\nexport default SparklesText\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Sparkles\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":1,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useId, useMemo, useEffect, useState } from 'react'\nimport Particles, { initParticlesEngine } from '@tsparticles/react'\nimport { loadSlim } from '@tsparticles/slim'\nimport clsx from 'clsx'\nimport { motion, useAnimation } from 'motion/react'\nimport { theme } from 'antd'\n\nconst SparklesCore = (props) => {\n  const { token } = theme.useToken()\n  const { id, className, background, minSize, maxSize, speed, particleColor, particleDensity } = props\n  const [init, setInit] = useState(false)\n  useEffect(() => {\n    initParticlesEngine(async (engine) => {\n      await loadSlim(engine)\n    }).then(() => {\n      setInit(true)\n    })\n  }, [])\n  const controls = useAnimation()\n\n  const particlesLoaded = async (container) => {\n    if (container) {\n      await controls.start({\n        opacity: 1,\n        transition: {\n          duration: 1,\n        },\n      })\n    }\n  }\n\n  const generatedId = useId()\n  return (\n    <motion.div animate={controls} className={clsx('opacity-0', className)}>\n      {init && (\n        <Particles\n          id={id || generatedId}\n          className={clsx('h-full w-full')}\n          particlesLoaded={particlesLoaded}\n          options={{\n            background: {\n              color: {\n                value: background || token.colorBgLayout,\n              },\n            },\n            fullScreen: {\n              enable: false,\n              zIndex: 1,\n            },\n\n            fpsLimit: 120,\n            interactivity: {\n              events: {\n                onClick: {\n                  enable: true,\n                  mode: 'push',\n                },\n                onHover: {\n                  enable: false,\n                  mode: 'repulse',\n                },\n                resize: true,\n              },\n              modes: {\n                push: {\n                  quantity: 4,\n                },\n                repulse: {\n                  distance: 200,\n                  duration: 0.4,\n                },\n              },\n            },\n            particles: {\n              bounce: {\n                horizontal: {\n                  value: 1,\n                },\n                vertical: {\n                  value: 1,\n                },\n              },\n              collisions: {\n                absorb: {\n                  speed: 2,\n                },\n                bounce: {\n                  horizontal: {\n                    value: 1,\n                  },\n                  vertical: {\n                    value: 1,\n                  },\n                },\n                enable: false,\n                maxSpeed: 50,\n                mode: 'bounce',\n                overlap: {\n                  enable: true,\n                  retries: 0,\n                },\n              },\n              color: {\n                value: particleColor || token.colorText,\n                animation: {\n                  h: {\n                    count: 0,\n                    enable: false,\n                    speed: 1,\n                    decay: 0,\n                    delay: 0,\n                    sync: true,\n                    offset: 0,\n                  },\n                  s: {\n                    count: 0,\n                    enable: false,\n                    speed: 1,\n                    decay: 0,\n                    delay: 0,\n                    sync: true,\n                    offset: 0,\n                  },\n                  l: {\n                    count: 0,\n                    enable: false,\n                    speed: 1,\n                    decay: 0,\n                    delay: 0,\n                    sync: true,\n                    offset: 0,\n                  },\n                },\n              },\n              effect: {\n                close: true,\n                fill: true,\n                options: {},\n                type: {},\n              },\n              groups: {},\n              move: {\n                angle: {\n                  offset: 0,\n                  value: 90,\n                },\n                attract: {\n                  distance: 200,\n                  enable: false,\n                  rotate: {\n                    x: 3000,\n                    y: 3000,\n                  },\n                },\n                center: {\n                  x: 50,\n                  y: 50,\n                  mode: 'percent',\n                  radius: 0,\n                },\n                decay: 0,\n                distance: {},\n                direction: 'none',\n                drift: 0,\n                enable: true,\n                gravity: {\n                  acceleration: 9.81,\n                  enable: false,\n                  inverse: false,\n                  maxSpeed: 50,\n                },\n                path: {\n                  clamp: true,\n                  delay: {\n                    value: 0,\n                  },\n                  enable: false,\n                  options: {},\n                },\n                outModes: {\n                  default: 'out',\n                },\n                random: false,\n                size: false,\n                speed: {\n                  min: 0.1,\n                  max: 1,\n                },\n                spin: {\n                  acceleration: 0,\n                  enable: false,\n                },\n                straight: false,\n                trail: {\n                  enable: false,\n                  length: 10,\n                  fill: {},\n                },\n                vibrate: false,\n                warp: false,\n              },\n              number: {\n                density: {\n                  enable: true,\n                  width: 400,\n                  height: 400,\n                },\n                limit: {\n                  mode: 'delete',\n                  value: 0,\n                },\n                value: particleDensity || 120,\n              },\n              opacity: {\n                value: {\n                  min: 0.1,\n                  max: 1,\n                },\n                animation: {\n                  count: 0,\n                  enable: true,\n                  speed: speed || 4,\n                  decay: 0,\n                  delay: 0,\n                  sync: false,\n                  mode: 'auto',\n                  startValue: 'random',\n                  destroy: 'none',\n                },\n              },\n              reduceDuplicates: false,\n              shadow: {\n                blur: 0,\n                color: {\n                  value: '#000',\n                },\n                enable: false,\n                offset: {\n                  x: 0,\n                  y: 0,\n                },\n              },\n              shape: {\n                close: true,\n                fill: true,\n                options: {},\n                type: 'circle',\n              },\n              size: {\n                value: {\n                  min: minSize || 1,\n                  max: maxSize || 3,\n                },\n                animation: {\n                  count: 0,\n                  enable: false,\n                  speed: 5,\n                  decay: 0,\n                  delay: 0,\n                  sync: false,\n                  mode: 'auto',\n                  startValue: 'random',\n                  destroy: 'none',\n                },\n              },\n              stroke: {\n                width: 0,\n              },\n              zIndex: {\n                value: 0,\n                opacityRate: 1,\n                sizeRate: 1,\n                velocityRate: 1,\n              },\n              destroy: {\n                bounds: {},\n                mode: 'none',\n                split: {\n                  count: 1,\n                  factor: {\n                    value: 3,\n                  },\n                  rate: {\n                    value: {\n                      min: 4,\n                      max: 9,\n                    },\n                  },\n                  sizeOffset: true,\n                },\n              },\n              roll: {\n                darken: {\n                  enable: false,\n                  value: 0,\n                },\n                enable: false,\n                enlighten: {\n                  enable: false,\n                  value: 0,\n                },\n                mode: 'vertical',\n                speed: 25,\n              },\n              tilt: {\n                value: 0,\n                animation: {\n                  enable: false,\n                  speed: 0,\n                  decay: 0,\n                  sync: false,\n                },\n                direction: 'clockwise',\n                enable: false,\n              },\n              twinkle: {\n                lines: {\n                  enable: false,\n                  frequency: 0.05,\n                  opacity: 1,\n                },\n                particles: {\n                  enable: false,\n                  frequency: 0.05,\n                  opacity: 1,\n                },\n              },\n              wobble: {\n                distance: 5,\n                enable: false,\n                speed: {\n                  angle: 50,\n                  move: 10,\n                },\n              },\n              life: {\n                count: 0,\n                delay: {\n                  value: 0,\n                  sync: false,\n                },\n                duration: {\n                  value: 0,\n                  sync: false,\n                },\n              },\n              rotate: {\n                value: 0,\n                animation: {\n                  enable: false,\n                  speed: 0,\n                  decay: 0,\n                  sync: false,\n                },\n                direction: 'clockwise',\n                path: false,\n              },\n              orbit: {\n                animation: {\n                  count: 0,\n                  enable: false,\n                  speed: 1,\n                  decay: 0,\n                  delay: 0,\n                  sync: false,\n                },\n                enable: false,\n                opacity: 1,\n                rotation: {\n                  value: 45,\n                },\n                width: 1,\n              },\n              links: {\n                blink: false,\n                color: {\n                  value: '#fff',\n                },\n                consent: false,\n                distance: 100,\n                enable: false,\n                frequency: 1,\n                opacity: 1,\n                shadow: {\n                  blur: 5,\n                  color: {\n                    value: '#000',\n                  },\n                  enable: false,\n                },\n                triangles: {\n                  enable: false,\n                  frequency: 1,\n                },\n                width: 1,\n                warp: false,\n              },\n              repulse: {\n                value: 0,\n                enabled: false,\n                distance: 1,\n                duration: 1,\n                factor: 1,\n                speed: 1,\n              },\n            },\n            detectRetina: true,\n          }}\n        />\n      )}\n    </motion.div>\n  )\n}\n\nexport default SparklesCore\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Spotlight\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\SquaresGrid\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StarBackground\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StarRating\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StaticStepper\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StatisticCard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StickyCard\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useId' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'children' is defined but never used. Allowed unused args must match /^_/u.","line":4,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useId } from 'react'\nimport clsx from 'clsx'\n\nconst StickyCard = ({ cards, children }) => {\n  return (\n    <>\n      <section className=\"flex flex-col gap-4 pt-30 pb-20\">\n        {cards.map((card, index) => {\n          const animateSlide = index % 2 === 0 ? 'animate-slide-in-left' : 'animate-slide-in-right'\n          return (\n            <div\n              key={card?.id}\n              style={{ top: `calc(50px + ${(index + 1) * 30}px)` }}\n              className={clsx(\n                'sticky z-0 m-auto flex w-[50vw] justify-center overflow-hidden rounded-2xl bg-[#0a192f] px-8 pt-4 after:pointer-events-none after:absolute after:inset-0 after:z-10 after:rounded-2xl after:outline after:-outline-offset-2 after:outline-white/20',\n                animateSlide\n              )}\n            >\n              <div className=\"animate-wiggle h-[30vh]\">\n                <p className=\"animate-hue-rotate hue-clip text-gradient text-2xl\">Card Item</p>\n              </div>\n            </div>\n          )\n        })}\n      </section>\n    </>\n  )\n}\n\nexport default StickyCard\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StickyCard\\index.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\StickyFooter\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TagCard\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  63 |\n  64 |   useEffect(() => {\n> 65 |     resetVisiblePortion()\n     |     ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  66 |   }, [tagCardList, showMax])\n  67 |\n  68 |   const showAll = () => {","line":65,"column":5,"nodeType":null,"endLine":65,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'resetVisiblePortion'. Either include it or remove the dependency array.","line":66,"column":6,"nodeType":"ArrayExpression","endLine":66,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [tagCardList, showMax, resetVisiblePortion]","fix":{"range":[2253,2275],"text":"[tagCardList, showMax, resetVisiblePortion]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react'\nimport { Button, theme } from 'antd'\nimport { DownOutlined, UpOutlined } from '@ant-design/icons'\nimport BlueIcon from './icons/blue.png'\nimport GrassGreenIcon from './icons/grass-green.png'\nimport OrangeIcon from './icons/orange.png'\nimport PeaGreenIcon from './icons/pea-green.png'\nimport PinkIcon from './icons/pink.png'\nimport PurpleIcon from './icons/purple.png'\n\nimport styles from './index.module.less'\nimport { useProThemeContext } from '@/theme/hooks'\n\nconst CARD_ICONS = [BlueIcon, PeaGreenIcon, OrangeIcon, GrassGreenIcon, PurpleIcon, PinkIcon]\n\nconst LIGHT_PALETTE = {\n  borderColor: ['#96C2EE', '#87D1D7', '#E9AF7B', '#96D489', '#C0AEE2', '#EB94C6'],\n  borderBackgroundColor: ['#AAC9FF', '#9AD9DE', '#FFD2AA', '#C0E4B8', '#D3C1F4', '#F8C0E2'],\n  tagBackgroundColor: ['#EAF2FF', '#DEF8FA', '#FFEEDF', '#E6F9E2', '#EAE9FF', '#FEE7F4'],\n  tagTextColor: ['#2878FF', '#2B9098', '#D86600', '#1F8F07', '#524CD1', '#C02F84'],\n}\n\nconst DARK_PALETTE = {\n  borderColor: ['#5B8BC9', '#4FA8B1', '#C98A4D', '#4C9C51', '#8E7BC8', '#C96AA7'],\n  borderBackgroundColor: [\n    'rgba(91,139,201,0.35)',\n    'rgba(79,168,177,0.35)',\n    'rgba(201,138,77,0.35)',\n    'rgba(76,156,81,0.35)',\n    'rgba(142,123,200,0.35)',\n    'rgba(201,106,167,0.35)',\n  ],\n  tagBackgroundColor: [\n    'rgba(40,94,164,0.35)',\n    'rgba(32,108,110,0.35)',\n    'rgba(155,92,34,0.35)',\n    'rgba(42,108,51,0.35)',\n    'rgba(73,62,130,0.35)',\n    'rgba(119,46,86,0.35)',\n  ],\n  tagTextColor: ['#D6E8FF', '#D2F0F2', '#FFE0BF', '#D1F7D2', '#E5E0FF', '#FFD6EE'],\n}\n\nconst TagCard = ({ tagCardList = [], showMax = Infinity }) => {\n  const [showCardList, setShowCardList] = useState([])\n  const [isExpanded, setIsExpanded] = useState(false)\n  const { themeSettings } = useProThemeContext()\n  const { token } = theme.useToken()\n  const isDarkMode = themeSettings.themeMode === 'dark'\n\n  const cardConfig = useMemo(\n    () => ({\n      cardIcon: CARD_ICONS,\n      ...(isDarkMode ? DARK_PALETTE : LIGHT_PALETTE),\n    }),\n    [isDarkMode]\n  )\n\n  const resetVisiblePortion = () => {\n    setShowCardList(tagCardList.filter((_, index) => index < showMax))\n    setIsExpanded(false)\n  }\n\n  useEffect(() => {\n    resetVisiblePortion()\n  }, [tagCardList, showMax])\n\n  const showAll = () => {\n    setShowCardList(tagCardList)\n    setIsExpanded(true)\n  }\n\n  const showPortion = () => {\n    resetVisiblePortion()\n  }\n\n  return (\n    <div className={styles.tagCard}>\n      <div className={styles.tagCardExtra}>\n        {showMax < tagCardList.length && (\n          <>\n            {!isExpanded ? (\n              <Button type=\"primary\" onClick={showAll} icon={<DownOutlined />} iconPlacement=\"end\">\n                展开全部标签\n              </Button>\n            ) : (\n              <Button type=\"primary\" onClick={showPortion} icon={<UpOutlined />} iconPlacement=\"end\">\n                折叠部分标签\n              </Button>\n            )}\n          </>\n        )}\n      </div>\n      <div className={styles.tagCardList}>\n        {showCardList.map((card, index) => (\n          <div\n            key={index}\n            className={styles.tagCardItem}\n            style={{\n              borderColor: cardConfig.borderColor[index % cardConfig.borderColor.length],\n              backgroundColor: token.colorBgElevated,\n              color: token.colorText,\n            }}\n          >\n            <div\n              className={styles.tagCardTop}\n              style={{\n                backgroundColor: cardConfig.borderBackgroundColor[index % cardConfig.borderBackgroundColor.length],\n                borderRadius: '3px 3px 0px 0px',\n              }}\n            ></div>\n            <div className={styles.tagCardBody}>\n              <div className={styles.cardName}>\n                <img src={cardConfig.cardIcon[index % cardConfig.cardIcon.length]} width=\"22\" alt=\"icon\" />\n                <span style={{ color: token.colorTextHeading }}>{card.name}</span>\n              </div>\n              <div className={styles.cardBody}>\n                {card.tags.map((tag, _index) => (\n                  <div\n                    key={_index}\n                    className={styles.tagItem}\n                    style={{\n                      backgroundColor: cardConfig.tagBackgroundColor[index % cardConfig.tagBackgroundColor.length],\n                      padding: '5px',\n                      textAlign: 'center',\n                      margin: '0 10px 10px 0',\n                      borderRadius: '2px',\n                    }}\n                  >\n                    <div\n                      className={styles.tagName}\n                      style={{\n                        color: cardConfig.tagTextColor[index % cardConfig.tagTextColor.length],\n                        fontSize: '14px',\n                      }}\n                    >\n                      {tag.name}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default TagCard\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TagCloud\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TestimonialCarousel\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'image' is assigned a value but never used.","line":36,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { AnimatePresence, motion } from 'motion/react'\n\nconst testimonials = [\n  {\n    text: '北风吹雪四更初，嘉瑞天教及岁除。',\n    author: '除夜雪',\n  },\n  {\n    text: '不求见面惟通谒，名纸朝来满敝庐。',\n    author: '守岁',\n  },\n  {\n    text: '半盏屠苏犹未举，灯前小草写桃符。',\n    author: '除夜雪',\n  },\n  {\n    text: '我亦随人投数纸，世情嫌简不嫌虚。',\n    author: '守岁',\n  },\n]\n\nconst TestimonialCarousel = () => {\n  const [currentTestimonial, setCurrentTestimonial] = useState(0)\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      setCurrentTestimonial((prevTestimonial) => (prevTestimonial + 1) % testimonials.length)\n    }, 3000)\n\n    return () => {\n      clearInterval(intervalId)\n    }\n  }, [])\n\n  const { text, author, image } = testimonials[currentTestimonial]\n\n  const variants = {\n    initial: { opacity: 0, y: '100%', scale: 0.1 },\n    animate: { opacity: 1, y: 0, scale: 1 },\n    exit: { opacity: 0, y: '100%', scale: 0.1 },\n  }\n  const dotVariants = {\n    active: { scale: 1.2, backgroundColor: '#3f3f46' },\n    inactive: { scale: 1, backgroundColor: '#D1D5DB' },\n  }\n\n  return (\n    <section className=\"py-12\">\n      <div className=\"w-full max-w-2xl\">\n        <AnimatePresence mode=\"popLayout\">\n          <motion.div\n            key={currentTestimonial}\n            initial=\"initial\"\n            animate=\"animate\"\n            exit=\"exit\"\n            variants={variants}\n            className=\"flex w-full flex-col items-center justify-center\"\n            transition={{\n              type: 'spring',\n              stiffness: 200,\n              damping: 20,\n              duration: 0.5,\n            }}\n          >\n            <p className=\"text m-0 text-center font-medium tracking-tight\">&quot;{text}&quot;</p>\n            <div className=\"mx-auto mt-5\">\n              <div className=\"flex flex-col items-center justify-center space-x-3\">\n                <div className=\"font-regular text-sm text-gray-900/80\">{author}</div>\n              </div>\n            </div>\n          </motion.div>\n          <div className=\"mt-8 flex justify-center\">\n            {testimonials.map((_, index) => (\n              <motion.div\n                key={index}\n                className=\"mx-1 h-1 w-1 cursor-pointer rounded-full\"\n                variants={dotVariants}\n                animate={index === currentTestimonial ? 'active' : 'inactive'}\n                onClick={() => setCurrentTestimonial(index)}\n              />\n            ))}\n          </div>\n        </AnimatePresence>\n      </div>\n    </section>\n  )\n}\n\nexport default TestimonialCarousel\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TextClip\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TextComponent\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TextLoader\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TextReveal\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\ThreeDCard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TransferHistory\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'firstItemHeight' is assigned a value but never used.","line":145,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":145,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastItemHeight' is assigned a value but never used.","line":146,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":146,"endColumn":25},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  166 |   // 使用useLayoutEffect确保在DOM更新后立即计算\n  167 |   useLayoutEffect(() => {\n> 168 |     calculateLineHeight()\n      |     ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  169 |   }, [expanded])\n  170 |\n  171 |   // 组件挂载后计算线条高度","line":168,"column":5,"nodeType":null,"endLine":168,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useLayoutEffect has a missing dependency: 'calculateLineHeight'. Either include it or remove the dependency array.","line":169,"column":6,"nodeType":"ArrayExpression","endLine":169,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [calculateLineHeight, expanded]","fix":{"range":[4144,4154],"text":"[calculateLineHeight, expanded]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  171 |   // 组件挂载后计算线条高度\n  172 |   useLayoutEffect(() => {\n> 173 |     calculateLineHeight()\n      |     ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  174 |\n  175 |     // 添加窗口大小变化时的重新计算\n  176 |     const handleResize = () => {","line":173,"column":5,"nodeType":null,"endLine":173,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useLayoutEffect has a missing dependency: 'calculateLineHeight'. Either include it or remove the dependency array.","line":184,"column":6,"nodeType":"ArrayExpression","endLine":184,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [calculateLineHeight, expanded]","fix":{"range":[4456,4466],"text":"[calculateLineHeight, expanded]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useLayoutEffect } from 'react'\nimport { Button } from 'antd'\nimport styles from './index.module.less'\nimport { useProThemeContext } from '@src/theme/hooks'\n\n/**\n * 转让历史组件\n * @param {Object} props - 组件属性\n * @param {number} [props.defaultDisplayCount=3] - 默认显示的子项数量\n */\nconst TransferHistory = ({ defaultDisplayCount = 3 }) => {\n  const { themeSettings } = useProThemeContext()\n  const isDark = themeSettings?.themeMode === 'dark'\n  const [expanded, setExpanded] = useState(false)\n  const [leftLineHeight, setLeftLineHeight] = useState('100%')\n  const leftLineRef = useRef(null)\n  const itemRefs = useRef([])\n  const contentWrapperRef = useRef(null)\n\n  // 初始化引用数组\n  useEffect(() => {\n    itemRefs.current = []\n  }, [])\n\n  // 模拟数据\n  const transferData = [\n    {\n      name: '转让历史',\n      id: '1',\n      level: 1,\n      children: [\n        {\n          name: '山东AI科技股份有限公司',\n          id: '1-1',\n          level: 2,\n          children: [\n            {\n              name: '科技股份有限公司第一公司',\n              value: '2022年8月8号',\n              id: '1-1-1',\n              level: 3,\n            },\n            {\n              name: '科技股份有限公司第二公司',\n              value: '2023年6月6号',\n              id: '1-1-2',\n              level: 3,\n            },\n            {\n              name: '科技股份有限公司第三公司',\n              value: '2024年9月9号',\n              id: '1-1-3',\n              level: 3,\n            },\n          ],\n          ratio: '85%',\n        },\n        {\n          name: '广东发展有限公司',\n          id: '1-2',\n          level: 2,\n          children: [\n            {\n              name: '广东发展有限公司分公司',\n              value: '2024年5月1号',\n              id: '1-2-1',\n              level: 3,\n            },\n          ],\n          ratio: '55%',\n        },\n        {\n          name: '科技发展股份有限公司',\n          id: '1-3',\n          level: 2,\n          children: [\n            {\n              name: '科技股份有限公司一',\n              value: '2022年7月31号',\n              id: '1-3-1',\n              level: 3,\n            },\n            {\n              name: '科技股份有限公司二',\n              value: '2023年8月1号',\n              id: '1-3-2',\n              level: 3,\n            },\n          ],\n          ratio: '35%',\n        },\n        {\n          name: '第四家公司',\n          id: '1-4',\n          level: 2,\n          children: [\n            {\n              name: '受让方第四分公司',\n              value: '2021年8月20号',\n              id: '1-4-1',\n              level: 3,\n            },\n          ],\n          ratio: '25%',\n        },\n        {\n          name: '第五家公司',\n          id: '1-5',\n          level: 2,\n          children: [\n            {\n              name: '受让方第五分公司',\n              value: '2020年6月6号',\n              id: '1-5-1',\n              level: 3,\n            },\n          ],\n          ratio: '15%',\n        },\n      ],\n    },\n  ]\n\n  /**\n   * 计算左侧线条高度（不包含按钮高度）\n   */\n  const calculateLineHeight = () => {\n    if (!transferData || !transferData[0] || !transferData[0].children || transferData[0].children.length === 0) {\n      setLeftLineHeight('0px')\n      return\n    }\n\n    // 根据展开状态计算显示的子项数量\n    const displayCount = expanded\n      ? transferData[0].children.length\n      : Math.min(defaultDisplayCount, transferData[0].children.length)\n    const lastIndex = displayCount - 1\n\n    // 确保元素已渲染\n    if (!itemRefs.current[0] || !itemRefs.current[lastIndex] || !leftLineRef.current) {\n      return\n    }\n\n    // 获取第一个和最后一个子项的高度\n    const firstItemHeight = itemRefs.current[0].offsetHeight\n    const lastItemHeight = itemRefs.current[lastIndex].offsetHeight\n\n    // 计算实际内容高度（仅包含子项容器，不包含按钮）\n    // 使用getBoundingClientRect获取精确高度\n    const firstItemRect = itemRefs.current[0].getBoundingClientRect()\n    const lastItemRect = itemRefs.current[lastIndex].getBoundingClientRect()\n\n    // 计算线条高度：从第一个子项的中心到最后一个子项的中心\n    const lineHeight = lastItemRect.top + lastItemRect.height / 2 - (firstItemRect.top + firstItemRect.height / 2)\n\n    setLeftLineHeight(`${lineHeight}px`)\n  }\n\n  /**\n   * 切换展开/折叠状态\n   */\n  const toggleExpand = () => {\n    setExpanded(!expanded)\n  }\n\n  // 使用useLayoutEffect确保在DOM更新后立即计算\n  useLayoutEffect(() => {\n    calculateLineHeight()\n  }, [expanded])\n\n  // 组件挂载后计算线条高度\n  useLayoutEffect(() => {\n    calculateLineHeight()\n\n    // 添加窗口大小变化时的重新计算\n    const handleResize = () => {\n      calculateLineHeight()\n    }\n\n    window.addEventListener('resize', handleResize)\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [expanded])\n\n  // 主题色彩\n  const mainBg = isDark ? 'rgba(40,120,255,0.15)' : 'rgba(40,120,255,0.07)'\n  const mainBorder = isDark ? 'rgba(40,120,255,0.5)' : 'rgba(40,120,255,0.5)'\n  const mainText = isDark ? '#eee' : '#333'\n  const cardBg = isDark ? '#222' : '#fff'\n  const cardText = isDark ? '#eee' : '#333'\n\n  return (\n    <div\n      className={styles.transferHistoryContainer}\n      style={{ overflowX: 'auto', background: isDark ? '#181c24' : '#fff' }}\n    >\n      {transferData.map((item, index) => (\n        <div key={index} className={styles.historyItem}>\n          {item.level === 1 && (\n            <div className={styles.levelOne}>\n              <div className={styles.levelName}>{item.name}</div>\n            </div>\n          )}\n\n          {/* 主体内容区域 */}\n          <div className={styles.contentWrapper} ref={contentWrapperRef} style={{ minWidth: 800 }}>\n            <div className={styles.leftContent}>\n              <div className={styles.levelTwo}>\n                <div className={styles.verticalConnector} style={{ height: leftLineHeight }}></div>\n                <div className={styles.leftLine} ref={leftLineRef}>\n                  {item.children && item.children.length > 0 && (\n                    <>\n                      {/* 控制显示的子项数量 */}\n                      {(item.children.length > defaultDisplayCount && !expanded\n                        ? item.children.slice(0, defaultDisplayCount)\n                        : item.children\n                      ).map((cItem, cIndex) => (\n                        <div\n                          key={cIndex}\n                          className={`${styles.subItemContainer} ${styles.subItemLine}`}\n                          ref={(el) => (itemRefs.current[cIndex] = el)}\n                        >\n                          {/* 第二级菜单 */}\n                          <div\n                            className={styles.subItem}\n                            style={{\n                              background: mainBg,\n                              border: `1px solid ${mainBorder}`,\n                              color: mainText,\n                            }}\n                          >\n                            {cItem.name}\n                          </div>\n\n                          {/* 第三级菜单 */}\n                          {cItem.children && cItem.children.length > 0 && (\n                            <>\n                              {cItem.children.map((tItem, tIndex) => (\n                                <div\n                                  key={tIndex}\n                                  className={\n                                    tIndex === cItem.children.length - 1\n                                      ? `${styles.tertiaryItem} ${styles.lastTertiaryItem}`\n                                      : styles.tertiaryItem\n                                  }\n                                >\n                                  {tIndex < cItem.children.length && (\n                                    <>\n                                      <div\n                                        className={styles.transferInfo}\n                                        style={{\n                                          background: cardBg,\n                                          color: cardText,\n                                          border: isDark ? '1px solid #444' : '1px solid #d2d2d2',\n                                        }}\n                                      >\n                                        <div>\n                                          转让\n                                          <span style={{ color: '#EF4A10' }}>20%</span>\n                                          股权\n                                        </div>\n                                        <div>受让方：{tItem.name}</div>\n                                      </div>\n                                      <div className={styles.infoConnector}></div>\n                                      <div\n                                        className={\n                                          cItem.children.length - 2 === tIndex\n                                            ? styles.horizontalConnector\n                                            : `${styles.horizontalConnector} ${styles.lastConnector}`\n                                        }\n                                      ></div>\n                                      <div className={styles.transferYear} style={{ color: cardText }}>\n                                        {tItem.value}\n                                      </div>\n                                    </>\n                                  )}\n                                </div>\n                              ))}\n                              <div\n                                className={styles.currentHolding}\n                                style={{\n                                  background: mainBg,\n                                  border: `1px solid ${mainBorder}`,\n                                  color: mainText,\n                                }}\n                              >\n                                <div>现持有股权：</div>\n                                <div style={{ color: '#EF4A10' }}>{cItem.ratio}</div>\n                              </div>\n                            </>\n                          )}\n                        </div>\n                      ))}\n                    </>\n                  )}\n                </div>\n              </div>\n\n              {item.children && item.children.length > defaultDisplayCount && (\n                <div className={styles.expandButtonContainer}>\n                  <Button type=\"link\" onClick={toggleExpand} className={styles.expandButton}>\n                    {expanded ? '收起部分公司' : '展开全部公司'}\n                    <i className={expanded ? 'anticon anticon-up' : 'anticon anticon-down'}></i>\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default TransferHistory\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TrapezoidTabs\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  10 |     // 如果有默认激活标签，使用它；否则使用第一个标签\n  11 |     const initialTab = defaultActiveTab || (tabs.length > 0 ? tabs[0].code : '')\n> 12 |     setActiveTab(initialTab)\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  13 |   }, [tabs, defaultActiveTab])\n  14 |\n  15 |   const handleTabClick = (code) => {","line":12,"column":5,"nodeType":null,"endLine":12,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport { theme } from 'antd'\nimport styles from './index.module.less'\n\nconst TrapezoidTabs = ({ tabs = [{ name: 'tab', code: 'tab' }], onTabChange, defaultActiveTab, className, style }) => {\n  const { token } = theme.useToken()\n  const [activeTab, setActiveTab] = useState('')\n\n  useEffect(() => {\n    // 如果有默认激活标签，使用它；否则使用第一个标签\n    const initialTab = defaultActiveTab || (tabs.length > 0 ? tabs[0].code : '')\n    setActiveTab(initialTab)\n  }, [tabs, defaultActiveTab])\n\n  const handleTabClick = (code) => {\n    setActiveTab(code)\n    onTabChange?.(code)\n  }\n\n  const cssVars = {\n    '--trapezoid-bg': token.colorFillQuaternary,\n    '--trapezoid-text': token.colorText,\n    '--trapezoid-active-bg': token.colorPrimary,\n    '--trapezoid-active-text': token.colorTextLightSolid,\n    '--trapezoid-hover-bg': token.colorFillTertiary,\n    '--trapezoid-line-color': token.colorSplit,\n    '--trapezoid-shadow-color': token.colorTextTertiary,\n  }\n\n  return (\n    <div className={`${styles.trapezoidTabs} ${className || ''}`} style={{ ...cssVars, ...style }}>\n      <div className={styles.tabContainer}>\n        {tabs.map((tab, index) => (\n          <div\n            key={tab.code}\n            className={`${styles.tabItem} ${activeTab === tab.code ? styles.active : ''}`}\n            style={{\n              zIndex: activeTab === tab.code ? 100 : tabs.length - index,\n            }}\n            onClick={() => handleTabClick(tab.code)}\n          >\n            <span data-text={tab.name} className={styles.tabContent}>\n              {tab.name}\n            </span>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default TrapezoidTabs\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TypeWriter\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initialDelay'. Either include it or remove the dependency array.","line":78,"column":6,"nodeType":"ArrayExpression","endLine":78,"endColumn":106,"suggestions":[{"desc":"Update the dependencies array to be: [currentIndex, displayText, isDeleting, speed, deleteSpeed, waitTime, texts, currentTextIndex, loop, initialDelay]","fix":{"range":[2069,2169],"text":"[currentIndex, displayText, isDeleting, speed, deleteSpeed, waitTime, texts, currentTextIndex, loop, initialDelay]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { motion } from 'motion/react'\nimport clsx from 'clsx'\n\nconst TypeWriter = ({\n  text,\n  speed = 50,\n  initialDelay = 0,\n  waitTime = 2000,\n  deleteSpeed = 30,\n  loop = true,\n  className,\n  showCursor = true,\n  hideCursorOnType = false,\n  cursorChar = '|',\n  cursorClassName = 'ml-1',\n  cursorAnimationVariants = {\n    initial: { opacity: 0 },\n    animate: {\n      opacity: 1,\n      transition: {\n        duration: 0.01,\n        repeat: Infinity,\n        repeatDelay: 0.4,\n        repeatType: 'reverse',\n      },\n    },\n  },\n}) => {\n  const [displayText, setDisplayText] = useState('')\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [currentTextIndex, setCurrentTextIndex] = useState(0)\n\n  const texts = Array.isArray(text) ? text : [text]\n\n  useEffect(() => {\n    let timeout\n\n    const currentText = texts[currentTextIndex]\n\n    const startTyping = () => {\n      if (isDeleting) {\n        if (displayText === '') {\n          setIsDeleting(false)\n          if (currentTextIndex === texts.length - 1 && !loop) {\n            return\n          }\n          setCurrentTextIndex((prev) => (prev + 1) % texts.length)\n          setCurrentIndex(0)\n          timeout = setTimeout(() => {}, waitTime)\n        } else {\n          timeout = setTimeout(() => {\n            setDisplayText((prev) => prev.slice(0, -1))\n          }, deleteSpeed)\n        }\n      } else {\n        if (currentIndex < currentText.length) {\n          timeout = setTimeout(() => {\n            setDisplayText((prev) => prev + currentText[currentIndex])\n            setCurrentIndex((prev) => prev + 1)\n          }, speed)\n        } else if (texts.length > 1) {\n          timeout = setTimeout(() => {\n            setIsDeleting(true)\n          }, waitTime)\n        }\n      }\n    }\n\n    if (currentIndex === 0 && !isDeleting && displayText === '') {\n      timeout = setTimeout(startTyping, initialDelay)\n    } else {\n      startTyping()\n    }\n\n    return () => clearTimeout(timeout)\n  }, [currentIndex, displayText, isDeleting, speed, deleteSpeed, waitTime, texts, currentTextIndex, loop])\n\n  return (\n    <div className={`inline tracking-tight whitespace-pre-wrap ${className}`}>\n      <span>{displayText}</span>\n      {showCursor && (\n        <motion.span\n          variants={cursorAnimationVariants}\n          className={clsx(\n            cursorClassName,\n            hideCursorOnType && (currentIndex < texts[currentTextIndex].length || isDeleting) ? 'hidden' : ''\n          )}\n          initial=\"initial\"\n          animate=\"animate\"\n        >\n          {cursorChar}\n        </motion.span>\n      )}\n    </div>\n  )\n}\n\nexport default TypeWriter\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\TypedText\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\UserIP\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport clsx from 'clsx'\nimport { MapPin, Globe, Network, Loader2, RefreshCw } from 'lucide-react'\n\nconst UserIP = () => {\n  const [ipData, setIpData] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  const fetchIpInfo = async (signal) => {\n    setLoading(true)\n    setError(null)\n    try {\n      // 备选方案：\n      // 1. ipapi.co (推荐，支持 HTTPS，JSON 格式友好)\n      // 2. ip-api.com (注意：免费版仅支持 HTTP，HTTPS 站点调用会报错)\n      // 3. db-ip.com (每天限制次数)\n\n      // 这里使用 ipapi.co，它支持 HTTPS 且字段比较标准\n      const response = await fetch('https://ipapi.co/json/', { signal })\n\n      if (!response.ok) {\n        throw new Error('网络请求失败')\n      }\n\n      const data = await response.json()\n\n      if (data.error) {\n        throw new Error(data.reason || '获取 IP 信息失败')\n      }\n\n      setIpData(data)\n    } catch (err) {\n      if (err.name === 'AbortError') return\n      console.error('IP Fetch Error:', err)\n      setError('无法获取位置信息，请检查网络设置')\n    } finally {\n      if (!signal?.aborted) {\n        setLoading(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    const controller = new AbortController()\n    fetchIpInfo(controller.signal)\n    return () => controller.abort()\n  }, [])\n\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center rounded-xl border border-red-200 bg-red-50 p-6 text-red-600 dark:border-red-900/50 dark:bg-red-900/20 dark:text-red-400\">\n        <p className=\"mb-2 font-medium\">{error}</p>\n        <button\n          onClick={fetchIpInfo}\n          className=\"flex items-center gap-2 rounded-lg bg-red-100 px-4 py-2 text-sm font-medium transition-colors hover:bg-red-200 dark:bg-red-900/40 dark:hover:bg-red-900/60\"\n        >\n          <RefreshCw size={16} /> 重试\n        </button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"relative overflow-hidden rounded-xl border border-neutral-200 bg-white p-6 shadow-sm transition-all hover:shadow-md dark:border-neutral-800 dark:bg-neutral-900 dark:shadow-neutral-900/50\">\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h2 className=\"text-lg font-semibold text-neutral-900 dark:text-neutral-100\">当前网络信息</h2>\n        {loading && <Loader2 className=\"animate-spin text-neutral-400\" size={20} />}\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-3\">\n        {/* IP Address */}\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400\">\n            <Globe size={16} />\n            <span>IP 地址</span>\n          </div>\n          <div className=\"text-xl font-bold text-neutral-900 dark:text-neutral-100\">\n            {loading ? (\n              <div className=\"h-7 w-32 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800\" />\n            ) : (\n              ipData?.ip\n            )}\n          </div>\n        </div>\n\n        {/* Location */}\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400\">\n            <MapPin size={16} />\n            <span>地理位置</span>\n          </div>\n          <div className=\"text-lg font-medium text-neutral-900 dark:text-neutral-100\">\n            {loading ? (\n              <div className=\"h-7 w-48 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800\" />\n            ) : (\n              <span>\n                {ipData?.country_name} {ipData?.region} {ipData?.city}\n              </span>\n            )}\n          </div>\n        </div>\n\n        {/* ISP */}\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400\">\n            <Network size={16} />\n            <span>网络服务商</span>\n          </div>\n          <div className=\"text-lg font-medium text-neutral-900 dark:text-neutral-100\">\n            {loading ? (\n              <div className=\"h-7 w-40 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800\" />\n            ) : (\n              ipData?.org || ipData?.asn || '未知'\n            )}\n          </div>\n        </div>\n      </div>\n\n      {!loading && ipData && (\n        <div className=\"mt-6 border-t border-neutral-100 pt-4 text-xs text-neutral-400 dark:border-neutral-800 dark:text-neutral-500\">\n          数据来源: {ipData.org}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default UserIP\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Video\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'onReady'. Either include it or remove the dependency array.","line":33,"column":6,"nodeType":"ArrayExpression","endLine":33,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [onReady, options, videoRef]","fix":{"range":[1077,1096],"text":"[onReady, options, videoRef]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\r\nimport videojs from 'video.js'\r\nimport 'video.js/dist/video-js.css'\r\n\r\nexport const VideoJS = (props) => {\r\n  const videoRef = React.useRef(null)\r\n  const playerRef = React.useRef(null)\r\n  const { options, onReady } = props\r\n\r\n  React.useEffect(() => {\r\n    // Make sure Video.js player is only initialized once\r\n    if (!playerRef.current) {\r\n      // The Video.js player needs to be _inside_ the component el for React 18 Strict Mode.\r\n      const videoElement = document.createElement('video-js')\r\n\r\n      videoElement.classList.add('vjs-big-play-centered')\r\n      videoRef.current.appendChild(videoElement)\r\n\r\n      const player = (playerRef.current = videojs(videoElement, options, () => {\r\n        videojs.log('player is ready')\r\n         \r\n        onReady && onReady(player)\r\n      }))\r\n\r\n      // You could update an existing player in the `else` block here\r\n      // on prop change, for example:\r\n    } else {\r\n      const player = playerRef.current\r\n\r\n      player.autoplay(options.autoplay)\r\n      player.src(options.sources)\r\n    }\r\n  }, [options, videoRef])\r\n\r\n  // Dispose the Video.js player when the functional component unmounts\r\n  React.useEffect(() => {\r\n    const player = playerRef.current\r\n\r\n    return () => {\r\n      if (player && !player.isDisposed()) {\r\n        player.dispose()\r\n        playerRef.current = null\r\n      }\r\n    }\r\n  }, [playerRef])\r\n\r\n  return (\r\n    <div data-vjs-player>\r\n      <div ref={videoRef} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VideoJS\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\Watermark\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\WaveBackground\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\components\\stateless\\WordRotate\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\config\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\config\\menu.config.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HeatMapOutlined' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FireOutlined' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DotChartOutlined' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport {\n  HomeOutlined,\n  DeploymentUnitOutlined,\n  HeatMapOutlined,\n  ApartmentOutlined,\n  QuestionCircleOutlined,\n  FireOutlined,\n  GlobalOutlined,\n  QrcodeOutlined,\n  RocketOutlined,\n  BankOutlined,\n  FundProjectionScreenOutlined,\n  BarChartOutlined,\n  HighlightOutlined,\n  ExperimentOutlined,\n  SoundOutlined,\n  LockOutlined,\n  VideoCameraOutlined,\n  PieChartOutlined,\n  RobotOutlined,\n  SendOutlined,\n  EnvironmentOutlined,\n  DotChartOutlined,\n  PrinterOutlined,\n  UserOutlined,\n  ContactsOutlined,\n  Html5Outlined,\n  CloudServerOutlined,\n  AppstoreOutlined,\n  CodeOutlined,\n  ProjectOutlined,\n  FileTextOutlined,\n  ThunderboltOutlined,\n  ToolOutlined,\n} from '@ant-design/icons'\n\n// 静态菜单配置\n// 这里的 key 对应路由 path\nconst rawMainLayoutMenu = [\n  { label: 'home', i18nKey: 'home', key: '/', icon: <HomeOutlined /> },\n  { label: 'demo', i18nKey: 'demo', key: '/demo', icon: <GlobalOutlined /> },\n  {\n    label: 'Zustand演示',\n    i18nKey: 'menu.zustand',\n    key: '/zustand',\n    icon: <ThunderboltOutlined />,\n  },\n  {\n    label: 'Motion',\n    i18nKey: 'menu.motion',\n    key: '/motion',\n    icon: <RocketOutlined />,\n  },\n  {\n    label: 'Mermaid',\n    i18nKey: 'menu.mermaid',\n    key: '/mermaid',\n    icon: <ProjectOutlined />,\n  },\n  {\n    label: 'Topology',\n    i18nKey: 'menu.topology',\n    key: '/topology',\n    icon: <DeploymentUnitOutlined />,\n  },\n  {\n    label: '权限示例',\n    i18nKey: 'menu.permissionExample',\n    key: '/permission',\n    icon: <LockOutlined />,\n  },\n  {\n    label: 'PH Bar',\n    i18nKey: 'menu.phBar',\n    key: '/ph-bar',\n    icon: <BarChartOutlined />,\n  },\n  {\n    label: 'ChatGPT',\n    i18nKey: 'menu.chatgpt',\n    key: '/markmap',\n    icon: <RobotOutlined />,\n  },\n  {\n    label: 'React Tilt',\n    i18nKey: 'menu.reactTilt',\n    key: '/tilt',\n    icon: <ExperimentOutlined />,\n  },\n  {\n    label: 'Music',\n    i18nKey: 'menu.music',\n    key: '/music',\n    icon: <SoundOutlined />,\n  },\n  {\n    label: 'Crypto',\n    i18nKey: 'menu.crypto',\n    key: '/crypto',\n    icon: <LockOutlined />,\n  },\n  {\n    label: 'Video',\n    i18nKey: 'menu.video',\n    key: '/video',\n    icon: <VideoCameraOutlined />,\n  },\n  {\n    label: 'Big Screen',\n    i18nKey: 'menu.bigScreen',\n    key: '/big-screen',\n    icon: <FundProjectionScreenOutlined />,\n  },\n  {\n    label: 'Echarts',\n    i18nKey: 'menu.echarts',\n    key: '/echarts',\n    icon: <PieChartOutlined />,\n  },\n  {\n    label: 'Qr Generate',\n    i18nKey: 'menu.qrGenerate',\n    key: '/qrcode',\n    icon: <QrcodeOutlined />,\n  },\n  {\n    label: 'Business',\n    i18nKey: 'menu.business',\n    key: '/business',\n    icon: <BankOutlined />,\n  },\n  {\n    label: 'Prism Render',\n    i18nKey: 'menu.prismRender',\n    key: '/prism',\n    icon: <HighlightOutlined />,\n  },\n  {\n    label: 'Post Message',\n    i18nKey: 'menu.postMessage',\n    key: '/postmessage',\n    icon: <SendOutlined />,\n  },\n  {\n    label: 'Geo Chart',\n    i18nKey: 'menu.geoChart',\n    key: '/geo',\n    icon: <EnvironmentOutlined />,\n  },\n  {\n    label: 'Print',\n    i18nKey: 'menu.print',\n    key: '/print',\n    icon: <PrinterOutlined />,\n  },\n  {\n    label: 'Profile',\n    i18nKey: 'menu.profile',\n    key: '/profile',\n    icon: <UserOutlined />,\n  },\n  {\n    label: 'Contact',\n    i18nKey: 'menu.contact',\n    key: '/contact',\n    icon: <ContactsOutlined />,\n  },\n  {\n    label: '前端技术栈',\n    i18nKey: 'menu.frontendTechStack',\n    key: '/tech/frontend',\n    icon: <DeploymentUnitOutlined />,\n    children: [\n      {\n        label: 'React',\n        i18nKey: 'menu.react',\n        key: '/tech/frontend/react',\n        icon: <CodeOutlined />,\n      },\n      {\n        label: 'Vue',\n        i18nKey: 'menu.vue',\n        key: '/tech/frontend/vue',\n        icon: <CodeOutlined />,\n        children: [\n          {\n            label: 'Vue 插件',\n            i18nKey: 'menu.vuePlugins',\n            key: '/tech/frontend/plugins',\n            icon: <AppstoreOutlined />,\n            children: [\n              {\n                label: 'Vue3 API',\n                i18nKey: 'menu.vue3Api',\n                key: '/tech/frontend/plugins/vue3',\n                icon: <FileTextOutlined />,\n              },\n              {\n                label: '性能优化',\n                i18nKey: 'menu.performanceOptimization',\n                key: '/tech/frontend/plugins/perf',\n                icon: <ThunderboltOutlined />,\n              },\n            ],\n          },\n        ],\n      },\n      {\n        label: 'Angular',\n        i18nKey: 'menu.angular',\n        key: '/tech/frontend/angular',\n        icon: <Html5Outlined />,\n      },\n      {\n        label: 'Node',\n        i18nKey: 'menu.node',\n        key: '/tech/frontend/node',\n        icon: <CloudServerOutlined />,\n      },\n    ],\n  },\n  {\n    label: '后端技术栈',\n    i18nKey: 'menu.backendTechStack',\n    key: '/tech/backend',\n    icon: <CloudServerOutlined />,\n    children: [\n      {\n        label: 'Node',\n        i18nKey: 'menu.node',\n        key: '/tech/backend/node',\n        icon: <CodeOutlined />,\n      },\n      {\n        label: 'Java',\n        i18nKey: 'menu.java',\n        key: '/tech/backend/java',\n        icon: <CodeOutlined />,\n      },\n      {\n        label: 'Go',\n        i18nKey: 'menu.go',\n        key: '/tech/backend/go',\n        icon: <CodeOutlined />,\n      },\n    ],\n  },\n  {\n    label: '构建工具',\n    i18nKey: 'menu.buildTools',\n    key: '/build',\n    icon: <ApartmentOutlined />,\n    children: [\n      {\n        label: 'Webpack',\n        i18nKey: 'menu.webpack',\n        key: '/build/webpack',\n        icon: <ToolOutlined />,\n      },\n      {\n        label: 'Vite',\n        i18nKey: 'menu.vite',\n        key: '/build/vite',\n        icon: <ThunderboltOutlined />,\n      },\n    ],\n  },\n\n  {\n    label: 'Error',\n    i18nKey: 'menu.error',\n    key: '/sub-error',\n    icon: <QuestionCircleOutlined />,\n    children: [{ label: 'ErrorBoundary', i18nKey: 'menu.errorBoundary', key: '/error' }],\n  },\n]\n\n// 规范化菜单：为每个项保证存在 `path` 字段（优先使用已有 path，否则复制 key）。\nfunction normalizeMenu(items) {\n  return items.map((it) => {\n    const { children, ...rest } = it\n    const normalized = { ...rest, path: (it && it.path) || it.key }\n    if (children && Array.isArray(children)) {\n      normalized.children = normalizeMenu(children)\n    }\n    return normalized\n  })\n}\n\nexport const mainLayoutMenu = normalizeMenu(rawMainLayoutMenu)\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\hocs\\CompoundPattern\\Toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\hocs\\CompoundPattern\\ToggleButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\hocs\\CompoundPattern\\ToggleMessage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\hocs\\CompoundPattern\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\hocs\\withErrorHandling.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\hocs\\withLoading.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\n\nfunction withLoading(Component) {\n  return function WithLoading({ isLoading, ...props }) {\n    if (isLoading) {\n      return <div>Loading...</div>\n    }\n    return <Component {...props} />\n  }\n}\n\nexport default withLoading\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\i18n\\i18n.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\i18n\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\i18n\\menuI18nKey.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\lib\\core.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\lib\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\lib\\stateful.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\lib\\stateless.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\locales\\en\\translation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\locales\\zh\\translation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\mock\\permission.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\barcode\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\bigScreen\\bigBody\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\bigScreen\\bigHeader\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\bigScreen\\chinaMap\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\bigScreen\\chinaMap\\options.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\bigScreen\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport previewFitScale from '@utils/previewScale'\nimport { useActivate } from '@/components/KeepAlive'\nimport { useLocation } from 'react-router-dom'\nimport ChinaMap from './chinaMap'\n\nconst BigScreen = () => {\n  const scaleDom = useRef(null)\n  const { pathname } = useLocation()\n\n  const scaleRef = useRef(null)\n\n  useEffect(() => {\n    const { calcRate, windowResize, unWindowResize } = previewFitScale(1, 1, scaleDom.current)\n    scaleRef.current = { calcRate, windowResize, unWindowResize }\n    calcRate()\n    windowResize()\n    return () => {\n      unWindowResize()\n    }\n  }, [])\n\n  useActivate(() => {\n    if (scaleDom.current) {\n      scaleDom.current.style.transform = 'scale(1, 1)'\n      setTimeout(() => {\n        if (scaleRef.current?.calcRate) {\n          scaleRef.current.calcRate()\n        }\n        window.dispatchEvent(new CustomEvent('bigscreen-charts-reinit'))\n      }, 200)\n    }\n  })\n  useEffect(() => {\n    if (pathname === '/big-screen' && scaleDom.current) {\n      setTimeout(() => {\n        if (scaleRef.current?.calcRate) {\n          scaleRef.current.calcRate()\n        }\n        window.dispatchEvent(new CustomEvent('bigscreen-charts-reinit'))\n      }, 300)\n    }\n  }, [pathname])\n  return (\n    <FixTabPanel fill={true}>\n      <section ref={scaleDom} style={{ height: '100%', width: '100%', transformOrigin: 'top left' }}>\n        <ChinaMap />\n      </section>\n    </FixTabPanel>\n  )\n}\n\nexport default BigScreen\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\bigScreen\\offlinePortalOptions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\build\\vite\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\build\\webpack\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\business\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":25,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":40,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":34},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":93,"column":6,"nodeType":"ArrayExpression","endLine":93,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[2244,2246],"text":"[fetchData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport { Table } from 'antd'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport { http } from '@src/service/http'\n\nconst fixColumns = [\n  // {\n  //   title: '序号',\n  //   dataIndex: 'index',\n  //   render: (_text, _record, index) => index +1 ,\n  // },\n  {\n    title: '资质名称',\n    dataIndex: 'certificateName',\n    render: (text, _record, index) => text || '-',\n  },\n  {\n    title: '证书编号',\n    dataIndex: 'certificateNo',\n    render: (text, _record, index) => text || '-',\n  },\n  {\n    title: '发证机构',\n    dataIndex: 'certifyOrgName',\n    render: (text, _record, index) => text || '-',\n  },\n  {\n    title: '发证日期',\n    dataIndex: 'issueDate',\n    render: (text, _record, index) => text || '-',\n  },\n  {\n    title: '有效期至',\n    dataIndex: 'endDate',\n    render: (text, _record, index) => text || '-',\n  },\n  {\n    title: '证书状态',\n    dataIndex: 'status',\n    render: (text, _record, index) => text || '-',\n  },\n]\n\nconst initialFetchData = [\n  {\n    grid: '2316258212',\n    name: '上海徐汇规划建筑设计有限公司',\n    list: [],\n  },\n  {\n    grid: '551517222',\n    name: '中交第一公路勘察设计研究院有限公司',\n    list: [],\n  },\n]\n\nconst Business = () => {\n  const [fetchData, setFetchData] = useState(initialFetchData)\n  const [loading, setLoading] = useState(false)\n  useEffect(() => {\n    const fetchAllData = async () => {\n      const newFetchData = [...fetchData]\n      setLoading(true)\n      for (let i = 0; i < newFetchData.length; i++) {\n        const item = newFetchData[i]\n        try {\n          const res = await http.post(\n            'https://capi.tianyancha.com/cloud-business-state/company/certificate/detail/list',\n            {\n              companyGid: item.grid,\n              pageSize: 1000,\n              pageNum: 1,\n              certificateName: '-100',\n              status: '-100',\n              issueYear: '-100',\n              searchKey: '',\n              sortType: '',\n            }\n          )\n          setLoading(false)\n          newFetchData[i] = {\n            ...item,\n            list: res.data?.list || [],\n          }\n        } catch (error) {\n          setLoading(false)\n          console.error('数据请求失败:', error)\n        }\n      }\n      setFetchData(newFetchData)\n    }\n    fetchAllData()\n  }, [])\n\n  return (\n    <FixTabPanel>\n      {fetchData.map((item, index) => (\n        <section className=\"my-4\" key={item.grid}>\n          <section className=\"my-4 text-lg\">\n            {index + 1}\n            <span>.</span> {item.name} : {item.list.length}\n          </section>\n          <Table\n            loading={loading}\n            columns={fixColumns}\n            dataSource={item.list}\n            rowKey=\"certificateNo\"\n            pagination={false}\n          />\n        </section>\n      ))}\n    </FixTabPanel>\n  )\n}\n\nexport default Business\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\chatgpt\\fixSse.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\chatgpt\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\chatgpt\\scrollBottom.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\chatgpt\\sse.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\chinamap\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\contact\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useProThemeContext' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":5,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":5,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scrollRef' is assigned a value but never used.","line":8,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react'\nimport { theme } from 'antd'\nimport { useProThemeContext } from '@src/theme/hooks'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport { Send, MapPin, Mail } from 'lucide-react'\n\nconst Contact = () => {\n  const scrollRef = useRef(null)\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    subject: '',\n    message: '',\n  })\n\n  const [errors, setErrors] = useState({})\n  const [status, setStatus] = useState(null)\n  const validateForm = () => {\n    let tempErrors = {}\n    let isValid = true\n\n    if (!formData.name.trim()) {\n      tempErrors.name = 'Name is required'\n      isValid = false\n    }\n\n    if (!formData.email.trim()) {\n      tempErrors.email = 'Email is required'\n      isValid = false\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      tempErrors.email = 'Email is invalid'\n      isValid = false\n    }\n\n    if (!formData.subject.trim()) {\n      tempErrors.subject = 'Subject is required'\n      isValid = false\n    }\n\n    if (!formData.message.trim()) {\n      tempErrors.message = 'Message is required'\n      isValid = false\n    }\n\n    setErrors(tempErrors)\n    return isValid\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!validateForm()) {\n      setStatus('Please fill in all required fields correctly.')\n      return\n    }\n\n    // Create a new FormData object to send to Web3Forms API\n    const form = new FormData()\n    form.append('access_key', '44b28ec2-e0a1-459a-8e3b-06869186889b')\n    form.append('name', formData.name)\n    form.append('email', formData.email)\n    form.append('subject', formData.subject || 'New Contact Form Submission')\n    form.append('message', formData.message)\n\n    try {\n      const response = await fetch('https://api.web3forms.com/submit', {\n        method: 'POST',\n        body: form,\n      })\n\n      const result = await response.json()\n\n      if (response.ok) {\n        setStatus('Message sent successfully!')\n        setFormData({\n          name: '',\n          email: '',\n          subject: '',\n          message: '',\n        })\n        setErrors({})\n      } else {\n        setStatus(result.message || 'There was an error sending your message.')\n      }\n    } catch (error) {\n      setStatus('An error occurred. Please try again.')\n      console.error('Error:', error)\n    }\n  }\n  const handleInputChange = (e) => {\n    const { name, value } = e.target\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }))\n  }\n  const {\n    token: { colorBgContainer, colorBorder, colorText },\n  } = theme.useToken()\n\n  return (\n    <FixTabPanel>\n      <div\n        className=\"code-window relative flex h-full items-center justify-center\"\n        style={{\n          minHeight: '100vh',\n          padding: '24px 8px',\n          backgroundColor: colorBgContainer,\n        }}\n      >\n        <div\n          className=\"w-full\"\n          style={{\n            maxWidth: 420,\n            width: '100%',\n            backgroundColor: colorBgContainer,\n            border: `1px solid ${colorBorder}`,\n            borderRadius: 16,\n            boxShadow: '0 2px 16px 0 rgba(0,0,0,0.04)',\n            padding: '32px 20px',\n            margin: '0 auto',\n            backdropFilter: 'blur(4px)',\n            color: colorText,\n          }}\n        >\n          <h2 className=\"mb-4 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-center text-3xl font-bold text-transparent md:text-5xl\">\n            Get in Touch\n          </h2>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 gap-6\">\n              <div>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  placeholder=\"Your Name\"\n                  className={`w-full rounded-xl border px-4 py-3 ${\n                    errors.name ? 'border-red-500' : 'border-gray-300/50 bg-white/30'\n                  } backdrop-blur-sm transition-colors focus:border-blue-500 focus:outline-none`}\n                  value={formData.name}\n                  onChange={handleInputChange}\n                />\n                {errors.name && <p className=\"mt-1 text-sm text-red-500\">{errors.name}</p>}\n              </div>\n\n              <div>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Your Email\"\n                  className={`w-full rounded-xl border px-4 py-3 ${\n                    errors.email ? 'border-red-500' : 'border-gray-300/50 bg-white/30 text-gray-800'\n                  } backdrop-blur-sm transition-colors focus:border-blue-500 focus:outline-none`}\n                  value={formData.email}\n                  onChange={handleInputChange}\n                />\n                {errors.email && <p className=\"mt-1 text-sm text-red-500\">{errors.email}</p>}\n              </div>\n\n              <div>\n                <input\n                  type=\"text\"\n                  name=\"subject\"\n                  placeholder=\"Subject\"\n                  className={`w-full rounded-xl border px-4 py-3 ${\n                    errors.subject ? 'border-red-500' : 'border-gray-300/50 bg-white/30 text-gray-800'\n                  } backdrop-blur-sm transition-colors focus:border-blue-500 focus:outline-none`}\n                  value={formData.subject}\n                  onChange={handleInputChange}\n                />\n                {errors.subject && <p className=\"mt-1 text-sm text-red-500\">{errors.subject}</p>}\n              </div>\n\n              <div>\n                <textarea\n                  name=\"message\"\n                  placeholder=\"Your Message\"\n                  rows={4}\n                  className={`w-full resize-none rounded-xl border px-4 py-3 ${\n                    errors.message ? 'border-red-500' : 'border-gray-300/50 bg-white/30 text-gray-800'\n                  } backdrop-blur-sm transition-colors focus:border-blue-500 focus:outline-none`}\n                  value={formData.message}\n                  onChange={handleInputChange}\n                ></textarea>\n                {errors.message && <p className=\"mt-1 text-sm text-red-500\">{errors.message}</p>}\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"flex w-full items-center justify-center space-x-2 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-3 font-semibold text-white backdrop-blur-sm transition-all duration-300 hover:from-blue-600 hover:to-purple-700 hover:shadow-lg\"\n            >\n              <span>Send Message</span>\n              <Send className=\"h-4 w-4\" />\n            </button>\n          </form>\n          {status && (\n            <div\n              className={`mt-4 rounded-lg p-3 backdrop-blur-sm ${\n                status.includes('success')\n                  ? 'border border-green-500/20 bg-green-500/10 text-green-400'\n                  : 'border border-red-500/20 bg-red-500/10 text-red-400'\n              }`}\n            >\n              <p className=\"text-center\">{status}</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </FixTabPanel>\n  )\n}\n\nexport default Contact\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\crypto\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\dashboard\\ViteLanding.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LockOutlined' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MobileOutlined' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport { motion } from 'framer-motion'\nimport { Button, theme } from 'antd'\nimport {\n  RightOutlined,\n  GithubOutlined,\n  ThunderboltOutlined,\n  AppstoreOutlined,\n  LockOutlined,\n  CodeOutlined,\n  MobileOutlined,\n  GlobalOutlined,\n  BuildOutlined,\n  ApiOutlined,\n} from '@ant-design/icons'\n\nconst FeatureCard = ({ icon: Icon, title, description, delay }) => {\n  const { token } = theme.useToken()\n  const isDark = token.mode === 'dark'\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5, delay }}\n      className={`rounded-2xl border p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-lg ${\n        isDark ? 'border-[#333] bg-[#1e1e20] hover:border-[#646cff]' : 'border-gray-100 bg-white hover:border-[#646cff]'\n      }`}\n    >\n      <div className=\"mb-4 inline-flex items-center justify-center rounded-lg bg-[#646cff]/10 p-3 text-[#646cff]\">\n        <Icon style={{ fontSize: 24 }} />\n      </div>\n      <h3 className={`mb-2 text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>{title}</h3>\n      <p className={`text-sm leading-relaxed ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>{description}</p>\n    </motion.div>\n  )\n}\n\nconst ViteLanding = () => {\n  const { token } = theme.useToken()\n  const isDark = token.mode === 'dark'\n\n  const features = [\n    {\n      icon: ThunderboltOutlined,\n      title: 'Instant Server Start',\n      description: 'On demand file serving over native ESM, no bundling required!',\n    },\n    {\n      icon: AppstoreOutlined,\n      title: 'Lightning Fast HMR',\n      description: 'Hot Module Replacement (HMR) that stays fast regardless of app size.',\n    },\n    {\n      icon: BuildOutlined,\n      title: 'Rich Features',\n      description: 'Out-of-the-box support for TypeScript, JSX, CSS and more.',\n    },\n    {\n      icon: ApiOutlined,\n      title: 'Optimized Build',\n      description: 'Pre-configured Rollup build with multi-page and library mode support.',\n    },\n    {\n      icon: GlobalOutlined,\n      title: 'Universal Plugins',\n      description: 'Rollup-superset plugin interface shared between dev and build.',\n    },\n    {\n      icon: CodeOutlined,\n      title: 'Fully Typed APIs',\n      description: 'Flexible programmatic APIs with full TypeScript typing.',\n    },\n  ]\n\n  return (\n    <div className={`min-h-full w-full overflow-hidden ${isDark ? 'bg-[#1b1b1f]' : 'bg-white'}`}>\n      {/* Background Gradients */}\n      <div className=\"pointer-events-none absolute top-0 left-0 h-full w-full overflow-hidden\">\n        <div className=\"absolute top-[-10%] right-[-5%] h-[500px] w-[500px] rounded-full bg-[#646cff] opacity-20 blur-[100px]\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] h-[600px] w-[600px] rounded-full bg-[#bd34fe] opacity-20 blur-[120px]\" />\n      </div>\n\n      <div className=\"relative z-10 mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8 lg:py-24\">\n        {/* Hero Section */}\n        <div className=\"mb-24 text-center lg:flex lg:items-center lg:justify-between lg:text-left\">\n          <div className=\"lg:w-1/2\">\n            <motion.h1\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6 }}\n              className=\"mb-6 text-5xl font-extrabold tracking-tight sm:text-6xl lg:text-7xl\"\n            >\n              <span className=\"bg-gradient-to-br from-[#41d1ff] to-[#bd34fe] bg-clip-text text-transparent\">\n                Next Generation\n              </span>\n              <br />\n              <span className={isDark ? 'text-white' : 'text-[#213547]'}>Frontend Tooling</span>\n            </motion.h1>\n\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className={`mx-auto mt-4 max-w-2xl text-xl sm:text-2xl lg:mx-0 ${isDark ? 'text-gray-400' : 'text-gray-500'}`}\n            >\n              Get ready for a development environment that can finally keep up with you.\n            </motion.p>\n\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              className=\"mt-10 flex flex-wrap justify-center gap-4 lg:justify-start\"\n            >\n              <Button\n                type=\"primary\"\n                size=\"large\"\n                shape=\"round\"\n                className=\"h-12 border-none bg-[#646cff] px-8 text-lg font-medium hover:bg-[#747bff]\"\n                icon={<RightOutlined />}\n              >\n                Get Started\n              </Button>\n              <Button\n                size=\"large\"\n                shape=\"round\"\n                className={`h-12 px-8 text-lg font-medium ${isDark ? 'border-[#444] bg-[#333] text-white hover:bg-[#444]' : 'border-gray-200 bg-gray-100 text-gray-700 hover:bg-gray-200'}`}\n                icon={<GithubOutlined />}\n              >\n                View on GitHub\n              </Button>\n            </motion.div>\n          </div>\n\n          {/* Hero Image / Logo Animation */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ duration: 0.8 }}\n            className=\"relative hidden lg:block lg:w-1/2\"\n          >\n            <div className=\"relative mx-auto h-[400px] w-[400px]\">\n              <motion.div\n                animate={{\n                  y: [0, -20, 0],\n                  rotate: [0, 5, -5, 0],\n                }}\n                transition={{\n                  duration: 6,\n                  repeat: Infinity,\n                  ease: 'easeInOut',\n                }}\n                className=\"absolute inset-0 rounded-[3rem] bg-gradient-to-br from-[#41d1ff] to-[#bd34fe] opacity-30 blur-3xl\"\n              />\n              <motion.div\n                className=\"relative z-10 flex h-full w-full items-center justify-center rounded-[3rem] bg-gradient-to-br from-[#646cff] to-[#bd34fe] shadow-2xl\"\n                whileHover={{ scale: 1.05 }}\n                transition={{ type: 'spring', stiffness: 300 }}\n              >\n                <ThunderboltOutlined style={{ fontSize: 160, color: 'white' }} />\n              </motion.div>\n            </div>\n          </motion.div>\n        </div>\n\n        {/* Features Grid */}\n        <div className=\"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3\">\n          {features.map((feature, index) => (\n            <FeatureCard key={index} {...feature} delay={0.2 + index * 0.1} />\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ViteLanding\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\dashboard\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\demo\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\echarts\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\error\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\geoChart\\index.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`initMap` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  14 |\n  15 |   useEffect(() => {\n> 16 |     initMap(name, geoJson)\n     |     ^^^^^^^ `initMap` accessed before it is declared\n  17 |   }, [region])\n  18 |\n  19 |   const initMap = (geoName, geoJSON) => {\n\n   17 |   }, [region])\n   18 |\n>  19 |   const initMap = (geoName, geoJSON) => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  20 |     const chartDom = document.getElementById('geoChart')\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  21 |     myChart = echarts.init(chartDom)\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 127 |     myChart.setOption(option)\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 128 |   }\n      | ^^^^ `initMap` is declared here\n  129 |\n  130 |   return (\n  131 |     <>","line":16,"column":5,"nodeType":null,"endLine":16,"endColumn":12},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'geoJson', 'initMap', and 'name'. Either include them or remove the dependency array.","line":17,"column":6,"nodeType":"ArrayExpression","endLine":17,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [geoJson, initMap, name, region]","fix":{"range":[469,477],"text":"[geoJson, initMap, name, region]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport * as echarts from 'echarts'\r\nimport FixTabPanel from '@stateless/FixTabPanel'\r\nimport fengxianGeo from './geo/fengxian.json'\r\n\r\nconst GeoChart = () => {\r\n  let myChart = null\r\n\r\n  const [geoJson, setGeoJson] = useState(fengxianGeo)\r\n  const [name, setName] = useState('奉贤')\r\n  const [region, setRegion] = useState('310120')\r\n\r\n  useEffect(() => {}, [])\r\n\r\n  useEffect(() => {\r\n    initMap(name, geoJson)\r\n  }, [region])\r\n\r\n  const initMap = (geoName, geoJSON) => {\r\n    const chartDom = document.getElementById('geoChart')\r\n    myChart = echarts.init(chartDom)\r\n    echarts.registerMap(geoName, geoJSON)\r\n\r\n    const option = {\r\n      tooltip: {},\r\n      geo: {\r\n        map: geoName,\r\n        label: {\r\n          show: true,\r\n          color: '#fff',\r\n        },\r\n        layoutCenter: ['30%', '30%'],\r\n        roam: true,\r\n        zoom: 1,\r\n        scaleLimit: {\r\n          min: 1,\r\n          max: 5,\r\n        },\r\n        tooltip: {\r\n          show: true, // 是否显示提示框组件，包括提示框浮层和 axisPointer。\r\n          trigger: 'item', // 触发类型。item,axis,none\r\n          enterable: true, // 鼠标是否可进入提示框浮层中，默认为false，\r\n          showContent: true, // 是否显示提示框浮层\r\n          triggerOn: 'mousemove', // 提示框触发的条件(mousemove|click|none)\r\n          className: 'echarts-tooltip',\r\n          showDelay: 0, // 浮层显示的延迟，单位为 ms，默认没有延迟，也不建议设置。在 triggerOn 为 'mousemove' 时有效。\r\n          textStyle: {\r\n            color: '#000',\r\n            fontSize: 14,\r\n          },\r\n          padding: [8, 8],\r\n          hideDelay: 10, // 浮层隐藏的延迟\r\n          backgroundColor: 'white', // 提示框浮层的背景颜色。\r\n          borderColor: 'green', // 图形的描边颜色\r\n          borderWidth: 2,\r\n          alwaysShowContent: true,\r\n          transitionDuration: 1, // 提示框浮层的移动动画过渡时间，单位是 s，设置为 0 的时候会紧跟着鼠标移动。\r\n        },\r\n        // regions: [{\r\n        //   name: '上海市奉贤区海湾旅游区',\r\n        //   itemStyle: {\r\n        //       areaColor: 'red',\r\n        //       color: 'red'\r\n        //   }\r\n        // }],\r\n        itemStyle: {\r\n          areaColor: '#0C1F30',\r\n          borderColor: 'rgba(6, 93, 255, .5)',\r\n          borderWidth: 1,\r\n          shadowColor: 'rgba(6, 93, 255, .5)',\r\n          shadowBlur: 20,\r\n        },\r\n        emphasis: {\r\n          disabled: false, // 是否关闭高亮状态\r\n          label: {\r\n            fontWeight: 'bold',\r\n            fontSize: '14px',\r\n            color: '#fff',\r\n          },\r\n          itemStyle: {\r\n            areaColor: 'rgba(58, 172, 226, .5)',\r\n          },\r\n        },\r\n        select: {\r\n          itemStyle: {\r\n            areaColor: 'rgba(58, 172, 226, .5)',\r\n          },\r\n        },\r\n      },\r\n      series: [\r\n        {\r\n          name: geoName,\r\n          type: 'scatter',\r\n          coordinateSystem: 'geo',\r\n          data: [],\r\n        },\r\n      ],\r\n    }\r\n\r\n    myChart.clear()\r\n    myChart.off('click')\r\n    myChart.on('click', (params) => {\r\n      if (params.componentType === 'series') {\r\n        console.log('params', params)\r\n      }\r\n      if (params.componentType === 'geo') {\r\n        const newName = params.name\r\n        const features = fengxianGeo.features.filter((item) => item.properties.name === newName)\r\n        const newGeoJSON = {\r\n          type: 'FeatureCollection',\r\n          features,\r\n        }\r\n        setName(newName)\r\n        setGeoJson(newGeoJSON)\r\n        setRegion(features[0].id)\r\n      }\r\n    })\r\n    myChart.getZr().on('click', (event) => {\r\n      // 没有 target 意味着鼠标/指针不在任何一个图形元素上，它是从“空白处”触发的。\r\n      if (!event.target) {\r\n        // 点击在了空白处，做些什么。\r\n        setName('奉贤')\r\n        setGeoJson(fengxianGeo)\r\n        setRegion('310120')\r\n      }\r\n    })\r\n    myChart.setOption(option)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <FixTabPanel style={{ backgroundColor: 'rgba(0, 0, 0, .8)' }}>\r\n        <div id=\"geoChart\" style={{ height: '500px', width: '100%', margin: '0 auto' }} />\r\n      </FixTabPanel>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default GeoChart\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\home\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'code' is assigned a value but never used.","line":94,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isVisible' is assigned a value but never used.","line":363,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":363,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsVisible' is assigned a value but never used.","line":363,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":363,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'saveSvgAsFile' is assigned a value but never used.","line":371,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":371,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { version, useEffect, useState, useRef } from 'react'\r\nimport { Input, Flex, Button } from 'antd'\r\nimport { SendOutlined } from '@ant-design/icons'\r\nimport { Atom, Merge, GitMerge, GitPullRequestArrow } from 'lucide-react'\r\n// import CountUp from 'react-countup'\r\n// import { PinInput } from 'react-input-pin-code'\r\nimport SpotlightCard from '@stateless/Spotlight'\r\n// import Typewriter from 'typewriter-effect'\r\nimport Marquee from 'react-fast-marquee'\r\nimport Masonry, { ResponsiveMasonry } from 'react-responsive-masonry'\r\nimport useDetectScroll from '@smakss/react-scroll-direction'\r\nimport FixTabPanel from '@stateless/FixTabPanel'\r\nimport ReMarkdown from '@stateless/ReMarkdown'\r\n// import LinearWrap from '@stateless/LinearWrap'\r\nimport AlternatingText from '@stateless/AlternatingText'\r\nimport AutoLink from '@stateless/AutoLink'\r\nimport LazyLoadImage from '@stateless/LazyLoadImage'\r\nimport IsometricCard from '@stateless/IsometricCard'\r\nimport AvatarCard from '@stateless/AvatarCard'\r\nimport LineBordered from '@stateless/LineBordered'\r\nimport GradientTracking from '@stateless/GradientTracking'\r\n// import ShiftingCard from '@stateless/ShiftingCard'\r\nimport BreatheText from '@stateless/BreatheText'\r\nimport ScrollAnimation from '@stateless/ScrollAnimation'\r\nimport AnimateOnScreen from '@stateless/AnimateOnScreen'\r\nimport AnimateRipple from '@stateless/AnimateRipple'\r\n// import AnimateWave from '@stateless/AnimateWave'\r\nimport NumberFlowFix from '@stateless/NumberFlowFix'\r\nimport MeshGradientBackground from '@stateless/MeshGradientBackground'\r\nimport useRect from '@hooks/useRect'\r\nimport TagCloud from '@stateless/TagCloud'\r\nimport ShiCode from '@stateless/ShiCode'\r\nimport StaticStepper from '@stateless/StaticStepper'\r\nimport FeatureAny from '@stateless/FeatureAny'\r\nimport UserIP from '@stateless/UserIP'\r\nimport ScratchToReveal from '@stateless/ScratchToReveal'\r\n// import SlideLinear from '@stateless/SlideLinear'\r\n// import Masonry from '@container/masonryContainer'\r\nimport DynamicBackground from '@stateless/DynamicBackground'\r\nimport ContentPlaceholder from '@stateless/ContentPlaceholder'\r\nimport SkeletonFix from '@stateless/SkeletonFix'\r\nimport { ReactSignature } from '@stateless/ReactSignature'\r\n// import AdvancedCodeBlock from '@stateless/AdvancedCodeBlock'\r\nimport SquaresGrid from '@stateless/SquaresGrid'\r\nimport ShinyText from '@stateless/ShinyText'\r\n// import BlurText from '@stateless/BlurText'\r\nimport Meteors from '@stateless/Meteors'\r\nimport CompareAll from '@stateless/CompareAll'\r\nimport TextLoader from '@stateless/TextLoader'\r\nimport BackgroundBoxes from '@stateless/BackgroundBoxes'\r\nimport TypeWriter from '@stateless/TypeWriter'\r\nimport SlideText from '@stateless/SlideText'\r\nimport SparklesCore from '@stateless/Sparkles'\r\nimport SparklesText from '@stateless/SparklesText'\r\nimport ColorfulText from '@stateless/ColorfulText'\r\nimport MemoizedStars from '@stateless/MemoizedStars'\r\n// import WordRotate from '@stateless/WordRotate'\r\nimport TestimonialCarousel from '@stateless/TestimonialCarousel'\r\n// import InteractiveGrid from '@stateless/InteractiveGrid'\r\nimport BlurFade from '@stateless/BlurFade'\r\nimport IconCloud from '@stateless/IconCloud'\r\nimport GradualSpacing from '@stateless/GradualSpacing'\r\nimport MultiDirectionSlide from '@stateless/MultiDirectionSlide'\r\nimport InViewBasicMultiple from '@stateless/AnimInViewBasic'\r\nimport DottedStepper from '@stateless/DottedStepper'\r\nimport FlipWords from '@stateless/FlipWords'\r\nimport BorderBeam from '@stateless/BorderBeam'\r\nimport AutoSlider from '@stateless/AutoSlider'\r\nimport AnimText from '@stateless/AnimText'\r\nimport SlideButton from '@stateless/SlideButton'\r\nimport NumberViewCard from '@stateless/NumberViewCard'\r\nimport CubeSpinner from '@stateless/CubeSpinner'\r\nimport firstImage from '@assets/images/88-300x160.jpg'\r\nimport secondImage from '@assets/images/2-300x160.jpg'\r\nimport SpringPng from '@assets/images/spring.png'\r\nimport HePng from '@assets/images/he.png'\r\nimport SongPng from '@assets/images/song.png'\r\nimport XuePng from '@assets/images/xue.png'\r\n\r\nimport {\r\n  oneApiChat,\r\n  prettyObject,\r\n  // randomNum,\r\n  getDirection,\r\n  oneApiImage,\r\n} from '@utils/aidFn'\r\nimport { fireConfetti } from '@utils/confetti'\r\nimport Zoom from 'react-medium-image-zoom'\r\nimport 'react-medium-image-zoom/dist/styles.css'\r\nimport styles from './index.module.less'\r\n\r\n// const boxList = Array.apply(null, Array(10))\r\n\r\nconst code = {\r\n  fileName: './explanations.ts',\r\n  code: `export const = explanations = {\r\nmain : \"This component needs more than the default code block to be displayed\"\r\ndetailed : \"For now, if you want the exact same behaviour, please check the github\"\r\n}`,\r\n  lang: 'typescript',\r\n}\r\n\r\nconst preCode = `\r\n  const GroceryItem: React.FC<GroceryItemProps> = ({ item }) => {\r\n    return (\r\n      <div>\r\n        <h2>{item.name}</h2>\r\n        <p>Price: {item.price}</p>\r\n        <p>Quantity: {item.quantity}</p>\r\n      </div>\r\n    );\r\n  };\r\n`.trim()\r\nconst slugs = ['typescript', 'javascript', 'react', 'html5', 'css', 'prisma', 'nginx', 'vercel', 'docker', 'git']\r\n\r\nconst dataSteps = [\r\n  {\r\n    title: 'Step 1',\r\n    code: 'npx create-react-app my-app',\r\n  },\r\n  {\r\n    title: 'Step 2',\r\n    code: 'cd my-app',\r\n  },\r\n  {\r\n    title: 'Step 3',\r\n    code: 'npm start',\r\n  },\r\n  {\r\n    title: 'Step 4',\r\n    code: 'npm run build',\r\n  },\r\n]\r\n\r\nconst Home = () => {\r\n  const [aiText, setAiText] = useState('')\r\n  const aiTextRef = useRef(null)\r\n  const [isStream, setIsStream] = useState(false)\r\n  const [dateTime, setDateTime] = useState('')\r\n  const curController = useRef(null)\r\n\r\n  const [aiImageList, setAiImageList] = useState([])\r\n\r\n  const mouseEnterRef = useRef(null)\r\n  const [enterDirection, setEnterDirection] = useState('left')\r\n  const handleMouseEnter = (event) => {\r\n    if (!mouseEnterRef.current) return\r\n\r\n    const direction = getDirection(event, mouseEnterRef.current)\r\n    switch (direction) {\r\n      case 0:\r\n        setEnterDirection('top')\r\n        break\r\n      case 1:\r\n        setEnterDirection('right')\r\n        break\r\n      case 2:\r\n        setEnterDirection('bottom')\r\n        break\r\n      case 3:\r\n        setEnterDirection('left')\r\n        break\r\n      default:\r\n        setEnterDirection('left')\r\n        break\r\n    }\r\n  }\r\n\r\n  const [apiKey, setApiKey] = useState(() => '')\r\n  const [chatText, setChatText] = useState('')\r\n  const textareaRef = useRef(null)\r\n\r\n  const changeApiKey = (event) => {\r\n    setApiKey(event.target.value)\r\n  }\r\n\r\n  const changeChatText = (event) => {\r\n    setChatText(event.target.value)\r\n  }\r\n\r\n  const onInputKeyDown = (event) => {\r\n    if (event.metaKey && event.key === 'Enter') {\r\n      onSubmit()\r\n      event.preventDefault()\r\n    }\r\n  }\r\n\r\n  // const [pinValues, setPinValues] = useState(['', '', '', '', '', '', ''])\r\n\r\n  const onSubmit = () => {\r\n    if (chatText.trim() === '') {\r\n      return\r\n    }\r\n    const controller = new AbortController()\r\n    curController.current = controller\r\n    fetchAi(chatText, apiKey, controller)\r\n  }\r\n  const onSubmitImage = () => {\r\n    if (chatText.trim() === '') {\r\n      return\r\n    }\r\n    const controller = new AbortController()\r\n    curController.current = controller\r\n    fetchAiImage(chatText, apiKey, controller)\r\n  }\r\n\r\n  const onStop = () => {\r\n    curController.current.abort()\r\n    // setLoading(false)\r\n    setIsStream(false)\r\n  }\r\n\r\n  const fetchAi = (text, key, controller) => {\r\n    aiTextRef.current = ''\r\n    setAiText(aiTextRef.current)\r\n    const { signal } = controller\r\n    setIsStream(true)\r\n    oneApiChat(\r\n      [\r\n        {\r\n          content: text,\r\n          role: 'user',\r\n        },\r\n      ],\r\n      key,\r\n      signal\r\n    )\r\n      .then((response) => {\r\n        const contentType = response.headers.get('content-type')\r\n        if (!response.ok || !contentType?.startsWith('text/event-stream') || response.status !== 200) {\r\n          if (contentType?.startsWith('text/html') || contentType?.startsWith('text/plain')) {\r\n            const textPlain = response.clone().text()\r\n            textPlain.then((plainText) => {\r\n              setAiText(plainText)\r\n            })\r\n          } else if (contentType?.startsWith('application/json')) {\r\n            const resJson = response.clone().json()\r\n            resJson.then((res) => {\r\n              setAiText(prettyObject(res))\r\n            })\r\n          } else {\r\n            setAiText(response.statusText)\r\n          }\r\n          setIsStream(false)\r\n        } else {\r\n          const reader = response?.body?.getReader()\r\n          const delimiter = '\\n\\n'\r\n          let buffer = ''\r\n          let lastText = ''\r\n          const readStream = () => {\r\n            reader\r\n              .read()\r\n              .then(({ done, value }) => {\r\n                if (done) {\r\n                  setIsStream(false)\r\n                  return\r\n                }\r\n                buffer += new TextDecoder().decode(value)\r\n                while (buffer.includes(delimiter)) {\r\n                  const ind = buffer.indexOf(delimiter)\r\n                  const message = buffer.slice(0, ind)\r\n\r\n                  const dataList = message.split('data: ')\r\n\r\n                  for (const index in dataList) {\r\n                    if (dataList[index] !== '' && dataList[index] !== '[DONE]') {\r\n                      try {\r\n                        const json = JSON.parse(dataList[index])\r\n                        const delta = json.choices[0]?.delta?.content ?? ''\r\n                        lastText += delta\r\n                        setDateTime(new Date().toLocaleString())\r\n                        aiTextRef.current = lastText\r\n                        setAiText(aiTextRef.current)\r\n                      } catch (error) {\r\n                        console.log(error)\r\n                      }\r\n                    }\r\n                  }\r\n                  // 从缓冲区中移除已处理的消息和分隔符\r\n                  buffer = buffer.slice(ind + delimiter.length)\r\n                }\r\n                readStream()\r\n              })\r\n              .catch((error) => {\r\n                console.log('read stream error', error)\r\n              })\r\n          }\r\n          readStream()\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setIsStream(false)\r\n        setAiText(error.message)\r\n      })\r\n  }\r\n  const fetchAiImage = (text, key, controller) => {\r\n    aiTextRef.current = ''\r\n    setAiText(aiTextRef.current)\r\n    setAiImageList([])\r\n    const { signal } = controller\r\n    setIsStream(true)\r\n    oneApiImage(\r\n      [\r\n        {\r\n          content: text,\r\n          role: 'user',\r\n        },\r\n      ],\r\n      key,\r\n      signal\r\n    )\r\n      .then((response) => {\r\n        const contentType = response.headers.get('content-type')\r\n        if (!response.ok || response.status !== 200) {\r\n          if (contentType?.startsWith('text/html') || contentType?.startsWith('text/plain')) {\r\n            const textPlain = response.clone().text()\r\n            textPlain.then((plainText) => {\r\n              setAiText(plainText)\r\n            })\r\n          } else if (contentType?.startsWith('application/json')) {\r\n            const resJson = response.clone().json()\r\n            resJson.then((res) => {\r\n              setAiText(prettyObject(res))\r\n            })\r\n          } else {\r\n            setAiText(response.statusText)\r\n          }\r\n          setIsStream(false)\r\n        } else {\r\n          const resJson = response.clone().json()\r\n          resJson.then((res) => {\r\n            // setAiText(prettyObject(res))\r\n            console.log('res', res)\r\n            if (res.error) return\r\n            setAiImageList(\r\n              res.data.map((item) => ({\r\n                imageUrl: item.url,\r\n                imagePrompt: item.revised_prompt,\r\n              }))\r\n            )\r\n          })\r\n          setIsStream(false)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setIsStream(false)\r\n        setAiText(error.message)\r\n      })\r\n  }\r\n\r\n  const scrollRef = useRef(null)\r\n  const [customElement, setCustomElement] = useState()\r\n  const { scrollDir, scrollPosition } = useDetectScroll({\r\n    target: customElement,\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      setCustomElement(scrollRef.current)\r\n    }\r\n  }, [scrollRef])\r\n\r\n  const [isVisible, setIsVisible] = useState(false)\r\n\r\n  const [barRect, barRef] = useRect()\r\n\r\n  const images = slugs.map((slug) => `https://cdn.simpleicons.org/${slug}/${slug}`)\r\n\r\n  // 使用 useRef 来引用 SVG 元素\r\n  const svgRef = useRef(null)\r\n  const saveSvgAsFile = () => {\r\n    if (svgRef.current) {\r\n      // 获取 SVG 元素的 outerHTML\r\n      const svgContent = svgRef.current.outerHTML\r\n      // 创建 Blob 对象\r\n      const blob = new Blob([svgContent], { type: 'image/svg+xml' })\r\n      // 创建下载链接\r\n      const url = URL.createObjectURL(blob)\r\n      // 创建 <a> 元素\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = 'mySvg.svg'\r\n      // 模拟点击下载链接\r\n      a.click()\r\n      // 释放临时 URL\r\n      URL.revokeObjectURL(url)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FixTabPanel ref={scrollRef}>\r\n      {/* <button onClick={saveSvgAsFile}>保存 SVG</button> */}\r\n      <section className={styles.avatar} style={{ margin: '10px 0', fontSize: 24 }}>\r\n        <ColorfulText text={`React version: ${version}`} />\r\n      </section>\r\n      <section style={{ width: '320px', margin: '30px 0' }}>\r\n        <Input defaultValue={apiKey} placeholder=\"api key\" onChange={changeApiKey} style={{ marginBottom: 20 }} />\r\n        <Flex align=\"center\">\r\n          <Input.TextArea\r\n            ref={textareaRef}\r\n            defaultValue={chatText}\r\n            placeholder=\"来，说点什么呗...Meta + Enter发送\"\r\n            onChange={changeChatText}\r\n            onKeyDown={onInputKeyDown}\r\n            autoSize\r\n            style={{ height: 30, caretColor: '#ff0000' }}\r\n          />\r\n        </Flex>\r\n        <Button\r\n          style={{ margin: '10px' }}\r\n          icon={<SendOutlined rotate={-60} />}\r\n          type=\"primary\"\r\n          disabled={isStream}\r\n          onClick={onSubmit}\r\n        >\r\n          发送\r\n        </Button>\r\n        <Button\r\n          style={{ margin: '10px' }}\r\n          icon={<SendOutlined rotate={-60} />}\r\n          type=\"primary\"\r\n          disabled={isStream}\r\n          onClick={onSubmitImage}\r\n        >\r\n          生成图片\r\n        </Button>\r\n        <Button icon={<SendOutlined rotate={-60} />} type=\"primary\" disabled={!isStream} onClick={onStop}>\r\n          停止\r\n        </Button>\r\n      </section>\r\n      <section className=\"mb-10\">\r\n        {isStream && <div>正在输入...</div>}\r\n        <section style={{ textAlign: 'right', color: '#666' }}>{dateTime}</section>\r\n        <ReMarkdown markdownText={aiText} isLoading={isStream} />\r\n        <section className=\"aiImage\">\r\n          {aiImageList.length > 0 && (\r\n            <>\r\n              {aiImageList.map((item, index) => (\r\n                <div key={index}>\r\n                  <div>{item.imagePrompt}</div>\r\n                  <img src={item.imageUrl} width=\"100%\" alt={item.url} />\r\n                </div>\r\n              ))}\r\n            </>\r\n          )}\r\n        </section>\r\n      </section>\r\n      <section style={{ marginBottom: 15, fontSize: 20 }}>\r\n        I love <span className={styles.circledHighlight}>coding</span> in{' '}\r\n        <AlternatingText alternateText={['JavaScript', 'TypeScript', 'React', 'Vue', 'Remix', 'Node.js']} />.\r\n      </section>\r\n\r\n      <section style={{ marginBottom: 15, fontSize: 20 }}>\r\n        X岁的你，正处在一个特殊的位置：\r\n        <TypeWriter\r\n          text={['年轻到足以创新, 成熟到懂得坚持', '你既有冒险的勇气, 又有控制风险的智慧', '人生不设限，梦想不过期! ']}\r\n          speed={70}\r\n          className=\"text-gray-500\"\r\n          waitTime={1500}\r\n          deleteSpeed={40}\r\n          cursorChar={'_'}\r\n        />\r\n      </section>\r\n      <section style={{ margin: '20px 0', fontSize: 20 }}>\r\n        <MultiDirectionSlide textLeft=\"逐光前行，奔赴新程；\" textRight=\"千山过尽，万里星辰！\" />\r\n      </section>\r\n      <section style={{ margin: '20px 0', fontSize: 20 }}>\r\n        <AnimText animText=\"逐光前行，奔赴新程；千山过尽，万里星辰！\" />\r\n      </section>\r\n      <section style={{ marginBottom: 15, fontSize: 20, overflow: 'hidden' }}>\r\n        This is something\r\n        <SlideText text={['amazing', 'new', 'wonderful', 'beautiful', 'smart']} />\r\n      </section>\r\n      <section style={{ marginBottom: 15, fontSize: 20 }}>\r\n        <SparklesText text=\"千山过尽，万里星辰!\" sparklesCount={5} />\r\n      </section>\r\n\r\n      <section style={{ marginBottom: 15, fontSize: 20 }}>\r\n        <AutoLink text=\"foo bar baz http://example.org bar https://github.com/wkylin/pro-react-admin\" />\r\n      </section>\r\n      <section style={{ marginBottom: 15, fontSize: 20 }}>\r\n        <ShinyText text=\"Just some shiny text!\" disabled={false} speed={3} />\r\n      </section>\r\n      {/* <section style={{ marginBottom: 15, fontSize: 20 }}>\r\n        <BlurText text=\"Isn't this so cool?!\" delay={50} />\r\n      </section> */}\r\n      <section style={{ marginBottom: 15, width: 360, fontSize: 20 }}>\r\n        <TextLoader\r\n          messages={[\r\n            'Preparing your experience',\r\n            'Loading awesome content',\r\n            'Almost there',\r\n            'Just a moment',\r\n            'Getting things ready',\r\n          ]}\r\n        />\r\n      </section>\r\n      <section style={{ marginBottom: 15, width: 360, fontSize: 20 }}>\r\n        <TestimonialCarousel />\r\n      </section>\r\n      {/* <section style={{\r\n        marginBottom: 15,\r\n        width: 360,\r\n        height: 200,\r\n        overflow: 'hidden',\r\n        position: 'relative',\r\n        background: '#111827',\r\n        // transform: 'skew(15deg, 15deg)'\r\n        // maskComposite: 'intersect',\r\n        // maskImage: `\r\n        //   linear-gradient(to right,  transparent, black 5%),\r\n        //   linear-gradient(to left,   transparent, black 5%),\r\n        //   linear-gradient(to bottom, transparent, black 5%),\r\n        //   linear-gradient(to top,    transparent, black 5%)\r\n        // `,\r\n      }}>\r\n        <InteractiveGrid width={12} height={12} squares={[50, 50]} />\r\n      </section> */}\r\n      <section\r\n        style={{\r\n          marginBottom: 15,\r\n          position: 'relative',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <IconCloud images={images} />\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 15,\r\n          position: 'relative',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <NumberViewCard />\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 15,\r\n          fontSize: 20,\r\n          height: 200,\r\n          width: 360,\r\n          background: '#111827',\r\n          position: 'relative',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <Meteors starCount={30} primaryColor=\"#6366f1\" className=\"opacity-30\" />\r\n        <Meteors starCount={25} primaryColor=\"#818cf8\" className=\"opacity-50\" />\r\n        <Meteors starCount={20} primaryColor=\"#ffffff\" className=\"opacity-70\" />\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 15,\r\n          fontSize: 20,\r\n          height: 200,\r\n          width: 360,\r\n          background: '#111827',\r\n        }}\r\n      >\r\n        <SparklesCore\r\n          background=\"transparent\"\r\n          minSize={0.4}\r\n          maxSize={1}\r\n          particleDensity={1200}\r\n          className=\"h-full w-full\"\r\n          particleColor=\"#FFFFFF\"\r\n        />\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 15,\r\n          fontSize: 20,\r\n          height: 200,\r\n          width: 360,\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n        }}\r\n        className=\"bg-slate-900\"\r\n      >\r\n        <BackgroundBoxes />\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 15,\r\n          fontSize: 20,\r\n          height: 200,\r\n          width: 360,\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n        }}\r\n        className=\"bg-slate-900\"\r\n      >\r\n        <MemoizedStars />\r\n      </section>\r\n      <section\r\n        onMouseEnter={handleMouseEnter}\r\n        ref={mouseEnterRef}\r\n        style={{\r\n          marginBottom: 15,\r\n          height: 200,\r\n          width: 360,\r\n          background: '#111827',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          color: '#fff',\r\n        }}\r\n      >\r\n        Direction: {enterDirection}\r\n      </section>\r\n      <section style={{ margin: '20px 0' }}>\r\n        <CompareAll\r\n          firstImage={firstImage}\r\n          secondImage={secondImage}\r\n          firstImageClassName=\"object-cover object-left-top\"\r\n          secondImageClassName=\"object-cover object-left-top\"\r\n          className=\"h-[200px]\"\r\n          slideMode=\"drag\"\r\n        />\r\n      </section>\r\n      <section\r\n        style={{\r\n          margin: '20px 0',\r\n          width: 360,\r\n          height: 200,\r\n          background: '#999',\r\n        }}\r\n      >\r\n        <SquaresGrid\r\n          speed={0.5}\r\n          squareSize={20}\r\n          direction=\"diagonal\" // up, down, left, right, diagonal\r\n          borderColor=\"#222\"\r\n          hoverFillColor=\"#222\"\r\n        />\r\n      </section>\r\n      {/* <section\r\n        style={{\r\n          margin: '20px 0',\r\n          width: 360,\r\n        }}\r\n      >\r\n        <section className=\"relative p-4\">\r\n          <div className={styles.itemCircle} />\r\n          <svg ref={svgRef} style={{ height: '10px', width: '100%' }}>\r\n            <path\r\n              d=\"M 0 0 L 5000 0\"\r\n              stroke-miterlimit=\"10\"\r\n              fill=\"none\"\r\n              stroke=\"#595959\"\r\n              stroke-width=\"5\"\r\n              stroke-dasharray=\"10\"\r\n              stroke-dashoffset=\"5000\"\r\n            >\r\n              <animate\r\n                attributeName=\"stroke-dashoffset\"\r\n                values=\"100;0\"\r\n                dur=\"3s\"\r\n                calcMode=\"linear\"\r\n                repeatCount=\"indefinite\"\r\n              ></animate>\r\n            </path>\r\n          </svg>\r\n          <div className={styles.itemCircleTail} />\r\n        </section>\r\n      </section> */}\r\n      <section className={styles.line} />\r\n      <section className={styles.linear} />\r\n\r\n      {/* <section>\r\n        <AvatarCard avatar=\"https://picsum.photos/seed/picsum/300/160\" text=\"Hi, I'm a developer.\" />\r\n      </section> */}\r\n      <section>\r\n        <IsometricCard text=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti repellat, consequuntur doloribus voluptate esse iure?\" />\r\n      </section>\r\n      <LineBordered text=\"A line bordered text.\" />\r\n      <section\r\n        style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          marginTop: 10,\r\n          marginBottom: 40,\r\n        }}\r\n      >\r\n        <Atom /> <Merge /> <GitMerge /> <GitPullRequestArrow />\r\n      </section>\r\n      <section style={{ marginBottom: 40, fontSize: 16 }}>\r\n        <h2>Scroll direction: {`${scrollDir}`}</h2>\r\n        <p>\r\n          Scroll position - Top: {scrollPosition.top}, Bottom: {scrollPosition.bottom}\r\n        </p>\r\n      </section>\r\n      <section style={{ marginBottom: 40, fontSize: 16 }}>\r\n        <h3>React Animate On Scroll.</h3>\r\n        <h3>\r\n          <AutoLink text=\"https://motion.dev/ https://gsap.com/ https://www.react-spring.dev/ https://use-gesture.netlify.app/\" />\r\n        </h3>\r\n        <h3 style={{ marginBottom: 40 }}>\r\n          <AutoLink text=\"https://www.npmjs.com/package/react-animate-on-scroll https://www.npmjs.com/package/react-scroll https://github.com/wellyshen/react-cool-inview\" />\r\n        </h3>\r\n        <ScrollAnimation>\r\n          {/* <LazyLoadImage src=\"https://picsum.photos/seed/picsum/300/160\" alt=\"Strawberries\" /> */}\r\n          <LazyLoadImage src={secondImage} alt=\"Strawberries\" />\r\n        </ScrollAnimation>\r\n      </section>\r\n      {/* <section style={{ marginBottom: 40, fontSize: 36 }}>\r\n        <Typewriter\r\n          options={{\r\n            strings: ['Software Developer.', 'Full Stack Developer.', 'Open Source Contributor.'],\r\n            autoStart: true,\r\n            loop: true,\r\n            deleteSpeed: 50,\r\n          }}\r\n        />\r\n      </section> */}\r\n      <section>\r\n        <GradientTracking />\r\n      </section>\r\n\r\n      <section style={{ margin: 40 }}>\r\n        <BreatheText />\r\n      </section>\r\n\r\n      <section style={{ margin: '60px 0 40px 40px' }}>\r\n        <div className={styles['video-box']}>\r\n          <div className={styles['video-btn']}>b</div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* <section style={{ marginBottom: 40 }}>\r\n        <ShiftingCard />\r\n      </section> */}\r\n      {/* <section style={{ marginBottom: 40 }}>\r\n        <PinInput onChange={(value, index, values) => setPinValues(values)} values={pinValues} />\r\n      </section> */}\r\n      <section\r\n        style={{\r\n          marginBottom: 40,\r\n          width: 360,\r\n          height: 200,\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <AnimateOnScreen.FadeIn>\r\n          <AvatarCard avatar={XuePng} text=\"Hi, I'm a developer.\" />\r\n        </AnimateOnScreen.FadeIn>\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 40,\r\n          width: 360,\r\n          height: 200,\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <AnimateOnScreen.FadeUp>\r\n          <img\r\n            src={SongPng}\r\n            alt=\"\"\r\n            style={{\r\n              maskImage: 'linear-gradient(to top, transparent, black 20%, black 80%, transparent)',\r\n            }}\r\n          />\r\n        </AnimateOnScreen.FadeUp>\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 40,\r\n          width: 360,\r\n          height: 200,\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <AnimateOnScreen.ScaleIn triggerOnce={false}>\r\n          <>\r\n            <img src={SpringPng} alt=\"\" />\r\n            <section className={styles['blend-me']}>Mix Blend Mode</section>\r\n          </>\r\n        </AnimateOnScreen.ScaleIn>\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 40,\r\n          width: 360,\r\n          height: 200,\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <AnimateOnScreen.DiyAnimation\r\n          from={{ opacity: 0, transform: 'translate(-100%, 0)' }}\r\n          to={{ opacity: 1, transform: 'translate(0, 0)' }}\r\n          triggerOnce={true}\r\n        >\r\n          <Zoom>\r\n            <img src={HePng} alt=\"\" />\r\n          </Zoom>\r\n        </AnimateOnScreen.DiyAnimation>\r\n      </section>\r\n      <section style={{ marginBottom: 40, display: 'flex' }}>\r\n        <SpotlightCard className=\"my-spot\" style={{ width: 360, height: 200, color: '#fff' }}>\r\n          <section />\r\n        </SpotlightCard>\r\n      </section>\r\n      <section style={{ margin: '20px 0', fontSize: 24 }}>\r\n        <BlurFade delay={0.25} inView>\r\n          这一年，以笔为剑，以梦为马，在生活的画布上，绘就属于自己的壮丽史诗。\r\n        </BlurFade>\r\n      </section>\r\n      <section style={{ margin: '20px 0', fontSize: 24 }}>\r\n        <GradualSpacing text=\"2025 年，是充满希望的一年。让我们放下过去的包袱，轻装上阵。用积极的心态去面对生活，用坚定的信念去追逐梦想。相信自己，只要我们努力奋斗，就一定能创造出属于自己的精彩人生。让我们一起逐光前行，奔赴新程，书写属于我们的辉煌篇章！\" />\r\n      </section>\r\n\r\n      <section style={{ margin: '20px 0' }}>\r\n        <ContentPlaceholder />\r\n      </section>\r\n      <section\r\n        // className={styles.box}\r\n        style={{\r\n          marginBottom: 10,\r\n          width: 360,\r\n          height: 200,\r\n          position: 'relative',\r\n          backgroundColor: 'rgba(0, 0,0, 0.8)',\r\n          borderRadius: 8,\r\n        }}\r\n      >\r\n        <section className={styles.dotMask} ref={barRef}>\r\n          dot mask\r\n        </section>\r\n        <BorderBeam size={100} />\r\n      </section>\r\n      <section style={{ marginBottom: 40, fontSize: 18 }}>\r\n        <section>RectResult.</section>\r\n        width: {Number.parseInt(barRect?.width)} height: {Number.parseInt(barRect?.height)} top:{' '}\r\n        {Number.parseInt(barRect?.top)} bottom: {Number.parseInt(barRect?.bottom)} right:{' '}\r\n        {Number.parseInt(barRect?.right)} left: {Number.parseInt(barRect?.left)}\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 40,\r\n          height: 200,\r\n          width: 360,\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <MeshGradientBackground />\r\n      </section>\r\n      <section\r\n        style={{\r\n          marginBottom: 20,\r\n        }}\r\n      >\r\n        <ScratchToReveal\r\n          width={360}\r\n          height={200}\r\n          minScratchPercentage={70}\r\n          className=\"flex items-center justify-center overflow-hidden rounded-2xl border-2 bg-gray-100\"\r\n        >\r\n          <p className=\"text-9xl\">✨</p>\r\n        </ScratchToReveal>\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <AnimateRipple>Click Me</AnimateRipple>\r\n      </section>\r\n\r\n      <section style={{ margin: 20 }}>\r\n        <section className={styles.effect}> Hello CSS</section>\r\n      </section>\r\n      <section style={{ margin: 20 }} className={styles.maskBox}>\r\n        <section className={styles.watermark}>water mark</section>\r\n        mask\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <button className={styles.button} onClick={fireConfetti}>\r\n          <span className={styles['button-label']}>Click Me</span>\r\n        </button>\r\n      </section>\r\n\r\n      {/* <section style={{ position: 'relative', margin: '80px 0 160px 100px' }}>\r\n        <div className={styles['circle-1']}></div>\r\n        <div className={styles['circle-2']}></div>\r\n        <div className={styles['circle-3']}></div>\r\n        <div className={styles['circle-4']}></div>\r\n      </section> */}\r\n\r\n      <section style={{ margin: 20 }} className={styles.eHElAY}>\r\n        Hi, React!\r\n      </section>\r\n      <section style={{ margin: 20 }} className=\"z-30 flex w-full items-center justify-start gap-8\">\r\n        <SlideButton\r\n          backgroundColor=\"#0c002b\"\r\n          textColor=\"#1670f0\"\r\n          borderStartColor=\"rgba(22, 112, 240, 0.1)\"\r\n          borderEndColor=\"rgba(22, 112, 240, 0.7)\"\r\n        >\r\n          Button\r\n        </SlideButton>\r\n        <SlideButton\r\n          backgroundColor=\"#1a0b2e\"\r\n          textColor=\"#ff00ff\"\r\n          borderStartColor=\"rgba(255, 0, 255, 0.1)\"\r\n          borderEndColor=\"rgba(0, 255, 255, 0.7)\"\r\n        >\r\n          Button\r\n        </SlideButton>\r\n      </section>\r\n\r\n      <section>\r\n        <CubeSpinner />\r\n      </section>\r\n      {/* <section style={{ margin: '20px 0', fontSize: 40 }}>\r\n        <CountUp start={20} end={10000} duration={10} enableScrollSpy />\r\n      </section> */}\r\n      <section style={{ margin: '20px 0', fontSize: 40 }}>\r\n        <NumberFlowFix />\r\n      </section>\r\n\r\n      <section style={{ position: 'relative', fontSize: 36 }}>\r\n        I build\r\n        <FlipWords\r\n          className=\"mx-1 px-4 py-2\"\r\n          words={['creative', 'interactive', 'beautiful', 'modern']}\r\n          wordClassName=\"text-blue-500 font-bold\"\r\n        />\r\n        <span className=\"block sm:inline\">websites and apps.</span>\r\n        {/* <AnimateWave /> */}\r\n      </section>\r\n      {/* <section style={{ margin: 20 }}>\r\n        <AdvancedCodeBlock code={code.code} fileName={code.fileName} lang={code.lang} />\r\n      </section> */}\r\n      <section style={{ margin: 20 }}>\r\n        <ReactSignature />\r\n      </section>\r\n\r\n      <section style={{ margin: 20 }}>\r\n        {dataSteps.map((step, index) => (\r\n          <StaticStepper.StaticStep\r\n            key={step.title}\r\n            step={index + 1}\r\n            title={step.title}\r\n            stepClassName=\"bg-blue-100 text-blue-600 border-blue-200\"\r\n            titleClassName=\"text-blue-500 font-bold\"\r\n          >\r\n            <StaticStepper.CodeContainer>{step.code}</StaticStepper.CodeContainer>\r\n          </StaticStepper.StaticStep>\r\n        ))}\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <FeatureAny />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <SkeletonFix />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <ResponsiveMasonry columnsCountBreakPoints={{ 350: 1, 750: 2, 900: 6 }}>\r\n          <Masonry gutter=\"10px\">\r\n            <section\r\n              key=\"masonry-1\"\r\n              style={{\r\n                height: 100,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-2\"\r\n              style={{\r\n                height: 200,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-3\"\r\n              style={{\r\n                height: 150,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-4\"\r\n              style={{\r\n                height: 150,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-5\"\r\n              style={{\r\n                height: 200,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-6\"\r\n              style={{\r\n                height: 100,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-7\"\r\n              style={{\r\n                height: 200,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-8\"\r\n              style={{\r\n                height: 150,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-9\"\r\n              style={{\r\n                height: 100,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-10\"\r\n              style={{\r\n                height: 150,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-11\"\r\n              style={{\r\n                height: 100,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-12\"\r\n              style={{\r\n                height: 200,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-13\"\r\n              style={{\r\n                height: 150,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n            <section\r\n              key=\"masonry-14\"\r\n              style={{\r\n                height: 150,\r\n                width: '100%',\r\n                border: '1px solid #ccc',\r\n                background: '#aaa',\r\n              }}\r\n            />\r\n          </Masonry>\r\n        </ResponsiveMasonry>\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <InViewBasicMultiple />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <TagCloud />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <Marquee autoFill direction=\"left\" gradient gradientColor=\"rgba(255, 255, 255, 0.8)\">\r\n          <div\r\n            style={{\r\n              width: 200,\r\n              height: 100,\r\n              lineHeight: '100px',\r\n              textAlign: 'center',\r\n              background: '#aaa',\r\n              margin: '0 10px',\r\n              borderRadius: 8,\r\n              // transform: 'rotateX(60deg) rotateY(0deg) rotateZ(45deg)'\r\n            }}\r\n          >\r\n            React\r\n          </div>\r\n        </Marquee>\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <Marquee autoFill direction=\"right\" gradient gradientColor=\"rgba(255, 255, 255, 0.8)\">\r\n          <div\r\n            style={{\r\n              width: 200,\r\n              height: 100,\r\n              lineHeight: '100px',\r\n              textAlign: 'center',\r\n              background: '#aaa',\r\n              margin: '0 10px',\r\n              borderRadius: 8,\r\n            }}\r\n          >\r\n            Vue\r\n          </div>\r\n        </Marquee>\r\n      </section>\r\n      <section style={{ margin: 0 }}>\r\n        <DottedStepper />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <ShiCode preCode={preCode} />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <DynamicBackground />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <UserIP />\r\n      </section>\r\n      <section style={{ margin: 20 }}>\r\n        <AutoSlider />\r\n      </section>\r\n    </FixTabPanel>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\fullscreen\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'collapsed' is assigned a value but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCollapsed' is assigned a value but never used.","line":18,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react'\nimport { Layout, Drawer } from 'antd'\nimport { useStore } from '@/store'\nimport { ProTabProvider } from '@app-hooks/proTabsContext'\nimport PointerMove from '@stateless/PointerMove'\nimport MagicTrail from '@stateless/MagicTrail'\nimport SettingDrawer from '@stateless/SettingDrawer'\nimport ProHeader from './proHeader'\nimport ProSider from './proSider'\nimport ProContent from './proContent'\nimport ProSecNav from './proSecNav'\nimport styles from './index.module.less'\nimport { useProThemeContext } from '@theme/hooks'\n\nconst ProLayout = () => {\n  const layoutRef = useRef(null)\n  const [settingOpen, setSettingOpen] = useState(false)\n  const [collapsed, setCollapsed] = useState(false)\n  const [mobileOpen, setMobileOpen] = useState(false)\n  const isMobile = useStore((s) => s.isMobile)\n\n  const { themeSettings } = useProThemeContext()\n  const { layout, themeMode, navTheme } = themeSettings\n\n  // 在暗黑模式下，导航栏强制为暗色，否则跟随 navTheme 设置\n  const effectiveNavTheme = themeMode === 'dark' ? 'dark' : navTheme\n\n  return (\n    <Layout className={styles.layout} ref={layoutRef}>\n      {themeSettings.pointerMove ? <PointerMove /> : null}\n      {themeSettings.magicTrail ? (\n        <MagicTrail\n          containerRef={layoutRef}\n          colors={['#f59e0b', '#ec4899', '#8b5cf6', '#38bdf8', '#4ade80']}\n          trailLength={35}\n          particleCount={75}\n          decay={0.03}\n          smoothing={0.65}\n        />\n      ) : null}\n      <ProTabProvider>\n        <ProHeader\n          layout={layout}\n          onSettingClick={() => setSettingOpen(true)}\n          isMobile={isMobile}\n          onMobileMenuClick={() => setMobileOpen(true)}\n        >\n          {layout === 'top' && !isMobile ? <ProSecNav mode=\"horizontal\" theme={effectiveNavTheme} /> : null}\n        </ProHeader>\n        <Layout className={styles.layout}>\n          {isMobile ? (\n            <Drawer\n              placement=\"left\"\n              onClose={() => setMobileOpen(false)}\n              open={mobileOpen}\n              size={208}\n              styles={{ body: { padding: 0 } }}\n              closable={false}\n            >\n              <ProSider theme={effectiveNavTheme} isMobile={true}>\n                <ProSecNav mode=\"inline\" theme={effectiveNavTheme} onMenuClick={() => setMobileOpen(false)} />\n              </ProSider>\n            </Drawer>\n          ) : (\n            layout !== 'top' && (\n              <ProSider theme={effectiveNavTheme}>\n                <ProSecNav mode=\"inline\" theme={effectiveNavTheme} />\n              </ProSider>\n            )\n          )}\n          <ProContent />\n        </Layout>\n      </ProTabProvider>\n\n      <SettingDrawer open={settingOpen} onClose={() => setSettingOpen(false)} />\n    </Layout>\n  )\n}\n\nexport default ProLayout\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\primaryNav\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'show' is defined but never used. Allowed unused args must match /^_/u.","line":85,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Space } from 'antd'\nimport { DashboardOutlined, ProjectOutlined, HomeOutlined } from '@ant-design/icons'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { usePermission } from '@src/app-hooks/usePermission'\nimport { useTranslation } from 'react-i18next'\n\nexport const usePrimaryNavItems = () => {\n  const { redirectTo } = useSafeNavigate()\n  const { routes } = usePermission()\n\n  const matchWildcard = (text, pattern) => {\n    if (pattern === '*') return true\n    if (!pattern.includes('*')) return text === pattern\n\n    const parts = pattern.split('*').filter((p) => p.length > 0)\n    if (parts.length === 0) return true\n\n    let pos = 0\n    const startsWithWildcard = pattern.startsWith('*')\n    const endsWithWildcard = pattern.endsWith('*')\n\n    if (!startsWithWildcard) {\n      const first = parts[0]\n      if (!text.startsWith(first)) return false\n      pos = first.length\n    }\n\n    for (let i = startsWithWildcard ? 0 : 1; i < parts.length; i += 1) {\n      const part = parts[i]\n      const idx = text.indexOf(part, pos)\n      if (idx === -1) return false\n      pos = idx + part.length\n    }\n\n    if (!endsWithWildcard) {\n      const last = parts[parts.length - 1]\n      return text.endsWith(last)\n    }\n\n    return true\n  }\n\n  const hasAccess = (path) => {\n    if (!routes || routes.length === 0) return false\n    if (path === '/') return true\n    return routes.some((route) => {\n      if (route === path) return true\n      if (path.startsWith(route + '/')) return true\n      if (route.includes('*')) {\n        return matchWildcard(path, route)\n      }\n      return false\n    })\n  }\n\n  const items = [\n    {\n      key: 'home',\n      label: '首页',\n      i18nKey: 'nav.home',\n      icon: <HomeOutlined style={{ fontSize: 16 }} />,\n      onClick: () => redirectTo('/'),\n      show: true,\n    },\n    {\n      key: 'dashboard',\n      label: '多路由设置',\n      i18nKey: 'nav.dashboard',\n      icon: <DashboardOutlined style={{ fontSize: 16 }} />,\n      onClick: () => redirectTo('dashboard'),\n      show: hasAccess('/dashboard'),\n    },\n    {\n      key: 'portfilo',\n      label: 'My Portfilo',\n      i18nKey: 'nav.portfolio',\n      icon: <ProjectOutlined style={{ fontSize: 16 }} />,\n      onClick: () => redirectTo('portfilo'),\n      show: hasAccess('/portfilo'),\n    },\n  ]\n\n  return items.filter((item) => item.show).map(({ show, ...rest }) => rest)\n}\n\nconst PrimaryNav = ({ layout = '' }) => {\n  const { t } = useTranslation()\n  const items = usePrimaryNavItems()\n  const filterItems = layout === 'top' ? items.filter((item) => item.key !== 'home') : items\n  return (\n    <Space style={{ marginRight: 16 }}>\n      {filterItems.map((item) => (\n        <Button key={item.key} type=\"link\" icon={item.icon} onClick={item.onClick}>\n          {item.i18nKey ? t(item.i18nKey) : item.label}\n        </Button>\n      ))}\n    </Space>\n  )\n}\n\nPrimaryNav.propTypes = {\n  layout: PropTypes.string,\n}\n\nexport default PrimaryNav\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proContent\\breadcrumb\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  21 |     if (chain.length === 0) {\n  22 |       // 没找到路由，显示 404 状态\n> 23 |       setBreadcrumbList([\n     |       ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  24 |         {\n  25 |           path: '/',\n  26 |           name: '首页',","line":23,"column":7,"nodeType":null,"endLine":23,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { Breadcrumb, Button } from 'antd'\nimport { useTranslation } from 'react-i18next'\nimport rootRouter from '@src/routers'\nimport { findRouteChain } from './util'\nimport styles from './index.module.less'\n\nconst ProBreadcrumb = () => {\n  const { pathname } = useLocation()\n  const { redirectTo } = useSafeNavigate()\n  const [breadcrumbList, setBreadcrumbList] = useState([])\n\n  const { t } = useTranslation()\n\n  useEffect(() => {\n    // 使用新的递归查找算法，支持任意层级\n    const chain = findRouteChain(rootRouter, pathname)\n\n    if (chain.length === 0) {\n      // 没找到路由，显示 404 状态\n      setBreadcrumbList([\n        {\n          path: '/',\n          name: '首页',\n          key: '/',\n          i18nKey: 'home',\n        },\n        {\n          path: '404',\n          name: 'Not Found',\n          key: '/404',\n          i18nKey: 'Not Found',\n        },\n      ])\n    } else {\n      // 格式化路由链\n      const formattedList = chain.map((item) => ({\n        path: item.path,\n        key: item.key || item.path,\n        name: item.name,\n        // 移除 isSubMenu 的自动推断，或者仅用于样式区分，不影响点击\n        // isSubMenu: item.isSubMenu || (item.children && item.children.length > 0),\n        i18nKey: item.i18nKey,\n      }))\n\n      // 确保首页存在\n      if (formattedList.length > 0 && formattedList[0].key !== '/') {\n        formattedList.unshift({\n          path: '/',\n          name: '首页',\n          key: '/',\n          i18nKey: 'home',\n        })\n      }\n\n      setBreadcrumbList(formattedList)\n    }\n  }, [pathname])\n\n  const linkTo = (path) => {\n    redirectTo(path)\n  }\n\n  const breadcrumbItem = () =>\n    breadcrumbList.map((item, index) => {\n      const isLast = index === breadcrumbList.length - 1\n      // 只要不是最后一项，都允许点击跳转\n      // 除非显式配置了 clickable: false (预留扩展)\n      const canClick = !isLast\n\n      const content = !canClick ? (\n        <span>{item.i18nKey ? t(item.i18nKey) : item.name}</span>\n      ) : (\n        <Button type=\"link\" style={{ padding: 0, height: 'auto' }} onClick={() => linkTo(item.path || item.key)}>\n          {item.i18nKey ? t(item.i18nKey) : item.name}\n        </Button>\n      )\n\n      return {\n        title: (\n          <span className={styles.breadcrumb} key={item.key || item.path}>\n            {content}\n          </span>\n        ),\n        key: item.key || item.path,\n      }\n    })\n\n  return <Breadcrumb separator=\">\" items={breadcrumbItem()} />\n}\n\nexport default ProBreadcrumb\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proContent\\breadcrumb\\util.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proContent\\index.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  28 |     const { tabKey, title, element, i18nKey } = getKeyName(full)\n  29 |\n> 30 |     setPanesItem({\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  31 |       title,\n  32 |       content: element,\n  33 |       key: tabKey,","line":30,"column":5,"nodeType":null,"endLine":30,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport { Layout, theme, Space } from 'antd'\nimport { useLocation } from 'react-router-dom'\nimport { getKeyName } from '@utils/publicFn'\nimport ProBreadcrumb from './breadcrumb'\nimport ProTabs from '../proTabs'\nimport styles from './index.module.less'\n\nconst { Content, Header, Footer } = Layout\n\nconst ProContent = () => {\n  const [tabActiveKey, setTabActiveKey] = useState('home')\n  const [panesItem, setPanesItem] = useState({\n    title: '',\n    content: null,\n    key: '',\n    closable: false,\n    path: '',\n    i18nKey: '',\n  })\n  const { pathname, search } = useLocation()\n  const {\n    token: { colorBgContainer, colorBgLayout },\n  } = theme.useToken()\n  useEffect(() => {\n    // pass full path (including search) so getKeyName can consider query params\n    const full = search ? pathname + search : pathname\n    const { tabKey, title, element, i18nKey } = getKeyName(full)\n\n    setPanesItem({\n      title,\n      content: element,\n      key: tabKey,\n      closable: tabKey !== '/',\n      path: full,\n      i18nKey,\n    })\n    setTabActiveKey(tabKey)\n  }, [pathname, search])\n\n  return (\n    <Layout className={styles.layout} id=\"fullScreen\">\n      <Header className=\"layout-header\" style={{ backgroundColor: colorBgLayout }}>\n        <section className=\"flex items-center justify-between\">\n          <ProBreadcrumb />\n          {/* <ClockFace /> */}\n        </section>\n      </Header>\n      <Content className=\"layout-content\" id=\"fullScreenContent\" style={{ backgroundColor: colorBgContainer }}>\n        <ProTabs panesItem={panesItem} tabActiveKey={tabActiveKey} />\n      </Content>\n      <Footer className=\"layout-footer\">\n        <Space>&copy; {new Date().getFullYear()} Pro React Admin</Space>\n      </Footer>\n    </Layout>\n  )\n}\n\nexport default ProContent\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proHeader\\index.jsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  353 |   const tokenValue = getLocalStorage('token')?.token || 'wkylin.w'\n  354 |   const items = React.useMemo(\n> 355 |     () => buildUserMenuItems({ t, tokenValue, isAuthenticated, user, redirectTo }),\n      |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  356 |     [t, tokenValue, isAuthenticated, user, redirectTo]\n  357 |   )\n  358 |","line":355,"column":30,"nodeType":null,"endLine":355,"endColumn":82}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport LightIcon from '@assets/svg/light.svg'\r\nimport DarkIcon from '@assets/svg/dark.svg'\r\nimport { useProThemeContext } from '@src/theme/hooks'\r\nimport { Layout, Space, Dropdown, theme, Avatar, message, Tooltip, Button } from 'antd'\r\nimport GlobalSearch from '@src/components/GlobalSearch'\r\nimport {\r\n  UserOutlined,\r\n  LogoutOutlined,\r\n  GithubOutlined,\r\n  SmileOutlined,\r\n  SettingOutlined,\r\n  MenuOutlined,\r\n  MoreOutlined,\r\n  RocketOutlined,\r\n  BookOutlined,\r\n  SearchOutlined,\r\n} from '@ant-design/icons'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { removeLocalStorage, getLocalStorage } from '@utils/publicFn'\r\nimport { useTranslation } from 'react-i18next'\r\nimport LanguageSwitcher from '@stateless/LanguageSwitcher'\r\nimport GradientAnimationText from '@stateless/GradientAnimation'\r\n\r\nimport Logo from '@assets/images/pro-logo.png'\r\nimport SoundBar from '@stateless/SoundBar'\r\nimport NotificationDrawer from '@stateless/NotificationDrawer'\r\n\r\nimport { useAuth } from '@src/service/useAuth'\r\nimport { authService } from '@src/service/authService'\r\nimport { permissionService } from '@src/service/permissionService'\r\nimport PrimaryNav, { usePrimaryNavItems } from '../primaryNav'\r\nimport styles from './index.module.less'\r\nimport Fullscreen from '../fullscreen'\r\nimport { useStore } from '@/store'\r\n\r\nconst DENIED_TIP = '您没有权限访问该页面'\r\n\r\nconst safeNotifyDeniedOnce = async ({ path, lastDeniedRef, messageApi }) => {\r\n  if (!path) return\r\n  if (lastDeniedRef?.current === path) return\r\n  if (lastDeniedRef) lastDeniedRef.current = path\r\n\r\n  try {\r\n    await Promise.resolve(messageApi.open({ type: 'error', content: DENIED_TIP }))\r\n  } catch (err) {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn('[ProHeader] messageApi.open failed', err)\r\n    }\r\n    try {\r\n      await Promise.resolve(message.error(DENIED_TIP))\r\n    } catch (err2) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.warn('[ProHeader] notify denied failed', err2)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst buildUserMenuItems = ({ t, tokenValue, isAuthenticated, user, redirectTo }) => [\r\n  {\r\n    key: 'token',\r\n    label: <>{tokenValue}</>,\r\n    disabled: true,\r\n  },\r\n  { type: 'divider' },\r\n  {\r\n    key: '1',\r\n    label: <Space>{t('header.userCenter')}</Space>,\r\n    icon: <UserOutlined />,\r\n    onClick: () => {\r\n      redirectTo('/profile')\r\n    },\r\n  },\r\n  {\r\n    key: '2',\r\n    label: <Space>{t('header.userSettings')}</Space>,\r\n    icon: <SmileOutlined />,\r\n    onClick: () => {\r\n      redirectTo('/setting')\r\n    },\r\n  },\r\n  {\r\n    key: '3',\r\n    label: <Space>{t('header.contactMe')}</Space>,\r\n    icon: <SmileOutlined />,\r\n    onClick: () => {\r\n      redirectTo('/contact')\r\n    },\r\n  },\r\n  {\r\n    key: '4',\r\n    label: <Space>{t('header.logout')}</Space>,\r\n    icon: <LogoutOutlined />,\r\n    onClick: () => {\r\n      if (isAuthenticated && user) {\r\n        authService.logout()\r\n        return\r\n      }\r\n\r\n      safeLogoutCleanup()\r\n      removeLocalStorage('token')\r\n      redirectTo('/signin')\r\n    },\r\n  },\r\n]\r\n\r\nconst buildMobileMoreItems = ({\r\n  t,\r\n  primaryNavItems,\r\n  onSettingClick,\r\n  redirectGithub,\r\n  redirectWiki,\r\n  redirectWrapped,\r\n}) => [\r\n  ...(Array.isArray(primaryNavItems) ? primaryNavItems : []).map((it) => ({\r\n    ...it,\r\n    label: it?.i18nKey ? t(it.i18nKey) : it?.label,\r\n  })),\r\n  { type: 'divider' },\r\n  {\r\n    key: 'notification',\r\n    label: <NotificationDrawer />,\r\n    icon: null,\r\n    onClick: undefined,\r\n  },\r\n  {\r\n    key: 'github',\r\n    label: t('header.github'),\r\n    icon: <GithubOutlined style={{ fontSize: 16 }} />,\r\n    onClick: redirectGithub,\r\n  },\r\n  {\r\n    key: 'wiki',\r\n    label: t('header.wiki'),\r\n    icon: <BookOutlined style={{ fontSize: 16 }} />,\r\n    onClick: redirectWiki,\r\n  },\r\n  {\r\n    key: 'wrapped',\r\n    label: t('header.wrapped'),\r\n    icon: <RocketOutlined style={{ fontSize: 16 }} />,\r\n    onClick: redirectWrapped,\r\n  },\r\n  {\r\n    key: 'setting',\r\n    label: t('header.preferences'),\r\n    icon: <SettingOutlined style={{ fontSize: 16 }} />,\r\n    onClick: onSettingClick,\r\n  },\r\n]\r\n\r\nconst safeLogoutCleanup = () => {\r\n  try {\r\n    // 兼容“测试账号登录”(仅 token) 的登出路径，确保权限缓存被清理\r\n    permissionService.logoutCleanup()\r\n  } catch (err) {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn('[ProHeader] logoutCleanup failed', err)\r\n    }\r\n  }\r\n}\r\n\r\nconst redirectToWithPermission = async ({ path, navigate, messageApi, lastDeniedRef }) => {\r\n  // 公共页面直接跳转\r\n  if (!path || path === '/signin' || path === '/signup' || path === '/') {\r\n    navigate(path)\r\n    return\r\n  }\r\n\r\n  try {\r\n    const ok = await permissionService.canAccessRoute(path, false)\r\n    if (!ok) {\r\n      await safeNotifyDeniedOnce({ path, lastDeniedRef, messageApi })\r\n      return\r\n    }\r\n    navigate(path)\r\n  } catch (error) {\r\n    // 出错时保守处理为不跳转并显示提示\r\n\r\n    console.error('redirect permission check failed', error)\r\n    await safeNotifyDeniedOnce({ path, lastDeniedRef, messageApi })\r\n  }\r\n}\r\n\r\nconst renderMobileMenuTrigger = (isMobile, onMobileMenuClick) => {\r\n  if (!isMobile) return null\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onMobileMenuClick}\r\n      style={{\r\n        margin: '0 16px',\r\n        cursor: 'pointer',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        background: 'transparent',\r\n        border: 'none',\r\n        padding: 0,\r\n      }}\r\n    >\r\n      <MenuOutlined style={{ fontSize: 20 }} />\r\n    </button>\r\n  )\r\n}\r\n\r\nconst renderDesktopNav = (isMobile, layout, children) => {\r\n  if (isMobile) return null\r\n  return (\r\n    <div className={styles.headerMenu} style={{ flex: 1, minWidth: 0, display: 'flex', alignItems: 'center' }}>\r\n      <PrimaryNav layout={layout} />\r\n      {layout === 'top' && <div style={{ flex: 1, minWidth: 0 }}>{children}</div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst renderDesktopActions = ({\r\n  t,\r\n  iconButtonStyle,\r\n  isDark,\r\n  handleThemeToggle,\r\n  onSettingClick,\r\n  redirectGithub,\r\n  redirectWiki,\r\n  redirectWrapped,\r\n  setSearchOpen,\r\n}) => (\r\n  <Space orientation=\"horizontal\" style={{ paddingRight: 8 }}>\r\n    <SoundBar buttonStyle={{ border: 'none' }} />\r\n    <Tooltip title={t('header.searchTooltip')} placement=\"bottom\">\r\n      <Button icon={<SearchOutlined />} size=\"small\" style={iconButtonStyle} onClick={() => setSearchOpen(true)} />\r\n    </Tooltip>\r\n\r\n    <NotificationDrawer variant=\"button\" buttonStyle={iconButtonStyle} />\r\n    <Tooltip title={t('header.github')} placement=\"bottom\">\r\n      <Button\r\n        icon={<GithubOutlined style={{ fontSize: 16 }} />}\r\n        size=\"small\"\r\n        type=\"default\"\r\n        onClick={redirectGithub}\r\n        style={iconButtonStyle}\r\n      />\r\n    </Tooltip>\r\n    <Fullscreen buttonStyle={iconButtonStyle} />\r\n    <Tooltip title={isDark ? t('header.themeLight') : t('header.themeDark')} placement=\"bottom\">\r\n      <Button\r\n        onClick={handleThemeToggle}\r\n        size=\"small\"\r\n        style={{ margin: '0 4px', fontSize: 16 }}\r\n        icon={\r\n          isDark ? (\r\n            <LightIcon width={16} height={16} style={{ width: 16, height: 16 }} />\r\n          ) : (\r\n            <DarkIcon width={16} height={16} style={{ width: 16, height: 16 }} />\r\n          )\r\n        }\r\n      />\r\n    </Tooltip>\r\n    <Tooltip title={t('header.preferences')} placement=\"bottom\">\r\n      <Button icon={<SettingOutlined />} size=\"small\" onClick={onSettingClick} style={iconButtonStyle} />\r\n    </Tooltip>\r\n    <Tooltip title={t('header.wrappedTooltip')} placement=\"bottom\">\r\n      <Button\r\n        icon={<RocketOutlined style={{ fontSize: 16 }} />}\r\n        size=\"small\"\r\n        onClick={redirectWrapped}\r\n        style={iconButtonStyle}\r\n      />\r\n    </Tooltip>\r\n    <Tooltip title={t('header.wiki')} placement=\"bottom\">\r\n      <Button\r\n        icon={<BookOutlined style={{ fontSize: 16 }} />}\r\n        size=\"small\"\r\n        onClick={redirectWiki}\r\n        style={iconButtonStyle}\r\n      />\r\n    </Tooltip>\r\n    <LanguageSwitcher />\r\n  </Space>\r\n)\r\n\r\nconst renderMobileActions = ({ t, isTopDarkHeader, isDark, handleThemeToggle, mobileMoreItems, setSearchOpen }) => (\r\n  <Space>\r\n    <Tooltip title={t('header.search')}>\r\n      <Button\r\n        icon={<SearchOutlined style={{ color: isTopDarkHeader ? '#fff' : undefined }} />}\r\n        size=\"small\"\r\n        style={{ fontSize: 18 }}\r\n        onClick={() => setSearchOpen(true)}\r\n      />\r\n    </Tooltip>\r\n    <Tooltip title={isDark ? t('header.themeLight') : t('header.themeDark')} placement=\"bottom\">\r\n      <Button\r\n        onClick={handleThemeToggle}\r\n        size=\"small\"\r\n        style={{ margin: '0 4px', fontSize: 16 }}\r\n        icon={\r\n          isDark ? (\r\n            <LightIcon width={16} height={16} style={{ width: 16, height: 16 }} />\r\n          ) : (\r\n            <DarkIcon width={16} height={16} style={{ width: 16, height: 16 }} />\r\n          )\r\n        }\r\n      />\r\n    </Tooltip>\r\n    <Dropdown menu={{ items: mobileMoreItems }} trigger={['click']}>\r\n      <MoreOutlined\r\n        style={{\r\n          fontSize: 20,\r\n          cursor: 'pointer',\r\n          color: isTopDarkHeader ? '#fff' : undefined,\r\n        }}\r\n      />\r\n    </Dropdown>\r\n  </Space>\r\n)\r\n\r\nconst renderHeaderActions = (isMobile, props) => (isMobile ? renderMobileActions(props) : renderDesktopActions(props))\r\n\r\nconst renderUserTrigger = (isAuthenticated, user, iconButtonStyle) =>\r\n  isAuthenticated && user ? (\r\n    <Avatar src={user.avatar_url || undefined} icon={<UserOutlined style={{ fontSize: 16 }} />} />\r\n  ) : (\r\n    <Button icon={<UserOutlined style={{ fontSize: 16 }} />} type=\"default\" shape=\"round\" style={iconButtonStyle} />\r\n  )\r\n\r\nconst ProHeader = ({ layout, onSettingClick, children, onMobileMenuClick }) => {\r\n  const { t } = useTranslation()\r\n  const navigate = useNavigate()\r\n  const [messageApi, contextHolder] = message.useMessage()\r\n  const lastDeniedRef = React.useRef(null)\r\n  const primaryNavItems = usePrimaryNavItems()\r\n\r\n  const redirectTo = React.useCallback(\r\n    (path) => redirectToWithPermission({ path, navigate, messageApi, lastDeniedRef }),\r\n    [navigate, messageApi]\r\n  )\r\n\r\n  const redirectGithub = () => {\r\n    window.open('https://github.com/wkylin/pro-react-admin', '_blank', 'noopener')\r\n  }\r\n\r\n  const redirectWrapped = () => {\r\n    window.open('https://git-wrapped.com/', '_blank', 'noopener')\r\n  }\r\n  const redirectWiki = () => {\r\n    window.open('https://deepwiki.com/wkylin/pro-react-admin', '_blank', 'noopener')\r\n  }\r\n\r\n  const { isAuthenticated, user } = useAuth()\r\n\r\n  const tokenValue = getLocalStorage('token')?.token || 'wkylin.w'\r\n  const items = React.useMemo(\r\n    () => buildUserMenuItems({ t, tokenValue, isAuthenticated, user, redirectTo }),\r\n    [t, tokenValue, isAuthenticated, user, redirectTo]\r\n  )\r\n\r\n  const mobileMoreItems = React.useMemo(\r\n    () =>\r\n      buildMobileMoreItems({\r\n        t,\r\n        primaryNavItems,\r\n        onSettingClick,\r\n        redirectGithub,\r\n        redirectWiki,\r\n        redirectWrapped,\r\n      }),\r\n    [t, primaryNavItems, onSettingClick]\r\n  )\r\n\r\n  const {\r\n    token: { colorBgContainer, colorBorder },\r\n  } = theme.useToken()\r\n  const { themeSettings, updateSettings } = useProThemeContext()\r\n  const isDark = themeSettings.themeMode === 'dark'\r\n  const effectiveNavTheme = isDark ? 'dark' : themeSettings.navTheme\r\n\r\n  const isTopDarkHeader = layout === 'top' && effectiveNavTheme === 'dark'\r\n  const headerBackground = isTopDarkHeader ? '#001529' : colorBgContainer\r\n  const headerBorder = isTopDarkHeader ? '1px solid rgba(255, 255, 255, 0.12)' : `1px solid ${colorBorder}`\r\n\r\n  const handleThemeToggle = () => {\r\n    updateSettings({ themeMode: isDark ? 'light' : 'dark' })\r\n  }\r\n\r\n  // 全局搜索弹窗控制\r\n  const [searchOpen, setSearchOpen] = React.useState(false)\r\n  // 快捷键 ctrl+k/command+k 打开搜索\r\n  React.useEffect(() => {\r\n    const handler = (e) => {\r\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') {\r\n        e.preventDefault()\r\n        setSearchOpen(true)\r\n      }\r\n    }\r\n    window.addEventListener('keydown', handler)\r\n    return () => window.removeEventListener('keydown', handler)\r\n  }, [])\r\n\r\n  const iconButtonStyle = React.useMemo(() => ({ fontSize: 16 }), [])\r\n\r\n  const isMobile = useStore((s) => s.isMobile)\r\n\r\n  return (\r\n    <Layout.Header\r\n      className={styles.header}\r\n      style={{\r\n        backgroundColor: headerBackground,\r\n        borderBottom: headerBorder,\r\n        padding: isMobile ? '0 16px' : 0,\r\n      }}\r\n    >\r\n      {renderMobileMenuTrigger(isMobile, onMobileMenuClick)}\r\n      <div\r\n        aria-hidden=\"true\"\r\n        className={`${styles.logo} ${layout === 'top' ? styles.topLayoutLogo : ''}`}\r\n        onClick={() => redirectTo('/')}\r\n        style={isMobile ? { flex: '0 0 auto', justifyContent: 'flex-start' } : {}}\r\n      >\r\n        {/* Pro React <Tag>{process.env.DEPLOYED_ENV}</Tag> */}\r\n        {!isMobile && <img src={Logo} alt=\"logo\" />}\r\n        <GradientAnimationText text=\"Pro React Admin\" />\r\n      </div>\r\n      <div className={styles.headerMeta} style={isMobile ? { justifyContent: 'flex-end' } : {}}>\r\n        {renderDesktopNav(isMobile, layout, children)}\r\n        <div className={styles.headerRight} style={isMobile ? { flex: 1 } : {}}>\r\n          {renderHeaderActions(isMobile, {\r\n            iconButtonStyle,\r\n            t,\r\n            isTopDarkHeader,\r\n            isDark,\r\n            handleThemeToggle,\r\n            onSettingClick,\r\n            redirectGithub,\r\n            redirectWiki,\r\n            redirectWrapped,\r\n            mobileMoreItems,\r\n            setSearchOpen,\r\n          })}\r\n          <Dropdown arrow menu={{ items }} trigger={['click']}>\r\n            {renderUserTrigger(isAuthenticated, user, iconButtonStyle)}\r\n          </Dropdown>\r\n          {/* 全局搜索弹窗 */}\r\n          <GlobalSearch open={searchOpen} onClose={() => setSearchOpen(false)} onNavigate={redirectTo} />\r\n        </div>\r\n        {contextHolder}\r\n      </div>\r\n    </Layout.Header>\r\n  )\r\n}\r\n\r\nProHeader.propTypes = {\r\n  layout: PropTypes.string,\r\n  onSettingClick: PropTypes.func,\r\n  children: PropTypes.node,\r\n  // `isMobile` 由全局 Zustand 管理，组件直接读取，不再通过 props 传入\r\n  onMobileMenuClick: PropTypes.func,\r\n}\r\n\r\nexport default ProHeader\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proSecNav\\index.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`generateMenuItems` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  149 |     if (!Array.isArray(allowedRoutes) || allowedRoutes.length === 0) return\n  150 |     try {\n> 151 |       const dynamicMenus = generateMenuItems(allowedRoutes)\n      |                            ^^^^^^^^^^^^^^^^^ `generateMenuItems` accessed before it is declared\n  152 |       console.log('生成的菜单:', dynamicMenus)\n  153 |       setMenuItems(dynamicMenus)\n  154 |     } catch (e) {\n\n  283 |    * 生成动态菜单项（根据用户可访问路由过滤）\n  284 |    */\n> 285 |   const generateMenuItems = (routes) => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 286 |     // 保留兼容函数（用于当没有 meta.permission 时的回退）\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 287 |     const hasAccess = (path) => {\n      …\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 405 |     return filterItems(allMenuItems)\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 406 |   }\n      | ^^^^ `generateMenuItems` is declared here\n  407 |\n  408 |   return (\n  409 |     <>","line":151,"column":28,"nodeType":null,"endLine":151,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'generateMenuItems' and 't'. Either include them or remove the dependency array.","line":158,"column":6,"nodeType":"ArrayExpression","endLine":158,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [allowedRoutes, generateMenuItems, i18n.language, t]","fix":{"range":[4984,5014],"text":"[allowedRoutes, generateMenuItems, i18n.language, t]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { message, Menu } from 'antd'\nimport { useLocation } from 'react-router-dom'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { useTranslation } from 'react-i18next'\nimport { HomeOutlined } from '@ant-design/icons'\nimport { permissionService } from '@src/service/permissionService'\nimport { annotatedRootRouter, flattenRoutes } from '@src/routers'\n\nimport styles from './index.module.less'\n\nimport { mainLayoutMenu } from '@src/config/menu.config'\n\nlet lazyComponentsCache = null\nlet lazyComponentsPromise = null\nconst loadLazyComponents = () => {\n  if (lazyComponentsCache) return Promise.resolve(lazyComponentsCache)\n  if (!lazyComponentsPromise) {\n    lazyComponentsPromise = import('@src/routers/config/lazyLoad.config')\n      .then((mod) => {\n        lazyComponentsCache = mod.lazyComponents || {}\n        return lazyComponentsCache\n      })\n      .catch(() => {\n        lazyComponentsCache = {}\n        return lazyComponentsCache\n      })\n  }\n  return lazyComponentsPromise\n}\n\nconst ProSecNav = ({ mode = 'inline', theme = 'light', onMenuClick }) => {\n  const { pathname } = useLocation()\n  const { redirectTo } = useSafeNavigate()\n\n  const { t, i18n } = useTranslation()\n  const [messageApi, contextHolder] = message.useMessage()\n  const lastDeniedRef = useRef(null)\n  const [selectedKeys, setSelectedKeys] = useState(['home'])\n  const [menuItems, setMenuItems] = useState([])\n  const [allowedRoutes, setAllowedRoutes] = useState(null)\n\n  // 当前路由对应的 sub menu key\n  const [openKeys, setOpenKeys] = useState([])\n\n  const safeSelectedKeys = Array.isArray(selectedKeys) ? selectedKeys : []\n  const safeOpenKeys = Array.isArray(openKeys) ? openKeys : []\n\n  const showDeniedOnce = (denyKey) => {\n    if (!denyKey) return\n    if (lastDeniedRef.current === denyKey) return\n    lastDeniedRef.current = denyKey\n\n    Promise.resolve()\n      .then(() => messageApi.open({ type: 'error', content: '您没有权限访问该页面' }))\n      .catch((e) => {\n        console.warn('Menu item permission check error:', e)\n        return Promise.resolve(message.error('您没有权限访问该页面'))\n      })\n      .catch((err) => {\n        console.warn('Failed to show error message:', err)\n      })\n  }\n\n  const findMenuItemByKey = (items, targetKey) => {\n    if (!Array.isArray(items) || !targetKey) return null\n    for (const it of items) {\n      if (it?.key === targetKey) return it\n      if (it?.children) {\n        const res = findMenuItemByKey(it.children, targetKey)\n        if (res) return res\n      }\n    }\n    return null\n  }\n\n  const ensurePreloadedSet = () => {\n    if (!ProSecNav._preloaded) ProSecNav._preloaded = new Set()\n    return ProSecNav._preloaded\n  }\n\n  const getLazyNameFromPath = (p) => {\n    return String(p || '')\n      .replace(/^\\//, '')\n      .split('/')\n      .map((s) => (s?.[0] ? s[0].toUpperCase() + s.slice(1) : ''))\n      .join('')\n  }\n\n  const preloadRouteComponent = (p) => {\n    try {\n      const pathKey = String(p || '')\n      if (!pathKey) return\n      const preloaded = ensurePreloadedSet()\n      if (preloaded.has(pathKey)) return\n\n      const comp = routeComponentMap.get(pathKey)\n      if (comp && typeof comp.preload === 'function') {\n        comp.preload()\n        preloaded.add(pathKey)\n        return\n      }\n\n      loadLazyComponents()\n        .then((lazy) => {\n          if (!lazy || preloaded.has(pathKey)) return\n          const name = getLazyNameFromPath(pathKey)\n          const candidate = lazy[name]\n          if (candidate && typeof candidate.preload === 'function') {\n            candidate.preload()\n            preloaded.add(pathKey)\n          }\n        })\n        .catch((e) => {\n          console.warn('Component preload error:', e)\n        })\n    } catch (e) {\n      console.warn('Component preload error:', e)\n    }\n  }\n\n  // 提取放在redux中, tab 切换时改成 false\n  const [isOpenChange, setIsOpenChange] = useState(false)\n\n  // 初始化：获取用户可访问路由\n  useEffect(() => {\n    const initMenus = async () => {\n      try {\n        const userPermissions = await permissionService.getPermissions()\n        // 确保根路径 '/' 总是包含（首页对所有账号可见）\n        const rawRoutes = Array.isArray(userPermissions?.routes) ? userPermissions.routes : []\n        const routes = Array.from(new Set(['/'].concat(rawRoutes)))\n        console.log('用户可访问路由:', routes)\n\n        // 仅存储一次“可访问路由”，避免语言切换时重复请求\n        setAllowedRoutes(routes)\n      } catch (error) {\n        console.error('获取用户权限失败:', error)\n        // 降级：仅保留首页\n        setAllowedRoutes(['/'])\n      }\n    }\n    initMenus()\n  }, [])\n\n  // 当语言切换时，重新生成菜单（但不重复拉权限）\n  useEffect(() => {\n    if (!Array.isArray(allowedRoutes) || allowedRoutes.length === 0) return\n    try {\n      const dynamicMenus = generateMenuItems(allowedRoutes)\n      console.log('生成的菜单:', dynamicMenus)\n      setMenuItems(dynamicMenus)\n    } catch (e) {\n      console.error('生成菜单失败:', e)\n      setMenuItems([{ label: t('home'), key: '/', icon: <HomeOutlined /> }])\n    }\n  }, [allowedRoutes, i18n.language])\n\n  // 递归查找与当前路径最匹配的菜单项父级链\n  const findPathChain = (items, targetPath) => {\n    let bestChain = null\n\n    const matchesDynamicPath = (patternPath, pathToMatch) => {\n      if (typeof patternPath !== 'string' || !patternPath.includes(':')) return false\n      const pattern = patternPath.replace(/:[^/]+/g, '[^/]+')\n      return new RegExp(`^${pattern}$`).test(pathToMatch)\n    }\n\n    const dfs = (nodes, chain) => {\n      if (!Array.isArray(nodes)) return\n      for (const node of nodes) {\n        // 添加空值检查\n        if (!node || typeof node !== 'object' || !node.key) continue\n        const nextChain = [...chain, node.key]\n        const nodePath = node.path || node.key\n        // 匹配规则：精确匹配 或 前缀匹配（允许 /a/b 命中 /a）\n        const isExact = targetPath === nodePath\n        const isPrefix = targetPath.startsWith(nodePath + '/')\n        // 动态参数匹配（如 /coupons/edit/123 与 /coupons/edit）\n        const dynParamMatch = matchesDynamicPath(nodePath, targetPath)\n        if (isExact || isPrefix || dynParamMatch) {\n          // 选择更长 path 的链作为最佳链（更具体）\n          if (!bestChain || nodePath.length > (bestChain[bestChain.length - 1] || '').length) {\n            bestChain = nextChain\n          }\n        }\n        if (node.children && Array.isArray(node.children)) {\n          dfs(node.children, nextChain)\n        }\n      }\n    }\n    dfs(items, [])\n    return bestChain\n  }\n\n  // 构建路由 path -> element.type 映射以支持菜单 hover 预加载\n  const routeComponentMap = React.useMemo(() => {\n    try {\n      const flat = flattenRoutes(annotatedRootRouter)\n      const map = new Map()\n      flat.forEach((r) => {\n        const key = r.path || r.key\n        if (!key) return\n        // element 可能是 React element，element.type 为组件函数/对象\n        const comp = r.element?.type ?? null\n        map.set(key, comp)\n      })\n      return map\n    } catch (e) {\n      console.warn('Failed to build route component map:', e)\n      return new Map()\n    }\n  }, [])\n\n  // 路由变化时自动计算选中与展开（除非用户刚手动操作）\n  useEffect(() => {\n    if (!Array.isArray(menuItems) || menuItems.length === 0) return\n    const chain = findPathChain(menuItems, pathname)\n    if (chain && chain.length > 0) {\n      const leaf = chain[chain.length - 1]\n      setSelectedKeys([leaf])\n      if (!isOpenChange) {\n        // 父级链（不包含当前叶子）作为展开 keys\n        setOpenKeys(chain.slice(0, -1))\n      }\n    } else {\n      // 找不到匹配链，仍然设置选中（可能是无菜单对应的裸路由）\n      setSelectedKeys([pathname])\n      if (!isOpenChange) {\n        setOpenKeys([])\n      }\n    }\n  }, [pathname, menuItems, isOpenChange])\n\n  const onOpenChange = (keys) => {\n    setIsOpenChange(true)\n    const nextKeys = Array.isArray(keys) ? keys : []\n    // 简单互斥：同层级仅保留一个展开；通过比较链长度实现\n    // 计算所有当前 key 的父链深度（根据 menuItems）\n    const depthMap = {}\n    const buildDepth = (items, depth) => {\n      if (!Array.isArray(items)) return\n      for (const item of items) {\n        // 添加空值检查，避免 \"Cannot convert undefined or null to object\" 错误\n        if (!item || typeof item !== 'object') continue\n        if (item.key) {\n          depthMap[item.key] = depth\n        }\n        if (item.children && Array.isArray(item.children)) {\n          buildDepth(item.children, depth + 1)\n        }\n      }\n    }\n    buildDepth(menuItems, 0)\n    // 按层分组，取最后一个操作的 key 所在层，仅保留该层的最后一个\n    const latestKey = nextKeys.find((k) => !safeOpenKeys.includes(k)) || nextKeys[nextKeys.length - 1]\n    const layer = depthMap[latestKey]\n    const filtered = nextKeys.filter((k) => depthMap[k] !== layer || k === latestKey)\n    setOpenKeys(filtered)\n  }\n\n  const onSelect = async ({ key }) => {\n    const selected = findMenuItemByKey(menuItems, key)\n    const selectedPath = selected?.path || selected?.key || key\n\n    try {\n      const ok = await permissionService.canAccessRoute(selectedPath, false)\n      if (!ok) {\n        showDeniedOnce(selectedPath)\n        return\n      }\n      redirectTo(selectedPath)\n      setIsOpenChange(false)\n      onMenuClick?.()\n    } catch (error) {\n      console.error('菜单权限检查失败:', error)\n      showDeniedOnce(selectedPath)\n    }\n  }\n\n  /**\n   * 生成动态菜单项（根据用户可访问路由过滤）\n   */\n  const generateMenuItems = (routes) => {\n    // 保留兼容函数（用于当没有 meta.permission 时的回退）\n    const hasAccess = (path) => {\n      return routes.some((route) => {\n        if (route === path) return true\n        if (path.startsWith(route + '/')) return true\n        if (route.includes('*')) {\n          const pattern = route.replace('*', '.*')\n          return new RegExp(`^${pattern}$`).test(path)\n        }\n        return false\n      })\n    }\n\n    const createLabel = (path, labelText) => {\n      const onPreload = () => preloadRouteComponent(path)\n      const onKeyDown = (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault()\n          onPreload()\n        }\n      }\n\n      return (\n        <button\n          type=\"button\"\n          onMouseEnter={onPreload}\n          onFocus={onPreload}\n          onClick={onPreload}\n          onKeyDown={onKeyDown}\n          style={{\n            background: 'transparent',\n            border: 0,\n            padding: 0,\n            margin: 0,\n          }}\n        >\n          {labelText}\n        </button>\n      )\n    }\n\n    const translateItem = (i) => {\n      // 添加空值检查\n      if (!i || typeof i !== 'object') return null\n\n      const { i18nKey, children, ...rest } = i\n      const path = i.path || i.key\n\n      // 如果没有 key，返回 null（不合法的菜单项）\n      if (!path) return null\n\n      const labelText = i18nKey ? t(i.i18nKey) : i.label\n      const Label = createLabel(path, labelText)\n\n      const base = {\n        ...rest,\n        path,\n        label: Label,\n      }\n      if (children && Array.isArray(children)) {\n        // 过滤掉空值的子项\n        const validChildren = children.map(translateItem).filter(Boolean)\n        return validChildren.length > 0 ? { ...base, children: validChildren } : base\n      }\n      return base\n    }\n\n    // 使用配置文件的菜单，并进行翻译；同时规范化每项的 path 字段\n    // 过滤掉可能的空值\n    const allMenuItems = (Array.isArray(mainLayoutMenu) ? mainLayoutMenu : []).map(translateItem).filter(Boolean)\n\n    // 递归过滤菜单：仅保留用户可访问的节点或其子节点\n    const hasAccessSafely = (p) => {\n      try {\n        return hasAccess(p)\n      } catch (e) {\n        console.warn('菜单访问判断异常', p, e)\n        return false\n      }\n    }\n\n    const matchesDynamicParam = (p) => {\n      if (typeof p !== 'string' || !p.includes(':')) return false\n      const pattern = p.replace(/:[^/]+/g, '[^/]+')\n      const regex = new RegExp(`^${pattern}$`)\n      return routes.some((r) => regex.test(r))\n    }\n\n    const filterItems = (items) => {\n      if (!Array.isArray(items)) return []\n      const result = []\n      for (const item of items) {\n        // 添加空值检查，防止处理空值菜单项\n        if (!item || typeof item !== 'object') continue\n\n        const rawKey = item.path || item.key\n        // 如果菜单项没有 key，跳过（不合法的菜单项）\n        if (!rawKey) continue\n\n        if (Array.isArray(item.children) && item.children.length > 0) {\n          const children = filterItems(item.children)\n          if (children.length > 0) {\n            result.push({ ...item, children })\n            continue\n          }\n        }\n\n        if (hasAccessSafely(rawKey)) {\n          result.push(item)\n          continue\n        }\n\n        if (matchesDynamicParam(rawKey)) {\n          result.push(item)\n        }\n      }\n      return result\n    }\n\n    return filterItems(allMenuItems)\n  }\n\n  return (\n    <>\n      {contextHolder}\n      <Menu\n        inlineIndent={10}\n        mode={mode}\n        defaultSelectedKeys={safeSelectedKeys}\n        defaultOpenKeys={safeOpenKeys}\n        selectedKeys={safeSelectedKeys}\n        openKeys={safeOpenKeys}\n        theme={theme}\n        className={mode === 'horizontal' ? styles.topMenu : styles.menu}\n        items={menuItems}\n        onOpenChange={onOpenChange}\n        onSelect={onSelect}\n      />\n    </>\n  )\n}\n\nProSecNav.propTypes = {\n  mode: PropTypes.string,\n  theme: PropTypes.string,\n  onMenuClick: PropTypes.func,\n}\n\nexport default ProSecNav\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proSider\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\layout\\proTabs\\index.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'panes', 'panesItem', 'search', 'setActiveKey', and 'setPanes'. Either include them or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [panes, panesItem, pathname, search, setActiveKey, setPanes, tabActiveKey]","fix":{"range":[2292,2316],"text":"[panes, panesItem, pathname, search, setActiveKey, setPanes, tabActiveKey]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'direction' is defined but never used. Allowed unused args must match /^_/u.","line":84,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":84,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, Suspense, useTransition } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { useLocation } from 'react-router-dom'\r\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\r\nimport { Tabs, Dropdown, Space, theme, Button } from 'antd'\r\nimport StickyBox from 'react-sticky-box'\r\nimport { SyncOutlined, FireOutlined, DownOutlined } from '@ant-design/icons'\r\nimport ErrorBoundary from '@/components/ErrorBoundary'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useProTabContext } from '@app-hooks/proTabsContext'\r\nimport Loading from '@src/components/stateless/Loading'\r\nimport Fullscreen from '../fullscreen'\r\nimport KeepAlive from '@src/components/KeepAlive'\r\n\r\nconst ProTabs = (props) => {\r\n  const { activeKey, setActiveKey, panes, setPanes, removeTab } = useProTabContext()\r\n  const [isReload, setIsReload] = useState(false)\r\n  const [, startTransition] = useTransition()\r\n  const pathRef = useRef('')\r\n\r\n  const { redirectTo } = useSafeNavigate()\r\n  const { t } = useTranslation()\r\n  const { panesItem, tabActiveKey } = props\r\n  const { pathname, search } = useLocation()\r\n  const fullPath = pathname + search\r\n\r\n  const {\r\n    token: { colorBgContainer },\r\n  } = theme.useToken()\r\n\r\n  const renderTabBar = (props, DefaultTabBar) => (\r\n    <StickyBox offsetTop={0} style={{ zIndex: 10 }}>\r\n      <DefaultTabBar {...props} className=\"pro-tabs\" style={{ ...props.style, backgroundColor: colorBgContainer }} />\r\n    </StickyBox>\r\n  )\r\n\r\n  useEffect(() => {\r\n    document.querySelector('#container').scrollTo({\r\n      top: 0,\r\n      left: 0,\r\n      behavior: 'smooth',\r\n    })\r\n  }, [pathname])\r\n\r\n  useEffect(() => {\r\n    const newPath = pathname + search\r\n\r\n    if (!panesItem.path || panesItem.path === pathRef.current) return\r\n\r\n    pathRef.current = newPath\r\n\r\n    const index = panes.findIndex((item) => item.key === panesItem.key)\r\n    setActiveKey(tabActiveKey)\r\n\r\n    if (!panesItem.key || (index > -1 && newPath === panes[index].path)) {\r\n      return\r\n    }\r\n\r\n    if (index > -1) {\r\n      // avoid mutating existing panes array in place\r\n      const newPanes = panes.map((p, i) => (i === index ? { ...p, path: newPath } : p))\r\n      setPanes(newPanes)\r\n      return\r\n    }\r\n\r\n    setPanes([...panes, panesItem])\r\n  }, [pathname, tabActiveKey])\r\n\r\n  const onChange = (key) => {\r\n    startTransition(() => {\r\n      setActiveKey(key)\r\n    })\r\n  }\r\n\r\n  // tab点击\r\n  const onTabClick = (targetKey) => {\r\n    const pane = panes.filter((item) => item.key === targetKey)[0]\r\n    const path = (pane && (pane.path || pane.key)) || targetKey\r\n    startTransition(() => {\r\n      redirectTo(path)\r\n    })\r\n  }\r\n\r\n  const onTabScroll = ({ direction }) => {\r\n    // no-op: avoid logging on scroll (can cause jank)\r\n  }\r\n\r\n  const onEdit = (targetKey, action) => {\r\n    if (action === 'remove') removeTab(targetKey)\r\n  }\r\n\r\n  // 刷新当前 tab\r\n  const refreshTab = () => {\r\n    setIsReload(true)\r\n    setTimeout(() => {\r\n      setIsReload(false)\r\n    }, 1000)\r\n  }\r\n\r\n  const onTabContextMenu = (rightMenuKey) => {\r\n    if (rightMenuKey === 'all') {\r\n      const filterPanes = panes.filter((pane) => pane.key === '/')\r\n      setPanes(filterPanes)\r\n      redirectTo('/')\r\n      setActiveKey('/')\r\n    }\r\n    if (rightMenuKey === 'other') {\r\n      const filterPanes = panes.filter((pane) => pane.key === '/' || pane.key === activeKey)\r\n      setPanes(filterPanes)\r\n    }\r\n  }\r\n\r\n  // tab 右键菜单\r\n  const tabRightMenu = [\r\n    {\r\n      label: '关闭其他',\r\n      key: 'other',\r\n    },\r\n    {\r\n      label: '全部关闭',\r\n      key: 'all',\r\n    },\r\n  ]\r\n\r\n  const fixError = () => {\r\n    refreshTab()\r\n  }\r\n  // Note: pre-rendering via KeepAlive.preRenderAll was removed when KeepAlive\r\n  // was simplified to a portal-based implementation. If we reintroduce\r\n  // background pre-rendering later, re-add appropriate APIs on KeepAlive.\r\n\r\n  return (\r\n    <Tabs\r\n      hideAdd\r\n      type=\"editable-card\"\r\n      animated={{ inkBar: true, tabPane: false }}\r\n      onChange={onChange}\r\n      onTabClick={onTabClick}\r\n      onTabScroll={onTabScroll}\r\n      onEdit={onEdit}\r\n      renderTabBar={renderTabBar}\r\n      className=\"layout-container\"\r\n      id=\"container\"\r\n      tabBarStyle={{\r\n        zIndex: 2,\r\n        marginBottom: 0,\r\n      }}\r\n      activeKey={activeKey}\r\n      destroyOnHidden={false}\r\n      tabBarExtraContent={{\r\n        left: (\r\n          <Space align=\"center\" size={30} style={{ margin: '0 10px' }}>\r\n            <FireOutlined style={{ color: '#eb2f96', fontSize: 16 }} />\r\n          </Space>\r\n        ),\r\n        right: (\r\n          <>\r\n            <Space style={{ padding: '0 5px' }}>\r\n              <Fullscreen ele=\"#fullScreenContent\" placement=\"left\" tips=\"主内容全屏\" />\r\n            </Space>\r\n            {panes.length > 2 ? (\r\n              <Dropdown\r\n                menu={{\r\n                  items: tabRightMenu,\r\n                  onClick: ({ key }) => {\r\n                    onTabContextMenu(key)\r\n                  },\r\n                }}\r\n                trigger={['hover']}\r\n              >\r\n                <Button type=\"link\">\r\n                  More <DownOutlined />\r\n                </Button>\r\n              </Dropdown>\r\n            ) : null}\r\n          </>\r\n        ),\r\n      }}\r\n      items={panes.map((pane) => ({\r\n        label: (\r\n          <span style={{ display: 'flex', gap: '5px', alignItems: 'center' }}>\r\n            {pane.key === fullPath && pane.key !== '/404' && (\r\n              <SyncOutlined onClick={refreshTab} title=\"刷新\" spin={isReload} />\r\n            )}\r\n            {pane.i18nKey ? t(pane.i18nKey) : pane.title}\r\n          </span>\r\n        ),\r\n        key: pane.key,\r\n        closable: pane.closable,\r\n        forceRender: true,\r\n        children: (\r\n          <ErrorBoundary onReset={fixError} navigate={redirectTo}>\r\n            <div className=\"layout-tabpanel\">\r\n              <KeepAlive id={pane.key} active={pane.key === fullPath} persistOnUnmount={pane.key === '/'}>\r\n                <Suspense fallback={<Loading />}>\r\n                  {isReload && pane.key === fullPath && pane.key !== '/404' ? (\r\n                    <Loading tip=\"刷新中...\" />\r\n                  ) : (\r\n                    <>{pane.content}</>\r\n                  )}\r\n                </Suspense>\r\n              </KeepAlive>\r\n            </div>\r\n          </ErrorBoundary>\r\n        ),\r\n      }))}\r\n    />\r\n  )\r\n}\r\n\r\nProTabs.propTypes = {\r\n  panesItem: PropTypes.object,\r\n  tabActiveKey: PropTypes.string,\r\n  style: PropTypes.object,\r\n}\r\n\r\nexport default ProTabs\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\mermaid\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\motion\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\music\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'audioRef' is assigned a value but never used.","line":6,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport FixMusicPlayer from '@stateless/FixMusicPlayer'\n\nconst Music = () => {\n  const audioRef = useRef(null)\n  return (\n    <FixTabPanel>\n      <FixMusicPlayer />\n    </FixTabPanel>\n  )\n}\n\nexport default Music\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\notifications\\NotificationDetail.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { Card, Spin, Button } from 'antd'\nimport { useParams, useLocation } from 'react-router-dom'\nimport request from '@/service/request'\nimport { useProThemeContext } from '@/theme/hooks'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\n\nconst NotificationDetail = () => {\n  const { id } = useParams()\n  const { search } = useLocation()\n  const { redirectTo } = useSafeNavigate()\n  const { themeSettings } = useProThemeContext()\n  const [loading, setLoading] = useState(false)\n  const [data, setData] = useState(null)\n\n  useEffect(() => {\n    let mounted = true\n    const fetchData = async () => {\n      setLoading(true)\n      try {\n        // 示例：根据 id 请求详情接口，实际接口请替换\n        // const res = await request.get(`/api/notifications/${id}`)\n        // setData(res?.data || res)\n        // 这里使用模拟数据以避免依赖后端\n        await new Promise((r) => setTimeout(r, 300))\n        if (!mounted) return\n        setData({\n          id,\n          title: `通知 ${id}`,\n          body: `这是通知 ${id} 的详情。query: ${search}`,\n        })\n      } catch (e) {\n        console.error('fetch notification detail error', e)\n      } finally {\n        if (mounted) setLoading(false)\n      }\n    }\n\n    fetchData()\n    return () => {\n      mounted = false\n    }\n  }, [id, search])\n\n  const bgColor = themeSettings.themeMode === 'dark' ? '#18191c' : '#fff'\n  const boxShadow = themeSettings.themeMode === 'dark' ? '0 2px 8px #0006' : '0 2px 8px #0001'\n  const borderColor = themeSettings.themeMode === 'dark' ? '#333639' : '#f0f0f0'\n  const color = themeSettings.themeMode === 'dark' ? '#eee' : '#222'\n\n  return (\n    <Card\n      title={data ? data.title : `通知 ${id}`}\n      style={{\n        width: '100%',\n        backgroundColor: bgColor,\n        boxShadow,\n        border: `1px solid ${borderColor}`,\n      }}\n    >\n      {loading ? (\n        <div style={{ display: 'flex', justifyContent: 'center', padding: 24 }}>\n          <Spin />\n        </div>\n      ) : (\n        <>\n          <p style={{ color }}>{data ? data.body : '暂无数据'}</p>\n          <div style={{ marginTop: 12 }}>\n            <Button onClick={() => redirectTo('/notifications' + (search || ''))}>返回通知中心</Button>\n          </div>\n        </>\n      )}\n    </Card>\n  )\n}\n\nexport default NotificationDetail\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\notifications\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setItems' is assigned a value but never used.","line":29,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'record' is defined but never used. Allowed unused args must match /^_/u.","line":117,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'r' is defined but never used. Allowed unused args must match /^_/u.","line":199,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useRef } from 'react'\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\nimport { useLocation } from 'react-router-dom'\nimport { Button, Badge, Typography, Modal, message } from 'antd'\nimport ResponsiveTable from '@/components/ResponsiveTable'\nimport { useProThemeContext } from '@/theme/hooks'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport { usePermission } from '@/app-hooks/usePermission'\n// import request from '@/service/request'\n\nconst NotificationsPage = () => {\n  const { themeSettings } = useProThemeContext()\n  const [pagination, setPagination] = useState({ current: 1, pageSize: 10 })\n  const [modal, setModal] = useState({ visible: false, record: null })\n\n  // 使用 state 存放完整数据，以便删除后更新\n  const initialMock = useMemo(\n    () =>\n      Array.from({ length: 12 }).map((_, i) => ({\n        id: i + 1,\n        title: `消息标题 ${i + 1}`,\n        description: `这是第 ${i + 1} 条消息的内容，支持详情查看。`,\n        read: i % 3 === 0,\n        time: `${i + 1} 分钟前`,\n      })),\n    []\n  )\n\n  const [items, setItems] = useState(initialMock)\n  const { permissions = [] } = usePermission()\n  // 用于演示从父组件/外部控制 toolbar 表单的 apiRef\n  const tableApiRef = useRef(null)\n  const { redirectTo } = useSafeNavigate()\n  const { search } = useLocation()\n\n  // 示例：我们建议使用 `initialValues` 或 `onToolbarReady` 来初始化表单。\n  // 已在下面的 <ResponsiveTable /> props 中将 title 放入 toolbar.search.initialValues 做示例。\n  // 也可以使用 onToolbarReady 回调在表单就绪时进行更精确的初始化（见组件 props 示例）。\n\n  // 新增/导出示例处理器\n  const handleAdd = () => {\n    setModal({ visible: true, record: null })\n  }\n\n  const exportRows = (selectedRowKeys = []) => {\n    const rows = selectedRowKeys && selectedRowKeys.length ? items.filter((i) => selectedRowKeys.includes(i.id)) : items\n    if (!rows || rows.length === 0) {\n      message.info('没有数据可导出')\n      return\n    }\n\n    const header = ['id', 'title', 'description', 'time', 'read']\n    const csv = [header]\n      .concat(rows.map((r) => [r.id, r.title, r.description, r.time, r.read ? '已读' : '未读']))\n      .map((row) => row.map((cell) => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(','))\n      .join('\\n')\n\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = 'notifications.csv'\n    document.body.appendChild(a)\n    a.click()\n    a.remove()\n    URL.revokeObjectURL(url)\n  }\n\n  // 主题色适配\n  const color = themeSettings.themeMode === 'dark' ? '#eee' : '#222'\n\n  const columns = [\n    {\n      title: '序号',\n      key: '__index',\n      index: true,\n      width: 80,\n    },\n    {\n      title: '标题',\n      dataIndex: 'title',\n      width: 200,\n      render: (text) => <Typography.Text strong>{text}</Typography.Text>,\n    },\n    {\n      title: '内容',\n      dataIndex: 'description',\n      ellipsis: true,\n    },\n    {\n      title: '时间',\n      dataIndex: 'time',\n      width: 120,\n    },\n    {\n      title: '状态',\n      dataIndex: 'read',\n      width: 80,\n      render: (read) => (!read ? <Badge status=\"processing\" text=\"未读\" /> : <Badge status=\"default\" text=\"已读\" />),\n    },\n    // 操作列由 ResponsiveTable 提供（通过 actions prop），这里不再在 columns 中定义操作列\n  ]\n\n  return (\n    <FixTabPanel>\n      <div style={{ width: '100%', height: '100%' }}>\n        <ResponsiveTable\n          columns={columns}\n          dataSource={items}\n          apiRef={tableApiRef}\n          rowKey=\"id\"\n          initialPagination={pagination}\n          minBodyHeight={120}\n          minWidth={800}\n          onPaginationChange={(p) => setPagination(p)}\n          // permissions: 这里示例全部允许，替换为项目权限检查函数\n          permissionChecker={(actionKey, record) => {\n            // 将 actionKey 映射为权限码（根据项目实际权限码调整）\n            const map = {\n              view: 'notifications:view',\n              edit: 'notifications:edit',\n              delete: 'notifications:delete',\n            }\n            const perm = map[actionKey]\n            if (!perm) return true\n            // 使用 usePermission 提供的 permissions 列表进行同步判断\n            return permissions && permissions.length > 0\n              ? permissions.includes(perm) || permissions.includes('*:*')\n              : true\n          }}\n          // actions: 自定义回调\n          actions={[\n            {\n              key: 'view',\n              label: '查看',\n              onClick: (r) => setModal({ visible: true, record: r }),\n            },\n            {\n              key: 'edit',\n              label: '编辑',\n              onClick: (r) => {\n                // 示例编辑行为：打开详情 modal（可替换为编辑表单）\n                console.log('edit', r)\n              },\n            },\n            {\n              key: 'open_tab',\n              label: '在新标签打开',\n              onClick: (r) => {\n                // 导航到动态详情路由，ProTabs 会为该路径创建一个新的 tab\n                try {\n                  // 使用 react-router 的 location.search（比直接访问 window.location 更可靠）\n                  // 如果当前 URL 含查询，则复用当前查询；否则附带示例 query\n                  // 打印调试信息便于排查为何找不到 query\n                  try {\n                    // 优先尝试从 tableApiRef 获取搜索/筛选参数（组件新增的 api）\n                    const refApi = tableApiRef.current\n                    let qs = ''\n                    try {\n                      const searchObj = refApi?.getSearch?.() || null\n                      if (searchObj && typeof searchObj === 'object') {\n                        const s = new URLSearchParams(searchObj).toString()\n                        qs = s ? `?${s}` : ''\n                      }\n                    } catch (e) {\n                      console.error('获取 tableApiRef search 参数失败', e)\n                    }\n\n                    // 如果没有从 tableApiRef 获取到查询，则回退到当前 location.search 或示例参数\n                    if (!qs) {\n                      console.debug('current search (from useLocation):', search)\n                      qs = search && search.length > 1 ? search : '?type=2'\n                    }\n                    redirectTo(`/notification/${r.id}${qs}`)\n                  } catch (e) {\n                    console.error('open tab navigate error', e)\n                  }\n                } catch (e) {\n                  console.error('open tab navigate error', e)\n                }\n              },\n            },\n            {\n              key: 'open_tab_with_query',\n              label: '在新标签打开(带 query)',\n              onClick: (r) => {\n                try {\n                  // 示例：打开带固定 query 的详情页\n                  redirectTo(`/notification/${r.id}?type=2&del=0`)\n                } catch (e) {\n                  console.error('open tab navigate error', e)\n                }\n              },\n            },\n            {\n              key: 'delete',\n              label: '删除',\n              confirm: '确认删除该消息吗？',\n              onClick: async (r) => {\n                // 调用后端删除接口（请根据后端实际接口调整 URL）\n                try {\n                  // await request.delete(`/api/notifications/${r.id}`)\n                } catch (e) {\n                  // 如果删除失败，抛出以便父 hook 处理（handleDelete 可捕获）\n                  return Promise.reject(e)\n                }\n\n                // 成功返回，父 hook 的 handleDelete 会调用 reloadPage 或者本地数据更新\n                return Promise.resolve()\n              },\n            },\n          ]}\n          // toolbar 示例：左侧新增/导出，右侧查询表单\n          toolbar={{\n            actions: [\n              {\n                key: 'add',\n                label: '新增',\n                type: 'primary',\n                onClick: () => handleAdd(),\n              },\n              {\n                key: 'export',\n                label: '导出',\n                onClick: ({ selectedRowKeys } = {}) => exportRows(selectedRowKeys),\n              },\n              // 示例：通过 action 的 onClick 回调使用 api（action 会接收到 toolbarApi）\n              {\n                key: 'set-from-ref',\n                label: 'Ref 设置标题',\n                onClick: (api) => {\n                  try {\n                    // 通过 api（或 tableApiRef.current）设置 toolbar 表单的 title 字段\n                    const refApi = api || tableApiRef.current\n                    if (refApi && refApi.form) {\n                      refApi.form.setFieldsValue({ title: '由 Ref 设置的标题' })\n                      // 可选择立即触发一次查询\n                      refApi.fetchPage(1, refApi.pagination.pageSize, null, refApi.form.getFieldsValue())\n                    }\n                  } catch (e) {\n                    console.error('set-from-ref error', e)\n                  }\n                },\n              },\n            ],\n            search: {\n              // fields 演示多种类型：input/select/dateRange/number\n              fields: [\n                { name: 'title', label: '标题', placeholder: '请输入标题' },\n                {\n                  name: 'read',\n                  label: '状态',\n                  type: 'select',\n                  options: [\n                    { label: '全部', value: '' },\n                    { label: '未读', value: false },\n                    { label: '已读', value: true },\n                  ],\n                },\n                {\n                  name: 'createdAt',\n                  label: '创建时间',\n                  type: 'dateRange',\n                  placeholder: '请选择创建时间范围',\n                },\n                {\n                  name: 'minId',\n                  label: '最小 ID',\n                  type: 'number',\n                  placeholder: '>=',\n                },\n              ],\n              // transformValues 将前端表单值转换为后端期望的参数\n              // 这里把 createdAt 的范围转换为 start / end（ISO 字符串），并保持其它字段\n              transformValues: (vals) => {\n                const out = { ...vals }\n                if (vals.createdAt && Array.isArray(vals.createdAt)) {\n                  const [s, e] = vals.createdAt\n                  // moment / dayjs 或 Date 都支持 toISOString\n                  out.start = s ? (typeof s.toISOString === 'function' ? s.toISOString() : s) : undefined\n                  out.end = e ? (typeof e.toISOString === 'function' ? e.toISOString() : e) : undefined\n                  delete out.createdAt\n                }\n                // 如果 minId 为空字符串或未设置，删除该字段\n                if (out.minId === '' || out.minId == null) delete out.minId\n                return out\n              },\n              initialValues: {\n                read: '',\n                minId: 12,\n                title: '初始化title',\n              },\n              advancedThreshold: 1,\n              advancedPlacement: 'drawer', // 'inline' | 'popover' | 'drawer'\n              buttons: { searchText: '查询', resetText: '重置' },\n            },\n          }}\n          // 使用服务端 fetchUrl 自动加载（示例：开启后组件会在 mount 时调用 /api/notifications）\n          onToolbarReady={(api) => {\n            try {\n              if (api && api.form) {\n                // 在表单就绪时设置初始标题（示例）\n                api.form.setFieldsValue({\n                  title: '来自 onToolbarReady 的初始标题',\n                })\n                // 如果需要立即触发一次基于表单当前值的查询，可取消下面注释：\n                // api.fetchPage(1, api.pagination.pageSize, null, api.form.getFieldsValue())\n              }\n            } catch (e) {\n              console.error('onToolbarReady handler error', e)\n            }\n          }}\n          fetchUrl=\"/api/notifications\"\n          mergeSearchToFetch={true}\n          autoLoad={false}\n          requestMethod=\"post\"\n          clearUrlAfterInitialMerge={false}\n          mergeSearchToFetchOnce={false}\n          showUrlAppliedTag={true}\n          requestParamMap={{ pageField: 'page', pageSizeField: 'pageSize' }}\n          responseFieldMap={{\n            listField: 'data.items',\n            totalField: 'data.total',\n          }}\n          serverSort={false}\n          showIndex={true}\n          indexMode={'global'}\n          rowSelection={null}\n          // 示例：覆盖默认序号列与操作列宽度，并精确控制横向滚动行为\n          indexWidth={60}\n          actionsWidth={220}\n          // scroll 支持像素、字符串（'100%'|'max-content'）或数字\n          scroll={{ x: 'max-content' }}\n        />\n      </div>\n\n      <Modal\n        open={modal.visible}\n        title={modal.record?.title}\n        onCancel={() => setModal({ visible: false, record: null })}\n        footer={<Button onClick={() => setModal({ visible: false, record: null })}>关闭</Button>}\n        styles={{\n          body: {\n            color,\n          },\n        }}\n      >\n        <Typography.Paragraph style={{ color }}>{modal.record?.description}</Typography.Paragraph>\n        <div style={{ color: '#999' }}>时间：{modal.record?.time}</div>\n      </Modal>\n    </FixTabPanel>\n  )\n}\n\nexport default NotificationsPage\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\order\\list\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\parallax\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Toggle' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport Toggle from './toggle'\n\nconst ParallaxVert = () => (\n  <FixTabPanel>\n    <h2>Hi, React Spring</h2>\n    {/* <Toggle /> */}\n  </FixTabPanel>\n)\n\nexport default ParallaxVert\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\parallax\\toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\permission\\index.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\wui\\pro-react\\pro-react-admin\\src\\pages\\permission\\index.tsx:46:5\n  44 |   const [forceDemoSwitch, setForceDemoSwitch] = useState<boolean>(false)\n  45 |   useEffect(() => {\n> 46 |     setForceDemoSwitch(localStorage.getItem('force_demo_switch') === '1')\n     |     ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  47 |   }, [])\n  48 |\n  49 |   const toggleForceDemoSwitch = (checked: boolean) => {","line":46,"column":5,"nodeType":null,"endLine":46,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { Card, Button, Space, Tag, message, Divider, Row, Col, Switch, Select, Alert } from 'antd'\r\nimport { useStore } from '@/store'\r\nimport { usePermission } from '@app-hooks/usePermission'\r\nimport PermissionGuard from '@/components/auth/PermissionGuard'\r\nimport AuthButton from '@/components/auth/AuthButton'\r\nimport { permissionService } from '@src/service/permissionService'\r\nimport FixTabPanel from '@stateless/FixTabPanel'\r\nimport { useProThemeContext } from '@/theme/hooks'\r\nconst PermissionExample = () => {\r\n  const screens = useStore((s) => s.screens)\r\n  const { themeSettings, updateSettings } = useProThemeContext()\r\n  const {\r\n    permissions,\r\n    roles,\r\n    routes,\r\n    loading,\r\n    hasPermission,\r\n    hasAllPermissions,\r\n    hasAnyPermission,\r\n    hasRole,\r\n    canAccessRoute,\r\n    refreshPermissions,\r\n  } = usePermission()\r\n\r\n  // 角色切换（开发测试用）\r\n  const switchRole = async (roleCode: string) => {\r\n    // 如果已登录且未强制启用示例切换，则阻止切换，以免与真实登录权限冲突\r\n    const token =\r\n      localStorage.getItem('token') || localStorage.getItem('github_token') || localStorage.getItem('github_user')\r\n    const force = localStorage.getItem('force_demo_switch') === '1'\r\n    if (token && !force) {\r\n      message.warning('当前为已登录状态，示例内角色切换已被禁用。如需测试切换，请先登出或在本页面启用开发强制开关。')\r\n      return\r\n    }\r\n\r\n    localStorage.setItem('user_role', roleCode)\r\n    await permissionService.syncPermissions()\r\n    await refreshPermissions()\r\n    message.success(`已切换到 ${roleCode} 角色`)\r\n  }\r\n\r\n  // 本地控制：开发时可强制启用示例切换（仅页面级别）\r\n  const [forceDemoSwitch, setForceDemoSwitch] = useState<boolean>(false)\r\n  useEffect(() => {\r\n    setForceDemoSwitch(localStorage.getItem('force_demo_switch') === '1')\r\n  }, [])\r\n\r\n  const toggleForceDemoSwitch = (checked: boolean) => {\r\n    setForceDemoSwitch(checked)\r\n    if (checked) localStorage.setItem('force_demo_switch', '1')\r\n    else localStorage.removeItem('force_demo_switch')\r\n    message.info(`开发强制切换已${checked ? '启用' : '禁用'}`)\r\n  }\r\n\r\n  // 主题设置切换\r\n  const handleThemeModeChange = (checked: boolean) => {\r\n    updateSettings({ themeMode: checked ? 'dark' : 'light' })\r\n    message.success(`已切换到${checked ? '暗色' : '亮色'}主题`)\r\n  }\r\n\r\n  const handleCompactModeChange = (checked: boolean) => {\r\n    updateSettings({ compactAlgorithm: checked })\r\n    message.success(`${checked ? '开启' : '关闭'}紧凑模式`)\r\n  }\r\n\r\n  const handlePrimaryColorChange = (color: string) => {\r\n    updateSettings({ colorPrimary: color })\r\n    message.success('主题色已更新')\r\n  }\r\n\r\n  if (loading) {\r\n    return <div>加载权限中...</div>\r\n  }\r\n\r\n  return (\r\n    <FixTabPanel>\r\n      <div style={{ padding: screens.xs ? 16 : 24 }}>\r\n        <Row gutter={[16, 16]}>\r\n          <Col xs={24} lg={18}>\r\n            <h1\r\n              style={{\r\n                fontSize: screens.xs ? '20px' : '24px',\r\n                marginBottom: '8px',\r\n              }}\r\n            >\r\n              权限系统示例\r\n            </h1>\r\n            <p style={{ color: 'rgba(0, 0, 0, 0.65)', marginBottom: '16px' }}>\r\n              系统为四个角色随机分配了路由权限，您可以切换不同角色查看权限差异。\r\n            </p>\r\n          </Col>\r\n          <Col xs={24} lg={6}>\r\n            <Card title=\"主题设置\" size=\"small\">\r\n              <div\r\n                style={{\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  width: '100%',\r\n                  gap: '16px',\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                  }}\r\n                >\r\n                  <span>暗色主题</span>\r\n                  <Switch checked={themeSettings.themeMode === 'dark'} onChange={handleThemeModeChange} />\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                  }}\r\n                >\r\n                  <span>紧凑模式</span>\r\n                  <Switch checked={themeSettings.compactAlgorithm} onChange={handleCompactModeChange} />\r\n                </div>\r\n                <div>\r\n                  <span style={{ marginRight: '8px' }}>主题色</span>\r\n                  <Select\r\n                    value={themeSettings.colorPrimary}\r\n                    onChange={handlePrimaryColorChange}\r\n                    style={{ width: '120px' }}\r\n                    size=\"small\"\r\n                  >\r\n                    <Select.Option value=\"#1677ff\">蓝色</Select.Option>\r\n                    <Select.Option value=\"#52c41a\">绿色</Select.Option>\r\n                    <Select.Option value=\"#faad14\">橙色</Select.Option>\r\n                    <Select.Option value=\"#f5222d\">红色</Select.Option>\r\n                    <Select.Option value=\"#722ed1\">紫色</Select.Option>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Divider />\r\n\r\n        {/* 登录时提示：已使用登录账户权限，示例切换已禁用 */}\r\n        {(localStorage.getItem('token') ||\r\n          localStorage.getItem('github_token') ||\r\n          localStorage.getItem('github_user')) &&\r\n          !forceDemoSwitch && (\r\n            <Alert\r\n              title=\"已使用登录账户权限，示例切换已禁用\"\r\n              description={\r\n                <div>\r\n                  如需临时启用示例切换（仅用于开发），可在下方启用“开发强制开关”。启用后示例切换会覆盖当前页面权限视图，但不会修改后端用户数据。\r\n                </div>\r\n              }\r\n              type=\"warning\"\r\n              showIcon\r\n              style={{ marginBottom: 16 }}\r\n            />\r\n          )}\r\n\r\n        {/* 开发强制开关，仅在非生产或 localhost 显示 */}\r\n        {(process.env.NODE_ENV !== 'production' || window.location.hostname.includes('localhost')) && (\r\n          <div\r\n            style={{\r\n              marginBottom: 16,\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: 12,\r\n            }}\r\n          >\r\n            <Switch checked={forceDemoSwitch} onChange={toggleForceDemoSwitch} />\r\n            <span style={{ color: 'rgba(0,0,0,0.65)' }}>开发：强制启用示例切换（仅页面级别）</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* 权限说明 */}\r\n        <Card title=\"权限说明\" style={{ marginBottom: 16 }} size={screens.xs ? 'small' : 'default'}>\r\n          <Row gutter={[16, 8]}>\r\n            <Col xs={24} sm={12} lg={6}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>超级管理员</strong>\r\n                <br />\r\n                <small>拥有所有路由访问权限（100%）</small>\r\n              </div>\r\n            </Col>\r\n            <Col xs={24} sm={12} lg={6}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>管理员</strong>\r\n                <br />\r\n                <small>随机分配约 75% 的路由</small>\r\n              </div>\r\n            </Col>\r\n            <Col xs={24} sm={12} lg={6}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>业务员</strong>\r\n                <br />\r\n                <small>随机分配约 50% 的路由</small>\r\n              </div>\r\n            </Col>\r\n            <Col xs={24} sm={12} lg={6}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>普通用户</strong>\r\n                <br />\r\n                <small>随机分配约 25% 的路由</small>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* 当前权限信息 */}\r\n        <Card title=\"当前权限信息\" style={{ marginBottom: 16 }}>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <p>\r\n                <strong>当前角色:</strong> {roles.join(', ') || '无'}\r\n              </p>\r\n              <p>\r\n                <strong>权限列表:</strong>\r\n              </p>\r\n              <Space wrap>\r\n                {permissions.map((perm) => (\r\n                  <Tag key={perm} color=\"blue\">\r\n                    {perm}\r\n                  </Tag>\r\n                ))}\r\n              </Space>\r\n            </Col>\r\n            <Col span={12}>\r\n              <p>\r\n                <strong>可访问路由 ({routes.length} 个):</strong>\r\n              </p>\r\n              <Space wrap>\r\n                {routes.slice(0, 10).map((route) => (\r\n                  <Tag key={route} color=\"green\">\r\n                    {route}\r\n                  </Tag>\r\n                ))}\r\n                {routes.length > 10 && <Tag>...等</Tag>}\r\n              </Space>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* 角色切换 */}\r\n        <Card title=\"角色列表\" style={{ marginBottom: 16 }} size={screens.xs ? 'small' : 'default'}>\r\n          <Row gutter={[16, 16]}>\r\n            {[\r\n              {\r\n                code: 'super_admin',\r\n                name: '超级管理员',\r\n                desc: '拥有所有权限',\r\n                routes: 29,\r\n              },\r\n              {\r\n                code: 'admin',\r\n                name: '管理员',\r\n                desc: '拥有大部分权限',\r\n                routes: 16,\r\n              },\r\n              {\r\n                code: 'business_user',\r\n                name: '业务员',\r\n                desc: '拥有业务相关权限',\r\n                routes: 10,\r\n              },\r\n              {\r\n                code: 'user',\r\n                name: '普通用户',\r\n                desc: '仅拥有基本权限',\r\n                routes: 7,\r\n              },\r\n            ].map((role) => (\r\n              <Col xs={24} sm={12} key={role.code}>\r\n                <div\r\n                  style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    padding: '8px',\r\n                    border: '1px solid #f0f0f0',\r\n                    borderRadius: '4px',\r\n                  }}\r\n                >\r\n                  <div style={{ flex: 1 }}>\r\n                    <strong>{role.name}</strong>\r\n                    <br />\r\n                    <small>\r\n                      {role.desc} - {role.routes} 个路由\r\n                    </small>\r\n                    {roles.includes(role.code) && (\r\n                      <Tag color=\"red\" style={{ marginLeft: 8 }}>\r\n                        当前\r\n                      </Tag>\r\n                    )}\r\n                  </div>\r\n                  {/* 如果当前为已登录状态，禁用示例内切换按钮以避免覆盖真实用户权限 */}\r\n                  <Button\r\n                    type={roles.includes(role.code) ? 'primary' : 'default'}\r\n                    onClick={() => switchRole(role.code)}\r\n                    size={screens.xs ? 'small' : 'middle'}\r\n                    disabled={\r\n                      !!(\r\n                        localStorage.getItem('token') ||\r\n                        localStorage.getItem('github_token') ||\r\n                        localStorage.getItem('github_user')\r\n                      )\r\n                    }\r\n                  >\r\n                    切换\r\n                  </Button>\r\n                </div>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* 权限组件示例 */}\r\n        <Card title=\"PermissionGuard 组件\" style={{ marginBottom: 16 }} size={screens.xs ? 'small' : 'default'}>\r\n          <Row gutter={[16, 16]}>\r\n            <Col xs={24} sm={24} md={8}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>单个权限检查：</strong>\r\n                <br />\r\n                <PermissionGuard permission=\"user:read\" fallback={<span style={{ color: 'red' }}>无权限查看</span>}>\r\n                  <span style={{ color: 'green' }}>您有 user:read 权限，可以看到这个内容</span>\r\n                </PermissionGuard>\r\n              </div>\r\n            </Col>\r\n            <Col xs={24} sm={24} md={8}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>多个权限检查（任一即可）：</strong>\r\n                <br />\r\n                <PermissionGuard\r\n                  permissions={['user:create', 'role:create']}\r\n                  fallback={<span style={{ color: 'red' }}>无权限查看</span>}\r\n                >\r\n                  <span style={{ color: 'green' }}>您有 user:create 或 role:create 权限之一</span>\r\n                </PermissionGuard>\r\n              </div>\r\n            </Col>\r\n            <Col xs={24} sm={24} md={8}>\r\n              <div\r\n                style={{\r\n                  padding: '8px',\r\n                  border: '1px solid #f0f0f0',\r\n                  borderRadius: '4px',\r\n                }}\r\n              >\r\n                <strong>角色检查：</strong>\r\n                <br />\r\n                <PermissionGuard\r\n                  roles={['admin', 'super_admin']}\r\n                  fallback={<span style={{ color: 'red' }}>非管理员</span>}\r\n                >\r\n                  <span style={{ color: 'green' }}>您是管理员（含超级管理员）</span>\r\n                </PermissionGuard>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* 按钮权限示例 */}\r\n        <Card title=\"AuthButton 组件\" style={{ marginBottom: 16 }} size={screens.xs ? 'small' : 'default'}>\r\n          <Row gutter={[8, 8]}>\r\n            <Col xs={24} sm={8}>\r\n              <AuthButton permission=\"user:create\" onClick={() => message.success('创建用户')} block>\r\n                创建用户\r\n              </AuthButton>\r\n            </Col>\r\n            <Col xs={24} sm={8}>\r\n              <AuthButton\r\n                permission=\"user:delete\"\r\n                hideWhenNoPermission={false}\r\n                onClick={() => message.success('删除用户')}\r\n                block\r\n              >\r\n                删除用户（禁用状态）\r\n              </AuthButton>\r\n            </Col>\r\n            <Col xs={24} sm={8}>\r\n              <AuthButton\r\n                permissions={['user:update', 'role:update']}\r\n                onClick={() => message.success('更新操作')}\r\n                block\r\n              >\r\n                更新操作（需任一权限）\r\n              </AuthButton>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* Hook 检查示例 */}\r\n        <Card title=\"usePermission Hook 检查\" style={{ marginBottom: 16 }} size={screens.xs ? 'small' : 'default'}>\r\n          <Row gutter={[8, 8]}>\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Button\r\n                onClick={async () => {\r\n                  const canEdit = await hasPermission('user:update')\r\n                  message.info(canEdit ? '有 user:update 权限' : '无 user:update 权限')\r\n                }}\r\n                block\r\n              >\r\n                检查单个权限 (user:update)\r\n              </Button>\r\n            </Col>\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Button\r\n                onClick={async () => {\r\n                  const canAccess = await canAccessRoute('/business')\r\n                  message.info(canAccess ? '可访问 /business' : '不可访问 /business')\r\n                }}\r\n                block\r\n              >\r\n                检查路由权限 (/business)\r\n              </Button>\r\n            </Col>\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Button\r\n                onClick={async () => {\r\n                  const hasAll = await hasAllPermissions(['user:read', 'user:create'])\r\n                  message.info(hasAll ? '同时拥有 user:read 和 user:create' : '缺少至少一个权限')\r\n                }}\r\n                block\r\n              >\r\n                检查多个权限（全部需要）\r\n              </Button>\r\n            </Col>\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Button\r\n                onClick={async () => {\r\n                  const hasAny = await hasAnyPermission(['user:read', 'role:read'])\r\n                  message.info(hasAny ? '有 user:read 或 role:read 权限之一' : '都没有这些权限')\r\n                }}\r\n                block\r\n              >\r\n                检查多个权限（任一即可）\r\n              </Button>\r\n            </Col>\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Button\r\n                onClick={async () => {\r\n                  const isAdmin = (await hasRole('admin')) || (await hasRole('super_admin'))\r\n                  message.info(isAdmin ? '是管理员（admin / super_admin）' : '不是管理员')\r\n                }}\r\n                block\r\n              >\r\n                检查角色 (admin/super_admin)\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* 刷新权限 */}\r\n        <Card title=\"权限操作\" size={screens.xs ? 'small' : 'default'}>\r\n          <Button onClick={refreshPermissions} block={!!screens.xs}>\r\n            刷新权限\r\n          </Button>\r\n        </Card>\r\n      </div>\r\n    </FixTabPanel>\r\n  )\r\n}\r\n\r\nexport default PermissionExample\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\phbar\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\about.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\contact.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\home.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\info.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\navbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\project.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\components\\stack.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\portfilo\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Grid' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":7},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  92 |   useEffect(() => {\n  93 |     // 动态计算偏移量，保持在视口顶部附近但留有呼吸空间\n> 94 |     setTargetOffset(window.innerHeight * 0.1)\n     |     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  95 |   }, [])\n  96 |\n  97 |   const navItems = [","line":94,"column":5,"nodeType":null,"endLine":94,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useNavigate } from 'react-router-dom'\nimport {\n  theme,\n  Typography,\n  Button,\n  Card,\n  Tag,\n  Row,\n  Col,\n  Timeline,\n  Avatar,\n  Space,\n  Anchor,\n  Divider,\n  Tooltip,\n  Grid,\n  FloatButton,\n} from 'antd'\nimport { useStore } from '@/store'\nimport { motion, useScroll, useSpring } from 'framer-motion'\nimport {\n  GithubOutlined,\n  MailOutlined,\n  RocketOutlined,\n  CodeOutlined,\n  ProjectOutlined,\n  UserOutlined,\n  CheckCircleOutlined,\n  LaptopOutlined,\n  ToolOutlined,\n  ArrowLeftOutlined,\n  XOutlined,\n  MenuOutlined,\n} from '@ant-design/icons'\nimport avatarPng from '@assets/images/w.png'\n\nconst { Title, Paragraph, Text } = Typography\nconst { useToken } = theme\n\nconst Section = ({ id, children, className = '' }) => {\n  return (\n    <section\n      id={id}\n      className={`flex min-h-screen flex-col justify-center py-20 ${className}`}\n      style={{ scrollMarginTop: 80 }}\n    >\n      {children}\n    </section>\n  )\n}\n\nSection.propTypes = {\n  id: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n}\n\nconst AnimatedCard = ({ children, delay = 0 }) => (\n  <motion.div\n    initial={{ opacity: 0, y: 20 }}\n    whileInView={{ opacity: 1, y: 0 }}\n    viewport={{ once: true }}\n    transition={{ duration: 0.5, delay }}\n    whileHover={{ y: -5 }}\n  >\n    {children}\n  </motion.div>\n)\n\nAnimatedCard.propTypes = {\n  children: PropTypes.node.isRequired,\n  delay: PropTypes.number,\n}\n\nconst MyPortfilo = () => {\n  const navigate = useNavigate()\n  const { token, theme: antdTheme } = useToken()\n  const isMobile = useStore((s) => s.isMobile)\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)\n  const containerRef = useRef(null)\n  const { scrollYProgress } = useScroll({ container: containerRef })\n  const scaleX = useSpring(scrollYProgress, {\n    stiffness: 100,\n    damping: 30,\n    restDelta: 0.001,\n  })\n\n  const [targetOffset, setTargetOffset] = useState(80)\n\n  useEffect(() => {\n    // 动态计算偏移量，保持在视口顶部附近但留有呼吸空间\n    setTargetOffset(window.innerHeight * 0.1)\n  }, [])\n\n  const navItems = [\n    {\n      key: 'home',\n      href: '#home',\n      title: <span style={{ fontSize: 12 }}>Home</span>,\n    },\n    {\n      key: 'about',\n      href: '#about',\n      title: <span style={{ fontSize: 12 }}>About</span>,\n    },\n    {\n      key: 'skills',\n      href: '#skills',\n      title: <span style={{ fontSize: 12 }}>Skills</span>,\n    },\n    {\n      key: 'projects',\n      href: '#projects',\n      title: <span style={{ fontSize: 12 }}>Work</span>,\n    },\n    {\n      key: 'experience',\n      href: '#experience',\n      title: <span style={{ fontSize: 12 }}>Exp</span>,\n    },\n    {\n      key: 'contact',\n      href: '#contact',\n      title: <span style={{ fontSize: 12 }}>Contact</span>,\n    },\n  ]\n\n  const handleAnchorClick = (e, link) => {\n    e.preventDefault()\n    const targetId = link.href.split('#')[1]\n    if (targetId) {\n      const target = document.getElementById(targetId)\n      if (target) {\n        target.scrollIntoView({ behavior: 'smooth' })\n      }\n    }\n    if (mobileMenuOpen) setMobileMenuOpen(false)\n  }\n\n  const skills = [\n    { name: 'React', color: '#61DAFB' },\n    { name: 'TypeScript', color: '#3178C6' },\n    { name: 'Node.js', color: '#339933' },\n    { name: 'Ant Design', color: '#1890FF' },\n    { name: 'Tailwind CSS', color: '#38B2AC' },\n    { name: 'Next.js', color: '#000000' },\n    { name: 'GraphQL', color: '#E10098' },\n    { name: 'Docker', color: '#2496ED' },\n  ]\n\n  const projects = [\n    {\n      title: 'Pro React Admin',\n      desc: 'A comprehensive enterprise-level admin dashboard template based on React, Ant Design, and Vite.',\n      tags: ['React', 'Ant Design', 'Vite'],\n      icon: <LaptopOutlined />,\n    },\n    {\n      title: 'E-Commerce Platform',\n      desc: 'A full-stack e-commerce solution with real-time inventory management and payment integration.',\n      tags: ['Next.js', 'Node.js', 'Stripe'],\n      icon: <RocketOutlined />,\n    },\n    {\n      title: 'Data Visualization Dashboard',\n      desc: 'Interactive dashboard for visualizing complex datasets using and ECharts.',\n      tags: ['Vue', 'ECharts'],\n      icon: <CodeOutlined />,\n    },\n  ]\n\n  const experiences = [\n    {\n      year: '2023 - Present',\n      title: 'Senior Frontend Engineer',\n      company: 'Tech Corp',\n      desc: 'Leading the frontend team, architecting scalable solutions, and mentoring junior developers.',\n    },\n    {\n      year: '2021 - 2023',\n      title: 'Full Stack Developer',\n      company: 'StartUp Inc',\n      desc: 'Developed and maintained multiple web applications using React and Node.js.',\n    },\n    {\n      year: '2019 - 2021',\n      title: 'Frontend Developer',\n      company: 'Web Solutions',\n      desc: 'Collaborated with designers to implement responsive and accessible user interfaces.',\n    },\n  ]\n\n  return (\n    <div\n      id=\"portfolio-container\"\n      ref={containerRef}\n      style={{\n        backgroundColor: token.colorBgContainer,\n        color: token.colorText,\n        position: 'relative',\n        height: '100vh',\n        overflowY: 'auto',\n        overflowX: 'hidden',\n        scrollBehavior: 'smooth',\n        backgroundImage:\n          antdTheme.id === 1 // Dark mode check approximation or use token\n            ? `radial-gradient(circle at 50% 50%, ${token.colorPrimaryBg} 0%, transparent 50%), radial-gradient(circle at 0% 0%, ${token.colorFill} 0%, transparent 30%), radial-gradient(circle at 100% 100%, ${token.colorFill} 0%, transparent 30%)`\n            : `radial-gradient(circle at 50% 50%, ${token.colorPrimaryBg} 0%, transparent 60%), radial-gradient(circle at 100% 0%, ${token.colorFill} 0%, transparent 40%)`,\n        backgroundAttachment: 'fixed',\n        backgroundSize: 'cover',\n      }}\n    >\n      {/* Floating Shapes Background */}\n      <div\n        style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden',\n          pointerEvents: 'none',\n          zIndex: 0,\n        }}\n      >\n        <motion.div\n          animate={{\n            x: [0, 100, 0],\n            y: [0, 50, 0],\n            rotate: [0, 180, 360],\n          }}\n          transition={{\n            duration: 20,\n            repeat: Infinity,\n            ease: 'linear',\n          }}\n          style={{\n            position: 'absolute',\n            top: '10%',\n            left: '10%',\n            width: 300,\n            height: 300,\n            borderRadius: '50%',\n            background: token.colorPrimary,\n            filter: 'blur(100px)',\n            opacity: 0.1,\n          }}\n        />\n        <motion.div\n          animate={{\n            x: [0, -100, 0],\n            y: [0, -50, 0],\n            rotate: [0, -180, -360],\n          }}\n          transition={{\n            duration: 25,\n            repeat: Infinity,\n            ease: 'linear',\n          }}\n          style={{\n            position: 'absolute',\n            bottom: '20%',\n            right: '10%',\n            width: 400,\n            height: 400,\n            borderRadius: '50%',\n            background: token.colorSuccess,\n            filter: 'blur(120px)',\n            opacity: 0.08,\n          }}\n        />\n      </div>\n      {/* Progress Bar */}\n      <motion.div\n        style={{\n          scaleX,\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          height: 4,\n          background: token.colorPrimary,\n          transformOrigin: '0%',\n          zIndex: 1000,\n        }}\n      />\n\n      {/* Back Button */}\n      <motion.div\n        initial={{ opacity: 0, x: -20 }}\n        animate={{ opacity: 1, x: 0 }}\n        transition={{ delay: 0.5 }}\n        style={{\n          position: 'fixed',\n          top: 24,\n          left: 24,\n          zIndex: 100,\n        }}\n      >\n        <Tooltip title=\"Back to Home\">\n          <Button\n            shape=\"circle\"\n            size=\"large\"\n            icon={<ArrowLeftOutlined />}\n            onClick={() => navigate('/')}\n            style={{\n              color: token.colorText,\n              background: token.colorBgElevated,\n              backdropFilter: 'blur(10px)',\n              border: `1px solid ${token.colorBorderSecondary}`,\n              boxShadow: token.boxShadowSecondary,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}\n          />\n        </Tooltip>\n      </motion.div>\n\n      {/* Navigation */}\n      {!isMobile ? (\n        <FloatButton.Group\n          trigger=\"click\"\n          type=\"primary\"\n          icon={<MenuOutlined />}\n          open={mobileMenuOpen}\n          onOpenChange={(open) => setMobileMenuOpen(open)}\n          style={{ right: 24, bottom: 24 }}\n        >\n          <FloatButton\n            icon={<RocketOutlined />}\n            tooltip=\"Home\"\n            onClick={() => handleAnchorClick({ preventDefault: () => {} }, { href: '#home' })}\n          />\n          <FloatButton\n            icon={<UserOutlined />}\n            tooltip=\"About\"\n            onClick={() => handleAnchorClick({ preventDefault: () => {} }, { href: '#about' })}\n          />\n          <FloatButton\n            icon={<ToolOutlined />}\n            tooltip=\"Skills\"\n            onClick={() => handleAnchorClick({ preventDefault: () => {} }, { href: '#skills' })}\n          />\n          <FloatButton\n            icon={<ProjectOutlined />}\n            tooltip=\"Work\"\n            onClick={() => handleAnchorClick({ preventDefault: () => {} }, { href: '#projects' })}\n          />\n          <FloatButton\n            icon={<CheckCircleOutlined />}\n            tooltip=\"Exp\"\n            onClick={() => handleAnchorClick({ preventDefault: () => {} }, { href: '#experience' })}\n          />\n          <FloatButton\n            icon={<MailOutlined />}\n            tooltip=\"Contact\"\n            onClick={() => handleAnchorClick({ preventDefault: () => {} }, { href: '#contact' })}\n          />\n        </FloatButton.Group>\n      ) : (\n        <div\n          style={{\n            position: 'fixed',\n            top: '50%',\n            right: 24,\n            transform: 'translateY(-50%)',\n            zIndex: 100,\n            backgroundColor: token.colorBgElevated,\n            borderRadius: token.borderRadiusLG,\n            padding: '16px 12px',\n            boxShadow: token.boxShadowSecondary,\n            backdropFilter: 'blur(10px)',\n            border: `1px solid ${token.colorBorderSecondary}`,\n          }}\n        >\n          <Anchor\n            targetOffset={targetOffset}\n            getContainer={() => containerRef.current || document.getElementById('portfolio-container')}\n            direction=\"vertical\"\n            onClick={handleAnchorClick}\n            items={navItems}\n            style={{ backgroundColor: 'transparent' }}\n          />\n        </div>\n      )}\n\n      <div\n        style={{\n          maxWidth: 1200,\n          margin: '0 auto',\n          padding: '0 24px',\n          position: 'relative',\n          zIndex: 1,\n        }}\n      >\n        {/* Home Section */}\n        <Section id=\"home\" className=\"flex flex-col items-center justify-center text-center\">\n          <motion.div\n            initial={{ scale: 0, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ type: 'spring', stiffness: 260, damping: 20 }}\n          >\n            <Avatar\n              size={160}\n              src={avatarPng}\n              style={{\n                border: `4px solid ${token.colorPrimary}`,\n                marginBottom: 32,\n              }}\n            />\n          </motion.div>\n          <motion.div initial={{ y: 50, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ delay: 0.2 }}>\n            <Title level={1} style={{ fontSize: '4rem', marginBottom: 16 }}>\n              Hi, I'm <span style={{ color: token.colorPrimary }}>Wkylin</span>\n            </Title>\n            <Title level={3} type=\"secondary\" style={{ fontWeight: 300 }}>\n              Building Digital Experiences with Passion & Code\n            </Title>\n            <Space size=\"large\" style={{ marginTop: 32 }}>\n              <Button\n                type=\"primary\"\n                size=\"large\"\n                shape=\"round\"\n                icon={<RocketOutlined />}\n                onClick={() => document.getElementById('projects')?.scrollIntoView({ behavior: 'smooth' })}\n              >\n                View Work\n              </Button>\n              <Button\n                size=\"large\"\n                shape=\"round\"\n                icon={<UserOutlined />}\n                onClick={() => document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' })}\n              >\n                Contact Me\n              </Button>\n            </Space>\n          </motion.div>\n        </Section>\n\n        {/* About Section */}\n        <Section id=\"about\">\n          <Divider titlePlacement=\"left\">\n            <Title level={2}>About Me</Title>\n          </Divider>\n          <Row gutter={[48, 48]} align=\"middle\">\n            <Col xs={24} md={12}>\n              <AnimatedCard>\n                <Paragraph style={{ fontSize: 18, lineHeight: 1.8 }}>\n                  I am a passionate <strong>Full Stack Developer</strong> with a keen eye for detail and a drive for\n                  excellence. I specialize in building scalable, high-performance web applications using modern\n                  technologies.\n                </Paragraph>\n                <Paragraph style={{ fontSize: 18, lineHeight: 1.8 }}>\n                  With a strong foundation in both frontend and backend development, I enjoy solving complex problems\n                  and turning ideas into reality. I am constantly learning and exploring new technologies to stay ahead\n                  in the ever-evolving tech landscape.\n                </Paragraph>\n              </AnimatedCard>\n            </Col>\n            <Col xs={24} md={12}>\n              <Row gutter={[16, 16]}>\n                {[\n                  { title: 'Fast Learner', icon: <RocketOutlined /> },\n                  { title: 'Team Player', icon: <UserOutlined /> },\n                  { title: 'Problem Solver', icon: <ToolOutlined /> },\n                  { title: 'Detail Oriented', icon: <CheckCircleOutlined /> },\n                ].map((item, index) => (\n                  <Col span={12} key={item.title}>\n                    <AnimatedCard delay={index * 0.1}>\n                      <Card\n                        variant=\"borderless\"\n                        style={{\n                          textAlign: 'center',\n                          background: token.colorFillAlter,\n                          borderRadius: token.borderRadiusLG,\n                        }}\n                      >\n                        <div\n                          style={{\n                            fontSize: 32,\n                            color: token.colorPrimary,\n                            marginBottom: 8,\n                          }}\n                        >\n                          {item.icon}\n                        </div>\n                        <Text strong>{item.title}</Text>\n                      </Card>\n                    </AnimatedCard>\n                  </Col>\n                ))}\n              </Row>\n            </Col>\n          </Row>\n        </Section>\n\n        {/* Skills Section */}\n        <Section id=\"skills\">\n          <Divider titlePlacement=\"left\">\n            <Title level={2}>Tech Stack</Title>\n          </Divider>\n          <Row gutter={[16, 16]}>\n            {skills.map((skill, index) => (\n              <Col key={skill.name}>\n                <AnimatedCard delay={index * 0.05}>\n                  <Tag\n                    color={skill.color}\n                    style={{\n                      padding: '8px 16px',\n                      fontSize: 16,\n                      borderRadius: 20,\n                      border: 'none',\n                      marginBottom: 8,\n                    }}\n                  >\n                    {skill.name}\n                  </Tag>\n                </AnimatedCard>\n              </Col>\n            ))}\n          </Row>\n          <div style={{ marginTop: 48 }}>\n            <Title level={3}>Capabilities</Title>\n            <Row gutter={[24, 24]}>\n              <Col xs={24} md={8}>\n                <AnimatedCard>\n                  <Card title=\"Frontend Development\" variant=\"borderless\" className=\"shadow-sm\">\n                    <Paragraph>\n                      Expertise in building responsive, interactive, and accessible user interfaces using React, Vue,\n                      and modern CSS frameworks.\n                    </Paragraph>\n                  </Card>\n                </AnimatedCard>\n              </Col>\n              <Col xs={24} md={8}>\n                <AnimatedCard delay={0.2}>\n                  <Card title=\"Backend Development\" variant=\"borderless\" className=\"shadow-sm\">\n                    <Paragraph>\n                      Experience in designing and implementing RESTful APIs, microservices, and database schemas using\n                      Node.js and Python.\n                    </Paragraph>\n                  </Card>\n                </AnimatedCard>\n              </Col>\n              <Col xs={24} md={8}>\n                <AnimatedCard delay={0.4}>\n                  <Card title=\"DevOps & Tools\" variant=\"borderless\" className=\"shadow-sm\">\n                    <Paragraph>\n                      Proficient in using Git, Docker, CI/CD pipelines, and cloud platforms to ensure smooth deployment\n                      and operation.\n                    </Paragraph>\n                  </Card>\n                </AnimatedCard>\n              </Col>\n            </Row>\n          </div>\n        </Section>\n\n        {/* Projects Section */}\n        <Section id=\"projects\">\n          <Divider titlePlacement=\"left\">\n            <Title level={2}>Featured Projects</Title>\n          </Divider>\n          <Row gutter={[24, 24]}>\n            {projects.map((project, index) => (\n              <Col xs={24} md={8} key={project.title}>\n                <AnimatedCard delay={index * 0.2}>\n                  <Card\n                    hoverable\n                    style={{ height: '100%' }}\n                    cover={\n                      <div\n                        style={{\n                          height: 200,\n                          background: token.colorPrimaryBg,\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          fontSize: 64,\n                          color: token.colorPrimary,\n                        }}\n                      >\n                        {project.icon}\n                      </div>\n                    }\n                    actions={[\n                      <GithubOutlined key=\"github\" />,\n                      <RocketOutlined key=\"demo\" />,\n                      <ProjectOutlined key=\"detail\" />,\n                    ]}\n                  >\n                    <Card.Meta\n                      title={project.title}\n                      description={\n                        <>\n                          <Paragraph ellipsis={{ rows: 2 }}>{project.desc}</Paragraph>\n                          <Space wrap>\n                            {project.tags.map((tag) => (\n                              <Tag key={tag}>{tag}</Tag>\n                            ))}\n                          </Space>\n                        </>\n                      }\n                    />\n                  </Card>\n                </AnimatedCard>\n              </Col>\n            ))}\n          </Row>\n        </Section>\n\n        {/* Experience Section */}\n        <Section id=\"experience\">\n          <Divider titlePlacement=\"left\">\n            <Title level={2}>Experience</Title>\n          </Divider>\n          <div style={{ maxWidth: 800, margin: '0 auto' }}>\n            <Timeline\n              mode=\"alternate\"\n              items={experiences.map((exp, index) => ({\n                title: (\n                  <div style={{ marginTop: 8 }}>\n                    <Tag color=\"blue\">{exp.year}</Tag>\n                  </div>\n                ),\n                content: (\n                  <AnimatedCard delay={index * 0.2}>\n                    <Card variant=\"borderless\" style={{ background: token.colorFillAlter }}>\n                      <Title level={5} style={{ margin: 0 }}>\n                        {exp.title}\n                      </Title>\n                      <Text type=\"secondary\">{exp.company}</Text>\n                      <Paragraph style={{ marginTop: 16 }}>{exp.desc}</Paragraph>\n                    </Card>\n                  </AnimatedCard>\n                ),\n                color: token.colorPrimary,\n              }))}\n            />\n          </div>\n        </Section>\n\n        {/* Contact Section */}\n        <Section id=\"contact\" className=\"flex flex-col items-center justify-center\">\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            whileInView={{ scale: 1, opacity: 1 }}\n            transition={{ duration: 0.5 }}\n            style={{ textAlign: 'center' }}\n          >\n            <Title level={2}>Get In Touch</Title>\n            <Paragraph style={{ fontSize: 18, maxWidth: 600, margin: '0 auto 32px' }}>\n              I'm currently open to new opportunities and collaborations. Whether you have a question or just want to\n              say hi, feel free to reach out!\n            </Paragraph>\n            <Space size=\"large\">\n              <Button type=\"primary\" size=\"large\" icon={<MailOutlined />} onClick={() => navigate('/contact')}>\n                Email Me\n              </Button>\n              <Button size=\"large\" icon={<GithubOutlined />} href=\"https://github.com/wkylin\" target=\"_blank\">\n                GitHub\n              </Button>\n              <Button size=\"large\" icon={<XOutlined />} href=\"https://x.com/home\" target=\"_blank\">\n                X\n              </Button>\n            </Space>\n          </motion.div>\n          <div style={{ marginTop: 64, color: token.colorTextSecondary }}>\n            © {new Date().getFullYear()} Wkylin. All Rights Reserved.\n          </div>\n        </Section>\n      </div>\n    </div>\n  )\n}\n\nexport default MyPortfilo\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\postmessage\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\postmessage\\myIframe\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\print\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react'\nimport { Button } from 'antd'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport { useReactToPrint } from 'react-to-print'\n\nimport ComponentToPrint from './test/toPrint'\n\nconst MyPrint = () => {\n  const componentRef = React.useRef(null)\n  const [loading, setLoading] = useState(false)\n\n  const handleAfterPrint = React.useCallback(() => {\n    setLoading(false)\n  }, [])\n\n  const handleBeforePrint = React.useCallback(() => {\n    setLoading(true)\n    return Promise.resolve()\n  }, [])\n\n  const handlePrintError = React.useCallback(() => {\n    setLoading(false)\n  }, [])\n\n  const printFn = useReactToPrint({\n    contentRef: componentRef,\n    documentTitle: 'AwesomeFileName',\n    onAfterPrint: handleAfterPrint,\n    onBeforePrint: handleBeforePrint,\n    onPrintError: handlePrintError,\n  })\n  return (\n    <FixTabPanel>\n      <ComponentToPrint ref={componentRef} />\n      <Button type=\"primary\" onClick={printFn} loading={loading}>\n        Print\n      </Button>\n    </FixTabPanel>\n  )\n}\n\nexport default MyPrint\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\print\\test\\toPrint.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\prism\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\privacy\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\profile\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scrollRef' is assigned a value but never used.","line":28,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'\nimport { dracula } from 'react-syntax-highlighter/dist/esm/styles/prism'\n\nconst codeString = `const profile = {\n  name: 'Wkylin Wang',\n  title: 'Full-Stack Developer',\n  skills: [\n    'React', 'Vue' 'NextJS', 'Redux', 'TypeScript',\n    'MySQL', 'MongoDB', 'Docker', 'Express',\n    'GraphQL', 'Git',\n  ],\n  hobbies: ['Music', 'Travel', 'Film', 'Reading'],\n  languages: ['English', 'Chinese'],\n  vision: {\n    life: 'Colourful',\n    work: 'Successful',\n    love: 'Sweet',\n    family: 'Healthy',\n  },\n  hardWorker: true,\n  quickLearner: true,\n  problemSolver: true,\n  yearsOfExperience: 12,\n};`\nconst Profile = () => {\n  const scrollRef = useRef(null)\n  return (\n    <FixTabPanel>\n      <div className=\"code-window relative h-full w-full bg-gray-900 shadow-black\">\n        <div className=\"relative z-10 flex items-center bg-gray-800 px-4 py-2\">\n          <div className=\"flex space-x-2\">\n            <div className=\"h-3 w-3 rounded-full bg-red-500\"></div>\n            <div className=\"h-3 w-3 rounded-full bg-yellow-500\"></div>\n            <div className=\"h-3 w-3 rounded-full bg-green-500\"></div>\n          </div>\n          <div className=\"ml-4 text-sm text-gray-400\">developer.js</div>\n        </div>\n        <div className=\"relative z-20 font-mono text-3xl\">\n          <div className=\"relative z-20\">\n            <SyntaxHighlighter\n              language=\"javascript\"\n              style={dracula}\n              customStyle={{\n                margin: 0,\n                lineHeight: '1',\n                padding: '1.5rem',\n                background: '#0f1117',\n                borderRadius: '0',\n                fontSize: 'clamp(0.7rem, 2vw, 1rem)',\n              }}\n              showLineNumbers={true}\n            >\n              {codeString}\n            </SyntaxHighlighter>\n          </div>\n        </div>\n      </div>\n    </FixTabPanel>\n  )\n}\n\nexport default Profile\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\qrGenerate\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\reactAmap\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\reactPdf\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\sandBox\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react'\nimport SandpackBasic from '@container/SandpackBasic'\nimport FixTabPanel from '@stateless/FixTabPanel'\n\nconst SandBox = () => {\n  return (\n    <FixTabPanel>\n      <SandpackBasic />\n    </FixTabPanel>\n  )\n}\n\nexport default SandBox\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\signin\\index.jsx","messages":[{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":138,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":138,"endColumn":15,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4119,4119],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":1,"message":"Empty block statement.","line":163,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":163,"endColumn":15,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4635,4635],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\r\nimport useSafeNavigate from '@app-hooks/useSafeNavigate'\r\nimport { Form, Input, Button, Typography, Layout, Card, theme, App, Tag } from 'antd'\r\nimport { useStore } from '@/store'\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons'\r\nimport { setLocalStorage } from '@utils/publicFn'\r\nimport { useAuth } from '@src/service/useAuth'\r\nimport { authService } from '@src/service/authService'\r\nimport { permissionService } from '@src/service/permissionService'\r\nimport { testAccounts } from '@src/mock/permission'\r\nimport styles from './index.module.less'\r\n\r\nconst { Title, Text, Paragraph } = Typography\r\nconst { Content } = Layout\r\n\r\nconst TEST_ACCOUNT_EMAILS = Object.keys(testAccounts)\r\n\r\nconst generatePassword = () => {\r\n  try {\r\n    const arr = new Uint32Array(1)\r\n    globalThis.crypto?.getRandomValues?.(arr)\r\n    const value = (arr[0] ?? 0) % 1000000\r\n    return String(value).padStart(6, '0')\r\n  } catch {\r\n    return String(Date.now()).slice(-6).padStart(6, '0')\r\n  }\r\n}\r\n\r\nconst loadOrInitPasswords = () => {\r\n  try {\r\n    const raw = localStorage.getItem('test_account_passwords')\r\n    const parsed = raw ? JSON.parse(raw) : {}\r\n    const next = typeof parsed === 'object' && parsed ? { ...parsed } : {}\r\n\r\n    let changed = false\r\n    TEST_ACCOUNT_EMAILS.forEach((email) => {\r\n      if (typeof next[email] !== 'string' || next[email].length === 0) {\r\n        next[email] = generatePassword()\r\n        changed = true\r\n      }\r\n    })\r\n\r\n    if (changed) {\r\n      localStorage.setItem('test_account_passwords', JSON.stringify(next))\r\n    }\r\n\r\n    return next\r\n  } catch {\r\n    const fallback = {}\r\n    TEST_ACCOUNT_EMAILS.forEach((email) => {\r\n      fallback[email] = generatePassword()\r\n    })\r\n    return fallback\r\n  }\r\n}\r\n\r\nconst SignIn = () => {\r\n  const { redirectTo } = useSafeNavigate()\r\n  const { message } = App.useApp()\r\n  const { token } = theme.useToken()\r\n  const { isAuthenticated } = useAuth()\r\n  const [form] = Form.useForm()\r\n  const isMobile = useStore((s) => s.isMobile)\r\n  const [accountPasswords, setAccountPasswords] = useState({})\r\n\r\n  const isLikelyEmail = (value) => {\r\n    if (typeof value !== 'string') return false\r\n    if (value.length > 320) return false\r\n    if (value.includes(' ')) return false\r\n\r\n    const at = value.indexOf('@')\r\n    if (at <= 0 || at !== value.lastIndexOf('@')) return false\r\n\r\n    const dot = value.indexOf('.', at + 2)\r\n    if (dot === -1 || dot >= value.length - 1) return false\r\n\r\n    return true\r\n  }\r\n\r\n  const getErrorMessage = (error) => (error instanceof Error && error.message ? error.message : '未知错误')\r\n\r\n\r\n\r\n  const getExpectedPassword = (email) => {\r\n    if (accountPasswords?.[email]) return accountPasswords[email]\r\n\r\n    const next = loadOrInitPasswords()\r\n    setAccountPasswords(next)\r\n    return next[email] || ''\r\n  }\r\n\r\n  useEffect(() => {\r\n    let active = true\r\n    Promise.resolve().then(() => {\r\n      if (!active) return\r\n      setAccountPasswords(loadOrInitPasswords())\r\n    })\r\n    return () => {\r\n      active = false\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const redirectIfLoggedIn = async () => {\r\n      if (!isAuthenticated) return\r\n      try {\r\n        // 获取可访问路由列表\r\n        const routes = await permissionService.getAccessibleRoutes()\r\n        let target = '/'\r\n        if (Array.isArray(routes) && routes.length > 0) {\r\n          // 优先跳转到根路由，其次第一个有权限的路由\r\n          target = (routes || []).includes('/') ? '/' : routes[0]\r\n        }\r\n        redirectTo(target, { replace: true })\r\n      } catch {\r\n        redirectTo('/', { replace: true })\r\n      }\r\n    }\r\n    redirectIfLoggedIn()\r\n  }, [isAuthenticated, redirectTo])\r\n\r\n  // 挂载时清理可能的无效 token 并重置表单，避免出现 \"请输入有效的邮箱格式\" 残留提示\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem('token')\r\n      if (raw) {\r\n        let email = ''\r\n        try {\r\n          const obj = JSON.parse(raw)\r\n          email = obj.token || ''\r\n        } catch {\r\n          email = raw\r\n        }\r\n        if (!isLikelyEmail(email)) {\r\n          localStorage.removeItem('token')\r\n        }\r\n      }\r\n    } catch {}\r\n    // 重置表单，确保输入框为空\r\n    form.resetFields()\r\n  }, [form])\r\n\r\n  const onFinish = async (values) => {\r\n    const { email, password } = values\r\n\r\n    // 验证账号密码\r\n    if (!testAccounts[email]) {\r\n      message.error('账号不存在')\r\n      return\r\n    }\r\n\r\n    if (getExpectedPassword(email) !== password) {\r\n      message.error('密码错误')\r\n      return\r\n    }\r\n\r\n    // 保存登录信息\r\n    setLocalStorage('token', { token: email })\r\n\r\n    // 清除可能的手动设置角色，确保使用正确的账号角色\r\n    try {\r\n      localStorage.removeItem('user_role')\r\n    } catch {}\r\n\r\n    // 纳入统一登录态（测试账号也算已登录），并同步权限\r\n    try {\r\n      await authService.setTestAccountAuthenticated(email)\r\n      const routes = await permissionService.getAccessibleRoutes(true)\r\n\r\n      message.success(`登录成功！欢迎 ${testAccounts[email].name}`)\r\n\r\n      if (routes && routes.length > 0) {\r\n        const safeRoutes = Array.isArray(routes) ? routes : []\r\n        const targetRoute = safeRoutes.includes('/') ? '/' : safeRoutes[0]\r\n        redirectTo(targetRoute)\r\n      } else {\r\n        redirectTo('/403')\r\n      }\r\n    } catch (error) {\r\n      message.error(`权限同步失败：${getErrorMessage(error)}`)\r\n      redirectTo('/')\r\n    }\r\n  }\r\n\r\n  const onFinishFailed = () => {}\r\n\r\n  // 快速填充测试账号\r\n  const fillAccount = (email) => {\r\n    form.setFieldsValue({\r\n      email,\r\n      password: getExpectedPassword(email),\r\n    })\r\n  }\r\n\r\n  const cssVars = {\r\n    '--signin-bg': token.colorBgBase,\r\n    '--signin-panel': token.colorBgContainer,\r\n    '--signin-panel-2': token.colorBgLayout,\r\n    '--signin-border': token.colorBorderSecondary,\r\n    '--signin-text': token.colorText,\r\n    '--signin-text-2': token.colorTextSecondary,\r\n    '--signin-primary': token.colorPrimary,\r\n    '--signin-primary-2': token.colorInfo,\r\n    '--signin-shadow': token.boxShadowSecondary,\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ minHeight: '100vh' }}>\r\n      <Content className={styles.root} style={cssVars}>\r\n        <div className={styles.bg} aria-hidden=\"true\" />\r\n\r\n        <div className={styles.grid} style={{ padding: isMobile ? 16 : 24 }}>\r\n          {/* Left: Brand / Tech hero */}\r\n          {!isMobile && (\r\n            <section className={styles.hero}>\r\n              <div className={styles.heroInner}>\r\n                <div className={styles.badgeRow}>\r\n                  <Tag variant=\"filled\" color=\"processing\">\r\n                    AI-ready Console\r\n                  </Tag>\r\n                  <Tag variant=\"filled\">Pro React Admin</Tag>\r\n                </div>\r\n                <Title level={1} className={styles.heroTitle}>\r\n                  面向 AI 时代的\r\n                  <br />\r\n                  企业级控制台\r\n                </Title>\r\n                <Paragraph className={styles.heroDesc}>大屏沉浸式视觉 · 权限体系 · 可观测的交互反馈</Paragraph>\r\n\r\n                <div className={styles.heroPills}>\r\n                  <span className={styles.pill}>Fast Tabs</span>\r\n                  <span className={styles.pill}>Role-based Access</span>\r\n                  <span className={styles.pill}>Vite/Webpack Build</span>\r\n                </div>\r\n              </div>\r\n            </section>\r\n          )}\r\n\r\n          {/* Right: Auth card */}\r\n          <section className={styles.panel}>\r\n            <Card className={styles.card} variant=\"borderless\" styles={{ body: { padding: isMobile ? 16 : 24 } }}>\r\n              <div className={styles.titleBox}>\r\n                <Title level={2} className={styles.title}>\r\n                  登录\r\n                </Title>\r\n                <Text type=\"secondary\">选择测试账号快速填充，或输入凭据登录</Text>\r\n              </div>\r\n\r\n              {/* 测试账号快捷选择 */}\r\n              <div className={styles.quickBox}>\r\n                <div className={styles.quickHeader}>\r\n                  <Text strong>测试账号</Text>\r\n                  <Text type=\"secondary\">（点击填充）</Text>\r\n                </div>\r\n                <div className={styles.quickList}>\r\n                  {Object.entries(testAccounts).map(([email, account]) => (\r\n                    <button key={email} type=\"button\" className={styles.quickItem} onClick={() => fillAccount(email)}>\r\n                      <div className={styles.quickLeft}>\r\n                        <span className={styles.quickTag}>{account.name}</span>\r\n                        <span className={styles.quickMeta}>{email}</span>\r\n                      </div>\r\n                      <span className={styles.quickPwd}>{accountPasswords[email] || ''}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <Form\r\n                form={form}\r\n                name=\"signin\"\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n                layout=\"vertical\"\r\n                size=\"large\"\r\n              >\r\n                <Form.Item\r\n                  name=\"email\"\r\n                  rules={[\r\n                    { required: true, message: '请输入邮箱!' },\r\n                    { type: 'email', message: '请输入有效的邮箱格式!' },\r\n                  ]}\r\n                >\r\n                  <Input prefix={<UserOutlined />} placeholder=\"邮箱\" />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"password\" rules={[{ required: true, message: '请输入密码!' }]}>\r\n                  <Input.Password prefix={<LockOutlined />} placeholder=\"密码\" />\r\n                </Form.Item>\r\n\r\n                <Form.Item style={{ marginBottom: 8 }}>\r\n                  <Button type=\"primary\" htmlType=\"submit\" block>\r\n                    登录\r\n                  </Button>\r\n                </Form.Item>\r\n              </Form>\r\n\r\n              <div className={styles.footerRow}>\r\n                <Text type=\"secondary\">还没有账号？</Text>\r\n                <Button type=\"link\" className={styles.registerBtn} onClick={() => redirectTo('/signup')}>\r\n                  去注册\r\n                </Button>\r\n              </div>\r\n            </Card>\r\n          </section>\r\n        </div>\r\n      </Content>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default SignIn\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\signup\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\angular\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\backend\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\angular\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\node\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\react\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\vue\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\vue\\plugins\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\vue\\plugins\\perf.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\vue\\plugins\\perf\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\vue\\plugins\\vue3.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\vue\\plugins\\vue3\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\demos\\webpack\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\frontend\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\vue\\Vue3Api.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tech\\vue\\VuePerf.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\terms\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\three\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\tilt\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'wkylinPng' is defined but never used.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport Tilt from 'react-parallax-tilt'\nimport ThreeDCard from '@stateless/ThreeDCard'\n\nimport wkylinPng from '@assets/images/wkylin.png'\nimport SpringPng from '@assets/images/spring.png'\nimport HePng from '@assets/images/he.png'\nimport SongPng from '@assets/images/song.png'\nimport XuePng from '@assets/images/xue.png'\nimport MacPng from '@assets/images/3dchihiro.png'\n\nconst ReactTilt = () => (\n  <FixTabPanel>\n    <h3>Welcome to react tilt!</h3>\n    <section className=\"flex flex-wrap items-center justify-start gap-8 p-8\">\n      <Tilt tiltMaxAngleX={40} tiltMaxAngleY={40} perspective={1000} scale={1.05} glareEnable={true}>\n        <section className=\"h-[150px] w-[300px] overflow-hidden\">\n          <img src={SpringPng} alt=\"wkylin.w\" />\n        </section>\n      </Tilt>\n      <Tilt tiltMaxAngleX={40} tiltMaxAngleY={40} perspective={1000} scale={1.05} glareEnable={true}>\n        <section className=\"h-[150px] w-[300px] overflow-hidden\">\n          <img src={HePng} alt=\"wkylin.w\" />\n        </section>\n      </Tilt>\n      <Tilt tiltMaxAngleX={40} tiltMaxAngleY={40} perspective={1000} scale={1.05} glareEnable={true}>\n        <section className=\"h-[150px] w-[300px] overflow-hidden\">\n          <img src={SongPng} alt=\"wkylin.w\" />\n        </section>\n      </Tilt>\n      <Tilt tiltMaxAngleX={40} tiltMaxAngleY={40} perspective={1000} scale={1.05} glareEnable={true}>\n        <section className=\"h-[150px] w-[300px] overflow-hidden\">\n          <img src={XuePng} alt=\"wkylin.w\" />\n        </section>\n      </Tilt>\n    </section>\n\n    <h3 style={{ margin: '30px 0', fontSize: 18 }}>3D Card</h3>\n    <section className=\"flex flex-wrap items-center justify-start gap-8 p-8\">\n      <ThreeDCard title=\"小荷才露尖尖角，早有蜻蜓立上头\" backgroundUrl={HePng} imageUrl={MacPng} variant=\"shine\" />\n      <ThreeDCard title=\"不知细叶谁裁出，二月春风似剪刀\" backgroundUrl={SpringPng} variant=\"border\" />\n      <ThreeDCard title=\"明月松间照，清泉石上流\" backgroundUrl={SongPng} />\n      <ThreeDCard title=\"柴门闻犬吠，风雪夜归人\" backgroundUrl={XuePng} disabled />\n    </section>\n  </FixTabPanel>\n)\n\nexport default ReactTilt\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\topology\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\video\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":94,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'movies'. Either include it or remove the dependency array.","line":107,"column":6,"nodeType":"ArrayExpression","endLine":107,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [movies]","fix":{"range":[3040,3042],"text":"[movies]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { flushSync } from 'react-dom'\nimport FixTabPanel from '@stateless/FixTabPanel'\nimport styles from './index.module.less'\n\nimport SmartVideoPlayer from '@stateless/SmartVideoPlayer'\n\nimport trailerSource from '@assets/video/trailer.mp4'\n\nconst MyVideo = () => {\n  const playerRef = useRef(null)\n  const activeMovieElRef = useRef(null)\n\n  const movies = useMemo(\n    () => [\n      {\n        id: 'm0',\n        title: '预告片',\n        year: '2025',\n        duration: '本地资源',\n        desc: '本地播放器（SmartVideoPlayer）',\n        provider: 'html5',\n        src: trailerSource,\n      },\n      {\n        id: 'm0-hls',\n        title: 'HLS 演示（.m3u8）',\n        year: 'HLS',\n        duration: '公开测试流',\n        desc: '用于验证 HTML5 模式下的 HLS（优先原生 HLS，否则走 hls.js）；若源未配置 CORS，浏览器会拦截',\n        provider: 'html5',\n        src: 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8',\n      },\n      {\n        id: 'm1',\n        title: '科幻预告片 1（YouTube）',\n        year: 'YouTube',\n        duration: 'Trailer',\n        desc: '把官方预告片的 YouTube 视频 ID 填到 youtubeId',\n        provider: 'youtube',\n        youtubeId: 'xJyWbjATtIE',\n      },\n      {\n        id: 'm2',\n        title: '科幻预告片 2（YouTube）',\n        year: 'YouTube',\n        duration: 'Trailer',\n        desc: '把官方预告片的 YouTube 视频 ID 填到 youtubeId',\n        provider: 'youtube',\n        youtubeId: 'SAcVNQYY8v4',\n      },\n      {\n        id: 'm3',\n        title: '科幻预告片 3（YouTube）',\n        year: 'YouTube',\n        duration: 'Trailer',\n        desc: '把官方预告片的 YouTube 视频 ID 填到 youtubeId',\n        provider: 'youtube',\n        youtubeId: 'afJIa41CiKY',\n      },\n      {\n        id: 'm4',\n        title: '科幻预告片 4（YouTube）',\n        year: 'YouTube',\n        duration: 'Trailer',\n        desc: '把官方预告片的 YouTube 视频 ID 填到 youtubeId',\n        provider: 'youtube',\n        youtubeId: 'Gz4ze8oTYEw',\n      },\n      {\n        id: 'm5',\n        title: 'Embed 示例（sourceUrl 打开源站）',\n        year: 'Embed',\n        duration: 'iframe',\n        desc: '演示 sourceUrl：embed 模式下“新窗口打开”会优先打开 sourceUrl（未传 externalUrl 时）',\n        provider: 'embed',\n        embedUrl: 'https://player.vimeo.com/video/76979800?autoplay=1&muted=1',\n        sourceUrl: 'https://vimeo.com/76979800',\n      },\n    ],\n    []\n  )\n\n  const [currentMovieId, setCurrentMovieId] = useState(() => movies[0]?.id || '')\n\n  const currentMovie = useMemo(() => {\n    return movies.find((m) => m.id === currentMovieId) || movies[0]\n  }, [currentMovieId, movies])\n\n  useEffect(() => {\n    if (!activeMovieElRef.current) return\n    try {\n      activeMovieElRef.current.scrollIntoView({ block: 'nearest' })\n    } catch (_) {\n      // ignore\n    }\n  }, [currentMovieId])\n\n  const handleSelectMovie = useCallback((id) => {\n    // Ensure DOM commits the new src within this click gesture.\n    flushSync(() => setCurrentMovieId(id))\n\n    const next = movies.find((m) => m.id === id)\n    if (next?.provider === 'html5') {\n      playerRef.current?.playFromUserGesture?.(true)\n    }\n  }, [])\n\n  const reviews = [\n    {\n      id: 'r1',\n      user: '影迷A',\n      date: '2025-12-20',\n      title: '节奏很舒服，氛围拉满',\n      content: '摄影和配乐非常加分，几段长镜头很有沉浸感。剧情不复杂但情绪很到位。',\n    },\n    {\n      id: 'r2',\n      user: '影迷B',\n      date: '2025-12-19',\n      title: '中段略拖，但结尾不错',\n      content: '人物动机交代得更细会更好，不过最后的收束很干净，整体观感在线。',\n    },\n    {\n      id: 'r3',\n      user: '影迷C',\n      date: '2025-12-18',\n      title: '适合周末放松看',\n      content: '不靠大起大落取胜，细节挺耐看。推荐开小音量慢慢看。',\n    },\n  ]\n\n  return (\n    <FixTabPanel fill={false}>\n      <section className={styles.page}>\n        <div className={styles.layout}>\n          <div className={`${styles.card} ${styles.mainCard}`}>\n            <div className={styles.playerSection}>\n              <SmartVideoPlayer\n                ref={playerRef}\n                provider={currentMovie?.provider}\n                src={currentMovie?.src}\n                youtubeId={currentMovie?.youtubeId}\n                embedUrl={currentMovie?.embedUrl}\n                externalUrl={currentMovie?.externalUrl}\n                sourceUrl={currentMovie?.sourceUrl}\n                title={currentMovie?.title}\n              />\n            </div>\n\n            <section className={styles.comments} aria-label=\"电影评论讨论区\">\n              <div className={styles.sectionHeader}>\n                <h3 className={styles.sectionTitle}>评论 · 讨论</h3>\n                <span className={styles.sectionMeta}>{reviews.length} 条</span>\n              </div>\n\n              <div className={styles.reviewList}>\n                {reviews.map((r) => (\n                  <article key={r.id} className={styles.reviewItem}>\n                    <div className={styles.reviewTop}>\n                      <span className={styles.reviewUser}>{r.user}</span>\n                      <span className={styles.reviewDate}>{r.date}</span>\n                    </div>\n                    <div className={styles.reviewTitle}>{r.title}</div>\n                    <div className={styles.reviewContent}>{r.content}</div>\n                  </article>\n                ))}\n              </div>\n            </section>\n          </div>\n\n          <aside className={`${styles.card} ${styles.sidebarCard}`} aria-label=\"电影列表\">\n            <header className={styles.sidebarHeader}>\n              <h3 className={styles.sidebarTitle}>电影列表</h3>\n              <span className={styles.sidebarMeta}>{movies.length} 部</span>\n            </header>\n\n            <div className={styles.movieList}>\n              {movies.map((m) => (\n                <div\n                  key={m.id}\n                  ref={(node) => {\n                    if (m.id === currentMovieId) activeMovieElRef.current = node\n                  }}\n                  className={`${styles.movieItem} ${m.id === currentMovieId ? styles.movieItemActive : ''}`}\n                  role=\"button\"\n                  tabIndex={0}\n                  aria-current={m.id === currentMovieId ? 'true' : undefined}\n                  onClick={() => handleSelectMovie(m.id)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault()\n                      handleSelectMovie(m.id)\n                    }\n                  }}\n                >\n                  <div className={styles.movieTitleRow}>\n                    <span className={styles.movieTitle}>{m.title}</span>\n                    <span className={styles.movieYear}>{m.year}</span>\n                  </div>\n                  <div className={styles.movieMeta}>{m.duration}</div>\n                  <div className={styles.movieDesc}>{m.desc}</div>\n                </div>\n              ))}\n            </div>\n          </aside>\n        </div>\n      </section>\n    </FixTabPanel>\n  )\n}\n\nexport default React.memo(MyVideo)\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\pages\\zustand\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\authRouter.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\config\\lazyLoad.config.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\config\\publicRoutes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":13,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 路由配置主文件\n * 整合所有模块化的路由配置\n *\n * @description\n * 路由结构说明：\n * 1. 主布局路由（/）：包含 Layout 和所有需要布局的子路由\n * 2. 认证路由：登录、注册、回调等公开路由\n * 3. 独立布局路由：Dashboard、Portfilo 等独立布局的模块\n * 4. 错误路由：404、403 等异常页面\n */\n\nimport React from 'react'\nimport { mainLayoutRoute, layoutRoutes } from './modules/layout.routes'\nimport { authRoutes } from './modules/auth.routes'\nimport { businessRoutes } from './modules/business.routes'\nimport { uiRoutes } from './modules/ui.routes'\nimport { chartRoutes } from './modules/chart.routes'\nimport { nestedRoutes } from './modules/nested.routes'\nimport { errorRoutes } from './modules/error.routes'\nimport { notificationRoutes } from './modules/notification.routes'\nimport { techRoutes } from './modules/tech.routes'\nimport { annotateRoutesWithPermissions, filterRoutesByAccessiblePaths } from './utils'\nimport { permissionService } from '@src/service/permissionService'\n\n// 整合主布局的子路由\nmainLayoutRoute.children = [\n  ...mainLayoutRoute.children,\n  ...businessRoutes,\n  ...uiRoutes,\n  ...chartRoutes,\n  ...nestedRoutes,\n  ...notificationRoutes,\n  ...techRoutes,\n]\n\n// 构建完整路由配置（原始数据）\nconst rawRootRouter = [\n  // 主布局路由（包含所有子路由）\n  mainLayoutRoute,\n  // 认证相关路由\n  ...authRoutes,\n  // 独立布局路由\n  ...layoutRoutes,\n  // 错误路由（404 放在最后）\n  ...errorRoutes.filter((route) => route.path !== '*'),\n  // 全局 404（必须放在最后）\n  ...errorRoutes.filter((route) => route.path === '*'),\n]\n\n// 统一 path/key，补齐缺失信息，输出标准化路由树\nconst rootRouter = normalizeRouteTree(rawRootRouter)\n\n// ✅ 注入 meta.permission（不改变现有结构，仅增强）\nconst annotatedRootRouter = annotateRoutesWithPermissions(rootRouter)\n\nfunction normalizeRouteTree(routes, parentFullPath = '') {\n  if (!Array.isArray(routes)) return []\n\n  return routes.map((route) => {\n    const fullPath = buildFullPath(parentFullPath, route)\n    const normalizedKey = normalizeKeyValue(route.key || fullPath)\n    const next = {\n      ...route,\n      key: normalizedKey,\n      meta: {\n        ...(route.meta || {}),\n        routePath: fullPath,\n        routeKey: fullPath,\n        ...(route.key && normalizedKey !== route.key ? { legacyKey: route.key } : {}),\n      },\n    }\n\n    if (!next.path && !next.index && fullPath && fullPath !== '/') {\n      next.path = fullPath.startsWith('/') ? fullPath.slice(1) : fullPath\n    }\n\n    if (Array.isArray(route.children) && route.children.length > 0) {\n      next.children = normalizeRouteTree(route.children, fullPath)\n    }\n\n    return next\n  })\n}\n\nfunction buildFullPath(parentFullPath = '', route = {}) {\n  const safeParent = stripWildcardSuffix(parentFullPath)\n  const base = !safeParent || safeParent === '/' ? '' : safeParent\n\n  if (route.index) {\n    return safeParent || '/'\n  }\n\n  const rawPath = route.path\n  if (!rawPath || rawPath === '/') {\n    return safeParent || '/'\n  }\n\n  if (rawPath === '*') {\n    return safeParent ? `${safeParent}/*` : '/*'\n  }\n\n  const candidate = rawPath.startsWith('/') ? rawPath : `${base}/${rawPath}`\n  return normalizePattern(candidate)\n}\n\nfunction normalizePattern(value = '/') {\n  if (!value) return '/'\n\n  const hasWildcard = value.endsWith('/*')\n  const trimmed = hasWildcard ? value.slice(0, -2) : value\n  let normalized = trimmed.replace(/\\/+/g, '/')\n  if (!normalized.startsWith('/')) {\n    normalized = `/${normalized}`\n  }\n  if (normalized.length > 1 && normalized.endsWith('/')) {\n    normalized = normalized.slice(0, -1)\n  }\n  if (hasWildcard) {\n    return normalized === '/' ? '/*' : `${normalized}/*`\n  }\n  return normalized\n}\n\nfunction normalizeKeyValue(value = '/') {\n  if (!value) return '/'\n  if (value === '*') return '/*'\n  if (value.startsWith('/')) return value\n  return `/${value}`\n}\n\nfunction stripWildcardSuffix(path = '') {\n  if (!path) return ''\n  if (path.endsWith('/*')) {\n    return path.slice(0, -2) || '/'\n  }\n  return path\n}\n\n// ✅ 新增：扁平化路由工具函数（authRouter.jsx 需要）\nexport function flattenRoutes(routes) {\n  if (!Array.isArray(routes)) {\n    console.error('flattenRoutes: expected array, got:', typeof routes, routes)\n    return []\n  }\n\n  return routes.reduce((acc, route) => {\n    if (!route || typeof route !== 'object') {\n      console.warn('flattenRoutes: invalid route item:', route)\n      return acc\n    }\n\n    acc.push(route)\n\n    if (Array.isArray(route.children) && route.children.length > 0) {\n      const childRoutes = flattenRoutes(route.children)\n      acc.push(...childRoutes)\n    }\n\n    return acc\n  }, [])\n}\n\n// ✅ 新增：根据路径获取路由 key\nexport function getKeyName(path = '/') {\n  try {\n    const flatRoutes = flattenRoutes(annotatedRootRouter)\n\n    if (!flatRoutes || flatRoutes.length === 0) {\n      console.warn('getKeyName: no routes available')\n      return path\n    }\n\n    // normalize incoming path (remove leading slash and query)\n    const normalized = String(path || '')\n      .split('?')[0]\n      .replace(/^\\//, '')\n\n    const doesMatch = (candidate) => {\n      if (!candidate && candidate !== '') return false\n      const value = String(candidate).trim()\n      if (!value) {\n        return normalized === ''\n      }\n      const candidatePath = value.replace(/^\\//, '')\n\n      if (candidatePath === '' && normalized === '') {\n        return true\n      }\n\n      if (candidatePath === normalized) {\n        return true\n      }\n\n      if (candidatePath.includes(':')) {\n        const pattern = '^' + candidatePath.replace(/:[^/]+/g, '[^/]+') + '$'\n        try {\n          return new RegExp(pattern).test(normalized)\n        } catch (err) {\n          console.warn('getKeyName: invalid route pattern', candidatePath, err)\n          return false\n        }\n      }\n\n      if (candidatePath.endsWith('*')) {\n        const base = candidatePath.replace(/\\*$/, '')\n        if (!base) {\n          return false\n        }\n        return normalized.startsWith(base.replace(/\\/$/, ''))\n      }\n\n      return false\n    }\n\n    const matchRoute = (r) => {\n      if (!r) return false\n      const candidates = [r.meta?.routePath, r.key, r.meta?.legacyKey, r.path]\n      return candidates.some((candidate) => doesMatch(candidate))\n    }\n\n    const route = flatRoutes.find(matchRoute)\n\n    if (!route) {\n      console.warn(`getKeyName: route not found for path \"${path}\"`)\n      return path\n    }\n\n    // prefer explicit meta.key, then existing key, then normalized path, title, fallback path\n    return route.meta?.key || route.key || route.meta?.routeKey || route.meta?.title || path\n  } catch (error) {\n    console.error('getKeyName error:', error)\n    return path\n  }\n}\n\n/**\n * ✅ 新增：菜单/导航可见路由（异步按需获取）\n * 仅对主布局的 children 做过滤；其余（auth/error/独立布局）不参与菜单\n * @returns {Promise<Array>} 过滤后的路由配置\n */\nexport async function getVisibleMenuRoutes() {\n  try {\n    const accessible = await permissionService.getAccessibleRoutes()\n    const main = annotatedRootRouter.find((r) => r.key === '/')\n    if (!main) return []\n    const filteredChildren = filterRoutesByAccessiblePaths(main.children || [], accessible)\n    return [{ ...main, children: filteredChildren }]\n  } catch (error) {\n    console.error('getVisibleMenuRoutes error:', error)\n    return []\n  }\n}\n\n// ✅ 命名导出（供其他模块使用）\nexport { rootRouter, annotatedRootRouter }\n\n// ✅ 默认导出注入权限后的路由（保持原有导出方式，增强功能）\nexport default annotatedRootRouter\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\auth.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\business.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\chart.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\error.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\layout.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\nested.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\notification.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\tech.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\ui.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\modules\\zustand.routes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\routers\\utils\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\scripts\\cleanupLogs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\service\\api\\permission.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\service\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\service\\http.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\service\\permissionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\service\\request.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":290,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":290,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios from 'axios'\nimport qs from 'qs'\nimport { showMessage } from '@src/utils/message'\n// import { authService } from '@src/service/authService' // 移除以避免循环依赖\nimport logger from '../utils/logger'\nimport { getEnv } from '@utils/env'\n\n// ==================== 1. 配置常量 ====================\nconst CONFIG = {\n  BASE_URL: getEnv('APP_BASE_URL', ''),\n  TIMEOUT: 60000,\n  WITH_CREDENTIALS: true,\n  RETRY_ATTEMPTS: 3,\n  RETRY_DELAY: 500,\n  DEFAULT_CONCURRENCY: 5,\n}\n\nconst DEFAULT_HEADERS = {\n  'Content-Type': 'application/json;charset=utf-8',\n}\n\n// ==================== 2. HTTP 状态码错误消息映射 ====================\nconst HTTP_ERROR_MESSAGES = {\n  400: '请求参数错误',\n  401: '未授权，请重新登录',\n  403: '没有权限访问',\n  404: '请求资源不存在',\n  405: '请求方法不允许',\n  408: '请求超时',\n  500: '服务器内部错误',\n  502: '网关错误',\n  503: '服务不可用',\n  504: '网关超时',\n  default: (status) => `请求失败 (${status})`,\n}\n\nconst NETWORK_ERROR_MESSAGES = {\n  ECONNABORTED: '请求超时',\n  ETIMEDOUT: '连接超时',\n  ENOTFOUND: '域名解析失败',\n  ECONNREFUSED: '连接被拒绝',\n  default: '网络连接异常',\n}\n\n// ==================== 3. 请求管理 ====================\nclass RequestManager {\n  constructor() {\n    this.pendingRequests = new Map()\n  }\n\n  // 4. 生成唯一请求标识\n  generateRequestKey(config) {\n    const { method, url, params, data } = config\n    return [method?.toUpperCase(), url, JSON.stringify(params || {}), JSON.stringify(data || {})].join('&')\n  }\n\n  // 5. 取消相同的进行中请求\n  cancelDuplicateRequest(config) {\n    const requestKey = this.generateRequestKey(config)\n\n    if (this.pendingRequests.has(requestKey)) {\n      const controller = this.pendingRequests.get(requestKey)\n      controller.abort()\n      logger.warn('取消重复请求:', requestKey)\n    }\n\n    const controller = new AbortController()\n    this.pendingRequests.set(requestKey, controller)\n\n    return { requestKey, controller }\n  }\n\n  // 6. 移除请求\n  removeRequest(requestKey) {\n    if (this.pendingRequests.has(requestKey)) {\n      this.pendingRequests.delete(requestKey)\n    }\n  }\n\n  // 7. 清空所有请求\n  clearAllRequests() {\n    this.pendingRequests.forEach((controller) => {\n      controller.abort()\n    })\n    this.pendingRequests.clear()\n    logger.info('已清空所有待处理请求')\n  }\n\n  getActiveCount() {\n    return this.pendingRequests.size\n  }\n}\n\nconst requestManager = new RequestManager()\n\n// ==================== 7. 工具函数 ====================\nclass RequestUtils {\n  // 添加时间戳后缀（防缓存）\n  static addTimestampSuffix(params = {}) {\n    return {\n      ...params,\n      _: Date.now(),\n    }\n  }\n\n  // 延迟函数\n  static delay(ms) {\n    return new Promise((resolve) => globalThis.setTimeout(resolve, ms))\n  }\n\n  // 判断是否为 FormData\n  static isFormData(data) {\n    return typeof FormData !== 'undefined' && data instanceof FormData\n  }\n\n  // 判断是否为 Blob\n  static isBlob(data) {\n    return typeof Blob !== 'undefined' && data instanceof Blob\n  }\n\n  // 获取错误消息\n  static getHttpErrorMessage(status) {\n    return HTTP_ERROR_MESSAGES[status] || HTTP_ERROR_MESSAGES.default(status)\n  }\n\n  static getNetworkErrorMessage(code) {\n    return NETWORK_ERROR_MESSAGES[code] || NETWORK_ERROR_MESSAGES.default\n  }\n\n  // 处理错误显示\n  static handleShowError(message, showError = true) {\n    if (!showError) return\n    try {\n      showMessage.error(message)\n    } catch (e) {\n      console.error('消息提示失败:', e, message)\n    }\n  }\n\n  // 从响应头获取文件名\n  static getFileNameFromResponse(response) {\n    const contentDisposition = response.headers['content-disposition']\n    if (contentDisposition) {\n      const match = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/)\n      if (match?.[1]) {\n        return decodeURIComponent(match[1].replace(/['\"]/g, ''))\n      }\n    }\n    return null\n  }\n\n  // 触发文件下载\n  static triggerDownload(blob, fileName) {\n    const link = document.createElement('a')\n    const url = window.URL.createObjectURL(blob)\n    link.href = url\n    link.download = fileName || `download_${Date.now()}`\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    window.URL.revokeObjectURL(url)\n  }\n}\n\n// ==================== 8. Axios 实例 ====================\nlet axiosInstance = axios.create({\n  baseURL: CONFIG.BASE_URL,\n  timeout: CONFIG.TIMEOUT,\n  withCredentials: CONFIG.WITH_CREDENTIALS,\n  headers: { ...DEFAULT_HEADERS },\n})\n\n// 导出配置方法\nexport function setAxiosInstance(instance) {\n  axiosInstance = instance\n  logger.info('Axios 实例已更新')\n}\n\nexport function setBaseURL(url) {\n  CONFIG.BASE_URL = url\n  axiosInstance.defaults.baseURL = url\n  logger.info('BaseURL 已更新:', url)\n}\n\nexport function setDefaultHeaders(headers) {\n  axiosInstance.defaults.headers = {\n    ...axiosInstance.defaults.headers,\n    ...headers,\n  }\n  logger.info('默认请求头已更新:', headers)\n}\n\nexport function setTimeout(timeout) {\n  CONFIG.TIMEOUT = timeout\n  axiosInstance.defaults.timeout = timeout\n  logger.info('请求超时时间已更新:', timeout)\n}\n\nconst ensureHeaders = (config) => {\n  if (!config.headers) config.headers = {}\n}\n\nconst applyDedup = (config) => {\n  if (config.cancelDuplicate !== false) {\n    const { requestKey, controller } = requestManager.cancelDuplicateRequest(config)\n    config.signal = controller.signal\n    config._requestKey = requestKey\n  }\n}\n\nconst applyTimestampSuffix = (config) => {\n  const method = config.method?.toUpperCase()\n  const shouldAdd = (method === 'GET' || method === 'DELETE') && config.addTimestamp !== false\n  if (shouldAdd) {\n    config.params = RequestUtils.addTimestampSuffix(config.params)\n    logger.log('已添加时间戳参数')\n  }\n}\n\nconst readGithubToken = () => {\n  try {\n    const tokenData = localStorage.getItem('github_token')\n    if (!tokenData) return null\n    return JSON.parse(tokenData).token || null\n  } catch (e) {\n    logger.warn('读取 token 失败', e)\n    return null\n  }\n}\n\nconst applyAuthorization = (config) => {\n  if (config.headers.Authorization || config.needToken === false) return\n  const token = readGithubToken()\n  if (!token) return\n  config.headers.Authorization = `Bearer ${token}`\n  logger.log('已添加 Authorization:', `Bearer ${token.substring(0, 20)}...`)\n}\n\nconst applyDataFormat = (config) => {\n  const contentType = config.headers['Content-Type'] || config.headers['content-type']\n\n  if (RequestUtils.isFormData(config.data)) {\n    delete config.headers['Content-Type']\n    logger.log('检测到 FormData，已删除 Content-Type')\n    return\n  }\n\n  if (contentType === 'application/x-www-form-urlencoded' && config.data && typeof config.data === 'object') {\n    config.data = qs.stringify(config.data, { arrayFormat: 'brackets' })\n    logger.log('表单数据已序列化')\n  }\n}\n\nconst applyRequestMetadata = (config) => {\n  config.metadata = { startTime: Date.now() }\n}\n\nconst applyRequestId = (config) => {\n  if (config.requestId) {\n    config.headers['X-Request-ID'] = config.requestId\n  }\n}\n\n// ==================== 9. 请求拦截器 ====================\naxiosInstance.interceptors.request.use(\n  (config) => {\n    ensureHeaders(config)\n    applyDedup(config)\n    applyTimestampSuffix(config)\n    applyAuthorization(config)\n    applyDataFormat(config)\n    applyRequestMetadata(config)\n    applyRequestId(config)\n\n    logger.log(`发起请求: ${config.method?.toUpperCase()} ${config.url}`, {\n      params: config.params,\n      data: RequestUtils.isFormData(config.data) ? '[FormData]' : config.data,\n    })\n\n    return config\n  },\n  (error) => {\n    logger.error('请求拦截器错误:', error)\n    RequestUtils.handleShowError('请求配置失败: ' + error.message, error.config?.showError !== false)\n    return Promise.reject(error)\n  }\n)\n\n// 处理未授权\nfunction handleUnauthorized(message) {\n  // authService.logout() // 移除以避免循环依赖\n  // 清理权限缓存与开发覆盖，避免跳转登录后仍沿用旧权限\n  try {\n    localStorage.removeItem('user_permissions')\n    localStorage.removeItem('permissions_fetch_time')\n    localStorage.removeItem('permissions_auth_key')\n    localStorage.removeItem('user_role')\n    localStorage.removeItem('force_demo_switch')\n  } catch (e) {\n    console.warn('清理权限缓存失败:', e)\n  }\n\n  localStorage.removeItem('token')\n  localStorage.removeItem('github_token')\n  localStorage.removeItem('github_user')\n\n  const isAtSignIn = () => {\n    const hash = String(window?.location?.hash || '')\n    return hash === '#/signin' || hash.startsWith('#/signin?') || hash.startsWith('#/signin/')\n  }\n\n  // 延迟跳转，确保消息显示\n  globalThis.setTimeout(() => {\n    // 项目使用 createHashRouter，必须使用 hash 跳转；否则静态部署下 /signin 会导致页面空白\n    if (!isAtSignIn()) window.location.hash = '#/signin'\n  }, 500)\n\n  logger.warn('用户未授权，已清除登录信息')\n}\n\nconst isHttpOk = (status) => status >= 200 && status < 300\n\nconst isBusinessEnvelope = (data) => {\n  return !!(data && typeof data === 'object' && 'code' in data)\n}\n\nconst resolveResponseData = (response) => {\n  const config = response.config\n\n  if (config.responseType === 'blob') return response\n\n  const { data, status } = response\n  if (!isHttpOk(status)) {\n    const errorMsg = RequestUtils.getHttpErrorMessage(status)\n    RequestUtils.handleShowError(errorMsg, config.showError !== false)\n    throw new Error(errorMsg)\n  }\n\n  if (!isBusinessEnvelope(data)) {\n    return config.returnFullResponse ? response : data\n  }\n\n  if (data.code === 0 || data.code === 200) {\n    return config.returnFullResponse ? response : data\n  }\n\n  const errorMsg = data.message || data.msg || '请求失败'\n  if (data.code === 401 || data.code === 403) {\n    handleUnauthorized(errorMsg)\n  }\n\n  RequestUtils.handleShowError(errorMsg, config.showError !== false)\n  const error = new Error(errorMsg)\n  error.code = data.code\n  error.response = response\n  throw error\n}\n\n// ==================== 10. 响应拦截器 ====================\naxiosInstance.interceptors.response.use(\n  (response) => {\n    const config = response.config\n\n    // 1. 移除已完成的请求\n    if (config._requestKey) {\n      requestManager.removeRequest(config._requestKey)\n    }\n\n    // 2. 记录响应时间\n    if (config.metadata?.startTime) {\n      const duration = Date.now() - config.metadata.startTime\n      logger.log(`请求完成: ${config.method?.toUpperCase()} ${config.url} [${duration}ms]`)\n    }\n\n    try {\n      return resolveResponseData(response)\n    } catch (e) {\n      return Promise.reject(e)\n    }\n  },\n  (error) => {\n    // 1. 移除失败的请求\n    if (error.config?._requestKey) {\n      requestManager.removeRequest(error.config._requestKey)\n    }\n\n    // 2. 请求被取消\n    if (axios.isCancel(error) || error.name === 'AbortError') {\n      logger.warn('请求已取消:', error.config?.url)\n      return Promise.reject(error)\n    }\n\n    // 3. 响应错误\n    if (error.response) {\n      const { status, data } = error.response\n      let errorMessage = RequestUtils.getHttpErrorMessage(status)\n\n      // 优先使用后端返回的错误信息\n      if (data && typeof data === 'object') {\n        errorMessage = data.message || data.msg || errorMessage\n      }\n\n      // 401/403 特殊处理\n      if (status === 401 || status === 403) {\n        handleUnauthorized(errorMessage)\n      }\n\n      RequestUtils.handleShowError(errorMessage, error.config?.showError !== false)\n\n      const customError = new Error(errorMessage)\n      customError.status = status\n      customError.response = error.response\n      return Promise.reject(customError)\n    }\n\n    // 4. 网络错误\n    if (error.request) {\n      const errorMessage = RequestUtils.getNetworkErrorMessage(error.code)\n      RequestUtils.handleShowError(errorMessage, error.config?.showError !== false)\n      return Promise.reject(new Error(errorMessage))\n    }\n\n    // 5. 其他错误\n    const errorMessage = error.message || '请求配置错误'\n    RequestUtils.handleShowError(errorMessage, error.config?.showError !== false)\n    return Promise.reject(error)\n  }\n)\n\n// ==================== 11. 文件下载处理 ====================\nclass DownloadHandler {\n  static async handleDownload(response, fileName) {\n    try {\n      const blob = response.data\n\n      if (!RequestUtils.isBlob(blob)) {\n        throw new Error('响应数据不是 Blob 类型')\n      }\n\n      // 尝试从响应头获取文件名\n      const headerFileName = RequestUtils.getFileNameFromResponse(response)\n      const finalFileName = fileName || headerFileName || `download_${Date.now()}`\n\n      // 触发下载\n      RequestUtils.triggerDownload(blob, finalFileName)\n\n      logger.info('文件下载成功:', finalFileName)\n      return { success: true, fileName: finalFileName, blob }\n    } catch (error) {\n      logger.error('文件下载失败:', error)\n      throw error\n    }\n  }\n}\n\n// ==================== 高级功能：并发控制与重试 ====================\nclass RequestEnhancer {\n  // 并发控制\n  static async runWithConcurrency(tasks, concurrency = CONFIG.DEFAULT_CONCURRENCY) {\n    const results = []\n    const executing = []\n\n    for (const task of tasks) {\n      const promise = Promise.resolve().then(() => (typeof task === 'function' ? task() : task))\n      results.push(promise)\n\n      if (concurrency <= tasks.length) {\n        const executingPromise = promise.then(() => executing.splice(executing.indexOf(executingPromise), 1))\n        executing.push(executingPromise)\n\n        if (executing.length >= concurrency) {\n          await Promise.race(executing)\n        }\n      }\n    }\n\n    return Promise.all(results)\n  }\n\n  // 重试机制\n  static async retry(fn, attempts = CONFIG.RETRY_ATTEMPTS, delay = CONFIG.RETRY_DELAY) {\n    let lastError\n\n    for (let i = 0; i < attempts; i++) {\n      try {\n        return await fn()\n      } catch (error) {\n        lastError = error\n\n        // 最后一次尝试不延迟\n        if (i < attempts - 1) {\n          logger.warn(`请求失败，第 ${i + 1}/${attempts} 次重试...`)\n          await RequestUtils.delay(delay * (i + 1)) // 指数退避\n        }\n      }\n    }\n\n    logger.error(`请求失败，已重试 ${attempts} 次`)\n    throw lastError\n  }\n\n  // 超时控制\n  static withTimeout(promise, timeout = CONFIG.TIMEOUT) {\n    return Promise.race([\n      promise,\n      new Promise((_, reject) => globalThis.setTimeout(() => reject(new Error('请求超时')), timeout)),\n    ])\n  }\n}\n\n// ==================== 12. 封装请求方法 ====================\nconst request = {\n  // ===== 配置管理 =====\n  setBaseURL,\n  setDefaultHeaders,\n  setAxiosInstance,\n  setTimeout,\n\n  // 获取配置\n  getConfig: () => ({ ...CONFIG }),\n\n  // 请求管理\n  cancelAllRequests: () => requestManager.clearAllRequests(),\n  getActiveRequestCount: () => requestManager.getActiveCount(),\n\n  // ===== 基础请求方法 =====\n\n  /**\n   * GET 请求\n   * @param {string} url - 请求地址\n   * @param {object} params - 查询参数\n   * @param {object} config - axios 配置\n   */\n  get(url, params = {}, config = {}) {\n    return axiosInstance.request({\n      method: 'GET',\n      url,\n      params,\n      ...config,\n    })\n  },\n\n  /**\n   * POST 请求\n   * @param {string} url - 请求地址\n   * @param {object} data - 请求体数据\n   * @param {object} config - axios 配置\n   */\n  post(url, data = {}, config = {}) {\n    return axiosInstance.request({\n      method: 'POST',\n      url,\n      data,\n      ...config,\n    })\n  },\n\n  /**\n   * PUT 请求\n   * @param {string} url - 请求地址\n   * @param {object} data - 请求体数据\n   * @param {object} config - axios 配置\n   */\n  put(url, data = {}, config = {}) {\n    return axiosInstance.request({\n      method: 'PUT',\n      url,\n      data,\n      ...config,\n    })\n  },\n\n  /**\n   * DELETE 请求\n   * @param {string} url - 请求地址\n   * @param {object} params - 查询参数\n   * @param {object} config - axios 配置\n   */\n  delete(url, params = {}, config = {}) {\n    return axiosInstance.request({\n      method: 'DELETE',\n      url,\n      params,\n      ...config,\n    })\n  },\n\n  /**\n   * PATCH 请求\n   * @param {string} url - 请求地址\n   * @param {object} data - 请求体数据\n   * @param {object} config - axios 配置\n   */\n  patch(url, data = {}, config = {}) {\n    return axiosInstance.request({\n      method: 'PATCH',\n      url,\n      data,\n      ...config,\n    })\n  },\n\n  // ===== 特殊请求方法 =====\n\n  /**\n   * 表单请求 (application/x-www-form-urlencoded)\n   * @param {string} url - 请求地址\n   * @param {object} data - 表单数据\n   * @param {object} config - axios 配置\n   */\n  form(url, data = {}, config = {}) {\n    return axiosInstance.request({\n      method: 'POST',\n      url,\n      data,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        ...(config.headers || {}),\n      },\n      ...config,\n    })\n  },\n\n  /**\n   * 文件上传\n   * @param {string} url - 上传地址\n   * @param {FormData|object} data - 文件数据或普通对象（会自动转为 FormData）\n   * @param {object} config - axios 配置\n   * @param {function} config.onProgress - 上传进度回调\n   */\n  upload(url, data, config = {}) {\n    let formData = data\n\n    // 如果传入的不是 FormData，则转换\n    if (!RequestUtils.isFormData(data)) {\n      formData = new FormData()\n      Object.keys(data).forEach((key) => {\n        formData.append(key, data[key])\n      })\n    }\n\n    const onUploadProgress = config.onProgress || config.onUploadProgress\n\n    return axiosInstance.request({\n      method: 'POST',\n      url,\n      data: formData,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        ...(config.headers || {}),\n      },\n      onUploadProgress: (progressEvent) => {\n        if (onUploadProgress && progressEvent.total) {\n          const percent = Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          onUploadProgress({\n            percent,\n            loaded: progressEvent.loaded,\n            total: progressEvent.total,\n          })\n        }\n      },\n      ...config,\n    })\n  },\n\n  /**\n   * 文件下载\n   * @param {string} url - 下载地址\n   * @param {object} params - 查询参数\n   * @param {string} fileName - 保存的文件名\n   * @param {object} config - axios 配置\n   * @param {function} config.onProgress - 下载进度回调\n   */\n  async download(url, params, fileName, config) {\n    const safeConfig = config ?? {}\n    const safeParams = params ?? {}\n    const onDownloadProgress = safeConfig.onProgress || safeConfig.onDownloadProgress\n\n    const response = await axiosInstance.request({\n      method: 'GET',\n      url,\n      params: safeParams,\n      responseType: 'blob',\n      returnFullResponse: true, // 需要完整响应以获取 headers\n      onDownloadProgress: (progressEvent) => {\n        if (onDownloadProgress && progressEvent.total) {\n          const percent = Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          onDownloadProgress({\n            percent,\n            loaded: progressEvent.loaded,\n            total: progressEvent.total,\n          })\n        }\n      },\n      ...safeConfig,\n    })\n\n    return DownloadHandler.handleDownload(response, fileName)\n  },\n\n  /**\n   * 自定义请求\n   * @param {string} method - 请求方法\n   * @param {string} url - 请求地址\n   * @param {object} data - 请求体数据\n   * @param {object} params - 查询参数\n   * @param {object} config - axios 配置\n   */\n  custom(method, url, data = {}, params = {}, config = {}) {\n    return axiosInstance.request({\n      method: method.toUpperCase(),\n      url,\n      data,\n      params,\n      ...config,\n    })\n  },\n\n  /**\n   * 通用请求方法\n   * @param {object} config - axios 配置\n   */\n  request(config) {\n    return axiosInstance.request(config)\n  },\n\n  // ===== 高级功能 =====\n\n  /**\n   * 并行请求（支持并发控制）\n   * @param {Array} requests - 请求数组（可以是函数、配置对象或参数数组）\n   * @param {number} concurrency - 并发数\n   */\n  parallel(requests = [], concurrency = CONFIG.DEFAULT_CONCURRENCY) {\n    const tasks = requests.map((req) => {\n      if (typeof req === 'function') {\n        return req\n      }\n      if (req.method && req.url) {\n        return () => axiosInstance.request(req)\n      }\n      if (Array.isArray(req)) {\n        const [method, url, data, config] = req\n        return () => axiosInstance.request({ method, url, data, ...config })\n      }\n      throw new Error('无效的请求描述符')\n    })\n\n    return RequestEnhancer.runWithConcurrency(tasks, concurrency)\n  },\n\n  /**\n   * 串行请求\n   * @param {Array} requests - 请求数组\n   */\n  async series(requests = []) {\n    const results = []\n\n    for (const req of requests) {\n      try {\n        let result\n\n        if (typeof req === 'function') {\n          result = await req()\n        } else if (req.method && req.url) {\n          result = await axiosInstance.request(req)\n        } else if (Array.isArray(req)) {\n          const [method, url, data, config] = req\n          result = await axiosInstance.request({ method, url, data, ...config })\n        } else {\n          throw new Error('无效的请求描述符')\n        }\n\n        results.push(result)\n      } catch (error) {\n        logger.error('串行请求失败:', error)\n        throw error\n      }\n    }\n\n    return results\n  },\n\n  /**\n   * 重试请求\n   * @param {function} fn - 返回 Promise 的函数\n   * @param {number} attempts - 重试次数\n   * @param {number} delay - 重试延迟（毫秒）\n   */\n  retry(fn, attempts = CONFIG.RETRY_ATTEMPTS, delay = CONFIG.RETRY_DELAY) {\n    return RequestEnhancer.retry(fn, attempts, delay)\n  },\n\n  /**\n   * 获取底层 axios 实例（用于高级定制）\n   */\n  axios: () => axiosInstance,\n}\n\n// ==================== 导出 ====================\nexport default request\n\n// 导出工具类（可选）\nexport { RequestUtils, RequestManager, DownloadHandler, RequestEnhancer }\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\service\\useAuth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\store\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\store\\modules\\appSlice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\store\\modules\\counterSlice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\store\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\theme.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\theme\\dark.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\theme\\hooks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\theme\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\theme\\light.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\types\\permission.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\aidFn.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\confetti\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\hashRouter.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_path' is assigned a value but never used.","line":32,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Hash 路由工具函数\n */\nexport class HashRouterUtils {\n  /**\n   * 获取当前 hash 路径\n   */\n  static getCurrentPath(): string {\n    const hash = window.location.hash\n    return hash ? hash.substring(1) : '/' // 去掉 # 符号\n  }\n\n  /**\n   * 导航到指定路径\n   */\n  static navigate(path: string): void {\n    window.location.hash = path\n  }\n\n  /**\n   * 构建 hash URL\n   */\n  static buildHashUrl(path: string): string {\n    return `#${path}`\n  }\n\n  /**\n   * 从 URL 中获取查询参数\n   */\n  static getQueryParams(): Record<string, string> {\n    const currentPath = this.getCurrentPath()\n    const [_path, queryString] = currentPath.split('?')\n\n    if (!queryString) return {}\n\n    const params = new URLSearchParams(queryString)\n    const result: Record<string, string> = {}\n\n    params.forEach((value, key) => {\n      result[key] = value\n    })\n\n    return result\n  }\n\n  /**\n   * 处理 GitHub OAuth 回调\n   */\n  static handleOAuthCallback(): { code: string | null; error: string | null } {\n    const params = this.getQueryParams()\n    return {\n      code: params.code || null,\n      error: params.error || null,\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\message.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\previewScale\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\publicFn\\index.jsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":166,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\r\nimport routes from '@src/routers/index'\r\nimport Exception404 from '@src/components/stateless/Exception/exception404'\r\nimport { getMenuI18nKeyByPath } from '@src/i18n/menuI18nKey'\r\n\r\nexport const flattenRoutes = (arr = []) =>\r\n  arr.reduce((prev, item) => {\r\n    if (!item) return prev\r\n    prev.push(item)\r\n    if (Array.isArray(item.children) && item.children.length > 0) {\r\n      prev.push(...flattenRoutes(item.children))\r\n    }\r\n    return prev\r\n  }, [])\r\n\r\nexport const getKeyName = (pathName = '/404') => {\r\n  const fullPath = String(pathName || '/')\r\n  const normalizedPath = normalizeMatchTarget(fullPath)\r\n\r\n  const flat = flattenRoutes(routes).filter((item) => item && !item.index)\r\n\r\n  const matched = flat\r\n    .map((route) => buildMatchEntry(route, normalizedPath))\r\n    .filter(Boolean)\r\n    .sort((a, b) => b.score - a.score)\r\n    .at(0)\r\n\r\n  if (!matched) {\r\n    return {\r\n      title: 'Not Found',\r\n      tabKey: '/404',\r\n      element: <Exception404 />,\r\n      i18nKey: 'Not Found',\r\n    }\r\n  }\r\n\r\n  const { route, candidate } = matched\r\n  const { name, element, index, auth, i18nKey } = route\r\n\r\n  const keepQuery = route.meta?.keepQueryTabs === true\r\n  const routePattern = String(route.meta?.routeKey || route.key || route.path || candidate || '')\r\n  const isParamRoute = routePattern.includes(':')\r\n  const matchedByWildcard = routePattern.includes('*') || (candidate && String(candidate).includes('*'))\r\n  const normalizedActualPath = normalizeTabKey(`/${normalizedPath}`)\r\n  const baseTabKey = normalizeTabKey(route.meta?.routeKey || route.key || candidate || normalizedActualPath)\r\n\r\n  let tabKey\r\n  if (fullPath.includes('?')) {\r\n    tabKey = fullPath\r\n  } else if (isParamRoute || matchedByWildcard) {\r\n    tabKey = keepQuery ? fullPath : normalizedActualPath\r\n  } else {\r\n    tabKey = keepQuery ? fullPath : baseTabKey\r\n  }\r\n\r\n  tabKey = normalizeTabKey(tabKey)\r\n\r\n  const i18nLookupKey = route.meta?.routePath || route.path || route.key || candidate || normalizedActualPath\r\n  const resolvedI18nKey = i18nKey || getMenuI18nKeyByPath(i18nLookupKey)\r\n\r\n  return {\r\n    index: index ?? false,\r\n    path: route.meta?.routePath || route.path,\r\n    auth,\r\n    title: name || route.meta?.title || 'Unknown Route',\r\n    tabKey,\r\n    element: element || <Exception404 />,\r\n    i18nKey: resolvedI18nKey,\r\n  }\r\n}\r\n\r\nconst buildMatchEntry = (route, normalizedPath) => {\r\n  const candidates = collectRouteIdentifiers(route)\r\n  let bestCandidate = null\r\n  let bestScore = -1\r\n\r\n  candidates.forEach((candidate) => {\r\n    if (!doesPathMatch(normalizedPath, candidate)) return\r\n    const score = calcMatchScore(candidate)\r\n    if (score > bestScore) {\r\n      bestScore = score\r\n      bestCandidate = candidate\r\n    }\r\n  })\r\n\r\n  if (!bestCandidate) return null\r\n\r\n  return {\r\n    route,\r\n    candidate: bestCandidate,\r\n    score: bestScore,\r\n  }\r\n}\r\n\r\nconst collectRouteIdentifiers = (route = {}) => {\r\n  const identifiers = []\r\n  const add = (value) => {\r\n    if (value === undefined || value === null) return\r\n    const val = String(value).trim()\r\n    if (val === '') return\r\n    identifiers.push(val)\r\n  }\r\n\r\n  add(route.meta?.routePath)\r\n  add(route.meta?.routeKey)\r\n  add(route.meta?.legacyKey)\r\n  add(route.key)\r\n  add(route.path)\r\n\r\n  return Array.from(new Set(identifiers))\r\n}\r\n\r\nconst normalizeMatchTarget = (fullPath) =>\r\n  String(fullPath || '/')\r\n    .split('?')[0]\r\n    .replace(/^\\//, '')\r\n\r\nconst doesPathMatch = (normalizedPath, candidate) => {\r\n  if (candidate === undefined || candidate === null) return false\r\n  const value = String(candidate).trim()\r\n  const candidatePath = value.replace(/^\\//, '')\r\n\r\n  if (!candidatePath) {\r\n    return normalizedPath === ''\r\n  }\r\n\r\n  if (candidatePath === normalizedPath) {\r\n    return true\r\n  }\r\n\r\n  if (candidatePath.includes(':')) {\r\n    const pattern = '^' + candidatePath.replace(/:[^/]+/g, '[^/]+') + '$'\r\n    try {\r\n      return new RegExp(pattern).test(normalizedPath)\r\n    } catch (error) {\r\n      console.warn('getKeyName: invalid route pattern', candidatePath, error)\r\n      return false\r\n    }\r\n  }\r\n\r\n  if (candidatePath.endsWith('*')) {\r\n    const base = candidatePath.replace(/\\*$/, '')\r\n    if (!base) return false\r\n    const normalizedBase = base.replace(/\\/$/, '')\r\n    return normalizedPath.startsWith(normalizedBase)\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nconst calcMatchScore = (candidate) => {\r\n  if (!candidate) return 0\r\n  return String(candidate).replace(/^\\//, '').replace(/\\*/g, '').length\r\n}\r\n\r\nconst normalizeTabKey = (value) => {\r\n  if (!value) return '/'\r\n  const str = String(value)\r\n  return str.startsWith('/') ? str : `/${str}`\r\n}\r\n\r\nexport const getLocalStorage = (key) => {\r\n  const value = window.localStorage.getItem(key)\r\n  try {\r\n    return JSON.parse(value)\r\n  } catch (error) {\r\n    return value\r\n  }\r\n}\r\n\r\nexport const setLocalStorage = (key, value) => {\r\n  window.localStorage.setItem(key, JSON.stringify(value))\r\n}\r\n\r\nexport const removeLocalStorage = (key) => {\r\n  window.localStorage.removeItem(key)\r\n}\r\n\r\nexport const clearLocalStorage = () => {\r\n  window.localStorage.clear()\r\n}\r\n\r\n/**\r\n * 格式化时间函数\r\n * @param {Date} time 需要转换的时间\r\n * @param {string} fmt 需要转换的格式 如 yyyy-MM-dd、yyyy-MM-dd HH:mm:ss\r\n */\r\nexport const formatTime = (date, format) => {\r\n  if (!(date instanceof Date)) {\r\n    throw new Error('Invalid date input')\r\n  }\r\n\r\n  const padZero = (num, len = 2) => num.toString().padStart(len, '0')\r\n\r\n  const map = {\r\n    yyyy: date.getFullYear(),\r\n    MM: padZero(date.getMonth() + 1),\r\n    dd: padZero(date.getDate()),\r\n    HH: padZero(date.getHours()),\r\n    mm: padZero(date.getMinutes()),\r\n    ss: padZero(date.getSeconds()),\r\n  }\r\n\r\n  return format.replace(/yyyy|MM|dd|HH|mm|ss/g, (match) => map[match])\r\n}\r\n\r\n/**\r\n * 生成随机字符串函数\r\n * @param {number} len 随机字符串的长度，默认为32\r\n */\r\nexport const randomString = (len = 32) => {\r\n  const $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'\r\n  const maxPos = $chars.length\r\n  let pwd = ''\r\n  for (let i = 0; i < len; i++) {\r\n    pwd += $chars.charAt(Math.floor(Math.random() * maxPos))\r\n  }\r\n  return pwd\r\n}\r\n\r\n/**\r\n * 数字格式化函数，每三个数字加逗号\r\n * @param {number} num 需要格式化的数字，不能以0开头\r\n */\r\nexport const toThousands = (num) => {\r\n  let result = ''\r\n  let numStr = (num || 0).toString()\r\n  while (numStr.length > 3) {\r\n    result = `,${numStr.slice(-3)}${result}`\r\n    numStr = numStr.slice(0, numStr.length - 3)\r\n  }\r\n  if (numStr) {\r\n    result = numStr + result\r\n  }\r\n  return result\r\n}\r\n\r\n// 获取表格序号\r\nexport const getTableNumber = (page, pageSize, index) => {\r\n  if (pageSize === undefined && index === undefined) {\r\n    return Number(page) + 1\r\n  }\r\n  if (index !== undefined) {\r\n    return (Number(page) - 1) * Number(pageSize) + index + 1\r\n  }\r\n  return 0\r\n}\r\n\r\n// 随机排列数组\r\nexport const shuffleArray = (arr) =>\r\n  [...Array(arr.length)]\r\n    .map((_, i) => Math.floor(Math.random() * (i + 1)))\r\n    .reduce((shuffled, r, i) => shuffled.map((num, j) => (j === i ? shuffled[r] : j === r ? shuffled[i] : num)), arr)\r\n\r\n// 根据特定对象属性对数组进行分组\r\nexport const groupBy = (arr, groupFn) =>\r\n  arr.reduce(\r\n    (grouped, obj) => ({\r\n      ...grouped,\r\n      [groupFn(obj)]: [...(grouped[groupFn(obj)] || []), obj],\r\n    }),\r\n    {}\r\n  )\r\n\r\n// const fruits = [\r\n//   {\r\n//     name: 'apple', color: 'yellow'\r\n//   },\r\n//   {\r\n//     name: 'banana', color: 'red'\r\n//   },\r\n//   {\r\n//     name: 'pine', color: 'yellow'\r\n//   },\r\n//   {\r\n//     name: 'berry', color: 'red'\r\n//   },\r\n// ]\r\n\r\n// const groupedByName = groupBy(fruits, (fruit) => fruit.color)\r\n\r\n// const people = [\r\n//   { name: 'Alice', role: 'admin' },\r\n//   { name: 'Bob', role: 'user' },\r\n//   { name: 'Charlie', role: 'admin' },\r\n// ];\r\n// const grouped = people.reduce((acc, person) => {\r\n//   (acc[person.role] = acc[person.role] || []).push(person);\r\n//   return acc;\r\n// }, {});\r\n\r\nexport const areEqual = (arr1, arr2) => JSON.stringify(arr1.sort()) === JSON.stringify(arr2.sort())\r\nexport const areEqual2 = (arr1, arr2) => arr1.sort().join(',') === arr2.sort().join(',')\r\n\r\nexport const jsonToMap = (json) => new Map(Object.entries(JSON.parse(json)))\r\n\r\n// 蛇形转换为驼峰\r\nexport const snakeToCamelCase = (snake) => snake.toLowerCase().replace(/(_\\w)/g, (word) => word.toUpperCase().substr(1))\r\n\r\nexport const mathRound = (num) => Math.round(num * 100) / 100\r\n\r\nexport const openInNewTab = (url) => {\r\n  const win = window.open(url, '_blank')\r\n  win.focus()\r\n  return win\r\n}\r\n\r\nexport const range = (start, end, step = 1) => {\r\n  let output = []\r\n  if (typeof end === 'undefined') {\r\n    end = start\r\n    start = 0\r\n  }\r\n  for (let i = start; i < end; i += step) {\r\n    output.push(i)\r\n  }\r\n  return output\r\n}\r\n\r\nexport const isLeapYear = (year) => (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0\r\n\r\nexport const chunkArray = (arr, size) => {\r\n  return Array.from({ length: Math.ceil(arr.length / size) }, (v, i) => arr.slice(i * size, i * size + size))\r\n}\r\n\r\n// export const partitionArray = (arr, fn) => {\r\n//   return arr.reduce(\r\n//     ([pass, fail], elem) => {\r\n//       if (callback(elem)) {\r\n//         pass.push(elem)\r\n//       } else {\r\n//         fail.push(elem)\r\n//       }\r\n//       return [pass, fail]\r\n//     },\r\n//     [[], []]\r\n//   )\r\n// }\r\n\r\nexport const shuffleArr = (arr) => {\r\n  for (let i = arr.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1))\r\n    ;[arr[i], arr[j]] = [arr[j], arr[i]]\r\n  }\r\n  return arr\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\sentry\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\suffix\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\token\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\tryCatch\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\tryCatch\\runPromise.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'res' is assigned a value but never used.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// https://github.com/rahuulmiishra/trendyAwait/blob/main/runPromise.js\n\nconst runPromise = async (fn) => {\n  try {\n    const d = await fn()\n    return [d, null]\n  } catch (e) {\n    return [null, e]\n  }\n}\n\nconst promise = () =>\n  new Promise((res) => {\n    setTimeout(() => {\n      res('promise')\n    }, 3000)\n  })\n\nasync function test() {\n  const [res] = await runPromise(promise)\n}\n\ntest()\n\n// Demonstration of using params.\nconst fetchDataFromServer = (params) => () =>\n  new Promise((res) => {\n    setTimeout(() => {\n      res(`Received Data' ${params}`)\n    }, 3000)\n  })\n\nasync function main() {\n  const [res1, error1] = await runPromise(fetchDataFromServer('123'))\n  const [res2, error2] = await runPromise(fetchDataFromServer())\n  console.log('res1', res1)\n  console.log('error1', error1)\n  console.log('res2', res2)\n  console.log('error2', error2)\n}\n\nmain()\n","usedDeprecatedRules":[]},{"filePath":"C:\\wui\\pro-react\\pro-react-admin\\src\\utils\\waitTime\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]