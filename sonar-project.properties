# ==================== 基础信息（必须改这一行）===================
sonar.projectKey=pro-react-admin
sonar.projectName=Pro React Admin
sonar.projectVersion=1.0

# ==================== 路径配置 ====================
# 源码目录（通常是 src）
sonar.sources=src

# 排除不需要扫描的文件
sonar.exclusions=**/node_modules/**,**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx,public/**,build/**,dist/**,.git/**,**/*.d.ts

# 测试代码目录（如果想让测试文件也被扫描质量，可以删掉下面这行）
sonar.tests=src
sonar.test.inclusions=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx

# ==================== JavaScript/TypeScript 专属 ====================
# 自动识别 tsconfig.json（推荐保留）
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# 覆盖率排除（不想算覆盖率的文件）
sonar.coverage.exclusions=src/index.tsx,src/reportWebVitals.ts,src/setupTests.ts,src/react-app-env.d.ts,**/*.config.js,**/*.config.ts

# ==================== 规则配置 ====================
# 禁用成本过高或不适用的规则
# javascript:S4822 - 不强制要求在try中使用await（UI组件中同步message常见）
# javascript:S134 - 不限制嵌套深度（菜单递归等场景需要深度嵌套）
# jsx-a11y/no-static-element-interactions - 允许非原生元素交互（预加载等场景）
# typescript:S3800 - 允许函数返回不同类型（路由查找等场景需要）
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,propTypesRule
sonar.issue.ignore.multicriteria.e1.ruleKey=javascript:S4822
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.jsx
sonar.issue.ignore.multicriteria.e2.ruleKey=javascript:S134
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.jsx
sonar.issue.ignore.multicriteria.e3.ruleKey=jsx-a11y/no-static-element-interactions
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.jsx
sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S3800
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.jsx

# ==================== SonarQube 服务地址 ====================
sonar.host.url=http://localhost:9000

# Token（安全起见：不要写死在仓库里）
# 建议通过命令行或环境变量注入，例如：
# Windows PowerShell: $env:SONAR_TOKEN='xxx'; sonar-scanner.bat -Dsonar.token=$env:SONAR_TOKEN
# Bash: SONAR_TOKEN=xxx sonar-scanner -Dsonar.token=$SONAR_TOKEN

# ==================== 其他推荐配置 ====================
sonar.sourceEncoding=UTF-8
sonar.qualitygate.wait=true          # 扫描完后卡住等质量门结果（CI 里很有用）

# ==================== 规则配置 ====================
# 禁用 React components should validate prop types 规则
sonar.issue.ignore.multicriteria.propTypesRule.ruleKey=javascript:S4327
sonar.issue.ignore.multicriteria.propTypesRule.resourceKey=**/*.js,**/*.jsx,**/*.ts,**/*.tsx